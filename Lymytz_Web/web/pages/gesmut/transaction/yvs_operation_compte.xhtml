<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Opérations','modMutuelle', 'smenOperationCompte', true,managedOperationComptes)}
    </ui:define>   
    <ui:define name="contents"> 
        #{managedOperationCompte.loadAll()}
        #{managedCredit.doNothing()}
        #{managedEpargne.doNothing()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 145);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('operation');
                collapseList('operation_compte');
                collapseForm('create_tiers_societe');
                collapseForm('create_tiers_externe');
            });
        </script>
        <h:form prependId="false" id="form_traitement">
            <p:dialog header="Lot de traitements" widgetVar="dlgLotAction" width="40%" >

                <h:outputText value="#{managedMutualiste.tabIds}" id="test_selection"/>
                <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <p:selectOneRadio value="#{managedOperationCompte.sensOp}" styleClass="yvs_noStyle" 
                                          >
                            <f:selectItem itemLabel="#{lab.LM_PMC_depot}" itemValue="#{constantes.MUT_SENS_OP_DEPOT}"/>
                            <f:selectItem itemLabel="#{lab.LM_PMC_retrait}" itemValue="#{constantes.MUT_SENS_OP_RETRAIT}"/>
                            <p:ajax event="valueChange"  global="false" />
                        </p:selectOneRadio>
                    </f:facet>
                    <span>#{lab.LM_PMC_comptes}</span>
                    <p:selectOneMenu value="#{managedOperationCompte.typeCompte}"
                                     >
                        <f:selectItem itemLabel="#{constantes.MUT_TYPE_COMPTE_COURANT}" itemValue="#{constantes.MUT_TYPE_COMPTE_COURANT}"/>
                        <f:selectItem itemLabel="#{constantes.MUT_TYPE_COMPTE_EPARGNE}" itemValue="#{constantes.MUT_TYPE_COMPTE_EPARGNE}"/>
                        <f:selectItem itemLabel="#{constantes.MUT_TYPE_COMPTE_ASSURANCE}" itemValue="#{constantes.MUT_TYPE_COMPTE_ASSURANCE}"/>                            
                        <p:ajax event="valueChange"   global="false" />
                    </p:selectOneMenu>
                    <h:panelGroup >
                        <span>#{lab.L_montant}</span>
                        <pe:inputNumber value="#{managedOperationCompte.montant}" /> /
                    </h:panelGroup>      
                    <p:selectBooleanCheckbox value="#{managedOperationCompte.solde}" itemLabel="#{lab.LM_PMC_action_solde_compte}" />
                    <f:facet name="footer">
                        <h:inputTextarea value="#{managedOperationCompte.commentaire}" rows="3" style="width: 98%"/>
                    </f:facet>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_appliquer}" style="float: right" icon="ui-icon-refresh" actionListener="#{managedOperationCompte.applyActionsOnMutualiste()}"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmCreate" closeOnEscape="true"
                             message="#{lab.LDB_PEX_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" onclick="dlgConfirmCreate.hide()" oncomplete="dlgAddExercice.show()" global="false"/>
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmCreate.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgDelTiers" closeOnEscape="true"
                             message="#{lab.LM_PMC_text}" header="#{lab.LM_PMC_supprime_tiers}">
                <p:commandButton value="#{lab.L_oui}" oncomplete="dlgDelTiers.hide()" actionListener="#{managedOperationCaisse.deleteTiers()}"/>
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgDelTiers.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des tiers societe
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgTiersSociete_">
            <p:dialog id="dlgTiersSociete_" header="#{lab.LM_PMC_gestion_tiers_societes}" widgetVar="dlgTiersSociete" modal="true" width="60%" 
                      closeOnEscape="true" >  
                #{managedOperationCaisse.loadAllTiers('Societe')}
                <div class="part_fix">
                    <p:commandButton id="save_create_tiers_societe" value="#{lab.L_enregistrer}" actionListener="#{managedOperationCaisse.saveNewtiers('Societe',true)}"
                                     oncomplete="collapseListTiersSociete();return false" update="data_tiers_societe form_create_tiers_societe"/>
                    <p:commandButton id="cancel_create_tiers_societe" value="Nouveau" actionListener="#{managedOperationCaisse.resetFicheTiers()}" 
                                     update="form_create_tiers_societe"/>
                    <p:commandButton title="Importer les sociétés existante" icon="ui-icon-arrowthick-1-s" style="width: 22px; height: 25px; float: left" 
                                     actionListener="#{managedOperationCaisse.importTiersSociete()}"/>
                    <div style="float: right">                        
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('create_tiers_societe');
                                return false" >
                            <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('create_tiers_societe');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>   
                    </div>
                </div>
                <div style="clear: right"/>
                <div class="yvs_form_create_tiers_societe">
                    <h:panelGrid id="form_create_tiers_societe" columns="2" styleClass="yvs_table" 
                                 style="width: 98%;margin: auto" cellpadding="0" cellspacing="0">
                        <span>#{lab.LRH_PC_raison_sociale} </span>
                        <h:inputText value="#{managedOperationCaisse.source.raisonSociale}"/>
                        <span>#{lab.L_adresse} </span>
                        <h:inputText value="#{managedOperationCaisse.source.adresse}"/>
                        <span>#{lab.L_telephone} </span>
                        <h:inputText value="#{managedOperationCaisse.source.telephone}"/>
                        <f:facet name="footer">
                            <p:selectBooleanCheckbox label="Actif" value="#{managedOperationCaisse.source.actif}" style="float: right" />
                        </f:facet>
                    </h:panelGrid>
                </div>
                <div class="yvs_list_create_tiers_societe" style="width: 100%">
                    <p:dataTable id="data_tiers_societe" value="#{managedOperationCaisse.tiers}" var="tiers0_" rowKey="#{tiers0_.id}" 
                                 rowIndexVar="tiers0_Idx" selectionMode="single">
                        <p:ajax event="rowSelect" listener="#{managedOperationCaisse.loadOnViewTiersSociete}" 
                                oncomplete="dlgTiersSociete.hide()" />
                        <p:column style="text-align: center" width="15">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{tiers0_.new_}"/>
                        </p:column>
                        <p:column headerText="#{lab.LM_PMC_denomination}" width="100">
                            <span>#{tiers0_.raisonSociale}</span>                 
                        </p:column>
                        <p:column headerText="#{lab.L_adresse}" width="100"> 
                            <span>#{tiers0_.adresse}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_telephone}" width="80">
                            <span>#{tiers0_.telephone}</span>
                        </p:column>
                        <p:column headerText="" width="15">
                            <p:contextMenu for="btn_opt_op_ges_scte" event="left click" styleClass="context_menu">
                                <p:menuitem value="#{lab.L_modifier}" icon="ui-icon-refresh"  actionListener="#{managedOperationCaisse.openDeleteTiers(tiers0_,false)}" oncomplete="collapseForm('create_tiers_societe')"/>
                                <p:separator />
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{managedOperationCaisse.openDeleteTiers(tiers0_,true)}" oncomplete="collapseForm('create_tiers_societe')"/>
                            </p:contextMenu>
                            <p:commandButton icon="ui-icon-gear" type="button" style="width: 22px; height: 22px" id="btn_opt_op_ges_scte" />
                        </p:column>
                    </p:dataTable>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    &copy; Lymytz 2014
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des tiers externes
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgTiersExterne_">
            <p:dialog id="dlgTiersExterne_" header="#{lab.LM_PMC_gestion_tiers_externes}" widgetVar="dlgTiersExterne" modal="true" width="50%" 
                      closeOnEscape="true">  
                #{managedOperationCaisse.loadAllTiers('Externe')}
                <div class="part_fix">
                    <p:commandButton id="save_create_tiers_externe" value="#{lab.L_enregistrer}" actionListener="#{managedOperationCaisse.saveNewtiers('Externe',true)}"
                                     oncomplete="collapseListTiersExterne();return false" update="data_tiers_externe form_create_tiers_externe"/>
                    <p:commandButton id="cancel_create_tiers_externe" value="#{lab.L_nouveau}" actionListener="#{managedOperationCaisse.resetFicheTiers()}" 
                                     update="form_create_tiers_externe"/>
                    <div style="float: right">
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('create_tiers_externe');
                                return false" >
                            <p:graphicImage library="icones" name="newDoc.png" width="25" height="30" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('create_tiers_externe');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="25" height="30" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>   
                    </div>
                </div>
                <div style="clear: right"/>
                <div class="yvs_form_create_tiers_externe">
                    <h:panelGrid id="form_create_tiers_externe" columns="2" styleClass="yvs_table" 
                                 style="width: 98%;margin: auto" cellpadding="0" cellspacing="0">
                        <span>#{lab.L_nom} </span>
                        <h:inputText value="#{managedOperationCaisse.source.nom}"/>
                        <span>#{lab.L_prenom} </span>
                        <h:inputText value="#{managedOperationCaisse.source.prenom}"/>
                        <span>#{lab.L_adresse} </span>
                        <h:inputText value="#{managedOperationCaisse.source.adresse}"/>
                        <span>#{lab.L_telephone} </span>
                        <h:inputText value="#{managedOperationCaisse.source.telephone}"/>
                    </h:panelGrid>
                </div>
                <div class="yvs_list_create_tiers_externe" style="width: 100%">
                    <p:dataTable id="data_tiers_externe" value="#{managedOperationCaisse.tiers}" var="tiers_" rowKey="#{tiers_.id}" 
                                 rowIndexVar="tiers_Idx" paginator="true" rows="10" selectionMode="single">
                        <p:ajax event="rowSelect" global="false" listener="#{managedOperationCaisse.loadOnViewTiersExterne}" oncomplete="dlgTiersExterne.hide()"/>
                        <p:column style="width: 7%;text-align: center">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{tiers_.new_}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_nom}">
                            <span>#{tiers_.nom}</span>                 
                        </p:column>
                        <p:column headerText="#{lab.L_prenom}">
                            <span>#{tiers_.prenom}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_adresse}">
                            <span>#{tiers_.adresse}</span>
                        </p:column>
                    </p:dataTable>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    &copy; Lymytz 2014
                </f:facet> 
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des mutualistes 
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgMutualiste_op">            
            <p:dialog header="#{lab.LM_PM_liste_mutualistes}" widgetVar="dlgListMutualistes" modal="true" width="70%" 
                      height="500" closeOnEscape="true" > 
                <h:panelGroup  id="delete_operation_compte">          
                    <h:inputText id="input_hide_operation_compte" value="#{managedMutualiste.tabIds}"  style="font-size: 0.6em; width: 85%; background: #ccc;"/>                              
                    <p:commandButton value="#{lab.LM_PMC_lot_traitements}"  update=":form_traitement:test_selection" style="font-size: 0.7em"
                                     actionListener="#{managedOperationCompte.openDlgTraitement()}" oncomplete="dlgLotAction.show()"/>
                </h:panelGroup>                
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:inputText value="#{managedMutualiste.numSearch}" >
                            <p:ajax event="keyup" listener="#{managedMutualiste.addParamReference()}" update="data_mutualiste_epa"/>
                        </h:inputText>
                    </h:panelGroup>                    
                    <h:panelGroup style="float: right">
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block" >
                            <p:commandButton actionListener="#{managedMutualiste.paginer(false)}" update="data_mutualiste_epa" icon="ui-icon-circle-triangle-w"  disabled="#{managedMutualiste.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedMutualiste.paginator.currentPage}/#{managedMutualiste.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton action="#{managedMutualiste.paginer(true)}" update="data_mutualiste_epa" icon="ui-icon-circle-triangle-e"  disabled="#{managedMutualiste.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedMutualiste.imax}" label="#{lab.L_nombre_max_resultat}" style="float: right; font-size: 0.9em;" 
                                             valueChangeListener="#{managedMutualiste.choosePaginator}">
                                <f:selectItems value="#{managedMutualiste.paginations}" />
                                <p:ajax event="valueChange"  update="data_mutualiste_epa" />
                            </p:selectOneMenu>
                        </p:outputPanel>
                    </h:panelGroup>
                </h:panelGrid>              
                <p:dataTable id="data_mutualiste_epa" value="#{managedMutualiste.mutualistes}" var="mutua_" rowKey="#{mutua_.id}" rowIndexVar="mutua_Idx"
                             selectionMode="single">
                    <p:ajax event="rowSelect" global="false" listener="#{managedOperationCompte.loadOnViewMutualiste}" oncomplete="dlgListMutualistes.hide()"/>
                    <p:column headerText="N°" style="text-align: center" width="15">
                        <span>#{mutua_Idx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PD_matricule}" width="80">
                        <span>#{mutua_.employe.matricule}</span>                 
                    </p:column>
                    <p:column headerText="#{lab.L_nom_prenom}" width="200" >
                        <span>#{mutua_.employe.nom_prenom}</span>                 
                    </p:column>
                    <p:column headerText="#{lab.LM_PMC_comptes}" width="150" rendered="false">
                        <span>#{mutua_.displayCompte()}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_agence}" width="90">
                        <span>#{mutua_.employe.agence.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_actif}" width="15" style="text-align: center">
                        <h:graphicImage library="img" name="#{mutua_.actif?'vu.png':'vu_non.png'}" width="15" height="15" />
                    </p:column>
                    <p:column width="25" style="text-align: center" >
                        <f:facet name="header">
                            <h:selectBooleanCheckbox styleClass="chek_all_line_operation_compte" value="false"
                                                     onclick="selectionAllLineTab(#{managedMutualiste.mutualistes.size()}, 'operation_compte')">
                            </h:selectBooleanCheckbox>
                        </f:facet>
                        <h:selectBooleanCheckbox  value="#{mutua_.selectActif}" styleClass="chek_line_operation_compte" 
                                                  onclick="selectionLineTab(#{mutua_Idx}, 'operation_compte')">
                        </h:selectBooleanCheckbox>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    &copy; Lymytz 2014
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.LM_PMC_comptes_epargnes}" height="400" width="50%" widgetVar="dlgCompteEp" >
                <p:dataTable value="#{managedOperationCompte.comptesEpargnes}" var="icmpt" style="width: 100%"
                             selectionMode="single" rowKey="#{icmpt.id}">
                    <p:ajax event="rowSelect" listener="#{managedOperationCompte.chooseCompteEpargne}" />
                    <p:column headerText="#{lab.LM_PM_mutualiste}">
                        #{icmpt.mutualiste.employe.nom_prenom}
                    </p:column>
                    <p:column headerText="#{lab.LM_PMC_comptes}">
                        #{icmpt.reference}
                    </p:column>
                    <p:column headerText="#{lab.LM_PM_solde}" style="text-align: right">
                        <h:outputText value="#{managedMutualiste.findSoldeCompte(icmpt.id)}" converter="DN" />
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LM_PMC_detail_operation_compte}" widgetVar="dlgDetails" width="50%">
                <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0" id="pan_display_detail">
                    <f:facet name="header">
                        #{lab.L_ref}.:
                        <h:outputText value="#{managedOperationCompte.selectedOperation.referenceOperation}" />
                    </f:facet>                    
                    <span>#{lab.L_compte} :</span>
                    <h:panelGroup>
                        <h:outputText value="#{managedOperationCompte.selectedOperation.compte.mutualiste.employe.nom_prenom} " />
                        <h:outputText value=" [#{managedOperationCompte.selectedOperation.compte.reference}]" style="font-weight: bold"/>
                    </h:panelGroup>
                    <span>#{lab.LCF_PC_source} :</span>
                    <h:outputText value="#{managedOperationCompte.sourceOp}" style="font-style: italic"/>                    
                    <f:facet name="footer">
                        <h:panelGrid columns="2" rendered="#{managedOperationCompte.reglementCreditMut.id gt 0}">
                            <span>#{lab.LM_PMC_n_credit}:</span>
                            <h:outputText value="#{managedOperationCompte.reglementCreditMut.credit.reference}" />
                            <span>#{lab.LM_PMC_montant_credit}:</span>
                            <h:outputText value="#{managedOperationCompte.reglementCreditMut.credit.montant}" converter="DN"/>
                            <span>#{lab.LM_PMC_accorde_le}</span>
                            <h:outputText value="#{managedOperationCompte.reglementCreditMut.credit.dateEffet}" converter="DATE"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2" rendered="#{managedOperationCompte.reglementMensualite.id gt 0}">
                            <span>#{lab.LM_PMC_n_credit}:</span>
                            <h:outputText value="#{managedOperationCompte.reglementMensualite.mensualite.echellonage.credit.reference}" />
                            <span>#{lab.LM_PMC_montant_de_mensualite}</span>
                            <h:outputText value="#{managedOperationCompte.reglementMensualite.mensualite.montant}" converter="DN"/>                            
                        </h:panelGrid>
                        <h:inputTextarea value="#{managedOperationCompte.selectedOperation.commentaire}" rows="3" 
                                         style="width: 100%" disabled="true" readonly="true"/>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgDelOperation" closeOnEscape="true"
                             message="#{lab.LM_PMC_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedOperationCompte.deleteLineOperation()}" oncomplete="dlgDelOperation.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgDelOperation.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteOperationCaisse" closeOnEscape="true"
                             message="#{lab.LDB_PD_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedOperationCaisse.deleteBean()}" oncomplete="dlgConfirmDeleteOperationCaisse.hide(); afterDeleteOperationCaisse()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteOperationCaisse.hide()"/>
            </p:confirmDialog>
        </h:form>      
          
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_form_mut_opc">    
            <div class="part_fix">
                <div style="float: left">
                    <h:panelGroup style="float: left">
                        <p:splitButton value="#{lab.L_enregistrer}" id="save_operation" actionListener="#{managedOperationCompte.saveNew()}"
                                       icon="ui-icon-disk"   update="data_historique_operation_compte">
                            <p:menuitem value="#{lab.L_nouveau}" id="cancel_operation" global="false" icon="ui-icon-document" actionListener="#{managedOperationCompte.resetFiche()}" update="blog_form_operation_compte"/>
                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" onclick="dlgDelOperation.show()"/>
                        </p:splitButton>
                    </h:panelGroup>
                    <h:panelGrid columns="5"  style="margin-left: 45%;margin-top: -30px; background: #FFF; font-size: 0.8em; width: 100%;float: left" styleClass="yvs_noStyle">
                        <span >#{lab.L_caisse}.: </span>
                        <h:selectOneMenu value="#{operationCompte.caisse.id}" valueChangeListener="#{managedOperationCompte.chooseCaisse}">
                            <f:selectItems value="#{managedOperationCompte.caisses}" var="icai" itemValue="#{icai.id}" itemLabel="#{icai.referenceCaisse}" 
                                           />
                            <p:ajax event="valueChange" global="false" />
                        </h:selectOneMenu>
                        <h:outputText value="#{lab.L_ref}.:" />                        
                        <p:outputPanel autoUpdate="true" layout="inline">#{operationCompte.referenceOperation}</p:outputPanel>
                    </h:panelGrid>
                </div>
                <div style="float: right">
                    <h:link title="#{lab.L_mode_formulaire}" onclick="collapseForm('operation');
                            return false" >
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('operation');
                            return false"  >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link> 
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_operation">
                    <p:outputPanel id="blog_form_operation_compte">
                        <h:panelGrid columns="2" styleClass="yvs_table" style="width: 50%; float: left" cellpadding="0" cellspacing="0">  
                            <f:facet name="header">                                     
                                <div style="width: 100%; margin: auto">  
                                    <p:selectOneRadio value="#{operationCompte.sensOperation}" id="nature_operation_compte" styleClass="yvs_noStyle" 
                                                      >
                                        <f:selectItem itemLabel="#{lab.LM_PMC_depot}" itemValue="#{constantes.MUT_SENS_OP_DEPOT}"/>
                                        <f:selectItem itemLabel="#{lab.LM_PMC_retrait}" itemValue="#{constantes.MUT_SENS_OP_RETRAIT}"/>
                                        <p:ajax event="valueChange" update="compte_mutualiste_operation" global="false" />
                                    </p:selectOneRadio>
                                    <h:panelGrid columns="2" style="float: left" cellpadding="0" cellspacing="0" styleClass="yvs_noStyle">                                        
                                        <h:outputText value="#{lab.LM_PM_mutualiste}" />
                                        <h:panelGroup id="txt_mutualiste_operation"> 
                                            <h:inputText  value="#{managedOperationCompte.mutualiste.employe.matricule}" style="color: #{managedOperationCompte.mutualiste.error?'red':''}" disabled="#{managedOperationCompte.operationCompte.id gt 0}">
                                                <p:ajax event="blur" global="false" listener="#{managedOperationCompte.searchMutualiste(managedOperationCompte.mutualiste.employe.matricule)}" update="photos_mut_ data_historique_operation_compte"/>
                                            </h:inputText>    
                                            <p:commandButton icon="ui-icon-search" style="width: 20px;height: 22px" title="#{lab.LM_PMC_liste_mutualiste}" global="false" disabled="#{managedOperationCompte.operationCompte.id gt 0}"
                                                             actionListener="#{managedCredit.initMutualistes(false)}" oncomplete="dlgListMutualistes.show()"/> 
                                            <h:outputText  value="#{managedOperationCompte.mutualiste.employe.nom_prenom}"  style="font-size: 0.9em" />                                       
                                        </h:panelGroup>
                                        <span>#{lab.L_compte}  </span> 
                                        <h:selectOneMenu value="#{operationCompte.compte.id}" id="compte_mutualiste_operation"
                                                         valueChangeListener="#{managedOperationCompte.chooseCompte}">
                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{managedOperationCompte.mutualiste.comptes}" var="compt_" 
                                                           itemLabel="#{compt_.reference}" itemValue="#{compt_.id}" />
                                            <p:ajax event="valueChange" update="pan_zone_mut_compte"/>
                                        </h:selectOneMenu>
                                    </h:panelGrid>                                    
                                    <div style="margin-left: 90%">
                                        <p:graphicImage library="lymytz/documents/docEmps/perso/photo" style="max-height: 100px"
                                                        name="#{(managedOperationCompte.mutualiste.employe.photos==null)?'user1.png':managedOperationCompte.mutualiste.employe.photos}" id="photos_mut_"/>
                                    </div>                                   
                                </div>                                    
                            </f:facet>                                
                            <span>#{lab.LM_PMC_date_operation}  </span>                                         
                            <h:panelGroup>
                                <p:calendar value="#{operationCompte.dateOperation}" navigator="true" pattern="dd-MM-yyyy" size="8">
                                    <p:ajax event="dateSelect" listener="#{managedOperationCompte.chooseDate}" 
                                            update="txt_period_op_cmpte pan_zone_mut_compte zone_stat_op_comptes"/>
                                </p:calendar>
                                <p:spacer width="1"/>
                                <pe:timePicker value="#{operationCompte.heureOperation}" style="width: 100px"/>
                                <span>#{lab.LRH_PPT_periode}</span>
                                <h:selectOneMenu value="#{operationCompte.periode.id}" id="txt_period_op_cmpte"
                                                 valueChangeListener="#{managedOperationCompte.chooseOnePeriode}">
                                    <f:selectItem itemValue="0" itemLabel="" />
                                    <f:selectItems value="#{managedOperationCompte.giveExerciceActif(operationCompte.dateOperation).periodesMutuelles}" var="ipm" itemValue="#{ipm.id}" itemLabel="#{ipm.referencePeriode}" 
                                                   itemDisabled="#{ipm.cloture}"/>
                                    <p:ajax event="valueChange" update="zone_stat_op_comptes"/>
                                </h:selectOneMenu>
                            </h:panelGroup>
                            <span>#{lab.L_montant} </span>
                            <pe:inputNumber value="#{operationCompte.montant}"/>                            
                            <f:facet name="footer">
                                <div style="border: solid 1px #006666; width: 100%">
                                    <h:inputTextarea title="#{lab.LM_PMC_entrer_commentaire}" value="#{operationCompte.commentaire}" style="width: 100%" rows="3"/>                                
                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" styleClass="yvs_noStyle" id="pan_zone_mut_compte"  style="width: 100%;font-size: 0.8em
                                                 ;background: #CCC">
                                        <f:facet name="header">
                                            <div style="padding: 2px">#{lab.LM_PMC_retenues_suggeres}</div>
                                        </f:facet>
                                        <span>#{lab.LM_PMC_solde_compte}</span>                                        
                                        <p:outputPanel autoUpdate="true">
                                            <h:outputText value="#{lab.LM_PMC_epargne_mensuel} :" />
                                            <span style="font-weight: bold; font-size: 0.9em">#{managedOperationCompte.compteEp.reference}</span>
                                        </p:outputPanel>
                                        <h:inputText value="#{operationCompte.compte.solde}" readonly="true" converter="DNS"  style="text-align: right; font-weight: bold;background: #CCC" />                                                                                    
                                        <h:panelGroup>
                                            <h:inputText value="#{managedOperationCompte.mutualiste.montantEpargne}" readonly="true" converter="DNS" style="text-align: right; width: 100px;background: #CCC" />
                                            #{lab.LCF_PRV_a_payer}
                                            <h:inputText value="#{managedOperationCompte.montantEpargne}" readonly="true" converter="DNS" style="text-align: right; width: 100px;background: #CCC" />
                                            <p:commandButton icon="ui-icon-circle-check" style="width: 22px; height: 22px" actionListener="#{managedOperationCompte.saveEpargneFromCompte(constantes.MUT_NATURE_OP_EPARGNE,managedOperationCompte.montantEpargne,managedOperationCompte.montantEpargne,false)}" 
                                                             disabled="#{operationCompte.compte.type.nature eq constantes.MUT_TYPE_COMPTE_EPARGNE}" update="data_historique_operation_compte"/>                                            
                                        </h:panelGroup>
                                        <span>#{lab.LM_PMC_assurance}</span>
                                        <h:outputText value="#{lab.LM_PMC_mensualite}" />
                                        <h:panelGroup>
                                            <h:inputText value="#{managedOperationCompte.currentMutuel.montantAssurance}" style="text-align: right; width: 100px;background: #CCC" readonly="true" converter="DNS" />                                            
                                            #{lab.LCF_PRV_a_payer}                                          
                                            <h:inputText value="#{managedOperationCompte.montantAssurance}" readonly="true" converter="DNS" style="text-align: right; width: 100px;background: #CCC" />
                                            <p:commandButton icon="ui-icon-circle-check" style="width: 22px; height: 22px" actionListener="#{managedOperationCompte.saveEpargneFromCompte(constantes.MUT_NATURE_OP_ASSURANCE,managedOperationCompte.montantAssurance,managedOperationCompte.montantAssurance,false)}" 
                                                             disabled="#{operationCompte.compte.type.nature eq constantes.MUT_TYPE_COMPTE_EPARGNE}" update="data_historique_operation_compte"/>
                                        </h:panelGroup>                                        
                                        <h:panelGroup id="txt_op_total_credit">
                                            <h:inputText value="#{managedOperationCompte.mutualiste.montantCredit}" style="text-align: right; width: 100px;background: #CCC" readonly="true" converter="DNS" />
                                            <p:commandButton icon="ui-icon-circle-check" style="width: 22px; height: 22px" disabled="#{operationCompte.compte.type.nature eq constantes.MUT_TYPE_COMPTE_EPARGNE}"
                                                             actionListener="#{managedOperationCompte.saveAllMensualiteFromCompte()}" />
                                        </h:panelGroup>
                                    </h:panelGrid>
                                </div>
                            </f:facet>                            
                        </h:panelGrid>
                        <div style="margin-left: 50.2%; border: solid 1px #006666; background: #FFF; font-size: 0.9em">
                            <div style="padding: 4px; background: #AAA">#{lab.LM_PMC_historiques}</div> 
                            <p:dataTable id="data_historique_operation_compte" value="#{managedOperationCompte.historiques}" var="iHisto" 
                                         rowIndexVar="opC0Idx_"  style="font-size: 0.8em">
                                <p:column width="30" headerText="N°" style="text-align: center">
                                    <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iHisto.new_}"/>
                                    <span styleClass="ligne_#{(iHisto.new_)?'true':'false'}">#{opC0Idx_+1}</span>
                                    <h:graphicImage library="img/icones" name="#{(iHisto.sensOperation eq 'D')?'in.png':'out.png'}" width="15" height="15"
                                                    style="float: right"/>
                                </p:column>
                                <p:column headerText="#{lab.L_date}" width="80" style="text-align: center">
                                    <h:outputText value="#{iHisto.dateOperation}" converter="DATE" styleClass="ligne_#{(iHisto.new_)?'true':'false'}"/>
                                </p:column>
                                <p:column headerText="#{lab.L_nature}" width="100">
                                    <span styleClass="ligne_#{(iHisto.new_)?'true':'false'}">#{iHisto.nature}</span>                                    
                                </p:column>
                                <p:column headerText="#{lab.L_montant}" style="text-align: right">
                                    <h:outputText styleClass="ligne_#{(iHisto.new_)?'true':'false'}" value="#{iHisto.montant}" converter="DN" style="text-align: right"/>
                                </p:column>
                                <p:column headerText="#{lab.L_caisse}" >
                                    <h:outputText styleClass="ligne_#{(iHisto.new_)?'true':'false'}" value="#{iHisto.caisse.referenceCaisse}"/>
                                </p:column>
                                <p:column headerText="#{lab.LM_PMC_comptes}" >
                                    <h:outputText styleClass="ligne_#{(iHisto.new_)?'true':'false'}" value="#{iHisto.compte.typeCompte.nature}"/>
                                </p:column>
                                <p:column headerText="#{lab.LRH_PPT_periode}" style="text-align: right">
                                    <h:outputText styleClass="ligne_#{(iHisto.new_)?'true':'false'}" value="#{iHisto.periode.referencePeriode}"/>
                                </p:column>
                            </p:dataTable>
                        </div>
                        <p:outputPanel style="width: 100%; clear: left; background: #FFF">
                            <span style="display: inline-block; background: #CCC; width: 100%;cursor: pointer" onclick="slideShow('zone_show_credit_paie', 200)">
                                <span class="button_slide">[-]</span>
                                #{lab.LM_PMC_mensualite_en_cours}
                                <div style="float: right">Total:<div style="float: right">Fcfa</div></div>
                            </span>
                            <div class="zone_slide" style="width: 99.5%; border: solid 1px; height: 150px; margin: auto;overflow-y: auto; background: #FFF">
                                <p:dataTable id="data_mensualite_echeancier_pa" value="#{managedOperationCompte.mensualites}" var="mens"
                                             rowKey="#{mens.id}" rowIndexVar="mensIdx"  selectionMode="single">
                                    <p:column headerText="N°" style="width: 12%;text-align: center">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{mens.new_}"/>
                                        <span>#{mensIdx+1}</span>->>
                                        <span>#{mens.id}</span>
                                    </p:column>                                                
                                    <p:column headerText="#{lab.L_date}" width="100" style="text-align: center">
                                        <h:outputText value="#{mens.dateMensualite}" style="text-align: right" converter="DDMMYYYY"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_credit}" width="100" style="text-align: center">
                                        <h:outputText value="#{mens.echellonage.credit.reference}" style="text-align: right"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_montant}" style="text-align: right">
                                        <h:outputText value="#{mens.montant}" converter="DN" style="text-align: right"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_reste}" style="text-align: right">
                                        <h:outputText value="#{mens.montantReste}" converter="DN" style="text-align: right"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LRH_PPS_etat}" width="70">
                                        <span>#{managedOperationCompte.giveNameStatut(mens.etat)}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LM_PMC_etat_ech}" width="40">
                                        <span>#{mens.echellonage.etat}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LCF_PBP_payer}" width="30" style="text-align: center">
                                        <p:commandButton icon="ui-icon-circle-check" style="width: 22px; height: 22px" actionListener="#{managedOperationCompte.saveMensualiteFromCompte(mens,true)}"
                                                         disabled="#{operationCompte.compte.type.nature eq constantes.MUT_TYPE_COMPTE_EPARGNE or mens.etat eq constantes.ETAT_REGLE}"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                            <p:outputPanel layout="block" style="background: #FFF;background: #CCC" id="zone_stat_op_comptes">
                                <div class="header_section">#{lab.LM_PMC_statistique_periode} :
                                    <h:outputText value="#{operationCompte.periode.dateDebut}" converter="DATE" style="font-size: 0.8em"/><span>&nbsp;&nbsp;</span>
                                    <h:outputText value="#{operationCompte.periode.dateFin}" converter="DATE" style="font-size: 0.8em" /></div>
                                <h:panelGrid columns="4" style="width: 50%;background: #CCC">
                                    <span style="text-decoration: underline">#{lab.LDB_PA_depots} :</span>
                                    <h:panelGrid columns="2">
                                        <span>#{lab.LM_PM_epargne}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_EPARGNE, constantes.MUT_SENS_OP_DEPOT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                        <span>#{lab.LM_PMC_assurance}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_ASSURANCE, constantes.MUT_SENS_OP_DEPOT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                        <span>#{lab.LDB_PCB_autres}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_COURANT, constantes.MUT_SENS_OP_DEPOT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                    </h:panelGrid>                                    
                                    <span style="text-decoration: underline">#{lab.LM_PMC_retraits} :</span>
                                    <h:panelGrid columns="2">
                                        <span>#{lab.LM_PM_epargne}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_EPARGNE, constantes.MUT_SENS_OP_RETRAIT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                        <span>#{lab.LM_PMC_assurance}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_ASSURANCE, constantes.MUT_SENS_OP_RETRAIT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                        <span>#{lab.LDB_PCB_autres}</span>
                                        <h:outputText value="#{managedOperationCompte.findTotalOperationPeriode(constantes.MUT_TYPE_COMPTE_COURANT, constantes.MUT_SENS_OP_RETRAIT, operationCompte.periode.dateDebut, operationCompte.periode.dateFin)}" 
                                                      converter="DN" style="font-weight: bold"/>
                                    </h:panelGrid> 
                                </h:panelGrid>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </div>
                <div class="yvs_list_operation">
                    <p:dataTable id="data_operation_compte" value="#{managedOperationCompte.operations}" var="opC0" rowKey="#{opC0.id}" 
                                 rowIndexVar="opC0Idx" selectionMode="single" style="font-size: 0.9em" selection="#{managedOperationCompte.selectedOperation}">
                        <p:ajax event="rowSelect" listener="#{managedOperationCompte.loadOnView}" oncomplete="collapseForm('operation')"
                                update="data_operation_compte"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedOperationCompte.unLoadOnView}" update="data_operation_compte"/>
                        <p:column width="30" headerText="N°" style="text-align: center">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{opC0.new_}"/>
                            <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{opC0.id eq managedOperationCompte.operationCompte.id}"/>
                            <span styleClass="ligne_#{(opC0.new_)?'true':'false'}">#{opC0Idx+1}</span>
                            <h:graphicImage library="img/icones" name="#{(opC0.sensOperation eq 'D')?'in.png':'out.png'}" width="15" height="15"
                                            style="float: right"/>
                        </p:column>
                        <p:column headerText="#{lab.L_reference}">
                            <span styleClass="ligne_#{(opC0.new_)?'true':'false'}">#{opC0.referenceOperation}</span>
                        </p:column>
                        <p:column headerText="#{lab.LM_PM_mutualiste}">
                            <span styleClass="ligne_#{(opC0.new_)?'true':'false'}">#{opC0.compte.proprietaire}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_compte}">
                            <span styleClass="ligne_#{(opC0.new_)?'true':'false'}">#{opC0.compte.reference}</span>
                        </p:column>
                        <p:column headerText="#{lab.LM_PMC_date_operation}" style="text-align: center">
                            <h:outputText value="#{opC0.dateOperation}" converter="DATE" styleClass="ligne_#{(opC0.new_)?'true':'false'}"/>
                        </p:column>
                        <p:column headerText="#{lab.LM_PMC_note}">
                            <h:outputText value="#{opC0.commentaire}" title="#{opC0.commentaire}" styleClass="ligne_#{(opC0.new_)?'true':'false'}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_nature}" width="50">
                            <span styleClass="ligne_#{(opC0.new_)?'true':'false'}">#{opC0.nature}</span>                            
                        </p:column>
                        <p:column headerText="#{lab.L_montant}" style="text-align: right">
                            <h:outputText styleClass="ligne_#{(opC0.new_)?'true':'false'}" value="#{opC0.montant}" converter="DN" style="text-align: right"/>
                        </p:column>
                        <p:column headerText="#{lab.L_caisse}" >
                            <h:outputText styleClass="ligne_#{(opC0.new_)?'true':'false'}" value="#{opC0.caisse.referenceCaisse}"/>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_periode}" style="text-align: right">
                            <h:outputText styleClass="ligne_#{(opC0.new_)?'true':'false'}" value="#{opC0.periode.referencePeriode}"/>
                        </p:column>
                        <p:column width="25" style="text-align: center">
                            <p:contextMenu for="btn_opt_mut_op_compte" event="left click">
                                <p:menuitem value="#{lab.LDB_PD_details}" icon="ui-icon-search" actionListener="#{managedOperationCompte.openToDeleteLine(opC0,true)}"/>
                                <p:separator />
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedOperationCompte.openToDeleteLine(opC0,false)}"
                                            oncomplete="collapseForm('operation')"  update="data_operation_compte"/>
                            </p:contextMenu>
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_opt_mut_op_compte" />
                        </p:column>
                    </p:dataTable>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block" >
                        <p:commandButton actionListener="#{managedOperationCompte.paginer(false)}" update="data_operation_compte" icon="ui-icon-circle-triangle-w"  disabled="#{managedOperationCompte.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedOperationCompte.paginator.currentPage}/#{managedOperationCompte.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton action="#{managedOperationCompte.paginer(true)}" update="data_operation_compte" icon="ui-icon-circle-triangle-e"  disabled="#{managedOperationCompte.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedOperationCompte.imax}" label="#{lab.L_nombre_max_resultat}" style="float: right; font-size: 0.9em; width: 80px" 
                                         valueChangeListener="#{managedOperationCompte.choosePaginator}">
                            <f:selectItems value="#{managedOperationCompte.paginations}" />
                            <p:ajax event="valueChange" update="data_operation_compte" />
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div> 
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false">
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>                    
            <div class="zone_find">                   
                <h:panelGrid columns="8" style="font-size: 0.8em; float: left; padding: 0px; margin: 0px">
                    <h:outputText value="&nbsp;" />
                    <h:outputText value="#{lab.LM_PMC_date_operation}" />
                    <h:outputText value="#{lab.LM_PM_mutualiste} " />  
                    <h:outputText value="#{lab.LM_PMC_comptes} " />  
                    <h:outputText value="#{lab.LDB_PP_sens} " />  
                    <h:outputText value="#{lab.LRH_PP_exercice} " />  
                    <h:outputText value="#{lab.LRH_PRS_periode} " />  
                    <span>&nbsp;</span>
                    <p:commandButton icon="ui-icon-bullet" title="#{lab.LM_PMC_reset_options_recherches}" style="width: 22px; height: 22px" 
                                     actionListener="#{managedOperationCompte.clearParams()}" update=":main_form_mut_opc:data_operation_compte"/>
                    <h:panelGroup>
                        <h:selectBooleanCheckbox value="#{managedOperationCompte.dateSearch}">
                            <p:ajax event="valueChange" listener="#{managedOperationCompte.addParamDates()}"
                                    update=":main_form_mut_opc:data_operation_compte dates_search_operation"/>
                        </h:selectBooleanCheckbox>
                        <h:panelGroup id="dates_search_operation" style="margin-top: -2px;float: right">
                            <p:calendar value="#{managedOperationCompte.debutSearch}" navigator="true" pattern="dd-MM-yyyy" size="10" disabled="#{!managedOperationCompte.dateSearch}">
                                <p:ajax event="dateSelect" listener="#{managedOperationCompte.addParamDates()}" update=":main_form_mut_opc:data_operation_compte"/>
                            </p:calendar>
                            <p:calendar value="#{managedOperationCompte.finSearch}" navigator="true" pattern="dd-MM-yyyy" size="10" disabled="#{!managedOperationCompte.dateSearch}">
                                <p:ajax event="dateSelect" listener="#{managedOperationCompte.addParamDates()}" update=":main_form_mut_opc:data_operation_compte"/>
                            </p:calendar>
                        </h:panelGroup>
                    </h:panelGroup>                    
                    <h:inputText value="#{managedOperationCompte.mutualisteSearch}" >
                        <p:ajax event="blur" listener="#{managedOperationCompte.addParamMutualiste()}" update=":main_form_mut_opc:data_operation_compte"/>
                    </h:inputText>
                    <h:inputText value="#{managedOperationCompte.compteSearch}" >
                        <p:ajax event="blur" listener="#{managedOperationCompte.addParamCompte()}" update=":main_form_mut_opc:data_operation_compte"/>
                    </h:inputText>
                    <h:selectOneMenu value="#{managedOperationCompte.sensSearch}" valueChangeListener="#{managedOperationCompte.addParamSensOperation}">
                        <f:selectItem itemValue="#{null}" itemLabel="--" /> 
                        <f:selectItem itemValue="#{constantes.MUT_SENS_OP_DEPOT}" itemLabel="#{lab.LC_PFA_depot.toUpperCase()}" /> 
                        <f:selectItem itemValue="#{constantes.MUT_SENS_OP_RETRAIT}" itemLabel="#{lab.LM_PMC_retrait.toUpperCase()}" /> 
                        <p:ajax event="valueChange"  update=":main_form_mut_opc:data_operation_compte"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu value="#{managedOperationCompte.exoSearch}" valueChangeListener="#{managedOperationCompte.addParamExercice}">
                        <f:selectItem itemValue="#{null}" itemLabel="--" /> 
                        <f:selectItems value="#{managedOperationCompte.exercices}" var="iexo" itemValue="#{iexo.id}" itemLabel="#{iexo.reference}" />
                        <p:ajax event="valueChange" update="chp_search_periode :main_form_mut_opc:data_operation_compte"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu id="chp_search_periode" value="#{managedOperationCompte.periodeSearch}" valueChangeListener="#{managedOperationCompte.addParamPeriode}">
                        <f:selectItem itemValue="#{null}" itemLabel="--" /> 
                        <f:selectItems value="#{managedOperationCompte.periodes}" var="ipe" itemValue="#{ipe.id}" itemLabel="#{ipe.referencePeriode}" />
                        <p:ajax event="valueChange" update=":main_form_mut_opc:data_operation_compte"/>
                    </h:selectOneMenu>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>

