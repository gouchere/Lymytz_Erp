<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Clients','modDonneBase', 'smenClientCom', true,managedClient)}
    </ui:define>           
    <ui:define name="contents">
        #{managedCompte.doNothing()}
        #{Marticle.doNothing()}

        #{managedTiers.loadTiersByType('C', true, false)}
        #{managedTiersTemplate.loadTemplate('C')}  
        #{managedClient.loadAll()}   
        #{Mdico.loadPays()}
        #{managedTiersDocument.loadAll()} 
        #{managedCatCompt.loadAllCategorieVente()}
        #{managedModeReglement.loadModel('C')}
        #{managedRistourne.loadPlanRistourne()}
        #{managedCategorieClt.loadAllCategorie()}
        #{managedTypeCout.loadTypeByType(null)}
        #{managedPointLivraison.loadAll()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 200);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('client');
                collapseForm('tiers_contact');
                collapseForm('client_tarif');
                collapseForm('client_tarifaire');
                collapseForm('client_categorie');
                collapseList('model_client');
                collapseForm('tranche_model_client');
            });
        </script>

        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedClient.updateBean()}"/>
        </h:form>
        <h:form prependId="false" id="form-apercu"> 
            <p:dialog hideEffect="explode" widgetVar="dlgMediaApercu" closeOnEscape="true" header="Apercu" resizable="false" modal="true" width="90%">
                <p:outputPanel id="media-apercu">
                    <p:media value="#{managedTiersDocument.apercu}" width="100%" height="600px" player="pdf" rendered="#{managedTiersDocument.apercu ne null and managedTiersDocument.entity.extension eq 'pdf'}"/>
                    <p:graphicImage value="#{managedTiersDocument.apercu}" width="100%" height="600px" rendered="#{managedTiersDocument.apercu ne null and managedTiersDocument.entity.extension ne 'pdf'}"/>
                </p:outputPanel>
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Choisir une période" closeOnEscape="true" widgetVar="dlgDatesPrint" resizable="false" modal="true"> 
                <h:panelGrid columns="1" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:outputText value="Date début"/>
                    <p:calendar value="#{managedClient.dateDebutPrint}" style="width: 100%" pattern="dd-MM-yyyy" navigator="true"/>
                    <h:outputText value="Date fin"/>
                    <p:calendar value="#{managedClient.dateFinPrint}" style="width: 100%" pattern="dd-MM-yyyy" navigator="true"/>
                    <p:commandButton value="Télécharger" actionListener="#{managedClient.print()}" ajax="false" icon="ui-icon-print"/>
                </h:panelGrid>    
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="main-statut">
            <p:dialog header="Activer / Désactiver" closeOnEscape="true" widgetVar="dlgConfirmChangeStatut" resizable="false" modal="true"> 
                <h:panelGrid id="blog_active_client" columns="1" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:outputText value="#{managedClient.selectClient.nom_prenom}" style="font-weight: bold"/>
                    <p:selectBooleanCheckbox value="true" itemLabel="#{managedClient.selectClient.actif?' - Désactiver le client':' - Activer le client'}" disabled="true"/>
                    <p:selectBooleanCheckbox value="#{managedClient.actionTiers}" itemLabel="#{managedClient.selectClient.actif?' - Désactiver le tiers':' - Activer le tiers'}"/>
                    <p:selectBooleanCheckbox value="#{managedClient.actionFournisseur}" itemLabel="#{managedClient.selectClient.actif?' - Désactiver le fournisseur':' - Activer le fournisseur'}" rendered="#{managedClient.selectClient.tiers.fournisseurs.size() gt 0}"/>
                    <p:selectBooleanCheckbox value="#{managedClient.actionEmploye}" itemLabel="#{managedClient.selectClient.actif?' - Désactiver l\'employé':' - Activer l\'employé'}" rendered="#{managedClient.selectClient.tiers.employes.size() gt 0}"/>
                    <p:selectBooleanCheckbox value="#{managedClient.actionCommercial}" itemLabel="#{managedClient.selectClient.actif?' - Désactiver le commercial':' - Activer le commercial'}" rendered="#{managedClient.selectClient.tiers.commerciaux.size() gt 0}"/>            
                    <f:facet name="footer"> 
                        <div align="right">
                            <p:commandButton value="#{managedClient.selectClient.actif?'Désactiver':'Activer'}" icon="#{managedClient.selectClient.actif?'ui-icon-cancel':'ui-icon-check'}"
                                             actionListener="#{managedClient.activeTiers(managedClient.selectClient)}" update="blog_active_client"/>
                        </div>
                    </f:facet>
                </h:panelGrid>    
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des livreurs
        *****************************************************************************
        <-->         
        <h:form prependId="false" id="main-contrat">
            <p:dialog header="#{lab.LDB_PC_facture_pour_contrat} #{managedClient.selectContrat.reference}" widgetVar="dlgGenererFacture" modal="true" width="40%" closeOnEscape="true">                 
                <h:panelGrid columns="2">
                    <span>#{lab.LDB_PC_date_facture} </span>
                    <p:calendar value="#{managedClient.dateFacture}" navigator="true"  pattern="dd-MM-yyyy"/>
                    <span>#{lab.LDB_PC_point_vente} </span>
                    <h:selectOneMenu value="#{managedClient.point.id}" style="min-width: 120px">
                        <f:selectItem itemLabel="--" itemValue="0"/>
                        <f:selectItems value="#{managedClient.points}" var="poi" itemLabel="#{poi.libelle}" itemValue="#{poi.id}" />                           
                        <p:ajax event="valueChange" update="select_tranche_facture_contrat select_vendeur_facture_contrat" listener="#{managedClient.choosePoint()}"/>
                    </h:selectOneMenu> 
                    <span>#{lab.LDB_PC_tranche_vente}</span>
                    <h:selectOneMenu value="#{managedClient.tranche.id}" id="select_tranche_facture_contrat" style="min-width: 120px">
                        <f:selectItem itemLabel="--" itemValue="0"/>
                        <f:selectItems value="#{managedClient.point.listTranche}" var="trh" itemLabel="#{trh.tranche.titre}" itemValue="#{trh.tranche.id}" />                                
                        <p:ajax event="valueChange" global="false"/>
                    </h:selectOneMenu> 
                    <span>#{lab.LDB_PC_vendeur} </span>
                    <h:selectOneMenu value="#{managedClient.vendeur.id}" id="select_vendeur_facture_contrat" style="min-width: 120px; max-width: 150px">
                        <f:selectItem itemLabel="--" itemValue="0"/>
                        <f:selectItems value="#{managedClient.point.vendeurs}" var="vend" itemLabel="#{vend.nomUsers}" itemValue="#{vend.id}" />                                
                        <p:ajax event="valueChange" global="false"/>
                    </h:selectOneMenu> 
                    <f:facet name="footer">
                        <p:commandButton icon="ui-icon-disk" value="#{lab.LDB_PC_generer}" actionListener="#{managedClient.genererFacture()}" style=";background: white;float: right"/>
                    </f:facet>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LDB_PC_element_contrat_n} #{managedClient.selectContrat.reference}" widgetVar="dlgElementsContrat" modal="true" width="50%" closeOnEscape="true"> 
                <p:tabView id="tabview-contrat_client">
                    <p:tab title="#{lab.LDB_PC_service}">
                        <h:panelGrid id="form-element_contrat_client" columns="6">
                            <h:outputText value=""/>
                            <h:outputText value="#{lab.LDB_PC_article}"/>
                            <h:outputText value="#{lab.LDB_PC_unite}"/>
                            <h:outputText value="#{lab.LDB_PC_quantite}"/>
                            <h:outputText value="#{lab.LDB_PC_prix}"/>
                            <h:outputText value=""/>
                            <p:commandButton icon="ui-icon-document" actionListener="#{managedClient.resetFicheElement()}" title="#{lab.L_nouveau}" style="width: 20px; height: 22px;background: white;margin-top: 4px"/>
                            <h:panelGroup>
                                <h:inputText id="select-article_element_contrat_client" value="#{managedClient.element.article.article.refArt}" style="color: #{managedClient.element.article.article.error?'red':''}">
                                    <p:ajax event="valueChange" listener="#{managedClient.searchArticle()}"/>
                                </h:inputText>    
                                <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white;margin-top: 5px" title="#{lab.LDB_PC_liste_articles}" global="false" oncomplete="dlgListArticleElement.show()"/>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedClient.element.article.id}" id="select-unite_element_contrat_client" style="min-width: 120px">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedClient.element.article.article.conditionnements}" var="cond" itemLabel="#{cond.unite.reference}" itemValue="#{cond.id}" />
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseConditionnement()}" update="value-prix_element_contrat_client"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedClient.element.quantite}" style="width: 100px;text-align: center"/>
                            <h:inputText value="#{managedClient.element.prix}" id="value-prix_element_contrat_client" style="width: 100px;text-align: center"/>
                            <p:commandButton icon="ui-icon-circle-plus" value="Ajouter" actionListener="#{managedClient.saveNewElementContrat()}" style=";background: white"/>
                        </h:panelGrid>
                        <p:dataTable id="data-element_contrat_client" value="#{managedClient.selectContrat.elements}" var="elt" rowKey="#{elt.id}"
                                     rowIndexVar="eltIdx" selectionMode="single" paginator="true" rows="10" paginatorAlwaysVisible="false">
                            <p:ajax event="rowSelect" listener="#{managedClient.loadOnViewElement}" update=":main-contrat:tabview-contrat_client:form-element_contrat_client"/>
                            <p:ajax event="rowUnselect" listener="#{managedClient.unLoadOnViewElement}" update=":main-contrat:tabview-contrat_client:form-element_contrat_client"/>
                            <p:column style="width: 7%;" headerText="N°"> 
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{cont.new_}"/>
                                <span>#{eltIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_article}">
                                <span>#{elt.article.article.designation}</span> [<span style="font-weight: bold">#{elt.article.article.refArt}</span>]
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_quantite}" style="text-align: right;width: 20%">
                                <h:outputText value="#{elt.quantite}" converter="DNS"/>
                                <span title="#{elt.article.unite.libelle}" style="font-size: 0.6em;color: #003399">#{elt.article.unite.reference}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_prix}" style="text-align: right;width: 15%">
                                <h:outputText value="#{elt.prix}" converter="DN"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center">
                                <p:contextMenu for="btn_option_element_contrat_client" event="left click" style="font-size: 0.8em">
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedClient.deleteBeanElement(elt, false)}" oncomplete="dlgConfirmDeleteElementContrat.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_element_contrat_client" type="button"/>
                            </p:column> 
                        </p:dataTable>
                        <div style="clear: both"/>
                    </p:tab>
                    <p:tab title="#{lab.LDB_PC_additionnel}">
                        <h:panelGrid id="form-additionnel_contrat_client" columns="6">
                            <h:outputText value=""/>
                            <h:outputText value="#{lab.LDB_PC_type}"/>
                            <h:outputText value="#{lab.LDB_PC_montant}"/>
                            <h:outputText value="#{lab.LDB_PC_application}"/>
                            <h:outputText value="#{lab.LDB_PC_apres}"/>
                            <h:outputText value=""/>
                            <p:commandButton icon="ui-icon-document" actionListener="#{managedClient.resetFicheAdditionnel()}" title="#{lab.L_nouveau}" style="width: 20px; height: 22px;background: white;margin-top: 4px"/>
                            <h:selectOneMenu value="#{managedClient.additionnel.typeCout.id}" style="min-width: 120px">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedTypeCout.types}" var="tyc" itemLabel="#{tyc.libelle}" itemValue="#{tyc.id}" />
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseTypeCout()}"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedClient.additionnel.montant}" style="width: 100px;text-align: center"/>
                            <h:selectOneMenu value="#{managedClient.additionnel.application}">
                                <f:selectItem itemLabel="#{lab.LDB_PC_differe}" itemValue="#{'D'}" />
                                <f:selectItem itemLabel="#{lab.LDB_PC_immediat}" itemValue="#{'I'}"/>
                                <p:ajax event="valueChange" global="false" update="value-periode_additionnel_contrat_client"/>
                            </h:selectOneMenu> 
                            <h:panelGroup>
                                <h:inputText value="#{managedClient.additionnel.periodiciteApplication}" disabled="#{managedClient.additionnel.application eq 'I'}"
                                             id="value-periode_additionnel_contrat_client" style="width: 50px;text-align: center"/> 
                                <span>Jr(s)</span>
                            </h:panelGroup>
                            <p:commandButton icon="ui-icon-circle-plus" value="#{lab.L_ajouter}" actionListener="#{managedClient.saveNewAdditionnelContrat()}" style=";background: white"/>
                        </h:panelGrid>
                        <p:dataTable id="data-additionnel_contrat_client" value="#{managedClient.selectContrat.additionnels}" var="add" rowKey="#{add.id}"
                                     rowIndexVar="addIdx" selectionMode="single" paginator="true" rows="10" paginatorAlwaysVisible="false">
                            <p:ajax event="rowSelect" listener="#{managedClient.loadOnViewAdditionnel}" update=":main-contrat:tabview-contrat_client:form-additionnel_contrat_client"/>
                            <p:ajax event="rowUnselect" listener="#{managedClient.unLoadOnViewAdditionnel}" update=":main-contrat:tabview-contrat_client:form-additionnel_contrat_client"/>
                            <p:column style="width: 7%;" headerText="N°"> 
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{cont.new_}"/>
                                <span>#{addIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_type}">
                                <span>#{add.typeCout.libelle}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_montant}" style="text-align: right;width: 15%">
                                <h:outputText value="#{add.montant}" converter="DNS"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_application}" style="text-align: center;width: 15%">
                                <h:outputText value="#{add.application eq 'I' ? 'IMMEDIAT' : 'DIFFERE'}"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_periode}" style="text-align: center;width: 15%">
                                <h:panelGroup rendered="#{add.application ne 'I'}">
                                    <h:outputText value="#{add.periodiciteApplication}" converter="DN"/>
                                    <h:outputText value="#{lab.LDB_PC_jour}(s)"/>
                                </h:panelGroup>
                                <h:outputText value="--" rendered="#{add.application eq 'I'}"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center">
                                <p:contextMenu for="btn_option_additionnel_contrat_client" event="left click" style="font-size: 0.8em">
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedClient.deleteBeanAdditionnel(add, false)}" oncomplete="dlgConfirmDeleteAdditionnelContrat.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_additionnel_contrat_client" type="button"/>
                            </p:column> 
                        </p:dataTable>
                        <div style="clear: both"/>
                    </p:tab>
                </p:tabView>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des livreurs
        *****************************************************************************
        <-->         
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_liste_representants}" widgetVar="dlgListUsers" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable id="data_repr_client" value="#{managedUser.listUser}" var="art" rowKey="#{art.id}"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false" >
                    <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewRepr}" oncomplete="dlgListUsers.hide()"/>
                    <p:column headerText="#{lab.LDB_PC_code}" style="width: 2%">
                        <span>#{art.codeUsers}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_noms}" style="width: 6%">
                        <span>#{art.nomUsers}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_groupe}" style="width: 4%">
                        <span>#{art.categorie.libelle}</span>
                    </p:column>
                </p:dataTable>
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:inputText value="#{managedUser.numSearch}" style="margin-left: -10px">
                            <p:ajax event="valueChange" global="false" update="data_repr_client" listener="#{managedUser.searchUsersActif(false)}"/>
                        </h:inputText>
                    </h:panelGroup>                    
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedUser.loadAll(false,false)}" global="false" update="data_repr_client" icon="ui-icon-circle-triangle-w" disabled="#{managedUser.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedUser.paginator.currentPage}/#{managedUser.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedUser.loadAll(true,false)}" global="false" update="data_repr_client" icon="ui-icon-circle-triangle-e" disabled="#{managedUser.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedUser.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedUser.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{managedUser.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_repr_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel>  
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Plus Options" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_option_client" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">                    
                    <h:outputText value="#{lab.L_confirmer}" rendered="#{managedClient.currentScte.venteOnline}"/>                                                  
                    <h:selectOneMenu value="#{managedClient.confirmerSearch}" rendered="#{managedClient.currentScte.venteOnline}">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>                            
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>                            
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>                            
                        <p:ajax event="valueChange" listener="#{managedClient.addParamConfirmer()}"/>
                    </h:selectOneMenu>    
                    <h:outputText value="#{lab.LDB_PC_representant}" />
                    <h:inputText value="#{managedClient.reprSearch}" style="width: 100%">
                        <p:ajax event="valueChange" listener="#{managedClient.addParamRepresentant()}"/>
                    </h:inputText>  
                    <h:outputText value="#{lab.LDB_PC_pays}" />
                    <h:selectOneMenu value="#{managedClient.paysSearch}" id="pays_client_search" style="min-width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{Mdico.pays}" var="pyss" 
                                       itemLabel="#{pyss.libele}" itemValue="#{pyss.id}" />                                   
                        <p:ajax event="valueChange" listener="#{managedClient.addParamPays()}" update="ville_client_search"/>
                    </h:selectOneMenu> 
                    <h:outputText value="#{lab.LDB_PC_ville}" />
                    <h:selectOneMenu value="#{managedClient.villeSearch}" id="ville_client_search" style="min-width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{Mdico.villes}" var="dics" 
                                       itemLabel="#{dics.libele}" itemValue="#{dics.id}" />                               
                        <p:ajax event="valueChange" listener="#{managedClient.addParamVille()}" update="secteur_client_search"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LDB_PC_secteur}" />
                    <h:selectOneMenu value="#{managedClient.secteurSearch}" id="secteur_client_search" style="min-width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{Mdico.secteurs}" var="secs" 
                                       itemLabel="#{secs.libele}" itemValue="#{secs.id}" />                              
                        <p:ajax event="valueChange" listener="#{managedClient.addParamSecteur()}"/>
                    </h:selectOneMenu> 
                    <h:outputText value="Plan de ristourne" />
                    <h:selectOneMenu value="#{managedClient.planRSearch}" style="min-width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedRistourne.plans}" var="ris" itemLabel="#{ris.reference}" itemValue="#{ris.id}" />                             
                        <p:ajax event="valueChange" listener="#{managedClient.addParamPlanRistourne()}"/>
                    </h:selectOneMenu> 
                    <h:panelGroup>
                        <h:outputText value="#{lab.LDB_PC_dates}" />
                        <h:selectBooleanCheckbox value="#{managedClient.date_}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client" listener="#{managedClient.addParamDate()}"/>
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedClient.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedClient.date_}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedClient.addParamDate}"/>
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedClient.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedClient.date_}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedClient.addParamDate}"/>
                        </p:calendar>
                    </h:panelGroup>
                </h:panelGrid>
            </p:dialog>
        </h:form>

        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadImg" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <p:fileUpload sizeLimit="100000" mode="advanced" dragDropSupport="true" 
                              allowTypes="/(\.|\/)(xls|xlsx)$/" fileUploadListener="#{managedClient.uploadFile}"
                              uploadLabel="#{lab.L_envoyer}" label="#{lab.L_parcourir}" auto="true" 
                              oncomplete="dlgUploadImg.hide()"> 
                </p:fileUpload>
            </p:dialog>
        </h:form> 

        <h:form prependId="false" id="main_fusionn_client">
            <p:dialog widgetVar="dlgConfirmFusion" header="#{lab.L_fusionner}" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <h:panelGrid id="blog_fusionner_client" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PC_text6}</span>
                    <h:outputText style="font-weight: bold;margin-left: 10px" value="#{managedClient.fusionneTo}"/>
                    <span>#{lab.LDB_PC_text7}</span>
                    <c:forEach items="#{managedClient.fusionnesBy}" var="fus">
                        <span style="margin-left: 10px"> - <span style="font-weight: bold">#{fus}</span></span>
                    </c:forEach>
                    <span style="color: red">#{lab.LDB_PC_text8}</span>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.fusionner(false)}" style="float: right" 
                                 oncomplete="dlgConfirmFusion.hide()"  update=":form_client:data_client"/> 
            </p:dialog>
        </h:form> 

        <h:form prependId="false">
            <p:dialog widgetVar="dlgConfirmMAJCode" header="#{lab.LDB_PC_text9}" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <h:panelGrid columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <p:selectBooleanCheckbox value="#{managedClient.reIncrementer}" itemLabel="#{lab.LDB_PC_text5}" style="float: right" disabled="true"/>
                    <span>#{lab.LDB_PC_prefixe_nouveau_code_client} </span>
                    <h:inputText style="font-weight: bold;width: 100%" value="#{managedClient.prefixe}">
                        <p:ajax event="valueChange" global="false"/>
                    </h:inputText>
                    <span>#{lab.LDB_PC_nouveau_compte_collectif_client} </span>
                    <h:panelGroup id="value_compte_client_update">
                        <h:inputText value="#{managedClient.compte.numCompte}" style="color: #{managedClient.compte.error?'red':''};width: 35%">
                            <p:ajax event="valueChange" global="false" listener="#{managedClient.searchCompteUpdate()}" update="value_compte_client_update"/>
                        </h:inputText> 
                        <h:outputText value="#{managedClient.compte.intitule}" style="color: green"/>
                    </h:panelGroup>
                    <p:selectBooleanCheckbox value="#{managedClient.suiviComptable}" itemLabel="#{lab.LDB_PC_definir_comme_client_suivi_en_comptabilite}" style="float: right"/>
                </h:panelGrid>
                <p:commandButton value="#{lab.LDB_PC_appliquer}" actionListener="#{managedClient.updateCode()}" style="float: right" oncomplete="dlgConfirmMAJCode.hide()" update=":form_client:data_client"/> 
            </p:dialog>
        </h:form> 

        <h:form prependId="false" id="main_model_client">
            <p:dialog header="#{lab.LDB_PC_models_reglement}" widgetVar="dlgAddModelReglement" modal="true" width="45%"  closeOnEscape="true"> 
                <div class="part_fix">
                    <p:commandButton value="#{lab.L_enregistrer}" id="save_model_client" actionListener="#{managedModeReglement.saveNewModel('C')}" update="blog_form_model_client" oncomplete="collapseForm('tranche_model_client')"/>
                    <p:commandButton value="#{lab.L_nouveau}" id="cancel_model_client" global="false" actionListener="#{managedModeReglement.resetFicheModel()}" update="blog_form_model_client" oncomplete="collapseForm('tranche_model_client')"/>
                    <p:commandButton value="#{lab.L_supprimer}" id="delete_model_client" onclick="dlgConfirmDeletePlanReglementClt.show()"/>
                    <div style="float: right">     
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('model_client');
                                collapseForm('tranche_model_client');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="20" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('model_client');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="20" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>   
                    </div>
                </div>
                <div class="yvs_form_model_client">
                    <p:outputPanel id="blog_form_model_client">
                        <h:panelGrid id="form_model_client" columns="1" cellpadding="0" cellspacing="0" style="width: 100%" styleClass="yvs_nostyle">
                            <span>#{lab.LDB_PC_reference}</span>
                            <h:inputText value="#{managedModeReglement.model.designation}" style="width: 100%" title="#{lab.LDB_PC_reference_model}"/>
                            <h:inputTextarea value="#{managedModeReglement.model.description}" rows="3" style="width: 100%" title="#{lab.LDB_PC_description_model}"/>
                        </h:panelGrid>
                        <p:outputPanel id="blog_form_tranche_model_client" style="width: 98%">
                            <p:outputPanel rendered="#{managedModeReglement.model.update}">
                                <div style="width: 100%;background: #666;margin: auto;color: white">
                                    <span style="font-weight: bold">Tranches</span>
                                </div>
                                <div style="border: 1px solid black;padding: 5px">
                                    <h:panelGrid id="form_tranche_model_client" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                        <span>N°</span>
                                        <h:inputText value="#{managedModeReglement.tranche.numero}" readonly="true" converter="DN" style="width: 30%"/>
                                        <span>#{lab.LDB_PC_taux} </span>
                                        <pe:inputNumber value="#{managedModeReglement.tranche.taux}" symbol="%" symbolPosition="suffixe" style="width: 50%;text-align: right"/>
                                        <span>#{lab.LDB_PC_interval}</span>
                                        <pe:inputNumber value="#{managedModeReglement.tranche.intervalJour}" symbol=" Jour(s)" symbolPosition="suffixe" decimalPlaces="0" style="width: 90%;text-align: right"/>
                                        <span>#{lab.LDB_PC_mode}</span>
                                        <h:selectOneMenu value="#{managedModeReglement.tranche.mode.id}" id="select_mode_tranche_model_client" 
                                                         title="#{lab.LDB_PC_mode_reglement}" style="min-width: 120px" onchange="openDialog(dlgAddModePaiement, $(this))">
                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{managedModeReglement.modes}" var="mo" 
                                                           itemLabel="#{mo.designation}" itemValue="#{mo.id}" /> 
                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItem itemLabel="#{lab.L_plus_option}" itemValue="-1"/>    
                                        </h:selectOneMenu> 
                                    </h:panelGrid>
                                    <div style="margin-top: 5px">
                                        <p:commandButton id="cancel_tranche_model_client" value="#{lab.L_nouveau}" style="float: left" oncomplete="collapseForm('tranche_model_client')"
                                                         update="form_tranche_model_client" actionListener="#{managedModeReglement.resetFicheTranche()}" global="false"/>
                                        <p:commandButton id="save_tranche_model_client" value="#{lab.L_enregistrer}" style="float: right"
                                                         actionListener="#{managedModeReglement.saveNewTranche()}" oncomplete="collapseForm('tranche_model_client')"
                                                         update="blog_form_tranche_model_client"/>
                                    </div>
                                    <p:outputPanel style="margin-top: 10px">
                                        <p:dataTable id="data_tranche_model_client" value="#{managedModeReglement.model.tranches}" var="trn" rowKey="#{trn.id}"
                                                     selectionMode="single" rows="5" paginator="true" paginatorAlwaysVisible="false">
                                            <p:ajax event="rowSelect" global="false" listener="#{managedModeReglement.loadOnViewTranche}" update=":main_model_client:form_tranche_model_client"/>
                                            <p:ajax event="rowUnselect" global="false" listener="#{managedModeReglement.unLoadOnViewTranche}" update=":main_model_client:form_tranche_model_client"/>
                                            <p:column headerText="N°" style="width: 12%;text-align: center">
                                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{trn.new_}"/>
                                                <span title="#{lab.LDB_PC_reglement_en} #{trn.mode.designation}">#{trn.numero}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_taux}" style="width: 20%">
                                                <h:outputText title="#{lab.LDB_PC_reglement_en} #{trn.mode.designation}" value="#{trn.taux}" converter="DN"/>
                                                <span title="#{lab.LDB_PC_reglement_en} #{trn.mode.designation}"> %</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_interval}">
                                                <h:outputText title="#{lab.LDB_PC_reglement_en} #{trn.mode.designation}" value="#{trn.intervalJour}" converter="DN"/>
                                                <span title="#{lab.LDB_PC_reglement_en} #{trn.mode.designation}"> Jours</span>
                                            </p:column>
                                            <p:column width="20" style="text-align: center">
                                                <p:contextMenu for="btn_option_tranche_model_client" event="left click" style="font-size: 0.8em">
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedModeReglement.deleteBeanTranche_(trn)}" oncomplete="dlgConfirmDeleteTranche_.show()"/>
                                                </p:contextMenu>                           
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_tranche_model_client" type="button"/>
                                            </p:column> 
                                            <p:column width="20" style="text-align: center" rendered="false">
                                                <f:facet name="header">
                                                    <h:selectBooleanCheckbox styleClass="chek_all_line_tranche_model_client" value="false"
                                                                             onclick="selectionAllLineTab(#{managedModeReglement.model.tranches.size()}, 'tranche_model_client')">
                                                    </h:selectBooleanCheckbox>
                                                </f:facet>
                                                <h:selectBooleanCheckbox  value="#{trn.select}" styleClass="chek_line_tranche_model_client" 
                                                                          onclick="selectionLineTab(#{trn.id}, 'tranche_model_client')">
                                                </h:selectBooleanCheckbox>
                                            </p:column>
                                        </p:dataTable>
                                        <p:commandButton id="delete_tranche_model_client" value="#{lab.L_supprimer}" style="float: right"
                                                         onclick="dlgConfirmDeleteTranche.show()" global="false"/>
                                    </p:outputPanel>
                                    <div style="clear: both"/>
                                </div>          
                            </p:outputPanel>
                        </p:outputPanel>                  
                    </p:outputPanel>
                </div>
                <div class="yvs_list_model_client">
                    <h:inputHidden id="input_hide_model_client" value="#{managedModeReglement.tablIds}"/>
                    <p:dataTable id="data_model_client" value="#{managedModeReglement.models}" var="mods" rowKey="#{mods.id}"
                                 rowIndexVar="modsIdx" selectionMode="single" scrollable="true" scrollHeight="200"> 
                        <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewModel}" oncomplete="dlgAddModelReglement.hide()"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedModeReglement.unLoadOnViewModel}" oncomplete="collapseForm('model_client');collapseForm('tranche_model_client')"/>
                        <p:column headerText="N°" style="width: 0.5%">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{mods.new_}"/>
                            <span>#{modsIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_reference}" style="width: 2.5%">
                            <h:outputText value="#{mods.reference}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_actif}" style="width: 1.5%;text-align: center">
                            <p:commandLink global="false" actionListener="#{managedModeReglement.activeModel(mods)}" update="data_model_client">
                                <h:graphicImage library="img"  name="#{(mods.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                            </p:commandLink>
                        </p:column>
                        <p:column style="width: 1.5%;text-align: center">
                            <p:contextMenu for="btn_option_model_client" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_modifier}" icon="ui-icon-pencil" global="false" actionListener="#{managedModeReglement.selectModel(mods)}" 
                                            oncomplete="collapseForm('model_client');collapseForm('tranche_model_client')" update=":main_model_client:blog_form_model_client"/>
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedModeReglement.deleteBeanModel_(mods)}" oncomplete="dlgConfirmDeletePlanReglementClt_.show()"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_model_client" type="button"/>
                        </p:column> 
                        <p:column style="width: 1.5%;text-align: center">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox styleClass="chek_all_line_model_client" value="false"
                                                         onclick="selectionAllLineTab(#{managedModeReglement.models.size()}, 'model_client')">
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  value="#{mods.select}" styleClass="chek_line_model_client" 
                                                      onclick="selectionLineTab(#{mods.id}, 'model_client')">
                            </h:selectBooleanCheckbox>
                        </p:column>
                    </p:dataTable>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_liste_tiers_telecharger}" widgetVar="dlgLoadTiers" modal="true" width="70%"  closeOnEscape="true"> 
                <h:panelGrid id="form_tiers_client_load" columns="1" style="width: 100%">
                    <p:dataTable id="data_tiers_client_load" value="#{managedClient.tiersLoad}" var="tier_" rows="20" paginator="true"
                                 rowKey="#{tier_.id}" rowIndexVar="tierIdx" paginatorAlwaysVisible="false">
                        <p:column  headerText="N°" style="width: 1%;text-align: center" styleClass="is_#{tier_.new_}">
                            <span>#{tierIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_code}" filterBy="#{tier_.codeTiers}" style="width: 3%" styleClass="is_#{tier_.new_}">
                            <span>#{tier_.codeTiers}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_nom_prenom}" style="width: 6%" styleClass="is_#{tier_.new_}">
                            <span>#{tier_.nom}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_compte}" style="width: 3%" styleClass="is_#{tier_.new_}">
                            <span>#{tier_.compteCollectif.numCompte}</span>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton value="#{lab.L_ajouter}" actionListener="#{managedClient.fullTiers()}" style="width: 100%" oncomplete="dlgLoadTiers.hide()"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgListTemplate_client">
            <p:dialog id="dlgListTemplate_client" header="Liste Template" widgetVar="dlgListTemplate" modal="true" width="75%" closeOnEscape="true">
                <p:dataTable id="data_template_tiers_client" value="#{managedTiersTemplate.templates}" var="temp" rowKey="#{temp.id}" 
                             rowIndexVar="cltIdx" selectionMode="single" selection="#{managedClient.selectTemplate}">
                    <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewTemplate}"  oncomplete="dlgListTemplate.hide()"
                            update=":form_client:txt_code_tiers_client :form_client:infos_tiers_client"/>
                    <p:ajax event="rowUnselect" global="false" listener="#{managedClient.unLoadOnViewTemplate}"/>
                    <p:column width="15">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_apercu}" width="100">
                        <span>#{temp.apercu}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_compte}" width="100">
                        <span>#{temp.compteCollectif.numCompte}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_pays}" width="100">
                        <span>#{temp.pays.libele}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_ville}" width="100">
                        <span>#{temp.ville.libele}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_secteur}" width="100">
                        <span>#{temp.secteur.libele}</span>
                    </p:column>
                </p:dataTable>  
                <f:facet name="footer">
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedTiersTemplate.init(false)}" global="false" update="data_template_tiers_client" icon="ui-icon-circle-triangle-w" disabled="#{managedTiersTemplate.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedTiersTemplate.paginator.currentPage}/#{managedTiersTemplate.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTiersTemplate.init(true)}" global="false" update="data_template_tiers_client" icon="ui-icon-circle-triangle-e" disabled="#{managedTiersTemplate.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedTiersTemplate.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTiersTemplate.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedTiersTemplate.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_template_tiers_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel>  
                </f:facet>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_liste_tiers}" widgetVar="dlgListTiers" modal="true" width="70%"  closeOnEscape="true"> 
                <p:dataTable id="data_tiers_client" value="#{managedTiers.listTiers}" var="tier"
                             rowKey="#{tier.id}" selectionMode="single" rowIndexVar="tierIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewTiers}" oncomplete="dlgListTiers.hide()" 
                            update=":form_client:data_tiers_contact :form_client:chk_societe_client :form_client:txt_code_tiers_client"/>
                    <p:column  headerText="N°" style="width: 1%">
                        <span>#{tierIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_code}" style="width: 3%">
                        <span>#{tier.codeTiers}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_nom_prenom}" style="width: 6%">
                        <span>#{tier.nom_prenom}</span>
                        <h:outputText title="#{lab.LDB_PC_tiers_moral}" value="S" rendered="#{tier.stSociete}"
                                      style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white;float: right"/>
                    </p:column>
                </p:dataTable>
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText value="#{managedTiers.numSearch_}" style="float: left;text-align: center;margin-left: -10px">
                        <p:ajax event="valueChange" global="false" listener="#{managedTiers.searchByNum()}" update="data_tiers_client"/>
                    </h:inputText>   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedTiers.init(false)}" global="false" update="data_tiers_client" icon="ui-icon-circle-triangle-w" disabled="#{managedTiers.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedTiers.paginator.currentPage}/#{managedTiers.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTiers.init(true)}" global="false" update="data_tiers_client" icon="ui-icon-circle-triangle-e" disabled="#{managedTiers.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedTiers.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTiers.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedTiers.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_tiers_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgAddCategorieComp_6">
            <p:dialog id="dlgAddCategorieComp_6" header="#{lab.LDB_PC_categorie_comptable}" widgetVar="dlgAddCategorieComp" 
                      modal="true" width="25%"  closeOnEscape="true" footer="#{lab.L_copy}"> 
                <h:panelGrid columns="1" style="width: 100%;margin: auto" id="form_categorie_taxe5">
                    <span>#{lab.LDB_PC_appel}</span>
                    <h:inputText value="#{categorieComptable.codeAppel}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_code} </span>
                    <h:inputText value="#{categorieComptable.codeCategorie}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_designation}</span>
                    <h:inputText value="#{categorieComptable.designation}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_nature} </span>
                    <h:inputText value="#{lab.LDB_PC_vente}" readonly="true" style="width: 100%"/>
                </h:panelGrid>
                <p:commandButton actionListener="#{managedCatCompt.saveNew(constantes.VENTE)}" style="float: right;width: 100%"
                                 update="form_categorie_taxe5 :form_client:txt_categorie_comptable_client" oncomplete="dlgAddCategorieComp.hide()"
                                 value="#{lab.L_enregistrer}"/>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_tarif_client">
            <p:dialog header="#{lab.LDB_PC_creation_tarif}" widgetVar="btnAddTarifClient" width="35%" closeOnEscape="true" modal="true">
                <h:panelGrid id="form_client_tarif" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PC_article} </span>
                    <h:panelGroup id="txt_design_client">
                        <h:inputText id="txt_article_client" value="#{managedCategorieClt.planTarif.article.refArt}" style="width: 150px;color: #{managedCategorieClt.planTarif.article.error?'red':''}">
                            <p:ajax event="valueChange" global="false" listener="#{managedCategorieClt.searchArticle()}" update="form_client_tarif"/>
                        </h:inputText>  
                        <h:outputText value="#{managedCategorieClt.planTarif.article.designation}" style="color: #006666;margin-left: 10px"/>
                        <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px" title="#{lab.LDB_PC_liste_articles}" global="false"
                                         actionListener="#{managedCategorieClt.initArticles()}" oncomplete="dlgListArticle.show()"/>
                    </h:panelGroup>
                    <span>#{lab.LDB_PC_prix_vente} </span>
                    <pe:inputNumber id="txt_priv_client" value="#{managedCategorieClt.planTarif.puv}" style="width: 65%"/> 
                    <span>#{lab.LDB_PC_prix_min}</span>
                    <pe:inputNumber id="txt_priv_min_client" value="#{managedCategorieClt.planTarif.puvMin}" style="width: 65%"/> 
                    <span>#{lab.LDB_PC_remise} </span>
                    <h:panelGroup>
                        <pe:inputNumber id="txt_remise_client" value="#{managedCategorieClt.planTarif.remise}" style="width: 40%;text-align: right"/>      
                        <h:selectOneMenu value="#{managedCategorieClt.planTarif.natureRemise}">
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                        </h:selectOneMenu>  
                    </h:panelGroup>
                    <span>#{lab.LDB_PC_ristourne} </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedCategorieClt.planTarif.ristourne}" style="width: 40%;text-align: right"/> 
                        <h:selectOneMenu value="#{managedCategorieClt.planTarif.natureRistourne}" title="#{lab.LDB_PC_nature_ristourne}">
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                        </h:selectOneMenu>  
                    </h:panelGroup>
                    <span title="#{lab.LDB_PC_coefficient_augmentation}">#{lab.LDB_PC_coef} </span>
                    <h:panelGroup>
                        <pe:inputNumber id="txt_coef_aug_client" value="#{managedCategorieClt.planTarif.coefAugmentation}" style="width: 40%" title="#{lab.LDB_PC_coefficient_augmentation}"/>
                        <h:selectOneMenu value="#{managedCategorieClt.planTarif.natureCoefAugmentation}" title="#{lab.LDB_PC_nature_coef_augmentation}">
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                        </h:selectOneMenu>  
                    </h:panelGroup>
                </h:panelGrid>
                <div style="margin-top: 5px">
                    <p:commandButton id="cancel_client_article" value="Nouveau" style="float: left" oncomplete="collapseForm('client_tarif')"
                                     update="form_client_tarif" actionListener="#{managedCategorieClt.resetFichePlanTarifaire()}" global="false"/>
                    <p:commandButton id="save_client_article" value="Enregistrer" style="float: right" oncomplete="collapseForm('client_tarif')"
                                     update="form_client_tarif :form_client_categorie:data_client_tarif" actionListener="#{managedCategorieClt.saveNewPlanTarifaire()}"/>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de categorie
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_client_categorie">
            <p:dialog header="#{lab.LDB_PC_categorie_client}" widgetVar="dlgAddCategorie" modal="true" width="80%"  closeOnEscape="true">                 
                <div class="part_fix">
                    <p:commandButton value="#{lab.L_enregistrer}" id="save_client_categorie" actionListener="#{managedCategorieClt.saveNew()}" oncomplete="collapseForm('client_categorie');collapseForm('client_tarif')" 
                                     update="blog_form_categorie_client0 data_client_categorie :form_client:tab_view_client:txt_categorie_client_client"/>
                    <p:commandButton value="#{lab.L_nouveau}" id="cancel_client_categorie" global="false" actionListener="#{managedCategorieClt.resetFiche()}" update="blog_form_categorie_client0" oncomplete="collapseForm('client_categorie');collapseForm('client_tarif')"/>
                    <p:commandButton value="#{lab.L_supprimer}" id="delete_client_categorie" onclick="dlgConfirmDelete.show()"/>
                    <div style="float: right">
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('client_categorie');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('client_categorie');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>   
                    </div>
                </div>
                <div class="yvs_form_client_categorie">
                    <div class="part_scroll">
                        <p:outputPanel id="blog_form_categorie_client0">
                            <div style="width: 59%;float: left">
                                <h:panelGrid columns="2" style="width: 98%;margin: auto" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                    <span>#{lab.LDB_PC_code} </span>
                                    <h:inputText value="#{categorieClient.code}" style="width: 100%"/>
                                    <span>#{lab.LDB_PC_libelle} </span>
                                    <h:inputText value="#{categorieClient.libelle}" style="width: 100%"/>
                                    <span>#{lab.LDB_PC_model} </span>
                                    <h:selectOneMenu value="#{categorieClient.model.id}" id="select_model_categorie_client" style="min-width: 120px">
                                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedModeReglement.models}" var="model" 
                                                       itemLabel="#{model.reference}" itemValue="#{model.id}" />                        
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PC_parent} </span>
                                    <h:selectOneMenu value="#{categorieClient.parent.id}" id="parent_categorie">
                                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedCategorieClt.categoriesParent}" var="cat_" 
                                                       itemLabel="#{cat_.libelle}" itemValue="#{cat_.id}" />
                                    </h:selectOneMenu> 
                                </h:panelGrid>
                            </div>
                            <div style="width: 40%;margin-left: 60%">
                                <span>#{lab.LDB_PT_description} </span>
                                <h:inputTextarea value="#{categorieClient.description}" rows="5" style="width: 98%"/>
                            </div>       
                            <p:outputPanel id="blog_form_client_tarif" style="margin-top: 10px;width: 95%">
                                <h:panelGrid columns="2" style="width: 100%;background: #CCC" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" rendered="#{categorieClient.update}">
                                    <b><span>#{lab.LDB_PC_plan_tarifaire}</span></b>
                                    <p:commandLink onclick="btnAddTarifClient.show()" global="false" style="float: right;border: 2px solid #666; border-radius: 5px;padding: 2px;margin-top: 2px;padding-bottom: -5px">
                                        <h:graphicImage title="Ajouter" library="icones" name="plus.png" width="16" height="16"/>    
                                    </p:commandLink>
                                </h:panelGrid>
                                <div style="clear: left"/>
                                <p:outputPanel rendered="#{categorieClient.update}">
                                    <h:inputHidden id="input_hide_client_tarif" value="#{managedCategorieClt.tabIds_tarif}"/>
                                    <p:dataTable id="data_client_tarif" value="#{managedCategorieClt.tarifs}" var="art" rowKey="#{art.id}"
                                                 rowIndexVar="artfIdx" selectionMode="single">
                                        <p:ajax event="rowSelect" global="false" listener="#{managedCategorieClt.loadOnViewPlanTarif}" update=":form_tarif_client:form_client_tarif" oncomplete="btnAddTarifClient.show()"/>
                                        <p:ajax event="rowUnselect" global="false" listener="#{managedCategorieClt.unLoadOnViewPlanTarif}" update=":form_tarif_client:form_client_tarif"/>
                                        <p:column style="width: 7%;" headerText="N°">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{art.new_}"/>
                                            <span>#{artfIdx+1}</span>
                                        </p:column>
                                        <p:column filterBy="#{art.article.refArt}" style="width: 18%">
                                            <span>#{art.article.refArt}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PC_article}">
                                            <span>#{art.article.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PC_coef}." style="text-align: right;width: 10%">
                                            <h:outputText value="#{art.coefAugmentation}" converter="DN" title="Coefficient augmentation pas zone"/>
                                            <h:outputText value="%" rendered="#{art.natureCoefAugmentation == constantes.NATURE_TAUX}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PC_puv}" style="text-align: right;width: 12%">
                                            <h:panelGroup style="float: left;font-size: 0.8em;font-style: italic;margin-top: 2px">
                                                <span>#{lab.LDB_PC_min}:</span>
                                                <h:outputText value="#{art.puvMin}" converter="DN" style="color: blue" title="Prix minimal"/>
                                            </h:panelGroup>
                                            <h:outputText value="#{art.puv}" converter="DN" style="font-weight: bold"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PC_remise}" style="text-align: right;width: 12%">
                                            <h:outputText value="#{art.remise}" converter="DN"/>
                                            <h:outputText value="%" rendered="#{art.natureRemise == constantes.NATURE_TAUX}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_actif}" style="width: 7%;text-align: center">
                                            <p:commandLink style="margin-top: 5px" title="#{(art.actif)?'Desactiver':'Activer'}" global="false" actionListener="#{managedCategorieClt.activePlanTarifaire(art)}" update="data_client_tarif">
                                                <h:graphicImage library="img"  name="#{(art.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                                            </p:commandLink>
                                        </p:column>
                                        <p:column style="width: 5%;text-align: center">
                                            <p:contextMenu for="btn_option_tarif_client" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedCategorieClt.deleteBeanPlanTarif_(art)}" oncomplete="dlgConfirmDeleteTarif_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_tarif_client" type="button"/>
                                        </p:column> 
                                        <p:column style="width: 5%;text-align: center">
                                            <f:facet name="header">
                                                <h:selectBooleanCheckbox styleClass="chek_all_line_client_tarif" value="false"
                                                                         onclick="selectionAllLineTab(#{managedCategorieClt.tarifs.size()}, 'client_tarif')">
                                                </h:selectBooleanCheckbox>
                                            </f:facet>
                                            <h:selectBooleanCheckbox  value="#{art.selectActif}" styleClass="chek_line_client_tarif" 
                                                                      onclick="selectionLineTab(#{art.id}, 'client_tarif')">
                                            </h:selectBooleanCheckbox>
                                        </p:column>
                                    </p:dataTable>
                                    <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                        <p:commandButton id="delete_client_tarif" value="#{lab.L_supprimer}" style="float: left"
                                                         onclick="dlgConfirmDeleteTarif.show()"/>
                                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                                            <p:commandButton actionListener="#{managedCategorieClt.initTarif(false)}" global="false" update="data_client_tarif" icon="ui-icon-circle-triangle-w" disabled="#{managedCategorieClt.pa.disPrev}"/>
                                            <p:outputPanel ><p:outputLabel value="#{managedCategorieClt.pa.currentPage}/#{managedCategorieClt.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                            <p:commandButton actionListener="#{managedCategorieClt.initTarif(true)}" global="false" update="data_client_tarif" icon="ui-icon-circle-triangle-e" disabled="#{managedCategorieClt.pa.disNext}"/>
                                            <p:selectOneMenu value="#{managedCategorieClt.max}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedCategorieClt._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                                <f:selectItems value="#{managedCategorieClt.paginations}"/>
                                                <p:ajax event="valueChange" global="false" update="data_client_tarif"/>
                                            </p:selectOneMenu>
                                        </p:outputPanel> 
                                    </h:panelGrid>
                                </p:outputPanel>
                            </p:outputPanel>  
                        </p:outputPanel>                      
                    </div>
                </div>
                <div class="yvs_list_client_categorie">
                    <h:inputHidden id="input_hide_client_categorie" value="#{managedCategorieClt.tabIds}"/>
                    <p:dataTable id="data_client_categorie" value="#{managedCategorieClt.categories}" var="catClt" paginator="true" rows="15"
                                 rowKey="#{catClt.id}" rowIndexVar="catCltIdx" selectionMode="single" paginatorAlwaysVisible="false"> 
                        <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewCategorie}" oncomplete="dlgAddCategorie.hide()"/>
                        <p:column width="20" headerText="N°">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{catClt.new_}"/>
                            <span>#{catCltIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_code}">
                            <span>#{catClt.code}</span>
                            <h:outputText value="#{lab.LDB_PC_defaut}" rendered="#{catClt.defaut}" style="float: right;font-weight: bold;font-size: 0.8em;font-style: italic;color: blue"/>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_designation}">
                            <span>#{catClt.libelle}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_parent}">
                            <span>#{catClt.parent.libelle}</span>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <p:contextMenu for="btn_option_client_categorie" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_modifier}" icon="ui-icon-pencil" global="false" actionListener="#{managedCategorieClt.onSelectCategorie(catClt)}" oncomplete="collapseForm('client_categorie');collapseForm('client_tarif')"
                                            update=":form_client_categorie:blog_form_categorie_client0"/>
                                <p:menuitem value="#{lab.L_set_defaut}" icon="ui-icon-star" global="false" actionListener="#{managedCategorieClt.activeDefaut(catClt)}" update="data_client_categorie"/>
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedCategorieClt.deleteBean_(catClt)}" oncomplete="dlgConfirmDeleteCategorie_.show()"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_client_categorie" type="button"/>
                        </p:column> 
                        <p:column width="20" style="text-align: center">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox styleClass="chek_all_line_client_categorie" value="false"
                                                         onclick="selectionAllLineTab(#{managedCategorieClt.categories.size()}, 'client_categorie')">
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  value="#{catClt.selectActif}" styleClass="chek_line_client_categorie_client" 
                                                      onclick="selectionLineTab(#{catClt.id}, 'client_categorie')">
                            </h:selectBooleanCheckbox>
                        </p:column>
                    </p:dataTable>
                </div>               
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_liste_compte}" widgetVar="dlgListComptes" modal="true" width="50%" closeOnEscape="true">
                <div class="dlg_part_fixe">
                    <p:watermark value="#{lab.LDB_PC_saisir_compte_g}" for="txt_cmpte_comptes_client"/>
                    <p:watermark value="#{lab.LDB_PC_saisir_nature_compte}" for="txt_nature_comptes_client"/>
                    <h:panelGrid columns="2" style="font-size: 0.7em; float: left">        
                        <h:inputText value="#{managedCompte.numCompteF}" id="txt_cmpte_comptes_client">
                            <p:ajax event="valueChange" listener="#{managedCompte.addParamNumCompte(managedCompte.numCompteF)}" update="data_comptes_client" />
                        </h:inputText>
                        <h:inputText value="#{managedCompte.natureCompteF}" id="txt_nature_comptes_client">
                            <p:ajax event="valueChange" listener="#{managedCompte.addParamNatureCompte(managedCompte.natureCompteF)}" update="data_comptes_client" />
                        </h:inputText>
                    </h:panelGrid>
                    <p:outputPanel style="float: right" layout="block" autoUpdate="true">
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(false)}" update="data_comptes_client" icon="ui-icon-circle-triangle-w" disabled="#{managedCompte.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedCompte.paginator.currentPage}/#{managedCompte.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(true)}" update="data_comptes_client" icon="ui-icon-circle-triangle-e" disabled="#{managedCompte.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedCompte.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedCompte.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedCompte.paginations}"/>
                            <p:ajax event="valueChange" update="data_comptes_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel><div  style="clear: both" />
                </div>
                <div class="dlg_part_scroll">
                    <p:dataTable id="data_comptes_client" value="#{managedCompte.listComptes}" var="cpt" rowKey="#{cpt.id}" 
                                 rowIndexVar="cptIdx" selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false">
                        <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewCompte}"  oncomplete="dlgListComptes.hide()"/>
                        <p:column width="15">
                            <span>#{cptIdx+1}</span>
                        </p:column>
                        <p:column  headerText="#{lab.LDB_PC_numero}" width="30">
                            <span>#{cpt.numCompte}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PC_intitule}">
                            <span>#{cpt.intitule}</span>
                        </p:column>
                    </p:dataTable>  
                </div>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_liste_articles}" widgetVar="dlgListArticle" modal="true" width="50%"  closeOnEscape="true" minHeight="200"> 
                <h:panelGrid columns="2" style="width: 100%;margin-bottom: -5px;margin-top: -5px" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <p:outputPanel style="float: left;margin-left: -10px">
                        <h:inputText value="#{Marticle.numSearch}">
                            <p:ajax event="valueChange" listener="#{Marticle.addParamReference()}" update="data_articles_client"/>
                        </h:inputText>
                    </p:outputPanel>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(false,false)}" global="false" update="data_articles_client" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.pa.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{Marticle.pa.currentPage}/#{Marticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(true,false)}" global="false" update="data_articles_client" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.pa.disNext}"/>
                        <p:selectOneMenu value="#{Marticle.pa.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{Marticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_articles_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </h:panelGrid>
                <p:dataTable value="#{Marticle.articlesResult}" var="art_" rowKey="#{art_.id}" rowIndexVar="artIdx"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false"
                             id="data_articles_client">
                    <p:ajax event="rowSelect" global="false" listener="#{managedCategorieClt.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"
                            update=":form_tarif_client:form_client_tarif"/>
                    <p:column headerText="#{lab.LDB_PC_reference}" style="width: 2%">
                        <span title="#{art_.designation}">#{art_.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_designation}" style="width: 6%">
                        <span title="#{art_.designation}">#{art_.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_categorie}" style="width: 4%">
                        <span title="#{art_.designation}">#{art_.categorie}</span>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>

            <p:dialog header="#{lab.LDB_PC_liste_articles}" widgetVar="dlgListArticleElement" modal="true" width="50%"  closeOnEscape="true" minHeight="200"> 
                <h:panelGrid columns="2" style="width: 100%;margin-bottom: -5px;margin-top: -5px" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <p:outputPanel style="float: left;margin-left: -10px">
                        <h:inputText value="#{Marticle.numSearch}">
                            <p:ajax event="valueChange" listener="#{Marticle.addParamReference()}" update="data-articles_element_contrat_client"/>
                        </h:inputText>
                    </p:outputPanel>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(false,false)}" global="false" update="data-articles_element_contrat_client" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.pa.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{Marticle.pa.currentPage}/#{Marticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(true,false)}" global="false" update="data-articles_element_contrat_client" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.pa.disNext}"/>
                        <p:selectOneMenu value="#{Marticle.pa.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{Marticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data-articles_element_contrat_client"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </h:panelGrid>
                <p:dataTable value="#{Marticle.articlesResult}" var="art_" rowKey="#{art_.id}" rowIndexVar="artIdx"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false"
                             id="data-articles_element_contrat_client">
                    <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewArticle}" oncomplete="dlgListArticleElement.hide()"
                            update=":form_tarif_client:form_client_tarif"/>
                    <p:column headerText="#{lab.LDB_PC_reference}" style="width: 2%">
                        <span>#{art_.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_designation}" style="width: 6%">
                        <span>#{art_.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_categorie}" style="width: 4%">
                        <span>#{art_.categorie}</span>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de pays
        *****************************************************************************
        <-->  
        <h:form prependId="false" >
            <p:dialog header="#{lab.LDB_PC_creation_pays}" widgetVar="dlgAddPays" modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGrid columns="1" style="width: 100%;margin: auto">
                    <span>#{lab.LDB_PC_designation} </span>
                    <h:inputText value="#{Mdico.etat.libelle}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_abbreviation} </span>
                    <h:inputText value="#{Mdico.etat.abreviation}" style="width: 100%"/>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddPays.hide()"
                                 actionListener="#{Mdico.saveNewPays()}" update=":form_client:pays_client"/>/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de villes
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PC_creation_ville}" widgetVar="dlgAddVille" modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGrid columns="1" style="width: 100%;margin: auto">
                    <span>#{lab.LDB_PC_designation} </span>
                    <h:inputText value="#{Mdico.ville.libelle}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_abbreviation} </span>
                    <h:inputText value="#{Mdico.ville.abreviation}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_pays} </span>
                    <h:inputText id="txt_pays_ville_0" value="#{managedClient.client.tiers.pays.libelle}" readonly="true" style="width: 100%"/> 
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddVille.hide()" update=":form_client:ville_client"
                                 actionListener="#{Mdico.saveNewVille(managedClient.client.tiers.pays)}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form> 

        <!-->
        *****************************************************************************
        Boite de dialogue de secteur
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog  header="#{lab.LDB_PC_creation_secteur}" widgetVar="dlgAddSecteur" modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGrid columns="1" style="width: 100%;margin: auto">
                    <span>#{lab.LDB_PC_designation} </span>
                    <h:inputText value="#{Mdico.secteur.libelle}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_abbreviation} </span>
                    <h:inputText value="#{Mdico.secteur.abreviation}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_ville} </span>
                    <h:inputText id="txt_ville_secteur_0" value="#{managedClient.client.tiers.ville.libelle}" readonly="true" style="width: 100%"/> 
                    <span>#{lab.LDB_PC_pays} </span>
                    <h:inputText id="txt_pays_secteur_0" value="#{managedClient.client.tiers.pays.libelle}" readonly="true" style="width: 100%"/> 
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddSecteur.hide()" update=":form_client:secteur_client"
                                 actionListener="#{Mdico.saveNewSecteur(managedClient.client.tiers.ville)}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form> 

        <!-->
        *****************************************************************************
        Boite de dialogue de mode de paiement
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgAddModePaiement_client">
            <p:dialog id="dlgAddModePaiement_client" header="#{lab.LDB_PC_model_reglement}" widgetVar="dlgAddModePaiement" 
                      modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGrid id="blog_form_mode_paiement_plan_reglement_client" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PC_designation} </span>
                    <h:inputText value="#{managedModeReglement.mode.designation}" style="width: 100%"/>
                    <span>#{lab.LDB_PC_description} </span>
                    <h:inputTextarea value="#{managedModeReglement.mode.description}" rows="5" style="width: 100%"/>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddModePaiement.hide()"
                                 actionListener="#{managedModeReglement.saveNew()}" 
                                 update="blog_form_mode_paiement_plan_reglement_client"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>


        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDistant" closeOnEscape="true"
                             message="#{lab.LDB_PC_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient._onSelectDistantFacture()}" oncomplete="dlgConfirmDistant.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDistant.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTarifaire" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.deleteBeanTarifaire()}" update=":form_client:tab_view_client:blog_form_client_tarifaire"
                                 oncomplete="dlgConfirmDeleteTarifaire.hide();collapseForm('client_tarifaire')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteTarifaire.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTarifaire_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="Oui" actionListener="#{managedClient.deleteBeanTarifaire_()}" update=":form_client:tab_view_client:blog_form_client_tarifaire"
                                 oncomplete="dlgConfirmDeleteTarifaire_.hide();collapseForm('client_tarifaire')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteTarifaire_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteContrat" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.deleteBeanContrat(managedClient.selectContrat, true)}" update=":form_client:tab_view_client:blog-contrat_client"
                                 oncomplete="dlgConfirmDeleteContrat.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteContrat.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteElementContrat" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.deleteBeanElement(managedClient.selectElement, true)}" update=":main-contrat:tabview-contrat_client:data-element_contrat_client"
                                 oncomplete="dlgConfirmDeleteElementContrat.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteElementContrat.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteAdditionnelContrat" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.deleteBeanAdditionnel(managedClient.selectAdditionnel, true)}" update=":main-contrat:tabview-contrat_client:data-additionnel_contrat_client"
                                 oncomplete="dlgConfirmDeleteAdditionnelContrat.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteAdditionnelContrat.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTranche" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedModeReglement.deleteBeanTranche()}" update=":main_model_client:data_tranche_model_client"
                                 oncomplete="dlgConfirmDeleteTranche.hide();collapseForm('tranche_plan_reglement0')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteTranche.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTranche_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedModeReglement.deleteBeanTranche_()}" update=":main_model_client:data_tranche_model_client"
                                 oncomplete="dlgConfirmDeleteTranche_.hide();collapseForm('tranche_plan_reglement0')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteTranche_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePlanReglementClt" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedModeReglement.deleteBeanModel()}" update=":main_model_client:data_model_client"
                                 oncomplete="dlgConfirmDeletePlanReglementClt.hide();collapseForm('plan_reglement_client')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePlanReglementClt.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePlanReglementClt_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedModeReglement.deleteBeanModel_()}" update=":main_model_client:data_model_client"
                                 oncomplete="dlgConfirmDeletePlanReglementClt_.hide();collapseForm('plan_reglement_client')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePlanReglementClt_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTarif" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedCategorieClt.deleteBeanPlanTarif()}" update=":form_client_categorie:data_client_tarif"
                                 oncomplete="dlgConfirmDeleteTarif.hide();collapseForm('client_tarif')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteTarif.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTarif_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedCategorieClt.deleteBeanPlanTarif_()}" update=":form_client_categorie:data_client_tarif"
                                 oncomplete="dlgConfirmDeleteTarif_.hide();collapseForm('client_tarif')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteTarif_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCategorie" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedCategorieClt.deleteBean()}" oncomplete="dlgConfirmDeleteCategorie.hide()"
                                 update=":form_client:tab_view_client:txt_categorie_client_client :form_client_categorie:data_client_categorie"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCategorie.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCategorie_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedCategorieClt.deleteBean_()}" oncomplete="dlgConfirmDeleteCategorie_.hide()"
                                 update=":form_client:tab_view_client:txt_categorie_client_client :form_client_categorie:data_client_categorie"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCategorie_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteContact" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTiers.deleteBeanContact()}" update=":form_client:data_tiers_contact" 
                                 oncomplete="dlgConfirmDeleteContact.hide();collapseForm('tiers_contact')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteContact.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteContact_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTiers.deleteBeanContact_()}" update=":form_client:data_tiers_contact"
                                 oncomplete="dlgConfirmDeleteContact_.hide();collapseForm('tiers_contact')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteContact_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTiers" closeOnEscape="true"
                             message="#{lab.LDB_PC_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient.deleteBean(true)}" oncomplete="dlgConfirmDeleteTiers.hide()"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedClient.deleteBean(false)}" oncomplete="dlgConfirmDeleteTiers.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton type="button"  value="#{lab.L_oui}" onclick="dlgConfirmDelete.hide(), dlgConfirmDeleteTiers.show()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteTiers_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedClient._deleteBean(true)}" oncomplete="dlgConfirmDeleteTiers_.hide()"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedClient._deleteBean(false)}" oncomplete="dlgConfirmDeleteTiers_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="#{lab.LDB_PC_text2}" header="#{lab.L_confirmation}">
                <p:commandButton type="button"  value="#{lab.L_oui}" onclick="dlgConfirmDelete_.hide(), dlgConfirmDeleteTiers_.show()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire ;
       *****************************************************************************
       <-->
        <h:form prependId="false" id="form_client">    
            <div class="part_fix">
                <p:splitButton value="#{lab.L_enregistrer}" id="save_client" actionListener="#{managedClient.saveNew()}" update="blog_form_client btn_tiers_client txt_code_tiers_client" oncomplete="collapseForm('client_tarifaire');collapseForm('tiers_contact');collapseForm('categorie_tarifaire')"
                               icon="ui-icon-disk">
                    <p:menuitem value="#{lab.L_nouveau}" id="cancel_client" icon="ui-icon-document" actionListener="#{managedClient.resetFiche()}" update="blog_form_client" oncomplete="collapseForm('tiers_contact');collapseForm('client_tarifaire');collapseForm('categorie_tarifaire')"/>
                    <p:separator />
                    <p:menuitem value="#{lab.L_supprimer}"  icon="ui-icon-trash" global="false" onclick="dlgConfirmDelete.show()"/>

                </p:splitButton>

                <p:splitButton value="#{lab.L_supprimer}"  icon="ui-icon-trash" id="delete_client" global="false" onclick="dlgConfirmDelete.show()">
                    <p:menuitem value="#{lab.LDB_PC_exporter}" icon="ui-icon-extlink" actionListener="#{managedClient.export()}" ajax="false"/>
                    <p:menuitem value="#{lab.L_fusionner}" icon="ui-icon-refresh" actionListener="#{managedClient.fusionner(true)}" global="false"
                                oncomplete="dlgConfirmFusion.show()" update=":main_fusionn_client:blog_fusionner_client"/>
                    <p:separator/>
                    <p:menuitem value="#{lab.LDB_PC_maj_code}" icon="ui-icon-pencil" onclick="dlgConfirmMAJCode.show()"/>
                </p:splitButton>
                <p:contextMenu event="left click" for="btn_clt_other_option" styleClass="context_menu"
                               style="width: 300px">
                    <p:menuitem value="#{lab.LDB_PC_parametrer_liaison_externe}" icon="ui-icon-link" actionListener="#{managedClient.setDisplayParamExt(true)}"
                                update="zone_param_lien_clt_ext"/>
                </p:contextMenu>
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton title="#{lab.L_autres_option}" type="button"  icon="ui-icon-gear" style="margin-right: 2%" id="btn_clt_other_option"/>
                    <p:commandButton actionListener="#{managedClient.parcoursInAllResult(false)}" update="txt_parc_linear_clt data_client" icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('client')"/>
                    <h:inputText value="#{managedClient.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_clt"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedClient.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedClient.parcoursInAllResult(true)}" update="txt_parc_linear_clt data_client" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('client')"/>
                </h:panelGroup>                
                <div style="float: right">
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('client');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('client');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>   
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_client">
                    <p:outputPanel id="blog_form_client" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">
                            <span>#{lab.LDB_PC_societe} </span>  
                            <h:selectBooleanCheckbox id="chk_societe_client" value="#{managedClient.client.tiers.societe}" disabled="#{managedClient.client.defaut}">
                                <p:ajax event="valueChange" update="infos_tiers_client" process="@this" global="false"/>
                            </h:selectBooleanCheckbox>                                      
                        </h:panelGrid>  
                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="margin-left: 30%;float: left;border: 2px solid #666; border-radius: 5px;background: #666;color: white">
                            <span>#{lab.LDB_PC_client_defaut} </span>  
                            <h:selectBooleanCheckbox value="#{managedClient.client.defaut}" title="#{lab.LDB_PC_client_defaut}" style="float: right" id="chk_defautl_client">    
                                <p:ajax event="valueChange" listener="#{managedClient.changeDefaut()}" update="@this chk_societe_client infos_tiers_client" process="@this" global="false"/>
                            </h:selectBooleanCheckbox>                                  
                        </h:panelGrid> 
                        <h:outputText value="#{managedClient.client.id}" styleClass="style_identifiant" style="margin-left: 0%;float: left;"/>
                        <p:contextMenu for="btn_tiers_client" event="left click" styleClass="context_menu">
                            <p:menuitem value="#{lab.LDB_PC_liste_tiers}" icon="ui-icon-folder-open"  title="#{lab.LDB_PC_ouvrir_tiers_existant}"  global="false" actionListener="#{managedClient.update('data_tiers')}"
                                        oncomplete="dlgListTiers.show()" disabled="#{managedClient.updateClient}" />
                            <p:menuitem value="#{lab.LDB_PC_naviguer}"  title="#{lab.LDB_PC_aller_vers_tiers_selectionner}" icon="ui-icon-arrowthick-1-e"  actionListener="#{managedClient.onSelectDistantTiers(client.tiers.id)}"
                                        disabled="#{client.tiers.id le 0}" />
                        </p:contextMenu>
                        <h:panelGrid columns="3" style="float: right" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                            <h:graphicImage id="btn_tiers_client" library="icones" name="tiers.png" width="20" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            <h:inputText value="#{managedClient.client.tiers.codeTiers}" id="txt_code_tiers_client">
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.searchTiers()}" update="@this"/>
                            </h:inputText> 
                            <p:commandLink id="btnContacts_client" global="false" style="float: right;border: 2px solid #666; border-radius: 5px;padding: 3px">
                                <h:graphicImage title="#{lab.LDB_PC_contact}" library="icones" name="phone.png" width="20" height="20"/>    
                            </p:commandLink>
                            <p:overlayPanel for="btnContacts_client" hideEffect="fade" style="width: 30%">
                                <p:outputPanel id="blog_form_tiers_contact">
                                    <h:panelGrid id="form_tiers_contact" columns="4" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                        <span>#{lab.LDB_PC_numero} </span>
                                        <h:inputText value="#{managedTiers.contact.numero}"/>
                                        <h:selectBooleanCheckbox value="#{managedTiers.contact.principal}" title="#{lab.LDB_PT_principal}?"/> 
                                        <p:commandButton id="save_tiers_contact" icon="ui-icon-circle-plus" style="float: right; width: 22px; height: 22px"
                                                         update="form_tiers_contact data_tiers_contact" actionListener="#{managedTiers.saveNewContact()}"/>
                                    </h:panelGrid>
                                    <h:inputHidden id="input_hide_tiers_contact" value="#{managedTiers.tabIds_contact}"/>
                                    <p:dataTable id="data_tiers_contact" value="#{managedTiers.contacts}" var="cont" rowKey="#{cont.id}" 
                                                 rowIndexVar="contIdx" selectionMode="single">
                                        <p:ajax event="rowSelect" listener="#{managedTiers.loadOnViewContact}" update=":form_client:form_tiers_contact"/>
                                        <p:ajax event="rowUnselect" listener="#{managedTiers.unLoadOnViewContact}" update=":form_client:form_tiers_contact"/>
                                        <p:column headerText="N°" style="width: 12%">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{cont.new_}"/>
                                            <span>#{contIdx+1}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PC_numero}" style="text-align: center">
                                            <h:outputText value="#{cont.numero}" converter="PHONE"/>
                                            <h:graphicImage title="#{lab.LDB_PC_numero_principal}" library="img"  name="bookmark.png" width="15" height="15" rendered="#{cont.principal}" style="float: right"/>
                                        </p:column>
                                        <p:column style="width: 10%;text-align: center">                                            
                                            <p:contextMenu for="btn_option_contact_client" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="Set Principal" icon="ui-icon-star" actionListener="#{managedTiers.activeContact(cont)}" update="data_tiers_contact"/>
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedTiers.deleteBeanContact_(cont)}" oncomplete="dlgConfirmDeleteContact_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contact_client" type="button"/>
                                        </p:column>
                                        <p:column style="width: 10%;text-align: center">
                                            <f:facet name="header">
                                                <h:selectBooleanCheckbox styleClass="chek_all_line_tiers_contact" value="false"
                                                                         onclick="selectionAllLineTab(#{managedTiers.contacts.size()}, 'tiers_contact')">
                                                </h:selectBooleanCheckbox>
                                            </f:facet>
                                            <h:selectBooleanCheckbox  value="#{cont.select}" styleClass="chek_line_tiers_contact" 
                                                                      onclick="selectionLineTab(#{cont.id}, 'tiers_contact')">
                                            </h:selectBooleanCheckbox>
                                        </p:column>
                                    </p:dataTable>
                                    <p:commandButton id="delete_tiers_contact" value="#{lab.L_supprimer}" style="float: right"
                                                     onclick="dlgConfirmDeleteContact.show()"/>
                                </p:outputPanel>
                            </p:overlayPanel>
                        </h:panelGrid>
                        <h:panelGrid style="width: 100%;margin-top: -15px" columns="4" cellpadding="0" cellspacing="0" styleClass="yvs_table" id="infos_tiers_client">
                            <f:facet name="header">
                                <h:panelGrid id="form_secteur_client" columns="7" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                                    <span>#{lab.LDB_PC_pays} </span>
                                    <h:selectOneMenu value="#{managedClient.client.tiers.pays.id}" id="pays_client" style="min-width: 120px" tabindex="1">
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItems value="#{Mdico.pays}" var="pys" 
                                                       itemLabel="#{pys.libele}" itemValue="#{pys.id}" />
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItem itemLabel="#{lab.L_plus_option}" itemValue="-1"/>                                    
                                        <p:ajax event="valueChange" global="false" listener="#{managedClient.choosePays()}"
                                                update="ville_client secteur_client chk_defautl_client"/>
                                    </h:selectOneMenu>
                                    <span>#{lab.LDB_PC_ville} </span>
                                    <h:selectOneMenu value="#{managedClient.client.tiers.ville.id}" id="ville_client" style="min-width: 120px" tabindex="3">
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItems value="#{Mdico.villes}" var="dic" 
                                                       itemLabel="#{dic.libele}" itemValue="#{dic.id}" />
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItem itemLabel="#{lab.L_creer}" itemValue="-1"/>                                    
                                        <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseVille()}"  
                                                update="secteur_client  chk_defautl_client"/>
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PC_secteur} </span>
                                    <h:selectOneMenu value="#{managedClient.client.tiers.secteur.id}" id="secteur_client" style="min-width: 120px" tabindex="5">
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItems value="#{Mdico.secteurs}" var="sec" 
                                                       itemLabel="#{sec.libele}" itemValue="#{sec.id}" />
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItem itemLabel="#{lab.L_creer}" itemValue="-1"/>                                    
                                        <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseSecteur()}"/>
                                    </h:selectOneMenu> 
                                    <h:panelGroup style="float: right">
                                        <p:selectBooleanCheckbox value="#{managedClient.client.actif}" itemLabel="#{lab.L_actif}" tabindex="7"/>
                                        <p:selectBooleanCheckbox value="#{managedClient.client.confirmer}" itemLabel="#{lab.L_confirmer} ? " style="float: right" rendered="#{managedClient.currentScte.venteOnline}"/>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </f:facet>
                            <h:panelGroup>
                                <span>#{lab.LDB_PC_code} </span> 
                                <p:commandLink title="#{managedClient.generation?'Déactiver':'Activer'} #{lab.LDB_PC_generation_code_tiers}" actionListener="#{managedClient.activeGenerationCode()}" 
                                               global="false" style="float: right;margin-top: 4px" update="@this">
                                    <p:graphicImage library="img" name="#{managedClient.generation?'connecte.png':'deconnecte.png'}" width="12" height="12"/>
                                </p:commandLink> 
                            </h:panelGroup>
                            <h:panelGroup id="txt_code_client">
                                <h:inputText  value="#{managedClient.client.codeClient}" tabindex="10" style="background: #009999;font-weight: bold">
                                    <p:ajax event="valueChange" global="false"/>
                                </h:inputText>
                                <p:commandLink title="#{lab.LDB_PC_template}" onclick="dlgListTemplate.show()" global="false" style="float: right">
                                    <p:graphicImage library="icones" name="ico_facture2.png" width="20" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                                </p:commandLink>  
                            </h:panelGroup>  
                            <h:outputText value="#{(!client.tiers.societe)?'Nom':'Désignation'}" id="chp_label_s_client"/>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{managedClient.client.tiers.civilite}" rendered="#{!client.tiers.societe}" tabindex="11">
                                    <f:selectItem itemLabel="Mme" itemValue="Mme"/>
                                    <f:selectItem itemLabel="M." itemValue="M."/>
                                </h:selectOneMenu>
                                <p:spacer width="2"/>
                                <h:inputText value="#{managedClient.client.nom}" tabindex="20" style="width: 75%">
                                    <p:ajax event="valueChange" global="false" listener="#{managedClient.changeName()}"/>
                                </h:inputText>
                            </h:panelGroup>  
                            <h:outputText value="Prenom" rendered="#{!client.tiers.societe}"/>  
                            <h:inputText value="#{managedClient.client.prenom}" rendered="#{!client.tiers.societe}" tabindex="30">
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.changeName()}"/>
                            </h:inputText>
                            <h:outputText value="Site Web" rendered="#{managedClient.client.tiers.societe}"/>  
                            <h:inputText value="#{managedClient.client.tiers.site}" rendered="#{managedClient.client.tiers.societe}" tabindex="30"/>
                            <span>#{lab.LDB_PC_email} </span>
                            <h:inputText value="#{managedClient.client.tiers.email}" converter="EMAIL" tabindex="40"/>
                            <span title="#{lab.LDB_PC_zones_geographique}">#{lab.LDB_PC_zones} </span>
                            <h:selectOneMenu value="#{managedClient.client.ligne.id}" valueChangeListener="#{managedClient.chooseLigne}" >
                                <f:selectItem itemLabel="" itemValue="0" />
                                <f:selectItems value="#{managedPointLivraison.points}" var="ipt" itemLabel="#{ipt.libelle}" itemValue="#{ipt.id}" />
                                <p:ajax event="valueChange" global="false" />
                            </h:selectOneMenu>
                            <span>#{lab.LDB_PC_code_postal} </span>
                            <h:inputText value="#{managedClient.client.tiers.codePostal}" tabindex="60"/>
                            <span>#{lab.LDB_PC_plan_ristourne} </span>
                            <h:selectOneMenu value="#{managedClient.client.ristourne.id}" id="txt_ristourne_client" style="min-width: 120px" title="#{lab.LDB_PC_plan_ristourne}"
                                             tabindex="70" disabled="#{!accesRessource.base_client_change_ristourne}">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedRistourne.plans}" var="ris" itemLabel="#{ris.reference}" itemValue="#{ris.id}" />     
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.changeRistourne()}"/>                  
                            </h:selectOneMenu> 
                            <span>#{lab.LDB_PC_model_reglement} </span>
                            <h:selectOneMenu value="#{managedClient.client.model.id}" id="txt_model_client" style="min-width: 120px" tabindex="80" title="#{lab.LDB_PC_model_reglement}">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedModeReglement.models}" var="model" 
                                               itemLabel="#{model.reference}" itemValue="#{model.id}" />    
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItem itemLabel="#{lab.L_plus_option}" itemValue="-1"/>          
                                <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseModel()}"/>               
                            </h:selectOneMenu> 
                            <span>#{lab.LDB_PC_compte_collectif}</span>
                            <h:panelGroup>
                                <h:panelGroup id="txt_compte_client">
                                    <h:inputText value="#{managedClient.client.compteCollectif.numCompte}" style="color: #{managedClient.client.compteCollectif.error?'red':''};width: 35%" tabindex="90">
                                        <p:ajax event="valueChange" global="false" listener="#{managedClient.searchCompte()}" update="txt_compte_client"/>
                                    </h:inputText>    
                                    <h:outputText value="#{managedClient.client.compteCollectif.intitule}" style="color: green"/>
                                </h:panelGroup>
                                <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px" title="#{lab.LDB_PP_liste_compte}" global="false"
                                                 oncomplete="dlgListComptes.show()"/>
                            </h:panelGroup>
                            <span>#{lab.LDB_PC_categorie_comptable} </span>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{managedClient.client.categorieComptable.id}" id="txt_categorie_comptable_client" tabindex="100"
                                                 onchange="openDialog(dlgAddCategorieComp, $(this))" title="#{lab.LDB_PC_categorie_comptable}">
                                    <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                    <f:selectItems value="#{managedCatCompt.categoriesVente}" var="catC" 
                                                   itemLabel="#{catC.designation}" itemValue="#{catC.id}" />
                                    <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                    <f:selectItem itemLabel="#{lab.L_plus_option}" itemValue="-1"/>                                  
                                </h:selectOneMenu> 
                                <h:panelGroup style="float: right">
                                    <span>#{lab.LDB_PC_suivi_comptable} ?</span>
                                    <h:selectBooleanCheckbox value="#{managedClient.client.suiviComptable}" tabindex="101"/>
                                </h:panelGroup>
                            </h:panelGroup>
                            <span>#{lab.LDB_PC_seuil_solde}</span>
                            <h:panelGroup>
                                <h:inputText value="#{managedClient.client.seuilSolde}" style="text-align: right" tabindex="105"/>
                                <span style="font-size: 0.8em;float: right;margin-top: 2px">. Fcfa</span>
                                <h:outputText value="#{managedClient.abs(managedClient.client.solde)}" converter="DNA" 
                                              style="color: #{managedClient.client.solde gt 0 ? 'green':(managedClient.client.solde lt 0 ? '#D20005' : 'black')}; float: right"/>
                            </h:panelGroup>
                            <span>#{lab.LDB_PC_responsable} </span>
                            <h:inputText value="#{managedClient.client.tiers.responsable}" style="width: 90%" tabindex="110"/>
                            <f:facet name="footer">
                                <div align="left">
                                    <div class="float: left">
                                        <span>#{lab.LDB_PC_representant} : </span>
                                        <h:panelGroup id="txt_repr_client">
                                            <h:inputText value="#{managedClient.client.representant.codeUsers}" title="#{managedClient.client.representant.nomUsers}" style="color: #{managedClient.client.representant.error?'red':''}">
                                                <p:ajax event="valueChange" global="false" listener="#{managedClient.searchRepresentant()}" update="txt_repr_client"/>
                                            </h:inputText>  
                                            <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white" title="Liste Livreurs" global="false"
                                                             actionListener="#{managedClient.initRepresentants()}" oncomplete="dlgListUsers.show()"/>
                                            <h:outputText value="#{managedClient.client.representant.nomUsers}" style="color: #009999;margin-left: 10px"/>
                                        </h:panelGroup>
                                    </div>
                                    <p:selectBooleanCheckbox value="#{managedClient.client.exclusForHome}" style="float: left;margin-top: 5px" itemLabel="Exclure des tableaux de bord accueil ?"/>
                                    <p:selectBooleanCheckbox value="#{managedClient.client.venteOnline}" itemLabel="#{lab.LDB_PC_vente_en_ligne} ? " style="float: right;margin-top: 5px" rendered="#{managedClient.currentScte.venteOnline}"/>
                                    <h:panelGroup id="zone_param_lien_clt_ext" style="float: right" >
                                        <h:panelGroup rendered="#{managedClient.displayParamExt}">
                                            <span>#{lab.LDB_PC_code_externe} </span>
                                            <h:inputText value="#{managedClient.codeExterne}"/>
                                            <p:commandButton value="#{lab.LDB_PC_appliquer}" actionListener="#{managedClient.saveLiaison()}"/>
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </div>
                            </f:facet>
                        </h:panelGrid> 
                        <div style="clear: right"/>
                        <p:tabView id="tab_view_client">
                            <p:tab title="#{lab.LDB_PC_categorie_tarifaire}">
                                <p:outputPanel id="blog_form_client_tarifaire">
                                    <div style="width: 35%;float: left">
                                        <h:panelGrid id="form_client_tarifaire" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                            <span>#{lab.LDB_PC_categorie}</span>
                                            <h:selectOneMenu value="#{managedClient.idCategorie}" id="txt_categorie_client_client" disabled="#{managedClient.tarifaire.update}" tabindex="120">
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{managedCategorieClt.categories}" var="cat" 
                                                               itemLabel="#{cat.libelle}" itemValue="#{cat.id}" />
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItem itemLabel="#{lab.L_plus_option}" itemValue="-1"/>   
                                                <p:ajax event="valueChange" global="false" listener="#{managedClient.chooseCategorieClt()}"/> 
                                            </h:selectOneMenu> 
                                            <span>#{lab.LDB_PC_permanent}</span>
                                            <h:selectBooleanCheckbox value="#{managedClient.tarifaire.permanent}" tabindex="130">
                                                <p:ajax event="valueChange" global="false" update="date_debut_tarifaire date_fin_tarifaire"/>
                                            </h:selectBooleanCheckbox>
                                            <span>#{lab.LDB_PC_date_debut} </span>
                                            <p:calendar id="date_debut_tarifaire" value="#{managedClient.tarifaire.dateDebut}" navigator="true" pattern="dd-MM-yyyy" disabled="#{managedClient.tarifaire.permanent}" tabindex="135"/>
                                            <span>#{lab.LDB_PC_date_fin} </span>
                                            <p:calendar id="date_fin_tarifaire" value="#{managedClient.tarifaire.dateFin}" navigator="true" pattern="dd-MM-yyyy" disabled="#{managedClient.tarifaire.permanent}" tabindex="140"/>
                                            <span>#{lab.LDB_PC_priorite}</span>
                                            <h:inputText value="#{managedClient.tarifaire.priorite}" readonly="true" style="width: 30%"/>
                                        </h:panelGrid>
                                        <div style="margin-top: 5px">
                                            <p:commandButton value="#{lab.L_nouveau}" style="float: left" oncomplete="collapseForm('client_tarifaire')"
                                                             update="form_client_tarifaire" actionListener="#{managedClient.resetFicheTarifaire()}" global="false"/>
                                            <p:commandButton value="#{lab.L_enregistrer}" style="float: right" oncomplete="collapseForm('client_tarifaire')"
                                                             update="form_client_tarifaire data_client_tarifaire" actionListener="#{managedClient.saveNewTarifaire()}"
                                                             disabled="#{!accesRessource.base_client_associer_tarifaire}"/>
                                        </div>
                                    </div>
                                    <div style="width: 64%;margin-left: 36%">
                                        <p:dataTable id="data_client_tarifaire" value="#{managedClient.tarifaires}" var="tar" rowKey="#{tar.id}"
                                                     rowIndexVar="tarIdx" selectionMode="single" paginator="true" rows="10" paginatorAlwaysVisible="false">
                                            <p:ajax event="rowSelect" global="false" listener="#{managedClient.loadOnViewTarifaire}" update=":form_client:tab_view_client:form_client_tarifaire"/>
                                            <p:ajax event="rowUnselect" global="false" listener="#{managedClient.unLoadOnViewTarifaire}" update=":form_client:tab_view_client:form_client_tarifaire"/>
                                            <p:column style="width: 7%;" headerText="N°"> 
                                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{tar.new_}"/>
                                                <span>#{tarIdx+1}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_categorie}">
                                                <span>#{tar.categorie.libelle}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_interval}">
                                                <h:outputText value="--(PERMANENT)--" rendered="#{tar.permanent}"/>
                                                <h:panelGroup rendered="#{!tar.permanent}">
                                                    <span>#{lab.LDB_PC_du} </span>
                                                    <h:outputText value="#{tar.dateDebut}" converter="DDMMYYYY"/>
                                                    <span> #{lab.LDB_PC_au} </span>
                                                    <h:outputText value="#{tar.dateFin}" converter="DDMMYYYY"/>
                                                </h:panelGroup>
                                            </p:column>
                                            <p:column headerText="#{lab.L_actif}" style="width: 7%;text-align: center">
                                                <p:commandLink title="#{(tar.actif)?'Desactiver':'Activer'}" global="false" actionListener="#{managedClient.activeTarifaire(tar)}"
                                                               update="data_client_tarifaire" disabled="#{!accesRessource.base_client_associer_tarifaire}">
                                                    <h:graphicImage library="img"  name="#{(tar.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                                                </p:commandLink>
                                            </p:column>
                                            <p:column style="width: 8%;text-align: center">
                                                <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LDB_PC_monter}" actionListener="#{managedClient.repositionnerTarifaire(tar,true)}"
                                                                 style="width: 16px;height: 16px" update="data_client_tarifaire" disabled="#{!accesRessource.base_client_associer_tarifaire}"/>
                                                <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LDB_PC_descendre}" actionListener="#{managedClient.repositionnerTarifaire(tar,false)}"
                                                                 style="width: 16px;height: 16px" update="data_client_tarifaire" disabled="#{!accesRessource.base_client_associer_tarifaire}"/>
                                            </p:column> 
                                            <p:column style="width: 8%;text-align: center">
                                                <p:contextMenu for="btn_option_categ_client" event="left click" style="font-size: 0.8em">
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedClient.deleteBeanTarifaire_(tar)}"
                                                                oncomplete="dlgConfirmDeleteTarifaire_.show()" disabled="#{!accesRessource.base_client_associer_tarifaire}"/>
                                                </p:contextMenu>                           
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_categ_client" type="button"/>
                                            </p:column> 
                                        </p:dataTable>
                                        <p:commandButton id="delete_client_tarifaire" value="#{lab.L_supprimer}" style="float: right"
                                                         onclick="dlgConfirmDeleteTarifaire.show()" rendered="false"/>
                                    </div>
                                </p:outputPanel>
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab title="Fichiers">
                                <h:panelGrid id="form-tiers_document" columns="#{managedTiersDocument.showOther()?'5':'4'}" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <h:outputText value="Type"/>
                                    <h:outputText value="Titre" rendered="#{managedTiersDocument.showOther()}"/>
                                    <h:outputText value="Numéro"/>
                                    <h:outputText value="Fichier"/>
                                    <h:outputText value=""/>
                                    <h:selectOneMenu value="#{managedTiersDocument.bean.type}">
                                        <f:selectItem itemLabel="Autre" itemValue="#{constantes.AUTRE}"/>
                                        <f:selectItem itemLabel="#{constantes.FILE_TIERS_NUI_NAME}" itemValue="#{constantes.FILE_TIERS_NUI}"/>
                                        <f:selectItem itemLabel="#{constantes.FILE_TIERS_RCC_NAME}" itemValue="#{constantes.FILE_TIERS_RCC}"/>
                                        <f:selectItem itemLabel="#{constantes.FILE_TIERS_RIB_NAME}" itemValue="#{constantes.FILE_TIERS_RIB}"/>
                                        <p:ajax event="valueChange" update="form-tiers_document" listener="#{managedTiersDocument.chooseType()}"/>
                                    </h:selectOneMenu>
                                    <h:panelGroup id="value-titre_document_titre" rendered="#{managedTiersDocument.showOther()}">
                                        <p:watermark value="Preciser le titre" for="value-titre_document_titre_other"/>
                                        <h:inputText id="value-titre_document_titre_other" value="#{managedTiersDocument.bean.titre}">
                                            <p:ajax event="valueChange" global="false"/>                                                
                                        </h:inputText>
                                    </h:panelGroup>
                                    <h:inputText value="#{managedTiersDocument.bean.numero}">
                                        <p:ajax event="valueChange" global="false"/>                                                
                                    </h:inputText>
                                    <h:panelGroup>
                                        <h:inputText value="#{managedTiersDocument.bean.extension}" readonly="true" style="width: 50px;text-align: center"
                                                     ondblclick="dlgUploadFile.show()" title="Cliquer 2 fois pour choisir un fichier"/>
                                        <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="Choisir un fichier"
                                                         type="button" onclick="dlgUploadFile.show()"/>
                                    </h:panelGroup>
                                    <p:commandButton icon="ui-icon-disk" value="Ajouter" actionListener="#{managedTiersDocument.saveNew()}"/>
                                </h:panelGrid>
                                <p:dataTable id="data-tiers_document" value="#{managedTiersDocument.list}" var="doc" rowKey="#{doc.id}" rowIndexVar="Idx"
                                             selectionMode="single">
                                    <p:ajax event="rowSelect" listener="#{managedTiersDocument.loadOnView}" update="@this"/>
                                    <p:ajax event="rowUnselect" listener="#{managedTiersDocument.unLoadOnView}" update="@this"/>
                                    <p:column headerText="N°" style="width: 5px">
                                        <span >#{Idx+1}</span>
                                    </p:column>
                                    <p:column headerText="Titre" style="font-weight: bold">
                                        <span>#{doc.titre}</span>
                                    </p:column>
                                    <p:column headerText="Numero" style="text-align: center">
                                        <span>#{doc.numero}</span>
                                    </p:column>
                                    <p:column style="text-align: center;width: 5px">
                                        <f:facet name="header">
                                            <p:contextMenu for="btn_option_tiers_document_head" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{managedTiersDocument.deleteBean()}"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px;background: white!important" id="btn_option_tiers_document_head" type="button"/>
                                        </f:facet>
                                        <p:contextMenu for="btn_option_tiers_document" event="left click" style="font-size: 0.8em">
                                            <p:menuitem value="Apercu" icon="ui-icon-zoomin" actionListener="#{managedTiersDocument.onBuildApercu(doc)}"
                                                        oncomplete="dlgMediaApercu.show()" update=":form-apercu:media-apercu"/>
                                            <p:separator/>
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedTiersDocument.deleteBean(doc)}"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_tiers_document" type="button"/>
                                    </p:column> 
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PC_contrats}">
                                <p:outputPanel id="blog-contrat_client">
                                    <div style="width: 35%;float: left">
                                        <h:panelGrid id="form-contrat_client" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                            <f:facet name="header">
                                                <h:panelGroup rendered="#{managedClient.contrat.id gt 0}" style="float: left">
                                                    <span>N° </span><h:outputText value="#{managedClient.contrat.reference}" styleClass="style_reference" style="font-size: 1.1em"/>
                                                </h:panelGroup>
                                            </f:facet>
                                            <span>#{lab.LDB_PC_type}</span>
                                            <h:selectOneMenu value="#{managedClient.contrat.type}">
                                                <f:selectItem itemLabel="#{lab.LDB_PC_defini}" itemValue="#{'D'}" />
                                                <f:selectItem itemLabel="#{lab.LDB_PC_indefini}" itemValue="#{'I'}"/>
                                                <p:ajax event="valueChange" global="false" update="date-expiration_contrat_client"/>
                                            </h:selectOneMenu> 
                                            <span>#{lab.LDB_PC_date_expiration} </span>
                                            <p:calendar id="date-expiration_contrat_client" value="#{managedClient.contrat.dateExpiration}" navigator="true"
                                                        pattern="dd-MM-yyyy" disabled="#{managedClient.contrat.type eq 'I'}"/>
                                            <span>#{lab.LDB_PC_date_facturation} </span>
                                            <p:calendar value="#{managedClient.contrat.dateDebutFacturation}" navigator="true" pattern="dd-MM-yyyy"/>
                                            <span>#{lab.LDB_PC_periodicite}</span>
                                            <h:panelGroup>
                                                <h:inputText value="#{managedClient.contrat.intervalFacturation}" style="width: 50px;text-align: center"/>
                                                <h:selectOneMenu value="#{managedClient.contrat.periodeFacturation}">
                                                    <f:selectItem itemLabel="#{constantes.UNITE_JOUR}" itemValue="#{constantes.UNITE_JOUR_}"/>
                                                    <f:selectItem itemLabel="#{constantes.UNITE_SEMAINE}" itemValue="#{constantes.UNITE_SEMAINE_}"/>
                                                    <f:selectItem itemLabel="#{constantes.UNITE_MOIS}" itemValue="#{constantes.UNITE_MOIS_}"/>
                                                    <f:selectItem itemLabel="#{constantes.UNITE_ANNEE}" itemValue="#{constantes.UNITE_ANNEE_}"/>
                                                </h:selectOneMenu> 
                                            </h:panelGroup>
                                            <span>#{lab.LDB_PC_reference_externe}</span>
                                            <h:inputText value="#{managedClient.contrat.referenceExterne}" style="width: 99%"/>
                                        </h:panelGrid>
                                        <div style="margin-top: 5px">
                                            <p:commandButton value="#{lab.L_nouveau}" style="float: left" actionListener="#{managedClient.resetFicheContrat()}"/>
                                            <p:commandButton value="#{lab.L_enregistrer}" style="float: right" actionListener="#{managedClient.saveNewContrat()}"/>
                                        </div>
                                    </div>
                                    <div style="width: 64%;margin-left: 36%">
                                        <p:dataTable id="data-contrat_client" value="#{managedClient.client.contrats}" var="cont" rowKey="#{cont.id}"
                                                     rowIndexVar="contIdx" selectionMode="single" paginator="true" rows="10" paginatorAlwaysVisible="false">
                                            <p:ajax event="rowSelect" listener="#{managedClient.loadOnViewContrat}" update=":form_client:tab_view_client:form-contrat_client"/>
                                            <p:ajax event="rowUnselect" listener="#{managedClient.unLoadOnViewContrat}" update=":form_client:tab_view_client:form-contrat_client"/>
                                            <p:column style="width: 7%;" headerText="N°"> 
                                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{cont.new_}"/>
                                                <span>#{contIdx+1}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_reference}">
                                                <span>#{cont.reference}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_type}" style="text-align: center;width: 15%">
                                                <h:outputText value="#{cont.type eq 'I'? 'INDEFINI': 'DEFINI'}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_date_expiration}" style="text-align: center;width: 15%">
                                                <h:outputText value="#{cont.dateExpiration}" converter="DATE" rendered="#{cont.type ne 'I'}"/>
                                                <h:outputText value="--" rendered="#{cont.type eq 'I'}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_date_facturation}" style="text-align: center;width: 15%">
                                                <h:outputText value="#{cont.dateDebutFacturation}" converter="DATE"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_periode}" style="text-align: center;width: 15%">
                                                <h:outputText value="#{cont.intervalFacturation}" converter="DN"/>
                                                <h:outputText value="#{constantes.PERIODE_NAME(cont.periodeFacturation)}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                                                <p:commandLink title="#{(cont.actif)?'Desactiver':'Activer'}" global="false" actionListener="#{managedClient.activeContrat(cont)}" update="data-contrat_client">
                                                    <h:graphicImage library="img"  name="#{(cont.actif)?'vu.png':'vu_non.png'}" width="15" height="15"/>
                                                </p:commandLink>
                                            </p:column>
                                            <p:column style="width: 5%;text-align: center">
                                                <p:contextMenu for="btn_option_contrat_client" event="left click" style="font-size: 0.8em">
                                                    <p:menuitem value="#{lab.LDB_PC_elements}" icon="ui-icon-note" global="false" actionListener="#{managedClient.setSelectContrat(cont)}" oncomplete="dlgElementsContrat.show()" update=":main-contrat"/>
                                                    <p:menuitem value="#{lab.LDB_PC_generer_facture}" icon="ui-icon-note" actionListener="#{managedClient.initGenererFacture(cont)}" oncomplete="dlgGenererFacture.show()" update=":main-contrat"/>
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedClient.deleteBeanContrat(cont, false)}" oncomplete="dlgConfirmDeleteContrat.show()"/>
                                                </p:contextMenu>                           
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contrat_client" type="button"/>
                                            </p:column> 
                                        </p:dataTable>
                                    </div>
                                </p:outputPanel>
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab rendered="#{managedClient.client.afficheSolde}" title="#{lab.LDB_PC_statistique}">
                                <h:panelGroup style="float: left;margin-top: -15px">
                                    <span>#{lab.LDB_PC_date_derniere_facture}: </span>
                                    <h:outputText value="#{managedClient.client.lastFacture.enteteDoc.dateEntete}" converter="DATE" style="font-weight: bold"/>
                                </h:panelGroup>  
                                <div style="clear: both"/>
                                <div style="width: 99.25%; border: solid 2px; height: 75px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                    <span style="display: inline-block; background: #CCC; width: 100%">
                                        #{lab.LDB_PC_progression}
                                    </span>
                                    <div style="width: 99.5%; border: solid 1px; height: 50px; margin: auto;overflow-y: auto">
                                        <p:dataTable value="1" style="width: 100%;overflow-x: auto">
                                            <p:columnGroup type="header">
                                                <p:row>
                                                    <c:forEach items="#{managedClient.client.soldes}" var="head" varStatus="_head">
                                                        <p:column headerText="#{head.reference}"/>
                                                    </c:forEach>
                                                </p:row>
                                            </p:columnGroup> 
                                            <p:columns value="#{managedClient.client.soldes}" var="col" columnIndexVar="iHead" style="text-align: right">
                                                <h:outputText value="#{col.ca}" converter="DNS"/>
                                            </p:columns>
                                        </p:dataTable>
                                    </div>
                                </div>
                                <div style="float: left;width: 32%; border: solid 2px; height: 200px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                    <span style="display: inline-block; background: #CCC; width: 100%">                                             
                                        <h:outputText id="labAcomptesClient" value="#{lab.LDB_PC_acomptes}" style="cursor: pointer"/> 
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedClient.client.acompte}" style="color: #{managedClient.client.acompte gt 0 ? 'green':(client.acompte lt 0 ? '#D20005' : 'black')}" converter="DNS"/>
                                        </h:panelGroup>                                  
                                        <p:overlayPanel for="labAcomptesClient" hideEffect="fade" style="height: 20px">
                                            <h:panelGrid columns="2" styleClass="yvs_nostyle" style="margin-top: -5px" cellpadding="0" cellspacing="0">
                                                <h:panelGroup>
                                                    <p:calendar value="#{managedClient.debutAcompte}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                                                    <span> - </span>
                                                    <p:calendar value="#{managedClient.finAcompte}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                                                </h:panelGroup>
                                                <p:commandButton value="Ok" actionListener="#{managedClient.loadCreanceOrAcompte(true)}" update="data_acompte_client"/>
                                            </h:panelGrid>
                                        </p:overlayPanel>
                                    </span>
                                    <div style="width: 99.5%; border: solid 1px; height: 150px; margin: auto;overflow-y: auto">
                                        <p:dataTable id="data_acompte_client" value="#{managedClient.client.acomptes}" var="acp" rowKey="#{acp.id}"
                                                     paginator="true" rows="10" paginatorAlwaysVisible="false" rowIndexVar="_Idx">
                                            <p:column width="30" headerText="N°" style="text-align: center">
                                                <span>#{_Idx+1}</span>
                                            </p:column>=
                                            <p:column headerText="#{lab.L_date}" style="text-align: center">
                                                <h:outputText value="#{acp.dateAcompte}" converter="DATE" rendered="true"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_montant}" style="text-align: right">
                                                <h:outputText value="#{acp.montant}" converter="DNS"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                                <div style="margin-left: 0.25%;float: left;width: 32%; border: solid 2px; height: 200px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                    <span style="display: inline-block; background: #CCC; width: 100%">
                                        <h:outputText id="labCreanceClient" value="#{lab.LDB_PC_creances}" style="cursor: pointer"/> 
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedClient.client.creance}" style="color: #{managedClient.client.creance gt 0 ? 'green':(client.creance lt 0 ? '#D20005' : 'black')}" converter="DNS"/>
                                        </h:panelGroup>                                    
                                        <p:overlayPanel for="labCreanceClient" hideEffect="fade" style="height: 20px">
                                            <h:panelGrid columns="2" styleClass="yvs_nostyle" style="margin-top: -5px" cellpadding="0" cellspacing="0">
                                                <h:panelGroup>
                                                    <p:calendar value="#{managedClient.debutCreance}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                                                    <span> - </span>
                                                    <p:calendar value="#{managedClient.finCreance}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                                                </h:panelGroup>
                                                <p:commandButton value="Ok" actionListener="#{managedClient.loadCreanceOrAcompte(false)}" update="data_creance_client"/>
                                            </h:panelGrid>
                                        </p:overlayPanel>
                                    </span>
                                    <div style="width: 99.5%; border: solid 1px; height: 150px; margin: auto;overflow-y: auto">
                                        <p:dataTable id="data_creance_client" value="#{managedClient.client.creances}" var="crea" rowKey="#{crea.id}"
                                                     paginator="true" rows="10" paginatorAlwaysVisible="false" rowIndexVar="_Idx">
                                            <p:column width="30" headerText="N°" style="text-align: center">
                                                <span>#{_Idx+1}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.L_date}" style="text-align: center">
                                                <h:outputText value="#{crea.dateCredit}" converter="DATE"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_montant}" style="text-align: right">
                                                <h:outputText value="#{crea.montant}" converter="DNS"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                                <div style="margin-left: 0.25%;float: left;width: 33.25%; border: solid 2px; height: 200px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                    <span style="display: inline-block; background: #CCC; width: 100%">
                                        #{lab.LDB_PC_soldes}                                                
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedClient.abs(managedClient.client.solde)}" style="color: #{managedClient.client.solde gt 0 ? 'green':(managedClient.client.solde lt 0 ? '#D20005' : 'black')}" converter="DNS"/>
                                        </h:panelGroup>    
                                    </span>
                                    <div style="width: 99.5%; border: solid 1px; height: 150px; margin: auto;overflow-y: auto">
                                        <p:dataTable value="#{managedClient.client.soldes}" var="exo" rowKey="#{exo.id}" rowIndexVar="exoIdx"
                                                     paginator="true" rows="10" paginatorAlwaysVisible="false">
                                            <p:column width="35" headerText="#{lab.LDB_PC_annee}" style="text-align: center">
                                                <span>#{exo.reference}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_acomptes}" style="text-align: right">
                                                <h:outputText value="#{exo.acompte}" converter="DNS"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_creances}" style="text-align: right">
                                                <h:outputText value="#{exo.creance}" converter="DNS"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_soldes}" style="text-align: right">
                                                <h:outputText value="#{managedClient.abs(exo.valeur)}" style="color: #{exo.valeur gt 0 ? 'green':(exo.valeur lt 0 ? '#D20005' : 'black')}" converter="DNS"/>
                                            </p:column>
                                        </p:dataTable>  
                                    </div>
                                </div>  
                                <div style="clear: left"/>
                                <div style="width: 99.25%; border: solid 2px; height: 200px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                    <span style="display: inline-block; background: #CCC; width: 100%">
                                        #{lab.LDB_PC_les_5_dernieres_transactions}
                                    </span>
                                    <div style="width: 99.5%; border: solid 1px; height: 150px; margin: auto;overflow-y: auto">
                                        <p:dataTable value="#{managedClient.client.transactions}" var="icontent" rowKey="#{icontent.id}"  rowIndexVar="_Idx">
                                            <p:column headerText="#{lab.LDB_PC_numero_ref}" style="width: 5%; color: #{(icontent.etat()=='R')?'orange':((icontent.etat()=='P')?'red':'inherit')}; font-style: #{(icontent.etat()!='E')?'italic':'normal'} ">
                                                <span title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}">#{icontent.docVente.numDoc}</span>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_ref} " style="width: 12%;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <span title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}">#{icontent.article.refArt}</span>
                                                <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{icontent.onComment}" style="float: right" title="#{lab.LDB_PC_a_ete_commente}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_article}" style="color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <span title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}">#{icontent.article.designation}</span>
                                                <h:outputText title="#{lab.LDB_PC_facture_consignee}" value="C" rendered="#{icontent.idReservation ne null}"
                                                              style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 1px;background: black;color: white; float: right"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_qte}" style="width: 8%;text-align: center;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.quantite}" converter="DN" title="#{lab.LDB_PC_plus} #{icontent.quantiteBonus} #{lab.LDB_PC_bonus}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_prix}" style="width: 10%;text-align: right;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.prix}" converter="DN" title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_rem}" style="width: 10%;text-align: right;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.remise}" converter="DNS" title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_rabais}" style="width: 10%;text-align: right;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.quantite*icontent.rabais}" converter="DNS" title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_taxe}" style="width: 10%;text-align: right;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.taxe}" converter="DNS" title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PC_total}" style="width: 12%;text-align: right;color: #{icontent.etat()=='R'?'orange':(icontent.etat()=='P'?'red':'')};font-style: #{icontent.etat()!='E'?'italic':''}">
                                                <h:outputText value="#{icontent.prixTotal}" converter="DNS" title="#{lab.LDB_PC_numero_serie} #{icontent.numSerie}"/>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PC_impayes}">
                                <p:dataTable value="#{managedClient.client.factures}" var="bon" rowKey="#{bon.id}" rowIndexVar="bonIdx" selectionMode="single"
                                             paginator="true" rows="10" paginatorAlwaysVisible="false" style="font-size: 0.9em">
                                    <p:ajax event="rowSelect" listener="#{managedClient.onSelectDistantFacture}" oncomplete="dlgConfirmDistant.show()"/>
                                    <p:column width="10" headerText="N°" styleClass="statut_#{bon.statut}" style="text-align: center">
                                        <h:graphicImage title="#{lab.LDB_PC_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>  
                                        <span>#{bonIdx+1}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PC_reference}" styleClass="statut_#{bon.statut}">
                                        <span>#{bon.numDoc}</span>
                                        <h:panelGroup style="float: right">
                                            <p:spacer width="2" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"/>
                                            <h:outputText title="#{lab.LDB_PC_facture_livree}" value="L" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"
                                                          style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                            <p:spacer width="2" rendered="#{bon.consigner}"/>
                                            <h:outputText title="#{lab.LDB_PC_stock_facture_consignee}" value="C" rendered="#{managedFactureVente.isConsigner(bon)}"
                                                          style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PC_date_facture}" style="text-align: center" styleClass="statut_#{bon.statut}">
                                        <h:outputText value="#{bon.enteteDoc.dateEntete}" converter="DDMMYYYY"/>
                                        <span> à </span>
                                        <h:outputText value="#{bon.heureDoc}" converter="TIME"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PC_echeance}" style="text-align: center" styleClass="statut_#{bon.statut}">
                                        <h:outputText value="#{managedFactureVente.echeance(bon)}" converter="DDMMYYYY"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PC_chiffre_a}"  width="60" styleClass="statut_#{bon.statut}" style="text-align: right">
                                        <h:outputText value="#{managedFactureVente.chiffreAffaire(bon)}" converter="DN"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PC_reste_a_payer}"  width="60" styleClass="statut_#{bon.statut}" style="text-align: right">
                                        <h:outputText value="#{managedFactureVente.netAPayer(bon)}" converter="DN"/>
                                    </p:column>
                                </p:dataTable> 
                            </p:tab>
                        </p:tabView>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_client" style="width: 99%; margin: auto; background: white">
                    <div  class="part_list">
                        <h:inputHidden id="input_hide_client" value="#{managedClient.tabIds}"/>
                        <p:dataTable id="data_client" value="#{managedClient.clients}" var="clt" 
                                     rowKey="#{clt.id}" rowIndexVar="cltIdx"
                                     selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{managedClient.loadOnView}"/>
                            <p:column headerText="N°" style="width: 5%">
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}"  >#{cltIdx+1}</span>
                                <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{clt.id eq client.id}"/> 
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_code}" style="width: 15%; ">
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}">#{clt.codeClient}</span>
                                <h:graphicImage library="img" name="danger.png" style="float: right" rendered="#{clt.solde lt -(clt.seuilSolde)}" width="23" height="23" title="#{lab.LDB_PC_capacite_endettement_depasse}"/>
                                <h:outputText value="#{lab.LDB_PC_defaut}" rendered="#{clt.defaut}" style="float: right;font-weight: bold;font-size: 0.8em;font-style: italic;color: blue"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_tiers}" style="width: 15%;">
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}">#{clt.tiers.codeTiers}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_nom_prenom}"  >
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}">#{clt.nom_prenom}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_compte}"  >
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}">#{clt.compte.numCompte}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_telephone}" style="width: 12%;text-align: center; ">
                                <h:outputText value="#{clt.tiers.contact.numero}" converter="PHONE" title="#{lab.LDB_PC_categorie} : #{clt.categorie}"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_region}" style="width: 20%; ">
                                <span title="#{lab.LDB_PC_categorie} : #{clt.categorie}">#{clt.tiers.region}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_confirmer}" style="width: 5%;text-align: center" rendered="#{managedClient.currentScte.venteOnline}">
                                <p:commandLink global="false" actionListener="#{managedClient.confirmTiers(clt)}" update="data_client">
                                    <h:graphicImage library="img"  name="#{(clt.confirmer)?'vu.png':'vu_non.png'}" width="15" height="15"/>
                                </p:commandLink>
                            </p:column>
                            <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                                <h:graphicImage library="img"  name="#{(clt.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <p:contextMenu for="btn_option_client" event="left click" styleClass="context_menu">
                                    <p:menuitem value="#{clt.actif?'Désactiver':'Activer'}" icon="#{clt.actif?'ui-icon-cancel':'ui-icon-check'}" actionListener="#{managedClient.setSelectClient(clt)}"
                                                oncomplete="dlgConfirmChangeStatut.show()" update=":main-statut:blog_active_client"/>
                                    <p:menuitem value="#{lab.L_set_defaut}" icon="ui-icon-star" global="false" actionListener="#{managedClient.activeDefaut(clt)}" update="data_client"/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedClient.deleteBean_(clt)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_client" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_client" value="false"
                                                             onclick="selectionAllLineTab(#{managedClient.clients.size()}, 'client')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{clt.select}" styleClass="chek_line_client" 
                                                          onclick="selectionLineTab(#{cltIdx}, 'client')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                        </p:dataTable>  
                        <span class="nbSelectclient" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">                            
                            <p:commandButton actionListener="#{managedClient.init(false)}"   update="data_client" icon="ui-icon-circle-triangle-w" disabled="#{managedClient.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedClient.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedClient.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedClient.gotoPagePaginator()}" update="data_client"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedClient.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedClient.init(true)}"  update="data_client" icon="ui-icon-circle-triangle-e" disabled="#{managedClient.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedClient.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedClient.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedClient.paginations}"/>
                                <p:ajax event="valueChange" update="data_client"/>
                            </p:selectOneMenu>
                        </p:outputPanel>       
                    </div>                                             
                </div>                 
            </div>       
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <div class="yvs_form_client display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedClient.selectClient.dateCreation}" converter="LD" styleClass="valeur" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedClient.selectClient.dateUpdate}" converter="LD" styleClass="valeur" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedClient.selectClient.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <h:panelGrid id="blog_search_client" columns="2" style="width: 100%; font-size: 0.8em;" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="9" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0">
                        <h:outputText value="" />
                        <h:outputText value="#{lab.LDB_PF_code}" />
                        <h:outputText value="#{lab.LDB_PC_groupe}" />
                        <h:outputText value="#{lab.LDB_PC_compte}" />
                        <h:outputText value="#{lab.LDB_PC_categorie}" />
                        <h:outputText value="#{lab.LDB_PC_types}" />
                        <h:outputText value="#{lab.L_actif}" />
                        <h:outputText value="#{lab.LDB_PC_defaut}" />
                        <span>&nbsp;</span>
                        <p:commandButton icon="ui-icon-bullet" actionListener="#{managedClient.clearParams(false)}" title="#{lab.L_reset_param}" style="width: 20px; height: 22px" 
                                         update="blog_search_client"/>
                        <h:inputText value="#{managedClient.numSearch_}" style="width: 140px">
                            <p:ajax event="valueChange" listener="#{managedClient.searchByNum()}"/>
                        </h:inputText>   
                        <h:selectOneMenu value="#{managedClient.groupeSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedCategorieClt.categories}" var="cats" 
                                           itemLabel="#{cats.libelle}" itemValue="#{cats.id}" />
                            <p:ajax event="valueChange" listener="#{managedClient.addParamGroupe()}"/>                              
                        </h:selectOneMenu> 
                        <h:inputText value="#{managedClient.compteSearch}" style="width: 140px">
                            <p:ajax event="valueChange" listener="#{managedClient.addParamCompte()}"/>
                        </h:inputText>
                        <h:selectOneMenu value="#{managedClient.categorieSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedCatCompt.categoriesVente}" var="catCs" 
                                           itemLabel="#{catCs.designation}[#{catCs.nature}]" itemValue="#{catCs.id}" />
                            <p:ajax event="valueChange" listener="#{managedClient.addParamCategorie()}"/>                              
                        </h:selectOneMenu>              
                        <h:selectOneMenu value="#{managedClient.typeSearch}" >
                            <f:selectItem itemLabel="--" itemValue="--" noSelectionOption="true"/>
                            <f:selectItem itemLabel="#{lab.LDB_PC_societe_client}" itemValue="SC"/>
                            <p:ajax event="valueChange" listener="#{managedClient.addParamType()}"/>                              
                        </h:selectOneMenu>                                
                        <h:selectOneMenu value="#{managedClient.actifSearch}">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>                            
                            <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>                            
                            <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>                            
                            <p:ajax event="valueChange" listener="#{managedClient.addParamActif()}"/>
                        </h:selectOneMenu>                         
                        <h:selectOneMenu value="#{managedClient.defautSearch}">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>                            
                            <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>                            
                            <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>                            
                            <p:ajax event="valueChange" listener="#{managedClient.addParamDefaut()}"/>
                        </h:selectOneMenu>                         
                        <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.9em" 
                                       onclick="dlgPlusOption.show()" global="false" value="#{lab.L_plus_option}"/>
                    </h:panelGrid>
                    <h:panelGroup style="float: right">                        
                        <p:commandLink global="false" onclick="dlgUploadImg.show()">
                            <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                                Importer
                            </span> 
                        </p:commandLink>                        
                        <p:splitButton type="button" global="false" value="#{lab.LDB_PA_telecharger}" id="dowload_client" style="font-size: 0.8em;">
                            <p:menuitem value="Clients actif"  actionListener="#{managedClient.print('client_actif')}" ajax="false" icon="ui-icon-print" rendered="#{accesRessource.base_client_print_actif}"/>
                            <p:menuitem value="Clients inactif" actionListener="#{managedClient.print('client_inactif')}" ajax="false" icon="ui-icon-print" />
                            <p:menuitem value="Clients mouvementés" actionListener="#{managedClient.gotoDateForPrint('client_in')}" oncomplete="dlgDatesPrint.show()" icon="ui-icon-print" />
                            <p:menuitem value="Clients non mouvementés" actionListener="#{managedClient.gotoDateForPrint('client_out')}" oncomplete="dlgDatesPrint.show()" icon="ui-icon-print" />
                        </p:splitButton>
                    </h:panelGroup>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>