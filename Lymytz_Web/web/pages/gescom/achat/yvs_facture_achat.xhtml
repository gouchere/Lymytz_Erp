<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Factures Achat','modGescom', 'smenFactureAchat', true,managedFactureAchat)}
    </ui:define> 
    <ui:define name="contents"> 
        #{navigations.doNothing()}
        #{managedFournisseur.doNothing()}
        #{managedLivraisonAchat.doNothing()}
        #{managedSaisiePiece.doNothing()}
        #{Marticle.doNothing()}
        #{managedLotReception.doNothing()}
        #{managedTiers.view(null)}

        #{managedProjet.loadAllParent()}   

        #{managedTaxes.loadAllTaxes('A')}
        #{managedFactureAchat.loadAll()}
        #{managedFournisseur.loadActifFournisseur(true)}
        #{managedModeReglement.loadModels('F')}
        #{managedTiersTemplate.loadTemplate('F')}  

        #{managedCatCompt.loadAllCategorieAchat()}  
        #{managedCentreAnalytique.loadAllByNamedQuery()}

        #{managedAgence.loadAllUsable()}
        #{managedDepot.loadDepotsByAgence()}
        #{managedCaisses.loadAllCaisseActif(true)}  
        #{Mdico.loadPays()}
        #{managedTypeCout.loadTypeByType(constantes.COUT_ACHAT)} 
        #{managedUniteMesure.loadAll(constantes.UNITE_QUANTITE)} 
        #{managedTypeDocDivers.loadAll(constantes.TYPE_FA)}
        #{managedReglementAchat.loadAll()}  
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 135);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('facture_achat');
                collapseForm('contenu_facture_achat');
                collapseForm('cout_facture_achat');
                collapseForm('cout_contenu_achat');
                collapseForm('mensualite_facture_achat');
                collapseForm('reglement_facture_achat');
                collapseList('livraison_achat');
                _slideShow('zone_show_detail_produit');
            });
            function _slideShow(node) {
                if (node === 'zone_show_detail_produit') {
                    slideShowAction('zone_show_taxe_facture', false, 235);
                    slideShowAction('zone_show_detail_produit', true, 235);
                } else if (node === 'zone_show_taxe_facture') {
                    slideShowAction('zone_show_taxe_facture', true, 235);
                    slideShowAction('zone_show_detail_produit', false, 235);
                }
            }
        </script>

        <h:form prependId="false" id="main-agence">
            <p:dialog widgetVar="dlgAgenceForDepot" header="Selectionner une agence" width="50%" closeOnEscape="true"> 
                <p:dataTable value="#{managedAgence.agences}" var="ag" rowKey="#{ag.id}" selectionMode="single" id="table_agence" rowIndexVar="line_ag">
                    <p:ajax event="rowSelect" listener="#{managedDepot.onSelectAgenceForAction}" update=":main_facture_achat:depot_reception_document" oncomplete="dlgAgenceForDepot.hide()"/>
                    <p:column headerText="#{lab.L_code}" width="200">
                        <h:outputText value="#{ag.codeagence}"/>
                    </p:column>                                
                    <p:column headerText="#{lab.L_designation}">
                        <h:outputText value="#{ag.designation}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="form-contenu_projet">
            <p:dialog  width="60%" widgetVar="dlgAddProjets" closeOnEscape="true" header="Lier à un projet">
                <p:outputPanel id="data-contenu_projet">
                    <h:panelGroup style="float: left">
                        [<h:outputText value="#{managedFactureAchat.selectContenu.article.refArt}" style="font-weight: bold"/>]
                        <h:outputText value="#{managedFactureAchat.selectContenu.article.designation}"/> : 
                        <h:outputText value="#{managedFactureAchat.selectContenu.quantiteCommande}" converter="DNA" style="font-style:italic;font-weight: bold"/>
                        <h:outputText value="#{managedFactureAchat.selectContenu.conditionnement.unite.reference}" style="font-style:italic"/>
                    </h:panelGroup>
                    <h:panelGroup style="float: right">
                        <h:outputText value="Selectionner un projet : "/>
                        <h:selectOneMenu value="#{managedFactureAchat.projet}" style="min-width:120px">
                            <f:selectItem itemValue="0" itemLabel="---"/>
                            <f:selectItems value="#{managedProjet.parents}" var="item" itemValue="#{item.id}" itemLabel="#{item.libelle}"/>
                            <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseProjet()}"/>
                        </h:selectOneMenu>
                    </h:panelGroup>
                    <p:dataTable value="#{managedFactureAchat.selectContenu.projets}" var="prj" rowKey="#{prj.id}"
                                 editable="true" editMode="cell">
                        <p:ajax event="cellEdit" listener="#{managedFactureAchat.cellEditProjet}" />
                        <p:column headerText="Projet">
                            <h:outputText value="#{prj.projet.projet.libelle}"/>
                        </p:column>
                        <p:column headerText="Département">
                            <h:outputText value="#{prj.projet.service.service.intitule}" />
                        </p:column>
                        <p:column width="100" headerText="#{lab.L_quantite}" style="text-align: right" styleClass="#{prj.id gt 0?'line_actiftrue':'_'}">                                   
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{prj.quantite}" converter="DNA"/>
                                </f:facet>
                                <f:facet name="input">
                                    <h:inputText value="#{prj.quantite}" style="width: 50px;text-align: right"/>    
                                </f:facet>
                            </p:cellEditor>  
                        </p:column>
                        <p:column width="100" headerText="#{lab.L_montant}" style="text-align: right">                                   
                            <h:outputText value="#{prj.quantite * managedFactureAchat.selectContenu.prixAchat}" converter="DNS" title="#{prj.quantite * managedFactureAchat.selectContenu.prixAchat}"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form-conditionnement_tarifaire">
            <p:dialog  width="60%" widgetVar="dlgTarifaireUnite" closeOnEscape="true" header="Tarifs">
                <p:dataTable id="data-conditionnement_tarifaire" value="#{managedFactureAchat.contenu.conditionnement.tarifaires}" var="artf" rowKey="#{artf.id}" >
                    <p:column style="width: 5%" headerText="N°">
                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                        <span>#{artfIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_point_vente}">
                        <span>#{artf.article.point.libelle}</span>
                        <h:graphicImage title="#{lab.LC_PPV_text10}" library="img"  name="bookmark.png" width="15" height="15" 
                                        rendered="#{artf.article.prioritaire}" style="float: right"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PPV_prix}" style="width: 20%;text-align: right">
                        <div style="float: left; font-size: 0.8em;margin-top: 2px">
                            <span style="color: blue;font-style: italic">Min. : </span>
                            <h:outputText value="#{artf.prixMin}" converter="DN" style="font-weight: bold"/>
                            <h:outputText value="%" rendered="#{artf.naturePrixMin == constantes.NATURE_TAUX}"/>
                        </div>
                        <h:outputText value="#{artf.puv}" converter="DN" style="font-weight: bold"/>
                        <h:graphicImage title="#{lab.LC_PPV_text11}" library="icones"  name="update.png" width="15" height="15" 
                                        rendered="#{artf.article.changePrix}" style="float: right"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PPV_remise}" style="width: 10%;text-align: right">
                        <h:outputText value="#{artf.remise}" converter="DN" style="font-weight: bold"/>
                        <h:outputText value="%" rendered="#{artf.natureRemise == constantes.NATURE_TAUX}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_pptes_compta">
            <p:dialog  width="60%" widgetVar="dlgPpteCompta" closeOnEscape="true" header="Pièces comptable">
                <ui:include src="../../finance_compta/compta_general/yvs_schema_compta.xhtml" />
                <f:facet name="footer">
                    &copy;Lymytz 2014
                </f:facet>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue du contenu
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgInfosContenu_">
            <p:dialog id="dlgInfosContenu_" header="Infos Contenu" widgetVar="dlgInfosContenu" modal="true" width="40%"  closeOnEscape="true"> 
                <h:panelGrid columns="2" id="blog_form_infos_contenu" style="width: 100%; font-size: 0.8em" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <span>Id</span>
                    <h:outputText value="#{managedFactureAchat.selectContenu.id}" style="float: right"/>
                    <h:panelGroup>
                        <span>#{lab.L_article}</span>
                        <div style="float:right">[<span style="font-weight: bold">#{managedFactureAchat.selectContenu.article.refArt}</span>]</div>
                    </h:panelGroup>
                    <h:inputText value="#{managedFactureAchat.selectContenu.article.designation}" disabled="true" style="width:100%"/>
                    <span>#{lab.L_prix}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.prixAchat}" symbol=" #{managedFactureAchat.currentScte.devise}" symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <span>#{lab.LC_PFA_puv}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.conditionnement.prix}" symbol=" #{managedFactureAchat.currentScte.devise}" symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <span>#{lab.L_quantite}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.quantiteCommande}" symbol=" #{managedFactureAchat.selectContenu.conditionnement.unite.libelle}"
                                    symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <span>#{lab.L_remise}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.remise}" symbol=" #{managedFactureAchat.currentScte.devise}" symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <span>#{lab.L_taxe}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.taxe}" symbol=" #{managedFactureAchat.currentScte.devise}" symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <h:outputText value="#{lab.L_bonus}" rendered="#{managedFactureAchat.selectContenu.quantiteBonus gt 0}"/>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.quantiteBonus}" symbol=" #{managedFactureAchat.selectContenu.conditionnementBonus.unite.libelle}"
                                    symbolPosition="suffix" style="width:100%;text-align: right" rendered="#{managedFactureAchat.selectContenu.quantiteBonus gt 0}"/>
                    <span>#{lab.LC_PCV_total_contenu}</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.prixTotal}" symbol=" #{managedFactureAchat.currentScte.devise}" symbolPosition="suffix" style="width:100%;text-align: right;font-weight: bold"/>
                    <span>Quantitée Recue</span>
                    <pe:inputNumber value="#{managedFactureAchat.selectContenu.qteLivree}" symbol=" #{managedFactureAchat.selectContenu.conditionnement.unite.libelle}"
                                    symbolPosition="suffix" style="width:100%;text-align: right"/>
                    <f:facet name="footer">
                        <div align="left" style="font-size:0.8em">
                            <span>#{lab.L_enregistrer_le} <h:outputText value="#{managedFactureAchat.selectDoc.dateSave}" converter="DTL"  styleClass="valeur" style="font-weight: bold"/></span>
                            <div align="left">
                                <span>#{lab.L_modifier_le}  <h:outputText value="#{managedFactureAchat.selectDoc.dateUpdate}" converter="DTL" styleClass="valeur" style="font-weight: bold"/></span>
                                <span style="float: right">#{lab.L_par}  <h:outputText value="#{managedFactureAchat.selectDoc.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                            </div>
                        </div>
                    </f:facet>
                </h:panelGrid> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    &copy; Lymytz 2014
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="dglnote">
            <p:dialog widgetVar="dlgAddNote" closeOnEscape="true" header="#{lab.LC_PFV_ajouter_note}" 
                      >
                <h:panelGrid columns="2">
                    <h:outputText value="#{lab.LC_PFV_note}" />
                    <h:inputTextarea value="#{managedFactureAchat.notes}" />

                </h:panelGrid>

                <p:commandButton value="#{lab.L_valider}"  icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.addNote()}" oncomplete="dlgAddNote.hide()"/>
                <p:commandButton value="#{lab.LC_PFV_annuler}" onclick="dlgAddNote.hide()"  type="button" icon="ui-icon-circle-close"/>
            </p:dialog>
        </h:form>


        <p:dialog header="#{lab.LC_PFA_lettrage_document}" widgetVar="dlgLettrage" width="80%" style="max-height: 400px">
            <ui:include src="../../finance_compta/compta_general/liste_contenu_journal.xhtml" />
            <f:facet name="footer">

            </f:facet>
        </p:dialog>
        <h:form>
            <p:remoteCommand name="initFirstCoutAdditionnel_" actionListener="#{managedFactureAchat.initFirstCoutAdditionnel()}"
                             oncomplete="collapseForm('cout_contenu_achat')" global="false"/>
        </h:form>
        <h:form prependId="false" id="form_ppte_valid_fa">
            <p:dialog header="#{lab.LC_PFA_proprietes_validation}" widgetVar="dlgppteValid" width="60%" >
                <p:dataTable value="#{managedFactureAchat.docAchat.etapesValidations}" var="iValid" id="table_ppte_valid_fa">
                    <p:column headerText="#{lab.LC_PFA_etapes}" >#{iValid.etape.labelStatut}</p:column>
                    <p:column headerText="#{lab.LC_PFA_valider_par}" >
                        <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.etapeValid or iValid.motif != null}" />
                    </p:column>
                    <p:column headerText="#{lab.L_dates} " style="text-align: center" >
                        <h:outputText value="#{iValid.dateUpdate}" converter="DATETIME" rendered="#{iValid.etapeValid}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_motif} " >
                        <h:outputText value="#{managedFactureAchat.resumeText(iValid.motif)}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="Status" widgetVar="dlgMoreStatuts" modal="true" closeOnEscape="true">                 
                <p:selectManyMenu value="#{managedFactureAchat.statuts}" showCheckbox="true" style="min-width: 120px;size: 20px">
                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_attente}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                    <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_terminer}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                    <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat" listener="#{managedFactureAchat.chooseStatuts()}"/>
                </p:selectManyMenu>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmdeleteTaxe" closeOnEscape="true"
                             message="#{lab.LC_PFA_text1}" header="#{lab.L_confirmation}">
                <p:commandButton icon="ui-icon-circle-check" value="#{lab.L_oui}" actionListener="#{managedFactureAchat.confirmDeleteTaxe()}" 
                                 oncomplete="dlgConfirmdeleteTaxe.hide()" />
                <p:commandButton icon="ui-icon-circle-close" type="button" value="#{lab.L_non}" onclick="dlgConfirmdeleteTaxe.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des section analytique du contenu
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="main-analytique_fa">
            <p:dialog header="#{lab.LC_PFA_text2}" widgetVar="dlgSectionAnalytique" width="40%" modal="true" closeOnEscape="true"> 
                <p:outputPanel id="blog-analytique_fa">
                    <h:panelGrid id="form-analytique_fa" columns="5" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LC_PFA_centre} : "/>
                        <h:selectOneMenu value="#{managedFactureAchat.analytique.centre.id}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedCentreAnalytique.centres}" var="iCa" itemLabel="#{iCa.designation}" itemValue="#{iCa.id}"/>
                            <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseCentre()}"/>
                        </h:selectOneMenu>
                        <h:outputText value="#{lab.LC_PFA_coefficient} : " style="margin-left: 5px"/>
                        <h:inputText value="#{managedFactureAchat.analytique.taux}" style="width: 50px;text-align: center"/>
                        <p:commandButton icon="ui-icon-disk" value="#{lab.L_enregistrer}" style="margin-left: 10px" 
                                         actionListener="#{managedFactureAchat.saveNewAnalytique()}"/>
                    </h:panelGrid>
                    <p:dataTable value="#{managedFactureAchat.selectContenu.analytiques}" var="iAA" rowIndexVar="iAAx" id="data-analytique_fa" selectionMode="single"
                                 rowKey="#{iAA.id}" paginator="true" rows="10" paginatorAlwaysVisible="false">
                        <p:ajax event="rowSelect" listener="#{managedFactureAchat.loadOnViewAnalytique}" />
                        <p:ajax event="rowUnselect" listener="#{managedFactureAchat.unLoadOnViewAnalytique}" />
                        <p:column headerText="#{lab.LC_PFA_centre}">
                            <span>#{iAA.centre.designation}</span>
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_coefficient}" style="text-align: right;width: 30%">
                            <h:outputText value="#{iAA.coefficient}" converter="DNA"/>%
                        </p:column>
                        <p:column style="text-align: center;width: 5%">
                            <p:contextMenu for="btn_option-analytique_fa" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFactureAchat.deleteAnalytique(iAA, false)}"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option-analytique_fa" type="button"/>
                        </p:column>  
                    </p:dataTable>  
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_text2}" widgetVar="dlgAllSectionAnalytique" width="40%" modal="true" closeOnEscape="true"> 
                <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFactureAchat.saveAllAnalytique()}" style="float: right"/>
                <p:dataTable value="#{managedFactureAchat.selectContenu.analytiques}" var="iAAA" rowIndexVar="iAAx" id="data-all_analytique_fa" selectionMode="single"
                             rowKey="#{iAAA.id}" paginator="true" rows="10" paginatorAlwaysVisible="false" editable="true" editMode="cell">
                    <p:column headerText="#{lab.LC_PFA_centre}">
                        <span>#{iAAA.centre.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_coefficient}" style="text-align: right;width: 30%">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{iAAA.coefficient}" converter="DNA"/>%
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{iAAA.coefficient}"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                </p:dataTable> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des livraisons liée au contenu
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="main_livraison_fa">
            <p:dialog header="#{lab.LC_PFA_modifier_quantite}"  widgetVar="dlgDefinedContenu" modal="true" width="30%"  closeOnEscape="true"> 
                <h:panelGroup id="form_defined_contenu_fa" style="width: 100%">
                    <h:inputText value="#{managedLivraisonAchat.quantite_livree}" style="width: 100px"/> 
                    <span> / </span>
                    <h:inputText value="#{managedLivraisonAchat.selectContenu.qteRestant}"  style="width: 100px" disabled="true"/>                     
                    <p:commandButton value="#{lab.L_appliquer}" oncomplete="dlgDefinedContenu.hide()" icon="ui-icon-circle-check"
                                     actionListener="#{managedLivraisonAchat.insertInLivraison()}" style="margin-left: 10px"/>
                </h:panelGroup>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_liste_bons_livraison}" widgetVar="dlgOpenLivraison" modal="true" width="80%"  closeOnEscape="true"> 
                <p:dataTable id="data_livraison_content_fa" value="#{managedLivraisonAchat.livraisons}" var="bon" rowKey="#{bon.id}"
                             selectionMode="single" rowIndexVar="bonIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedLivraisonAchat.loadOnViewLivraison}" 
                            oncomplete="dlgDefinedContenu.show()" update=":main_livraison_fa:form_defined_contenu_fa"/>
                    <p:ajax event="rowUnselect" global="false" listener="#{managedLivraisonAchat.unLoadOnViewLivraison}" 
                            oncomplete="dlgDefinedContenu.show()" update=":main_livraison_fa:form_defined_contenu_fa"/>
                    <p:column headerText="N°" width="30" styleClass="statut_#{bon.statut}">
                        <span>#{bonIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bon.statut}">
                        <span>#{bon.numDoc}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_clients}" styleClass="statut_#{bon.statut}">
                        #{bon.fournisseur.nom_prenom}
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_depot}" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.depotReception.designation}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_tranche}" styleClass="statut_#{bon.statut}" style="text-align: center">
                        <h:outputText value="#{bon.tranche.heureDebut}" converter="TIME"/>
                        -
                        <h:outputText value="#{bon.tranche.heureFin}" converter="TIME"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_date_livraison}" style="text-align: center;width: 10%" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.dateLivraison}" converter="DDMMYYYY"/>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="select_fa_compensation">
            #{managedReglementVente.doNothing()}
            <p:dialog header="#{lab.LC_PFA_compensation_client_fournisseur}" width="80%" widgetVar="dlgCompensation" modal="true" closeOnEscape="true"
                      footer="&copy;Lymytz 2014">
                <div style="border: solid 2px; height: 170px; padding: 2px; border-radius: 5px;">
                    <span style="display: inline-block; background: #CCC; width: 100%; font-size: 0.9em">
                        <span style="font-weight: bold">Factures ventes</span> 
                        <h:panelGroup style="float:right" id="total_vente_compensation">
                            <span>#{lab.LC_PFA_total_facture} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensation.vente.montantTotal}" converter="#{managedFactureAchat.converter}"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                    </span>
                    <div style="width: 99.5%; height: 130px; border: solid 1px; margin: auto;overflow-y: auto">
                        <p:dataTable value="#{managedCompensation.ventes}" var="ve" rowKey="#{ve.id}" selectionMode="single"
                                     selection="#{managedCompensation.vente}" rowIndexVar="Idx" id="data_vente_compensation">
                            <p:ajax event="rowSelect" listener="#{managedCompensation.loadOnViewVente}"
                                    update=":select_fa_compensation:total_vente_compensation :select_fa_compensation:blog_compensation_facture_achat"/>
                            <p:column width="30" headerText="N°" styleClass="statut_#{ve.statut}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{ve.new_}"/>     
                                <span>#{Idx+1}</span>
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{ve.cloturer}"/> 
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" style="width: 20%" styleClass="statut_#{ve.statut}">
                                <span>#{ve.numDoc}</span>
                                <h:outputText value="#{lab.LC_PFA_vide}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=ve.contenus.size()}"/>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_facture_livrer}" value="L" rendered="#{ve.statutLivre == constantes.ETAT_LIVRE}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" style="text-align: center;width: 15%" styleClass="statut_#{ve.statut}">
                                <h:outputText value="#{ve.enteteDoc.dateEntete}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_client}" styleClass="statut_#{ve.statut}">
                                <h:outputText value="#{ve.nom_client}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_vendeur}" style="width: 20%" styleClass="statut_#{ve.statut}">
                                <span>#{ve.numPiece}</span>
                            </p:column>
                        </p:dataTable>
                    </div>
                    <div style="font-size:0.9em">
                        <h:panelGroup style="float: left">
                            <span>#{lab.LC_PFA_total_reglement} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensation.selectPieceAchat.montant}" converter="#{managedFactureAchat.converter}"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                        <h:panelGroup style="float: right" id="total_vente_compensation_equilibre">
                            <span>#{lab.LC_PFA_total_equilibre} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensation.selectPieceAchat.sommeVente}" converter="#{managedFactureAchat.converter}"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                    </div>
                </div> 
                <p:separator/>
                <p:outputPanel id="blog_compensation_facture_achat">
                    <h:panelGrid id="form_compensation_facture_achat" columns="4" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" 
                                 style="padding-top: 2px;padding-bottom: -5px;background: #CCC;width: 100%">
                        <h:outputText value="#{lab.LC_PFA_montant}" />
                        <h:outputText value="#{lab.LC_PFA_date_paiement}" />
                        <h:outputText value="#{lab.LC_PFA_caisse}" />
                        <h:outputText value="#{lab.L_reference}"/>
                        <pe:inputNumber value="#{managedCompensation.pieceVente.montant}"  style="text-align: right"/>
                        <p:calendar value="#{managedCompensation.pieceVente.datePaiementPrevu}" navigator="true" pattern="dd-MM-yyyy" size="10"/>
                        <h:selectOneMenu value="#{managedCompensation.pieceVente.caisse.id}">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}"
                                           itemValue="#{icaiss.id}" />         
                            <f:selectItem itemLabel="----" itemValue="0" itemDisabled=""/>
                            <f:selectItem itemLabel="--Tout afficher--" itemValue="-1" />   
                            <p:ajax event="valueChange" listener="#{managedCompensation.chooseCaissePiece()}"/>  
                        </h:selectOneMenu>
                        <h:panelGroup>
                            <h:inputText value="#{managedCompensation.pieceVente.numRefExterne}" />
                            <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right"
                                             update="blog_compensation_facture_achat" actionListener="#{managedCompensation.saveNew()}"/>
                        </h:panelGroup> 
                    </h:panelGrid>                                            
                    <p:dataTable id="data_compensation_facture_achat" value="#{managedCompensation.selectPieceAchat.compensations}" var="acc" rowKey="#{acc.id}" rowIndexVar="Idx" selectionMode="single">
                        <p:ajax event="rowSelect" global="false" listener="#{managedCompensation.loadOnView}"
                                update=":select_fa_compensation:form_compensation_facture_achat :select_fa_compensation:total_vente_compensation :select_fa_compensation:data_vente_compensation"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedCompensation.unLoadOnView}"
                                update=":select_fa_compensation:form_compensation_facture_achat :select_fa_compensation:total_vente_compensation"/>
                        <p:column headerText="N°" width="20" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{acc.achat.new_}"/>
                            <h:outputText value="#{Idx+1}"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_facture_n}" filterBy="#{acc.vente.numeroPiece}" sortBy="#{acc.vente.datePiece}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            #{acc.vente.vente.numDoc}
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_piece_numero}"  sortBy="#{acc.vente.datePiece}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            #{acc.vente.numeroPiece}
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_date_edition}" sortBy="#{acc.vente.datePiece}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{acc.vente.datePiece}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_date_reglement}" sortBy="#{acc.vente.datePaimentPrevu}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{(acc.vente.statutPiece eq constantes.STATUT_DOC_PAYER)?acc.vente.datePaiement:acc.vente.datePaimentPrevu}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{acc.vente.montant}" converter="#{managedFactureAchat.converter}"/>
                        </p:column>                                                                                    
                        <p:column style="width: 5%;text-align: center">
                            <p:commandButton icon="#{acc.id gt 0? 'ui-icon-minusthick':'ui-icon-plusthick'}" title="#{acc.id gt 0? 'Enlever':'Associer'}"
                                             style="width: 20px;height: 20px" actionListener="#{managedCompensation.addComprensation(acc)}" 
                                             update="data_compensation_facture_achat :select_fa_compensation:total_vente_compensation_equilibre"/>
                        </p:column>  
                    </p:dataTable>
                </p:outputPanel>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de type cout
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PFA_creation_type}" widgetVar="dlgAddTypeCout" modal="true" width="30%"  closeOnEscape="true"> 
                <h:panelGrid id="form_type_cout_facture_achat" columns="4" cellpadding="0" cellspacing="0" style="width: 100%">
                    <p:commandLink actionListener="#{managedTypeCout.typeCout.setAugmentation(!managedTypeCout.typeCout.augmentation)}" global="false" update="@this">
                        <h:graphicImage title="#{managedTypeCout.typeCout.augmentation?'Augmente':'diminu'} le net à payer" library="img/icones" name="#{managedTypeCout.typeCout.augmentation?'plus.png':'moins.png'}"
                                        width="15" height="15" style="padding: 2px;margin-top: 3px;border: 2px solid black; border-radius: 5px;"/>  
                    </p:commandLink>
                    <h:inputText value="#{managedTypeCout.typeCout.libelle}" style="width: 100%"/>
                    <h:selectOneMenu value="#{managedTypeCout.typeCout.module}" style="width: 100%">
                        <f:selectItems value="#{constantes.COUTS(constantes.MOD_COM)}" var="mol" itemValue="#{mol.value}" itemLabel="#{mol.label}"/>
                    </h:selectOneMenu>
                    <p:commandButton icon="ui-icon-circle-plus" oncomplete="dlgAddTypeCout.hide()" actionListener="#{managedTypeCout.saveNew()}" 
                                     update=":main_facture_achat:tabview_facture_achat:select_type_cout_facture_achat"
                                     style="width: 22px; height: 22px;float: right;margin-top: 0px;float: right;background: white!important"/>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des taxes d'un contenu
        *****************************************************************************
        <-->  
        <h:form id="data_taxes_contenu_facture_achat" prependId="false">
            <p:dialog header="#{lab.LC_PFA_taxe_sur_article} '#{managedFactureAchat.contenu.nameArticle}'" widgetVar="dlgListTaxesContenu" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable value="#{managedFactureAchat.contenu.taxes}" var="tx" rowKey="#{tx.id}" id="tbl_data_taxes">
                    <p:column headerText="#{lab.LC_PFA_taxe}" >
                        <span>#{tx.taxe.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_taux}" style="text-align: right;width: 15%">
                        <h:outputText value="#{tx.taxe.taux}" converter="DNA"/>
                        %
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_montant}" style="text-align: right;width: 35%">
                        <h:outputText value="#{tx.montant}" converter="#{managedFactureAchat.converter}"/>
                        Fcfa
                    </p:column>
                    <p:column width="20" style="text-align: center">
                        <p:commandButton icon="#{tx.id gt 0?'ui-icon-minus':'ui-icon-plus'}" styleClass="button_gear" 
                                         actionListener="#{managedFactureAchat.applyOrRemoveTaxe(tx)}" update="tbl_data_taxes"/>
                    </p:column>
                </p:dataTable>  
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue d'ajout des commentaires
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="main_reduct_fa">
            <p:dialog header="#{lab.LC_PFA_bonus}" widgetVar="dlgAddBonus" modal="true" width="30%"  closeOnEscape="true"> 
                <h:panelGrid id="txt_bonus_contenu_facture_achat" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <h:panelGrid columns="2" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" style="font-size: 0.8em;width: 100%" rendered="#{managedFactureAchat.bonus.articleBonus.selectArt}">
                            <h:panelGroup>
                                <span style="font-weight: bold;color: #000">#{managedFactureAchat.bonus.articleBonus.designation}</span>
                                <span>#{lab.LC_PFA_achete_a} </span>
                                <h:outputText value="#{managedFactureAchat.bonus.articleBonus.pua}" converter="#{managedFactureAchat.converter}" style="font-weight: bold;color: #000"/>
                                <span>Fcfa  </span>
                            </h:panelGroup>
                            <h:panelGroup style="float: right">
                                <h:outputText value="#{managedFactureAchat.bonus.articleBonus.stock}" converter="#{managedFactureAchat.converterStock}" style="font-weight: bold;color: #000"/>
                                <h:outputText value=" #{managedFactureAchat.bonus.conditionnementBonus.unite.reference}"/>
                                <span> #{lab.LC_PFA_en_stock}</span>
                            </h:panelGroup>
                        </h:panelGrid>
                    </f:facet>
                    <span>#{lab.L_article}</span>
                    <h:panelGroup id="blog_bonus_facture_achat">
                        <h:panelGroup>
                            <h:inputText value="#{managedFactureAchat.bonus.articleBonus.refArt}" style="color: #{managedFactureAchat.bonus.articleBonus.error?'red':''};width: 90%">
                                <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.searchArticle(true)}" update="blog_bonus_facture_achat"/>
                            </h:inputText>    
                            <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white;margin-top: 5px" title="#{lab.L_liste_article}" global="false"
                                             actionListener="#{managedFactureAchat.initArticles(true)}" oncomplete="dlgListArticle.show()"/>
                        </h:panelGroup>
                    </h:panelGroup>   
                    <span>#{lab.L_conditionnement}</span>
                    <h:selectOneMenu value="#{managedFactureAchat.bonus.conditionnementBonus.id}" style="width: 100%" title="#{lab.LC_PFA_selectionner_conditionnement}" tabindex="15">
                        <f:selectItem itemLabel="--" itemValue="0"/>
                        <f:selectItems value="#{managedFactureAchat.bonus.article.conditionnements}" var="un" itemLabel="#{un.unite.reference}" itemValue="#{un.id}"/>
                        <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseConditionnement(true)}"/>
                    </h:selectOneMenu>     
                    <span>#{lab.L_quantite}</span>
                    <h:inputText value="#{managedFactureAchat.bonus.quantiteBonus}" style="width: 100%;text-align: right"/>      
                    <f:facet name="footer">
                        <p:commandButton actionListener="#{managedFactureAchat.addBonusContenu()}" style="width: 99%"
                                         oncomplete="dlgAddBonus.hide()" value="#{lab.L_enregistrer}"/>                        
                    </f:facet>              
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_date_livraison}" widgetVar="dlgAddDateLivraison" modal="true" width="20%"  closeOnEscape="true"> 
                <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0" styleClass="yvs_nostyle">
                    <p:calendar value="#{managedFactureAchat.dateLivraison}" pattern="dd-MM-yyyy" id="dd_livraison_contenu_facture_achat" size="10"/>
                    <p:commandButton actionListener="#{managedFactureAchat.addDateLivraisonContenu()}" style="float: right" oncomplete="dlgAddDateLivraison.hide()"
                                     value="#{lab.L_enregistrer}" update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_commentaire}" widgetVar="dlgAddCommentaire" modal="true" width="26%"  closeOnEscape="true"> 
                <h:inputTextarea value="#{managedFactureAchat.commentaire}" style="width: 99%" rows="5" id="txt_commentaire_contenu_facture_achat"/>
                <p:commandButton actionListener="#{managedFactureAchat.addCommentaireContenu()}" style="width: 99%"
                                 oncomplete="dlgAddCommentaire.hide()" value="#{lab.L_enregistrer}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_numero_serie}" widgetVar="dlgAddNumSerie" modal="true" width="26%"  closeOnEscape="true"> 
                <h:inputText value="#{managedFactureAchat.numSerie}" style="width: 99%;text-align: center" id="txt_num_serie_contenu_facture_achat"/>
                <p:commandButton actionListener="#{managedFactureAchat.addNumSerieContenu()}" style="width: 99%"
                                 oncomplete="dlgAddNumSerie.hide()" value="#{lab.L_enregistrer}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_quantite_recue}" widgetVar="dlgAddRecu" modal="true" width="26%"  closeOnEscape="true"> 
                <h:inputText value="#{managedFactureAchat.quantite_recu}" style="width: 99%;text-align: center" id="txt_recu_contenu_facture_achat"/>
                <p:commandButton actionListener="#{managedFactureAchat.addRecuContenu()}" style="width: 99%" oncomplete="dlgAddRecu.hide()" 
                                 value="#{lab.L_enregistrer}" update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PFA_montant_remise}" widgetVar="dlgAddRemise" modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGroup id="txt_remise_contenu_facture_achat">
                    <pe:inputNumber id="txt_remise_contenu_facture_achat_1" value="#{managedFactureAchat.montant_remise}" style="text-align: right"
                                    title="#{lab.LC_PFA_remise_valeur}">
                        <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.onRemiseBlur(false)}" update="txt_remise_contenu_facture_achat_2"/>
                    </pe:inputNumber>                    
                    <pe:inputNumber id="txt_remise_contenu_facture_achat_2" value="#{managedFactureAchat.taux_remise}" symbol="%" symbolPosition="suffixe" 
                                    style="margin-right: 2px;float: right;width: 25%;text-align: right" title="#{lab.LC_PFA_remise_pourcentage}">
                        <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.onRemiseBlur(true)}" update="txt_remise_contenu_facture_achat_1 @this"/>
                    </pe:inputNumber>                    
                </h:panelGroup>
                <p:commandButton actionListener="#{managedFactureAchat.addRemiseContenu()}" style="width: 99%"
                                 oncomplete="dlgAddRemise.hide()" value="#{lab.L_enregistrer}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <span></span>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListArticle" modal="true" width="70%" 
                      closeOnEscape="true" height="500"> 
                <p:watermark for="txt_search_article_fa" value="#{lab.L_reference_article}..." />
                <h:panelGrid columns="2" style="width: 100%; font-size: 0.9em" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText id="txt_search_article_fa" value="#{Marticle.article.refArt}"> 
                        <p:ajax event="valueChange" global="false" listener="#{Marticle.searchArticleActif(false)}" update="data_articles_facture_achat"/>
                    </h:inputText> 
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(false, false)}" global="false" update="data_articles_facture_achat" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.pa.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{Marticle.pa.currentPage}/#{Marticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(true, false)}" global="false" update="data_articles_facture_achat" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.pa.disNext}"/>
                        <p:selectOneMenu value="#{Marticle.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{Marticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_articles_facture_achat"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </h:panelGrid>
                <p:dataTable id="data_articles_facture_achat" value="#{Marticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" rowIndexVar="line_art" style="font-size: 0.9em; max-height: 480px">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"
                            update=":main_facture_achat:tabview_facture_achat:form_contenu_facture_achat  :main_facture_achat:desc_contenu_facture_achat :main_reduct_fa:blog_bonus_facture_achat"/>
                    <p:column headerText="N°" width="20">
                        <span title="#{art.designation}">#{line_art+1}</span>
                    </p:column>
                    <p:column width="80" headerText="#{lab.L_reference}">
                        <span title="#{art.designation}">#{art.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}" width="100">
                        <span title="#{art.designation}">#{art.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_famille}" width="100">
                        <span  title="#{art.designation}">#{art.famille.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" width="80">
                        <span  title="#{art.designation}">#{art.categorie}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_prix_a}" width="70" style="text-align: right">
                        <h:outputText value="#{art.pua}" title="#{art.designation}" converter="#{managedFactureAchat.converter}" />
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_prix_v}" width="70" style="text-align: right">
                        <h:outputText value="#{art.puv}" title="#{art.designation}" converter="#{managedFactureAchat.converter}" />
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListConditionnement" modal="true" width="70%" height="450" closeOnEscape="true"> 
                <p:dataTable id="data_conditionnements_facture_achat" value="#{Marticle.conditionnements}" var="art" rowIndexVar="artLine"
                             rowKey="#{art.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedFactureAchat.loadOnViewConditionnement}" oncomplete="dlgListConditionnement.hide()"
                            update=":main_facture_achat:tabview_facture_achat:form_contenu_facture_achat  :main_facture_achat:desc_contenu_facture_achat :main_reduct_fa:blog_bonus_facture_achat"/>
                    <p:column headerText="N°" width="20" style="text-align: center">
                        #{artLine+1}
                    </p:column>                                                        
                    <p:column headerText="#{lab.L_reference}" width="100">
                        <span style="font-weight: bold">#{art.article.refArt}</span>
                    </p:column>
                    <p:column  headerText="#{lab.L_designation}" width="150"> 
                        #{art.article.designation}
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_unites}" width="100">
                        #{art.unite.libelle}                                
                        <span style="font-weight: bold">[#{art.unite.reference}]</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" width="100" style="text-align: center">
                        #{art.article.categorie}
                    </p:column>
                    <p:column  headerText="#{lab.LC_PFA_prix_v}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prix}"  converter="DN" />                                                            
                    </p:column>
                    <p:column  headerText="#{lab.LC_PFA_prix_a}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prixAchat}"  converter="DN" />                                                            
                    </p:column>
                </p:dataTable> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des clients
        *****************************************************************************
        <-->  

        <h:form prependId="false">                    
            <p:dialog header="#{lab.LC_PFA_liste_fournisseurs}" widgetVar="dlgListFournisseurs" closeOnEscape="true" width="78%" modal="true" height="500" dynamic="true">   
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText value="#{managedFournisseur.numSearch_}" style="float: left;text-align: center;margin-left: -10px">
                        <p:ajax event="valueChange" listener="#{managedFournisseur.searchByNum()}" update="data_fournisseur_fa"/>
                    </h:inputText>   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(false, false)}" global="false" update="data_fournisseur_fa" icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedFournisseur.paginator.currentPage}/#{managedFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(true, false)}" global="false" update="data_fournisseur_fa" icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedFournisseur.nbMax}" label="#{lab.L_nombre}" valueChangeListener="#{managedFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedFournisseur.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_fournisseur_fa"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </h:panelGrid>                                 
                <p:dataTable id="data_fournisseur_fa"  value="#{managedFournisseur.fournisseurs}" var="fsseur_" rowKey="#{fsseur_.id}"
                             selectionMode="single" rowIndexVar="cltIdx" style="max-height: 450px; overflow-y: auto">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewFsseur}" oncomplete="dlgListFournisseurs.hide()"/>
                    <p:column headerText="N°" style="width: 10%">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_code}" style="width: 20%">
                        <span>#{fsseur_.codeFsseur}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_nom}">
                        <span>#{fsseur_.nom_prenom}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}">
                        <span>#{fsseur_.categorie.libelle}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_ville}">
                        <span>#{fsseur_.tiers.ville.libele}</span>
                    </p:column>
                </p:dataTable> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des tranches horaires
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PFA_liste_tranches_depot}" widgetVar="dlgListTranche" modal="true" width="40%"  closeOnEscape="true"> 
                <p:dataTable id="data_tranche_fa" value="#{managedFactureAchat.tranches}" var="trh" rowKey="#{trh.id}" selectionMode="single" rowIndexVar="line_trh">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewTranche}" oncomplete="dlgListTranche.hide()"/>
                    <p:column headerText="N°" width="20">
                        <span>#{line_trh+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_titre}" width="130">
                        <span>#{trh.titre}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_heure_debut}" width="90">
                        <h:outputText value="#{trh.heureDebut}" converter="TIME"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_heure_fin}" width="90">
                        <h:outputText value="#{trh.heureFin}" converter="TIME"/>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue plus options
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOptions" resizable="false"> 
                <h:panelGrid id="blog_plus_option_facture_achat" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">    
                    <f:facet name="header">
                        <div align="right" style="padding:5px">
                            <p:selectBooleanCheckbox itemLabel="Recherche automatique" value="#{managedFactureAchat.searchAutomatique}">
                                <p:ajax event="valueChange"/>
                            </p:selectBooleanCheckbox>
                        </div>
                    </f:facet>
                    <h:outputText value="#{lab.L_agence}" rendered="#{acces.multiAgence}"/>
                    <h:selectOneMenu value="#{managedFactureAchat.agence_}" id="_select_agence_facture_achat" style="width: 100%" rendered="#{acces.multiAgence}">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                       itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                        <p:ajax event="valueChange" listener="#{managedFactureAchat._chooseAgence()}" 
                                update="blog_plus_option_facture_achat :main_facture_achat:data_facture_achat"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PFA_depot} " />
                    <h:selectOneMenu value="#{managedFactureAchat.depot_}" id="_select_depot_facture_achat" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedDepot.depots_all}" var="de"
                                       itemLabel="#{de.designation}" itemValue="#{de.id}"/>
                        <p:ajax event="valueChange" listener="#{managedFactureAchat._chooseDepot()}"
                                update="_select_tranche_facture_achat :main_facture_achat:data_facture_achat"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PFA_tranche}"/>
                    <h:selectOneMenu value="#{managedFactureAchat.tranche_}" id="_select_tranche_facture_achat" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedFactureAchat.tranches_point_}" var="tr"
                                       itemLabel="#{tr.titre}" itemValue="#{tr.id}"/>
                        <p:ajax event="valueChange" listener="#{managedFactureAchat._chooseTranche()}"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PA_verouiller} " /> 
                    <h:selectOneMenu value="#{managedFactureAchat.cloturer_}" valueChangeListener="#{managedFactureAchat.chooseCloturer}" style="width: 100%">
                        <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                        <f:selectItem itemLabel="OUI" itemValue="#{true}"/>
                        <f:selectItem itemLabel="NON" itemValue="#{false}"/>
                        <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat"/>
                    </h:selectOneMenu>   
                    <h:outputText value="#{lab.LC_PFA_comptabiliser} ?"/>
                    <h:selectOneMenu value="#{managedFactureAchat.comptaSearch}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                        <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamComptabilised()}" update=":main_facture_achat:data_facture_achat"/>
                    </h:selectOneMenu>  

                    <h:panelGroup>
                        <h:outputText value="#{lab.LDB_PC_dates}"  />
                        <h:selectBooleanCheckbox value="#{managedFactureAchat.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client" listener="#{managedFactureAchat.addParamDate()}"/>
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedFactureAchat.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedFactureAchat.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedFactureAchat.addParamDate}"  update=":main_facture_achat:data_facture_achat" />
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedFactureAchat.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedFactureAchat.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedFactureAchat.addParamDate}"  update=":main_facture_achat:data_facture_achat" />
                        </p:calendar>
                    </h:panelGroup>

                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedFactureAchat.idsSearch}" style="width: 100%" title="#{lab.LC_PFA_text3}">
                        <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamIds()}" update=":main_facture_achat:data_facture_achat"/>
                    </h:inputText>                           
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de bon de commande
        *****************************************************************************
        <-->  

        <h:form prependId="false">                    
            <p:dialog header="#{lab.LC_PFA_liste_bons_commande}" widgetVar="dlgListBonCommande" 
                      closeOnEscape="true" width="60%" modal="true" dynamic="true">                                  
                <p:dataTable id="data_bon_commande_fa"  value="#{managedBonAchat.documents}" var="fichfA" rowKey="#{fichfA.id}"
                             selectionMode="single" rowIndexVar="fichfAIdx" paginator="true" rows="20" paginatorAlwaysVisible="false">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewDoc}" oncomplete="dlgListBonCommande.hide()"/>
                    <p:column headerText="N°" style="width: 5%;text-align: center">
                        <span>#{fichfAIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}">
                        <span>#{fichfA.numDoc}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_date_document}" style="text-align: center">
                        <h:outputText value="#{fichfA.dateDoc}" converter="DATE"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_numero_piece}">
                        <span>#{fichfA.numPiece}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_fournisseur}">
                        <h:outputText value="#{fichfA.fournisseur.tiers.nom_prenom}"/>
                    </p:column>
                </p:dataTable> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des articles du bon de commande
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgListArticle">
            <p:dialog header="#{lab.LC_PFA_contenus_bon_commande}" widgetVar="dlgListContenuBon" modal="true" width="60%"  closeOnEscape="true" footer="#{lab.L_copy}"> 
                <p:dataTable id="data_contenu_bon_achat_fa" value="#{managedFactureAchat.contenusBon}" var="artb" rowKey="#{artb.id}" 
                             rowIndexVar="artb_" selectionMode="single">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewArticleBon}" oncomplete="dlgListContenuBon.hide()"/>
                    <p:column headerText="N°" width="30">
                        <span>#{artb_+1}</span>
                    </p:column>
                    <p:column filterBy="#{artb.article.refArt}" style="width: 22%">
                        <span>#{artb.article.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_article}">
                        <span>#{artb.article.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_qte}" style="text-align: right;width: 10%">
                        <h:outputText value="#{artb.quantiteAttendu}" converter="#{managedFactureAchat.converterStock}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_prix}" style="text-align: right;width: 10%">
                        <h:outputText value="#{artb.puaAttendu}" converter="#{managedFactureAchat.converter}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFA_rem}" style="text-align: right;width: 10%">
                        <h:outputText value="#{artb.remiseAttendu}" converter="#{managedFactureAchat.converter}"/>
                        <span> %</span>
                    </p:column>
                    <p:column headerText="#{lab.L_total}" style="text-align: right;width: 10%">
                        <h:outputText value="#{artb.prixTotal}" converter="#{managedFactureAchat.converter}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue creation des types de cout
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PFA_ajout_article_fournisseur}" widgetVar="dlgAddArticleFsseur" modal="true" width="40%" closeOnEscape="true"> 
                <h:panelGrid id="blog_form_article_fournisseur_fa" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        #{lab.LC_PFA_fournisseur} : <b><span>#{managedFournisseur.article.fournisseur.nom_prenom}</span></b>
                    </f:facet>
                    <span>#{lab.L_article} </span>
                    <h:inputText value="#{managedFournisseur.article.article.designation}" style="width: 98%" readonly="true"/>   
                    <span>#{lab.L_conditionnement} </span>
                    <h:selectOneMenu value="#{managedFournisseur.article.conditionnement.unite.id}" id="chp_liste_cond" >
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{managedUniteMesure.unites}" var="cond_" itemLabel="#{cond_.reference}" itemValue="#{cond_.id}"/>   
                        <p:ajax event="valueChange" listener="#{managedFournisseur.chooseCondit()}" update="chp_liste_cond"/>
                    </h:selectOneMenu>  
                    <span>#{lab.LC_PFA_delai_livraison} </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.delaiLivraison}" style="width: 35%" decimalPlaces="0"/>  
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDelaisLiv}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup>
                    <span>#{lab.LC_PFA_prix_achat} </span>
                    <pe:inputNumber value="#{managedFournisseur.article.prix}" style="width: 70%"/>
                    <span>#{lab.LC_PFA_duree_garantie} </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.dureeGarantie}" style="width: 35%" decimalPlaces="0"/>  
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDureeGaranti}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup> 
                    <span>#{lab.LC_PFA_remise} </span>                    
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.remise}" style="width: 36.5%"/>  
                        <h:selectOneMenu value="#{managedFournisseur.article.natureRemise}">
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                        </h:selectOneMenu>  
                    </h:panelGroup> 
                    <span>#{lab.LC_PFA_duree_vie} </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.dureeVie}" style="width: 35%" decimalPlaces="0"/>      
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDureeVie}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup> 
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddArticleFsseur.hide()" actionListener="#{managedFactureAchat.addNewArticleFournisseur()}" 
                                 update="blog_form_article_fournisseur_fa :main_facture_achat:tabview_facture_achat:form_contenu_facture_achat  :main_facture_achat:desc_contenu_facture_achat" icon="ui-icon-check"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de mode de paiement
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PFA_creation_model}" widgetVar="dlgAddModePaiement" modal="true" width="25%"  closeOnEscape="true"> 
                <h:panelGrid id="form_mode_paiement_achat" columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                    <span>#{lab.L_designation} </span>
                    <h:inputText value="#{managedModeReglement.mode.designation}" style="width: 100%"/>                    
                    <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddModePaiement.hide()" actionListener="#{managedModeReglement.saveNew()}" 
                                     update=":main_facture_achat:tabview_facture_achat:select_model_mens_facture_achat"/>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>       

        <h:form prependId="false" id="main-motif_etape_achat">
            <p:dialog hideEffect="explode" widgetVar="dglMotifCancelEtape" closeOnEscape="true" header="#{lab.LC_PA_motif_annulation_etape}" width="35%">
                <h:panelGrid id="value_motif_etape_achat" columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                    <h:inputTextarea value="#{managedFactureAchat.motifEtape}" style="width: 100%" rows="4"/>                
                    <f:facet name="footer">
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFactureAchat.annulEtapeFacture()}" oncomplete="dglMotifCancelEtape.hide();" style="float: right" rendered="#{!managedFactureVente.lastEtape}"
                                         update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dglEtatComptabilised" closeOnEscape="true" resizable="false" width="25%">
                <p:commandButton value="#{lab.LC_PFA_toutes_factures}" actionListener="#{managedFactureAchat.verifyComptabilised(null)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LC_PFA_factures_comptabilise}" actionListener="#{managedFactureAchat.verifyComptabilised(true)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LC_PFA_factures_non_comptabilise}" actionListener="#{managedFactureAchat.verifyComptabilised(false)}" style="width: 99%"/>
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteAnalytique" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteAnalytique(managedFactureAchat.selectAnalytique, true)}"  oncomplete="dlgConfirmDeleteAnalytique.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteAnalytique.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuleDoc" closeOnEscape="true"
                             message="#{lab.LC_PFA_text5}" header="#{lab.L_confirmation}">
                <p:commandButton type="button" value="#{lab.L_oui}" onclick="dglMotifCancelEtape.show();
                        dlgConfirmAnnuleDoc.hide()" />
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmAnnuleDoc.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnulerDoc" closeOnEscape="true"
                             message="#{lab.LC_PFA_text5}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.cancelEtapeFacture(false, false, false)}" oncomplete="dlgConfirmAnnulerDoc.hide()" 
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmAnnulerDoc.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnulePiece" closeOnEscape="true"
                             message="#{lab.LC_PFA_text27}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.openConfirmPaiement()}" oncomplete="dlgConfirmAnnulePiece.hide()" 
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat"/>
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmAnnulePiece.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmChangeCategorie" closeOnEscape="true"
                             message="#{lab.LC_PFA_text26}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.updatePrixArticle()}" oncomplete="dlgConfirmChangeCategorie.hide()"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFactureAchat.noChangeCategorie()}" oncomplete="dlgConfirmChangeCategorie.hide()"/>
            </p:confirmDialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAddArticle" closeOnEscape="true"
                             message="#{lab.LC_PFA_text25}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" onclick="dlgConfirmAddArticle.hide();
                        dlgAddArticleFsseur.show()" global="false"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFactureAchat.resetFicheArticle()}" oncomplete="dlgConfirmAddArticle.hide()" global="false"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanCout()}" oncomplete="dlgConfirmDeleteCout.hide();collapseForm('cout_facture_achat')"
                                 update=":main_facture_achat:tabview_facture_achat:blog_form_cout_facture_achat :main_facture_achat:chp_fa_net_a_payer"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCout.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout_" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanCout_()}" oncomplete="dlgConfirmDeleteCout_.hide();collapseForm('cout_facture_achat')" 
                                 update=":main_facture_achat:tabview_facture_achat:blog_form_cout_facture_achat :main_facture_achat:chp_fa_net_a_payer"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCout_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanContenu()}" 
                                 update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                 oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('contenu_facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticleByForce" closeOnEscape="true" message="#{lab.LC_PFA_text24}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteSelectContenu(true)}" 
                                 update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                 oncomplete="dlgConfirmDeleteArticleByForce.hide();collapseForm('contenu_facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticleByForce.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true" message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteSelectContenu(false)}" 
                                 update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                 oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('contenu_facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticles" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LC_PFV_memoriser_choix_session}</span>
                    <p:selectBooleanCheckbox value="#{managedFactureAchat.memoriserDeleteContenu}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanArticles(true)}" 
                                 update=":main_facture_achat:tabview_facture_achat:data_contenu_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                 oncomplete="dlgConfirmDeleteArticles.hide();collapseForm('contenu_facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticles.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteMensualite" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanReglement()}" oncomplete="dlgConfirmDeleteMensualite.hide();collapseForm('mensualite_facture_achat')"
                                 update=":main_facture_achat:tabview_facture_achat:form_mensualite_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteMensualite.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteMensualite_" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanReglement_()}" oncomplete="dlgConfirmDeleteMensualite_.hide();collapseForm('mensualite_facture_achat')"
                                 update=":main_facture_achat:tabview_facture_achat:form_mensualite_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteMensualite_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaire" closeOnEscape="true" header="#{lab.LC_PFA_attention}"
                             message="#{lab.LC_PFA_text23}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.transmisOrderByForce()}" oncomplete="dlgConfirmChangeInventaire.hide()"
                                 update=":main_facture_achat:tabview_facture_achat:data_livraison_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaire.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByValid" closeOnEscape="true" header="#{lab.LC_PFA_attention}"
                             message="#{lab.LC_PFA_text23}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.onValideDistantLivraisonByForce()}" oncomplete="dlgConfirmChangeInventaireByValid.hide()"
                                 update=":main_facture_achat:tabview_facture_achat:data_livraison_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByValid.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByCancel" closeOnEscape="true" header="#{lab.LC_PFA_attention}"
                             message="#{lab.LC_PFA_text23}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.onAnnulerDistantLivraisonByForce()}" oncomplete="dlgConfirmChangeInventaireByCancel.hide()"
                                 update=":main_facture_achat:tabview_facture_achat:data_livraison_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByCancel.hide()"/>
            </p:confirmDialog>
        </h:form> 
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <div >
                    <span>Supprimer aussi les documents liés</span>
                    <p:selectBooleanCheckbox value="#{managedFactureAchat.deleteAll}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBean()}" oncomplete="dlgConfirmDelete.hide();collapseList('facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <div >
                    <span>Supprimer aussi les documents liés</span>
                    <p:selectBooleanCheckbox value="#{managedFactureAchat.deleteAll}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide();collapseList('facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog id="id_confirm_close_fa" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir #{managedFactureAchat.selectDoc.cloturer?'dévérrouiller':'vérrouiller'}?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.cloturer()}" oncomplete="dlgConfirmClose.hide()" update=":main_facture_achat:data_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">            
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteLie" closeOnEscape="true"
                             message="#{lab.LC_PFA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.deleteBeanLie()}" oncomplete="dlgConfirmDeleteLie.hide()"
                                 update=":main_facture_achat:tabview_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteLie.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnulerForcer" closeOnEscape="true"
                             message="#{lab.LC_PFA_text22}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.annulerOrder(true, false)}" oncomplete="dlgConfirmAnnulerForcer.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmAnnulerForcer.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="#{lab.LC_PFA_text21}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.annulerOrder(false, false)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFactureAchat.annulerOrder(false, true)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuserForcer" closeOnEscape="true"
                             message="#{lab.LC_PFA_text22}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.refuserOrder(true, false)}" oncomplete="dlgConfirmRefuserForcer.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmRefuserForcer.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuser" closeOnEscape="true"
                             message="#{lab.LC_PFA_text21}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.refuserOrder(false, false)}" oncomplete="dlgConfirmRefuser.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFactureAchat.refuserOrder(false, true)}" oncomplete="dlgConfirmRefuser.hide();collapseForm('facture_achat')"
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">            
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmSoumis" closeOnEscape="true" message="#{lab.LC_PFA_text20}" header="#{lab.L_confirmation}">
                <div align="center">
                    <div>
                        <p:calendar value="#{managedFactureAchat.dateLivraison}" size="8" pattern="dd-MM-yyyy" id="chp_date_valid_bla" navigator="true">
                            <p:ajax event="dateSelect" global="false"/>
                        </p:calendar>
                        <h:selectOneMenu value="#{managedFactureAchat.statutLivraison}">                        
                            <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                            <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                            <p:ajax event="valueChange" global="false"/>
                        </h:selectOneMenu>                     
                    </div>
                    <div style="display: block">
                        <p:outputPanel id="blog-contenu_fa_require_lot">
                            <p:dataTable value="#{managedFactureAchat.contenusRequireLot}" var="aRL" rowKey="#{aRL.id}" style="width: 1000px"
                                         id="data-contenu_fa_require_lot" editable="true" rendered="#{!managedFactureAchat.contenusRequireLot.isEmpty()}">
                                <f:facet name="header">
                                    Articles qui demandent un lot de reception
                                </f:facet>
                                <p:column headerText="Article" style="text-align: left">
                                    #{aRL.article.designation}
                                </p:column>
                                <p:column headerText="Quantitée" style="text-align: right">
                                    <h:outputText value="#{aRL.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie}: #{aRL.numSerie}"/>
                                    <span title="#{aRL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{aRL.conditionnement.unite.reference}</span>
                                </p:column>
                                <p:column headerText="Numero de lot" style="text-align: center">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{aRL.lot.numero}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <h:inputText value="#{aRL.lot.numero}" style="width:100%;text-align: center">
                                                <p:ajax event="valueChange" listener="#{managedFactureAchat.findLotReception(aRL)}"/>
                                            </h:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Date fabrication" style="text-align: center">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{aRL.lot.dateFabrication}" converter="DATE"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:calendar value="#{aRL.lot.dateFabrication}" navigator="true" pattern="dd-MM-yyyy" style="width:100%;text-align: center"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Date expiration" style="text-align: center">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{aRL.lot.dateExpiration}" converter="DATE"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:calendar value="#{aRL.lot.dateExpiration}" navigator="true" pattern="dd-MM-yyyy" style="width:100%;text-align: center"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column style="text-align: center;width: 5px">
                                    <p:rowEditor />
                                </p:column>  
                            </p:dataTable>
                        </p:outputPanel>
                    </div>
                </div>
                <div align="center">
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedFactureAchat.transmisOrder()}" oncomplete="dlgConfirmSoumis.hide();collapseForm('facture_achat')"/>
                    <p:commandButton type="button" icon="ui-icon-close" value="#{lab.L_non}" onclick="dlgConfirmSoumis.hide()"/>
                </div>                
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanAchat" closeOnEscape="true"
                             message="#{lab.LC_PFA_text19}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.cleanAchat()}" oncomplete="dlgCleanAchat.hide();collapseForm('facture_achat');collapseForm('contenu_facture_achat')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCleanAchat.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCancelV" closeOnEscape="true"
                             message="#{lab.LC_PFA_text18}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.cancelEtapeFacture(false, false)}" oncomplete="dlgCancelV.hide();" 
                                 update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCancelV.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmChangeMode" closeOnEscape="true" header="#{lab.L_confirmation}"
                             message="#{lab.LC_PFA_text17} ">
                <span>#{lab.LC_PFA_text15}</span>
                <p:commandButton value="#{lab.LC_PFA_continuer}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.saveNewReglement(true)}" 
                                 update=":main_facture_achat:tabview_facture_achat:form_mensualite_facture_achat" oncomplete="dlgConfirmChangeMode.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeMode.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmDeletePhase" closeOnEscape="true" header="#{lab.L_confirmation}"
                             message="#{lab.LC_PFA_text16} ">
                <span>#{lab.LC_PFA_text15}</span>
                <p:commandButton value="#{lab.LC_PFA_continuer}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.saveNewReglement(true)}" 
                                 update=":main_facture_achat:tabview_facture_achat:form_mensualite_facture_achat" oncomplete="dlgConfirmDeletePhase.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmDeletePhase.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgCancelPcv1" closeOnEscape="true"
                             message="#{lab.LC_PFA_text16}">
                <span>#{lab.LC_PFA_text15}</span>
                <p:commandButton value="#{lab.LC_PFA_continuer}" icon="ui-icon-circle-check" actionListener="#{managedReglementAchat.cancelStatutPayeOfPCVForBanque()}" oncomplete="dlgCancelPcv1.hide()" />
                <p:commandButton value="#{lab.LC_PFA_annuler}" onclick="dlgCancelPcv1.hide()"  type="button" icon="ui-icon-circle-close"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgCancelPcv3" closeOnEscape="true"
                             message="#{lab.LC_PFA_text13} ">
                <span>#{lab.LC_PFA_text14}</span>
                <p:commandButton value="#{lab.LC_PFA_continuer}" icon="ui-icon-circle-check" actionListener="#{managedReglementAchat.cancelStatutPayeOfPCVByCompensation()}" oncomplete="dlgCancelPcv3.hide()" />
                <p:commandButton value="#{lab.LC_PFA_annuler}" onclick="dlgCancelPcv3.hide()"  type="button" icon="ui-icon-circle-close"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgSuspendFact" closeOnEscape="true"
                             message="#{lab.LC_PFA_text11}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFactureAchat.cancelEtapeFacture(false, true, false)}" 
                                 oncomplete="dlgSuspendFact.hide();" update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgSuspendFact.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmPaye" closeOnEscape="true"
                             message="#{lab.LC_PFA_text10}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LC_PFA_text12}</span>
                    <p:selectBooleanCheckbox value="#{managedReglementAchat.needConfirmation}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementAchat.reglerPieceTresorerie(true)}" oncomplete="dlgConfirmPaye.hide();" 
                                 update=":main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmPaye.hide()"/>                
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_confirmation}" width="40%" widgetVar="dlgValidDocAll" message="#{lab.LCF_POD_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.validerOrderAll()}" oncomplete="dlgValidDocAll.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgValidDocAll.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabiliseDoc" message="#{lab.LC_PFA_text9}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserAchat(managedFactureAchat.selectDoc, true, true)}"
                                 update=":main_facture_achat:btn_comptabilised_fa :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat" oncomplete="dlgComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabiliseDoc.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseDoc" message="#{lab.LC_PFA_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserAchat(managedFactureAchat.selectDoc, true)}"
                                 update=":main_facture_achat:btn_comptabilised_fa :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat" oncomplete="dlgUnComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseDoc.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabilisePiece" message="#{lab.LC_PFA_text7}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserCaisseAchat(managedFactureAchat.selectReglement, true, true)}"
                                 update=":main_facture_achat:btn_comptabilised_fa :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat" oncomplete="dlgComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabilisePiece.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePiece" message="#{lab.LC_PFA_text6}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseAchat(managedFactureAchat.selectReglement, true)}"
                                 update=":main_facture_achat:btn_comptabilised_fa :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat" oncomplete="dlgUnComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.LC_PFA_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePiece.hide()" />
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_facture_achat"> 
            <div class="part_fix">
                <div style="float: left;width: 20%">
                    <p:splitButton value="#{lab.L_enregistrer}" id="save_facture_achat" actionListener="#{managedFactureAchat.saveNew()}" update="entete_form_facture_achat @this"
                                   icon="ui-icon-disk" oncomplete="_slideShow('zone_show_detail_produit')" >
                        <p:menuitem value="#{lab.L_nouveau}" id="cancel_facture_achat" actionListener="#{managedFactureAchat.resetFiche()}" update="blog_form_facture_achat save_facture_achat" icon="ui-icon-document"
                                    oncomplete="collapseForm('facture_achat');collapseForm('contenu_facture_achat');collapseForm('cout_facture_achat');collapseForm('mensualite_facture_achat');collapseForm('reglement_facture_achat');_slideShow('zone_show_detail_produit')"
                                    />
                        <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger}" global="false" actionListener="#{managedFactureAchat.print(managedFactureAchat.selectDoc)}" 
                                    ajax="false" title="#{lab.LC_PFV_telecharger_facture}" rendered="#{managedFactureAchat.docAchat.id gt 0}"/>                   
                        <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger_sans_entete}" global="false" actionListener="#{managedFactureAchat.print(managedFactureAchat.selectDoc, false)}" 
                                    ajax="false" title="#{lab.LC_PFV_telecharger_facture}" rendered="#{managedFactureAchat.docAchat.id gt 0}"/>                   
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelete_.show()" global="false"/>
                    </p:splitButton>
                    <p:splitButton value="Valider" icon="ui-icon-check" id="delete_facture_achat" global="false" onclick="dlgValidDocAll.show()" style="font-size: 0.8em">
                        <p:menuitem value="#{lab.LC_PFA_reconstruire_reference}" icon="ui-icon-refresh" actionListener="#{managedFactureAchat.reBuildNumero()}" update=":main_facture_achat:data_facture_achat"/>
                        <p:menuitem value="#{lab.LC_PFA_equilibrer}" icon="ui-icon-refresh" actionListener="#{managedFactureAchat.equilibreAll()}" update=":main_facture_achat:data_facture_achat"/>
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelete.show()" global="false"/>
                    </p:splitButton>
                </div>
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedFactureAchat.parcoursInAllResult(false)}" icon="ui-icon-circle-triangle-w" 
                                     update="txt_parc_linear_facture_achat save_facture_achat" oncomplete="collapseForm('facture_achat');_slideShow('zone_show_detail_produit')"/>
                    <h:inputText value="#{managedFactureAchat.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_facture_achat"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedFactureAchat.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedFactureAchat.parcoursInAllResult(true)}" icon="ui-icon-circle-triangle-e" 
                                     update="txt_parc_linear_facture_achat save_facture_achat" oncomplete="collapseForm('facture_achat');_slideShow('zone_show_detail_produit')"/>
                </h:panelGroup>  
                <div style="float: right">
                    <div style="float: right">
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('facture_achat');
                                collapseList('livraison_achat');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('facture_achat');
                                collapseList('livraison_achat');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>            
                        <p:spacer />        
                        <h:link title="#{lab.LC_PFA_mode_consultation}" onclick="collapseGrid('facture_achat');
                                return false">
                            <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>  
                    </div>
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_facture_achat">
                    <p:outputPanel id="blog_form_facture_achat" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="1" style="width: 100%">
                            <p:outputPanel autoUpdate="true" id="entete_form_facture_achat">
                                <h:panelGrid columns="3" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -5px;margin-top: -5px" cellpadding="0" cellspacing="0" rendered="#{managedFactureAchat.docAchat.id gt 0}">
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white">                                       
                                        <span style="font-size: initial">#{lab.L_numero} : </span>                                          
                                        <h:outputText id="txt_reference_document_facture_achat" value="#{managedFactureAchat.docAchat.numDoc}"/>                                    
                                    </h:panelGrid> 
                                    <p:outputPanel id="grp_btn_etat_facture_achat" style="float: right">
                                        <p:outputPanel styleClass="yvs_form_of" rendered="#{managedFactureAchat.docAchat.update}">   
                                            <p:commandLink value="#{(managedFactureAchat.docAchat.statutRegle == constantes.ETAT_REGLE)?'Réglé':(managedFactureAchat.docAchat.statutRegle == constantes.ETAT_ENCOURS)?'En cours':'En attente'}" styleClass="button-stateOF #{(true)?'button-stateOF_actif':''}" 
                                                           disabled="true"/>
                                            <p:commandLink value="#{(managedFactureAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'Receptionné':'Générer un BL'} #{(managedFactureAchat.docAchat.statutLivre == constantes.ETAT_ENCOURS)?'(P)':(managedFactureAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'':'(E)'}"
                                                           styleClass="button-stateOF #{(managedFactureAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'button-stateOF_actif':''}" process="@this"
                                                           disabled="#{managedFactureAchat.docAchat.statutLivre == constantes.ETAT_LIVRE or !managedFactureAchat.docAchat.livraisonDo}" update="grp_btn_etat_facture_achat"
                                                           actionListener="#{managedFactureAchat.buildToReceive()}" oncomplete="dlgConfirmSoumis.show()" rendered="#{managedFactureAchat.docAchat.typeAchat.canReception}"/>                                                            
                                        </p:outputPanel>                                                        
                                        <br /><h:outputText value="En cours de reception" style="text-align: center; margin-left: 12%; font-style: italic; color: #009999; font-size: 0.8em; font-weight: bold" rendered="#{managedFactureAchat.docAchat.statutLivre == constantes.ETAT_ENCOURS}"/>
                                    </p:outputPanel>
                                    <h:panelGrid style="float: right">
                                        <p:outputPanel id="etapes_valide_facture_achat" styleClass="yvs_form_of"> 
                                            <ui:repeat value="#{managedFactureAchat.docAchat.etapesValidations}" var="etapeM" >
                                                <p:contextMenu for="etape_valide_facture_achat" rendered="#{etapeM.etapeValid or etapeM.motif != null}" style="font-size: 0.7em">
                                                    <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PFA_proprietes}" title="#{lab.LC_PFA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()" rendered="#{etapeM.etapeValid}"
                                                                update=":form_ppte_valid_fa:table_ppte_valid_fa"/>
                                                    <p:menuitem icon="ui-icon-clipboard" value="#{lab.LC_PFA_motif_annulation}" title="#{lab.LC_PA_voir_motif_annulation}" oncomplete="dglMotifCancelEtape.show()" rendered="#{etapeM.motif != null}"
                                                                update=":main-motif_etape_achat:value_motif_etape_achat" actionListener="#{managedFactureAchat.motifEtapeFacture(etapeM.motif, true)}"/>
                                                    <p:separator  rendered="#{etapeM.etapeValid}"/>
                                                    <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.LC_PFA_annuler}" rendered="#{etapeM.etapeValid}"
                                                                update=":main-motif_etape_achat:value_motif_etape_achat" actionListener="#{managedFactureAchat.annulEtapeFacture(etapeM, false)}"/>
                                                </p:contextMenu>
                                                <p:commandLink id="etape_valide_facture_achat" value="#{etapeM.etape.labelStatut}" disabled="#{(!etapeM.etapeActive or etapeM.etapeValid)}" title="#{etapeM.etape.titreEtape}" 
                                                               update=":main_facture_achat:grp_btn_etat_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:data_facture_achat :main_facture_achat:tabview_facture_achat:data_contenu_facture_achat :main_facture_achat:tabview_facture_achat:data_mensualite_facture_achat"
                                                               styleClass="#{(etapeM.etapeValid)?'statut_valide':'etat_formation_true'}" actionListener="#{managedFactureAchat.validEtapeFacture(etapeM, false)}"/>                        
                                                <h:outputText value=" #{lab.LC_PFA_A} " rendered="#{!etapeM.etapeValid and etapeM.motif ne null}" title="#{lab.LC_PFA_annuler_pour} : #{etapeM.motif}" style="position: relative;left: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                                            </ui:repeat>
                                            <h:panelGroup style="float: right">
                                                <p:commandLink value="#{(managedFactureAchat.docAchat.statut == constantes.ETAT_VALIDE)?'VALID&Eacute;':'VALIDER'}" rendered="#{managedFactureAchat.docAchat.etapesValidations.size() lt 1}" process="@this"  
                                                               disabled="#{!(managedFactureAchat.docAchat.statut == constantes.ETAT_EDITABLE)}" styleClass="#{(managedFactureAchat.docAchat.statut == constantes.ETAT_VALIDE)?'statut_valide':'etat_formation_true'}"                                                           
                                                               actionListener="#{managedFactureAchat.validerOrder()}" update="grp_btn_etat_facture_achat etapes_valide_facture_achat"/>
                                                <p:commandLink value="#{managedFactureAchat.writeEtape(((managedFactureAchat.docAchat.statut == constantes.ETAT_EDITABLE)?'EN EDITION':'EDITABLE'), managedFactureAchat.docAchat.firstEtape)}" onclick="dlgCancelV.show()" type="button"
                                                               disabled="#{(managedFactureAchat.docAchat.statut == constantes.ETAT_EDITABLE)}" process="@this" styleClass="#{(managedFactureAchat.docAchat.statut == constantes.ETAT_EDITABLE)?'statut_valide':'etat_formation_true'}"/>
                                                <p:commandLink value="#{managedFactureAchat.writeEtape(((managedFactureAchat.isComptabiliseBean(managedFactureAchat.docAchat))?'COMPTABILIS&Eacute;':'COMPTABILISER'), managedFactureAchat.docAchat.firstEtape)}"
                                                               type="button" styleClass="#{(managedFactureAchat.docAchat.comptabilise)?'statut_valide':'etat_formation_true'}"
                                                               onclick="dlgComptabiliseDoc.show()" rendered="#{(managedFactureAchat.docAchat.statut==constantes.STATUT_DOC_VALIDE) or managedFactureAchat.docAchat.comptabilise}" global="false" id="btn_comptabilised_fa"/>
                                                <p:contextMenu for="btn_comptabilised_fa" style="font-size: 0.8em">
                                                    <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(managedFactureAchat.docAchat.id, constantes.SCR_ACHAT)}" 
                                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>
                                                    <p:separator style="width: 100%" />
                                                    <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.LC_PFA_annuler}" onclick="dlgUnComptabiliseDoc.show()" disabled="#{!managedFactureAchat.docAchat.comptabilise}" global="false"/>
                                                </p:contextMenu>
                                            </h:panelGroup>
                                        </p:outputPanel>                                                
                                    </h:panelGrid>
                                </h:panelGrid>                                                                          
                            </p:outputPanel>
                            <p:outputPanel style="width: 100%" id="form_facture_achat">
                                <div style="width: 61%;float: left">
                                    <p:outputPanel id="infos_document_facture_achat" style="width: 100%">
                                        <h:panelGrid id="infos_facture_achat" columns="2" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                                            <f:facet name="header">
                                                <h:panelGrid columns="3" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">                                                        
                                                    <h:panelGroup style="float: left;margin-top: 3px!important">
                                                        <p:commandLink id="btnMontantsFA" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;background: white" title="#{lab.LC_PFA_montants}"  rendered="#{accesRessource.fa_view_totaux}">
                                                            <h:graphicImage library="icones" name="ico_facture2.png" width="15" height="15"/>  
                                                        </p:commandLink>                                                       
                                                        <h:outputText value=" #{lab.LC_PFA_type_achat} : " />
                                                        <h:selectOneMenu value="#{managedFactureAchat.docAchat.typeAchat.id}" style="min-width: 120px" styleClass="yvs_table">
                                                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{0}"/>
                                                            <f:selectItems value="#{managedTypeDocDivers.typesDocDivers}" var="is_type" itemLabel="#{is_type.libelle}" itemValue="#{is_type.id}"/>
                                                            <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseTypeAchat()}"/>
                                                        </h:selectOneMenu> 
                                                    </h:panelGroup>
                                                    <h:panelGrid columns="2" rendered="false" style="float: right" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                                        <h:selectBooleanCheckbox value="#{managedFactureAchat.isBon}" title="#{lab.LC_PFA_bon_commande}" disabled="#{managedFactureAchat.docAchat.update}">
                                                            <p:ajax event="valueChange" global="false" update=":main_facture_achat:tabview_facture_achat:blog_article_facture_achat blog_is_bon_achat form_facture_achat"/>
                                                        </h:selectBooleanCheckbox>
                                                        <h:selectOneMenu id="blog_is_bon_achat" value="#{managedFactureAchat.bon.id}" style="min-width: 200px"
                                                                         disabled="#{(managedFactureAchat.docAchat.update or !managedFactureAchat.isBon)}">
                                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                            <f:selectItems value="#{managedBonAchat.documents}" var="bn" 
                                                                           itemLabel="#{bn.numDoc}" itemValue="#{bn.id}" />              
                                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                            <f:selectItem itemLabel="#{lab.L_plus_de_choix}" itemValue="-1"/>                              
                                                            <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseBon()}" update="entete_form_facture_achat"/>
                                                        </h:selectOneMenu> 
                                                    </h:panelGrid>
                                                    <h:panelGroup style="float: right">
                                                        <h:panelGroup id="blog_choose_commande_fa" style="float: right; background: #FFF; color: #000; border: 1px solid #045491; padding: 3px; margin-right: -9px">
                                                            #{managedFactureAchat.docAchat.id}
                                                        </h:panelGroup>
                                                        <p:commandButton icon="ui-icon-gear" style="width: 25px; height: 25px" type="button" id="btn_print_opt" />
                                                        <p:contextMenu for="btn_print_opt" event="left click" style="width:220px">
                                                            <p:separator/>
                                                            <p:menuitem icon="ui-icon-trash" value="#{lab.L_supprimer}" global="false" actionListener="#{managedFactureAchat.deleteBean_(managedFactureAchat.selectDoc)}" oncomplete="dlgConfirmDelete_.show()"/>
                                                        </p:contextMenu>
                                                    </h:panelGroup>
                                                </h:panelGrid>
                                            </f:facet>
                                            <h:outputText value="#{lab.LC_PFA_fournisseur} "/>                                                 
                                            <h:panelGroup id="select_fournisseur_facture">
                                                <h:inputText value="#{managedFactureAchat.docAchat.fournisseur.codeFsseur}" style="color: #{managedFactureAchat.docAchat.fournisseur.error?'red':''}">
                                                    <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.searchFsseur()}" update="infos_facture_achat"/>
                                                </h:inputText>    
                                                <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="#{lab.LC_PFA_liste_fournisseurs}" global="false"
                                                                 actionListener="#{managedFactureAchat.initFsseurs()}" oncomplete="dlgListFournisseurs.show()"/> 
                                                <h:outputText value="#{managedFactureAchat.docAchat.fournisseur.nom_prenom}" style="margin-left: 10px;color: #009999"/>
                                            </h:panelGroup> 
                                            <span>#{lab.LC_PFA_date_fournisseur}</span>
                                            <p:calendar value="#{managedFactureAchat.docAchat.dateDoc}" pattern="dd-MM-yyyy" size="10" navigator="true" 
                                                        disabled="#{managedFactureAchat.docAchat.statut == constantes.ETAT_VALIDE}" >
                                                <p:ajax event="dateSelect" global="false" listener="#{managedFactureAchat.chooseDate()}"/>
                                                <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseDate()}"/>
                                            </p:calendar>
                                            <span title="#{lab.LC_PFA_categorie_comptable}">#{lab.LC_PFA_cat_comptable} </span>
                                            <h:selectOneMenu value="#{managedFactureAchat.docAchat.categorieComptable.id}" style="min-width: 120px"
                                                             id="select_categorie_facture_achat" title="#{lab.LC_PFA_categorie_comptable}">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedCatCompt.categoriesAchat}" var="cat" 
                                                               itemLabel="#{cat.designation}" itemValue="#{cat.id}" />  
                                                <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseCategorie()}"
                                                        update=":main_facture_achat:chp_fa_net_a_payer"/>
                                            </h:selectOneMenu> 
                                            <span>#{lab.LC_PFA_plan_paiement}</span>
                                            <h:selectOneMenu value="#{managedFactureAchat.docAchat.modeReglement.id}" id="select_model_facture_achat"
                                                             disabled="#{managedFactureAchat.docAchat.statut == constantes.ETAT_REGLE}" style="min-width: 120px">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedModeReglement.models}" var="model" itemLabel="#{model.reference}" itemValue="#{model.id}" />                                
                                            </h:selectOneMenu>  
                                            <h:outputText value="#{lab.LC_PFA_depot} " title="#{lab.LC_PFA_depot_reception}" rendered="#{managedFactureAchat.docAchat.typeAchat.canReception}"/>  
                                            <h:panelGroup rendered="#{managedFactureAchat.docAchat.typeAchat.canReception}">
                                                <h:selectOneMenu value="#{managedFactureAchat.docAchat.depotReception.id}" id="depot_reception_document" style="min-width: 120px"
                                                                 disabled="#{managedFactureAchat.docAchat.statut == constantes.ETAT_LIVRE}" title="#{lab.LC_PFA_depot_reception}">
                                                    <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                    <f:selectItems value="#{managedDepot.depots}" var="depR" itemLabel="#{depR.designation}" itemValue="#{depR.id}" />                            
                                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseDepot()}" update="select_tranche_livraison_fa"/>
                                                </h:selectOneMenu> 
                                                <p:commandLink value="Selectionner agence" onclick="dlgAgenceForDepot.show()" global="false" rendered="#{managedAgence.agences.size() gt 1}"/> 
                                                <span>#{lab.LC_PFA_le}</span>
                                                <p:calendar value="#{managedFactureAchat.docAchat.dateLivraison}" pattern="dd-MM-yyyy" size="8" id="chp_date_a_valid_bla"
                                                            disabled="#{managedFactureAchat.docAchat.statut == constantes.ETAT_LIVRE}"/>
                                                <h:panelGroup style="float: right;margin-top: 3px">
                                                    <span title="#{lab.LC_PFA_tranche_livraison_prevu}">#{lab.LC_PFA_tranche} : </span>   
                                                    <h:selectOneMenu value="#{managedFactureAchat.docAchat.tranche.id}" id="select_tranche_livraison_fa" style="width: 180px"
                                                                     title="#{lab.LC_PFA_selectionner_tranche_livraison_prevu}">
                                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                                        <f:selectItems value="#{managedFactureAchat.tranches}" var="tdL" itemLabel="#{tdL.titre}" itemValue="#{tdL.id}" />  
                                                        <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.chooseTrancheDepot()}"/>                              
                                                    </h:selectOneMenu>
                                                </h:panelGroup>
                                            </h:panelGroup> 
                                            <span title="#{lab.LC_PFA_numero_reference_externe}">#{lab.L_reference} </span>
                                            <h:inputText value="#{managedFactureAchat.docAchat.numPiece}" style="width: 100%"/>
                                            <f:facet name="footer"> 
                                                <span>#{lab.L_description} </span>
                                                <h:inputTextarea value="#{managedFactureAchat.docAchat.description}" style="width: 100%" rows="#{managedFactureAchat.docAchat.typeAchat.canReception?'2':'4'}"/>
                                                <div style="clear: both"/>
                                            </f:facet>
                                        </h:panelGrid>
                                        <p:overlayPanel for="btnMontantsFA" hideEffect="fade" style="width: 25%;background: black;color: white">
                                            <p:outputPanel id="blog_form_montant_doc_fa">
                                                <h:panelGrid columns="2" style="width: 100%;font-weight: bolder;margin-top: 5px;color: white" rendered="#{accesRessource.fa_view_totaux}">
                                                    <span>#{lab.LC_PFA_total_taxe}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantTaxe}" converter="#{managedFactureAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_ht}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantHT}" converter="#{managedFactureAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_remise_article}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantRemise}" converter="#{managedFactureAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_ttc}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantTTC}" converter="#{managedFactureAchat.converter}" style="color: #E9FBF9"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_couts_supp}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantCS}" converter="#{managedFactureAchat.converter}" style="color: #E9FBF9"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_facture}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantTotal}" converter="#{managedFactureAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_total_avance}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantAvance}" converter="#{managedFactureAchat.converter}" style="color: #0099ff"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>#{lab.LC_PFA_net_a_payer}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantNetApayer}" converter="#{managedFactureAchat.converter}" style="color: #009999"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                </h:panelGrid>
                                            </p:outputPanel>
                                        </p:overlayPanel>
                                    </p:outputPanel>
                                </div>
                                <div style="margin-left: 62%;border-bottom: 1px solid #bbb; background: #FFF;margin-top: -5px">
                                    <div id="zone_show_detail_produit" style="width: 99%; border: solid 2px; height: 235px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                        <span style="display: inline-block; background: #CCC; width: 100%;cursor: pointer" onclick="_slideShow('zone_show_detail_produit')">
                                            <span class="button_slide">[-]</span>
                                            Détails du produit
                                        </span>
                                        <div class="zone_slide" style="width: 99.5%; border: solid 1px; height: 180px; margin: auto;overflow-y: auto">
                                            <p:outputPanel id="desc_contenu_facture_achat" layout="block">
                                                <div style="float: left; width: 59%; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px;
                                                     border-bottom: 2px solid #bbb; padding-left: 10px; padding-top: 5px">
                                                    <span style="font-weight: bold;color: #000">
                                                        #{managedFactureAchat.contenu.article.designation}
                                                    </span>
                                                    <p:outputPanel rendered="#{accesRessource.base_view_article_pua}" layout="block" style="padding-top: 5px; padding-bottom: 5px">
                                                        <h:outputText value="#{lab.LC_PFA_prix_dernier_achat} = " />
                                                        <h:outputText value="#{managedFactureAchat.contenu.article.lastPua}" converter="#{managedFactureAchat.converter}" style="font-weight: bold;color: #000"/>
                                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                                    </p:outputPanel>
                                                    <p:outputPanel rendered="#{accesRessource.base_view_article_pr}" layout="block" style="padding-top: 5px; padding-bottom: 5px">
                                                        <h:outputText value="#{lab.LC_PFA_cout_unitaire_stock} = " /> 
                                                        <h:outputText value="#{managedFactureAchat.contenu.article.pr}" converter="#{managedFactureAchat.converter}"  style="font-weight: bold;color: #000"/>
                                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                                    </p:outputPanel>
                                                    <p:outputPanel rendered="#{accesRessource.base_view_article_puv}" layout="block" style="padding-top: 5px; padding-bottom: 5px">
                                                        <h:outputText value="Prix de vente = " />
                                                        <p:commandLink actionListener="#{managedFactureAchat.loadTarifaireUnite(managedFactureAchat.contenu.conditionnement)}"
                                                                       oncomplete="dlgTarifaireUnite.show()" update=":form-conditionnement_tarifaire:data-conditionnement_tarifaire">
                                                            <h:outputText value="#{managedFactureAchat.contenu.article.puv}" converter="#{managedFactureAchat.converter}" style="font-weight: bold;color: #000"/>
                                                            <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                                        </p:commandLink>
                                                    </p:outputPanel>
                                                    <p:outputPanel layout="block" style="padding-top: 5px; padding-bottom: 5px">
                                                        <h:outputText value="#{managedFactureAchat.contenu.article.stock}" converter="#{managedFactureAchat.converterStock}" style="font-weight: bold;color: #000"/>
                                                        <h:outputText value=" #{managedFactureAchat.contenu.conditionnement.unite.reference} #{lab.LC_PFV_en_stock}"/>
                                                    </p:outputPanel> 
                                                    <div style="font-size:0.8em;padding-top: 5px; padding-bottom: 5px">
                                                        <h:outputText value="#{lab.LC_PFA_dernier_confirmation_cout_unitaire} " />
                                                        <h:outputText rendered="#{managedFactureAchat.contenu.article.dateLastMvt ne null}" value="#{managedFactureAchat.contenu.article.dateLastMvt}" converter="DATE" />
                                                        <h:outputText rendered="#{managedFactureAchat.contenu.article.dateLastMvt eq null}" value="Jamais" style="color: #911c2d" styleClass="size-08"  />
                                                    </div>
                                                </div>  
                                                <div style="margin-left: 61%;" align="center">
                                                    <h:graphicImage id="img_article" style="max-width: 100%;max-height: 180px" value="data:image/#{Marticle.photoArticle(managedFactureAchat.contenu.article)[1]};base64,#{Marticle.photoArticle(managedFactureAchat.contenu.article)[0]}"/>
                                                </div> 
                                            </p:outputPanel> 
                                        </div> 
                                        <div class="zone_bottom">
                                            <p:outputPanel id="chp_fa_net_a_payer" layout="block" style="background: #FFF;padding-top:10px">
                                                <h:panelGrid columns="4" style="font-size: 0.8em;width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" rendered="#{accesRessource.fa_view_totaux}">
                                                    <h:outputText value="#{lab.LC_PFA_ttc} :"  />
                                                    <h:panelGroup>
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantTotal}" converter="#{managedFactureAchat.converter}" style="color: dodgerblue;font-weight: bold"/>       
                                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                                    </h:panelGroup>  
                                                    <h:outputText value="#{lab.LC_PFA_net_a_payer} :"  />
                                                    <h:panelGroup>
                                                        <h:outputText value="#{managedFactureAchat.docAchat.montantNetApayer}" converter="#{managedFactureAchat.converter}" style="color: dodgerblue;font-weight: bold"/>       
                                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                                    </h:panelGroup>
                                                </h:panelGrid>  
                                            </p:outputPanel>
                                        </div> 
                                    </div>
                                    <div id="zone_show_taxe_facture" style="width: 99%; border: solid 2px; height: 235px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                        <span style="display: inline-block; background: #CCC; width: 100%;cursor: pointer" onclick="_slideShow('zone_show_taxe_facture')">
                                            <span class="button_slide">[-]</span>
                                            Taxes
                                        </span>
                                        <div class="zone_slide" style="width: 99.5%; border: solid 1px; height: 180px; margin: auto;overflow-y: auto">
                                            <p:dataTable id="data_taxes_facture_achat" value="#{managedFactureAchat.taxes}" 
                                                         var="tx" rowKey="#{tx.id}" style="height: 130px">
                                                <p:column headerText="#{LAB.LC_PFA_taxe}" >
                                                    <span>#{tx.designation}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_montant}" style="text-align: right;width: 35%">
                                                    <h:outputText value="#{tx.taux}" converter="DNA"/>
                                                    Fcfa
                                                </p:column>
                                            </p:dataTable>
                                        </div> 
                                        <div class="zone_bottom">
                                            <p:commandButton value="Actualiser" icon="ui-icon-refresh" style="float: right" rendered="#{accesRessource.fa_view_totaux}"
                                                             actionListener="#{managedFactureAchat.loadAllTaxesAchat(managedFactureAchat.selectDoc)}" />
                                        </div>
                                    </div>
                                </div>
                            </p:outputPanel>
                            <p:tabView id="tabview_facture_achat">
                                <p:tab title="#{lab.LC_PFA_contenu} (#{managedFactureAchat.docAchat.contenus.size()})">
                                    <p:outputPanel id="blog_form_contenu_facture_achat">
                                        <p:focus id="fcs_article_facture_achat" for="txt_article_facture_achat"/>
                                        <h:panelGrid id="form_contenu_facture_achat" columns="1" style="width: 100%;background: white;border: 2px solid #045491!important; border-radius: 5px; font-size: 0.9em" cellpadding="0" cellspacing="0">  
                                            <h:panelGrid styleClass="yvs_nostyle" style="font-size: 0.9em" cellpadding="0" cellspacing="0" columns="6">  
                                                <h:outputText value="#{lab.L_article}"/>
                                                <h:outputText value="#{lab.L_unite}"/>
                                                <h:outputText value="#{lab.L_quantite}" />
                                                <h:outputText value="#{lab.L_prix}"/>
                                                <h:outputText value="#{lab.L_total}"/>
                                                <h:outputText value=""/>    
                                                <h:panelGroup id="blog_article_facture_achat">
                                                    <h:panelGroup rendered="#{!managedFactureAchat.isBon}">
                                                        <h:inputText id="txt_article_facture_achat" value="#{managedFactureAchat.contenu.article.refArt}" title="#{managedFactureAchat.contenu.article.designation}" 
                                                                     style="color: #{managedFactureAchat.contenu.article.error?'red':''};width: 80%" disabled="#{managedFactureAchat.contenu.id gt 0}">
                                                            <p:ajax event="valueChange" listener="#{managedFactureAchat.searchArticle(false)}" update="form_contenu_facture_achat :main_facture_achat:desc_contenu_facture_achat"/>
                                                        </h:inputText>    
                                                        <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white;margin-top: 5px" title="#{lab.L_liste_article}" global="false"
                                                                         onclick="dlgListArticle.show()" disabled="#{managedFactureAchat.contenu.id gt 0}"/>
                                                    </h:panelGroup> 
                                                    <h:inputText value="#{managedFactureAchat.contenu.article.designation}" readonly="true" rendered="#{managedFactureAchat.isBon}"
                                                                 ondblclick="dlgListContenuBon.show()" style="width: 95%"/>
                                                </h:panelGroup> 
                                                <h:selectOneMenu value="#{managedFactureAchat.contenu.conditionnement.id}" style="min-width: 120px" title="#{lab.LC_PFA_selectionner_conditionnement}" tabindex="15">
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItems value="#{managedFactureAchat.contenu.article.conditionnements}" var="un" itemLabel="#{un.unite.reference}" itemValue="#{un.id}"/>
                                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseConditionnement(false)}" update=":main_facture_achat:desc_contenu_facture_achat txt_prix_achat_facture_achat txt_prix_total_facture_achat"/>
                                                </h:selectOneMenu>
                                                <p:inputText value="#{managedFactureAchat.contenu.quantiteCommende}" style="width: 100px;text-align: right">
                                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.onQuantiteBlur()}" update="txt_prix_total_facture_achat"/>
                                                </p:inputText>
                                                <h:panelGroup id="txt_prix_achat_facture_achat">
                                                    <p:inputText value="#{managedFactureAchat.contenu.prixAchat}"  style="width: 100px;text-align: right">
                                                        <p:ajax event="valueChange" listener="#{managedFactureAchat.onPrixBlur()}" update="@this txt_prix_total_facture_achat @this"/>
                                                    </p:inputText>
                                                    <span> Fcfa</span>
                                                </h:panelGroup>
                                                <h:panelGroup id="txt_prix_total_facture_achat">
                                                    <h:inputText value="#{managedFactureAchat.contenu.prixTotalRecu}" style="width: 150px;text-align: right" readonly="true" converter="#{managedFactureAchat.converter}"/>
                                                    <span> Fcfa</span>
                                                </h:panelGroup>
                                                <p:commandButton id="save_contenu_facture_achat" value="Ajouter" icon="ui-icon-circle-plus" oncomplete="collapseForm('contenu_facture_achat')"
                                                                 update="blog_form_contenu_facture_achat fcs_article_facture_achat :main_facture_achat:etapes_valide_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                                                 actionListener="#{managedFactureAchat.saveNewArticle()}"/>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                        <p:outputPanel>
                                            <h:inputHidden id="input_hide_contenu_facture_achat" value="#{managedFactureAchat.tabIds_article}"/>
                                            <p:contextMenu for="tabview_facture_achat:data_contenu_facture_achat:colomn_qte_fa" styleClass="context_menu" id="option_qte_fa" style="width: 200px;font-size: 0.8em">
                                                <p:menuitem value="#{lab.LC_PFA_afficher_quantite} #{managedFactureAchat.afficheRecu?'attendue':'recue'}" update="option_qte_fa data_contenu_facture_achat"
                                                            actionListener="#{managedFactureAchat.setAfficheRecu(!managedFactureAchat.afficheRecu)}"/>
                                            </p:contextMenu>
                                            <p:dataTable id="data_contenu_facture_achat" value="#{managedFactureAchat.docAchat.contenus}" var="artf" rowKey="#{artf.id}" 
                                                         rowIndexVar="artfIdx" selection="#{managedLivraisonVente.selectContenus}">
                                                <p:ajax event="rowSelect" listener="#{managedFactureAchat.loadOnViewContenu}" oncomplete="collapseForm('contenu_facture_achat')" update=":main_facture_achat:tabview_facture_achat:form_contenu_facture_achat :main_facture_achat:desc_contenu_facture_achat :main_facture_achat:desc_contenu_facture_achat"/>
                                                <p:ajax event="rowUnselect" listener="#{managedFactureAchat.unLoadOnViewContenu}" oncomplete="collapseForm('contenu_facture_achat')" update=":main_facture_achat:tabview_facture_achat:form_contenu_facture_achat :main_facture_achat:desc_contenu_facture_achat :main_facture_achat:desc_contenu_facture_achat" />
                                                <p:column headerText="ID" style="width: 5%">
                                                    #{artf.id}
                                                </p:column>
                                                <p:column headerText="N°" style="width: 5%">
                                                    <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                                    <span title="#{lab.LC_PFA_compte} : #{artf.compte.numCompte}">#{artfIdx+1}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:graphicImage title="#{lab.LC_PFA_retard_livraison}" library="icones" name="alert.png" width="15" height="15" rendered="#{artf.retardLivraison}"/>
                                                        <h:graphicImage library="img" name="danger.png" rendered="#{artf.errorComptabilise}" width="23" height="23" title="#{artf.messageError}"/>
                                                        <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" title="#{lab.LC_PFA_a_ete_commente}"/>
                                                    </h:panelGroup>
                                                </p:column>
                                                <p:column headerText="#{lab.L_article}">
                                                    [<span style="font-weight: bold" title="#{lab.LC_PFA_numero_serie} #{artf.numSerie}">#{artf.article.refArt}</span>]
                                                    <span title="#{lab.LC_PFA_numero_serie} #{artf.numSerie}">#{artf.article.designation}</span>
                                                    <h:outputText title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} #{lab.L_de} #{artf.articleBonus.designation}" value="B" rendered="#{artf.quantiteBonus gt 0}"
                                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white;float: right"/>
                                                </p:column>
                                                <p:column id="colomn_qte_fa" headerText="#{lab.L_quantite} #{managedFactureAchat.afficheRecu?'Recue':''}" style="width: 10%;text-align: right">
                                                    <h:panelGroup rendered="#{managedFactureAchat.afficheRecu}">
                                                        <h:outputText value="#{artf.quantiteRecu}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} de #{artf.articleBonus.designation}" rendered="#{artf.quantiteBonus gt 0}"/>
                                                        <h:outputText value="#{artf.quantiteRecu}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}" rendered="#{artf.quantiteBonus eq 0 or artf.quantiteBonus lt 0}"/>
                                                    </h:panelGroup>
                                                    <h:panelGroup rendered="#{!managedFactureAchat.afficheRecu}">
                                                        <h:outputText value="#{artf.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} de #{artf.articleBonus.designation}" rendered="#{artf.quantiteBonus gt 0}"/>
                                                        <h:outputText value="#{artf.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}" rendered="#{artf.quantiteBonus eq 0 or artf.quantiteBonus lt 0}"/>
                                                    </h:panelGroup>
                                                    <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_prix_u}" style="width: 8%;text-align: right">
                                                    <h:outputText value="#{artf.prixAchat}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_taxe}" style="width: 8%;text-align: right;">
                                                    <h:outputText value="#{artf.taxe}" converter="DNS" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_total_ht}" style="width: 10%;text-align: right;" rendered="#{accesRessource.fa_view_totaux}">
                                                    <h:outputText value="#{((artf.prixTotal - artf.taxe) le 0)?0:(artf.prixTotal - artf.taxe)}" converter="DNS" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.L_total}" style="width: 10%;text-align: right;" rendered="#{accesRessource.fa_view_totaux}">
                                                    <h:outputText value="#{artf.prixTotal}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_puv}." style="width: 8%;text-align: right" rendered="#{accesRessource.base_view_article_puv}">
                                                    <h:outputText value="#{managedFactureAchat.getPuv(managedFactureAchat.docAchat, artf)}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                                </p:column>                                                
                                                <p:column style="text-align: center;" width="25">
                                                    <p:commandLink style="width: 80%" styleClass="contenu_#{artf.statut}" actionListener="#{managedFactureAchat.changeStatutLine(artf)}" global="false"
                                                                   value="#{artf.statut}" title="#{lab.LC_PFA_statut} : #{managedFactureAchat.giveNameStatut(artf.statut)}" update="data_contenu_facture_achat"/>
                                                </p:column>
                                                <p:column width="20" style="text-align: center">
                                                    <f:facet name="header">
                                                        <p:contextMenu for="btn_option_head_contenu_facture_achat" event="left click" style="font-size: 0.8em;width: 220px">
                                                            <p:menuitem value="#{lab.LC_PFA_verifier_comptabilite}" icon="ui-icon-lightbulb" actionListener="#{managedFactureAchat.findContenusErrorComptabilite()}" update="data_contenu_facture_achat"/>
                                                            <p:menuitem value="#{lab.L_rechercher}" icon="ui-icon-search" global="false" id="menu-search_contenu_fa"/>
                                                            <p:separator style="width: 98%;margin: auto"/>
                                                            <p:menuitem value="#{lab.LC_PFA_sections_analytique}" icon="ui-icon-bookmark" actionListener="#{managedFactureAchat.loadSectionsAchat(null)}" oncomplete="dlgAllSectionAnalytique.show()"/>
                                                            <p:separator style="width: 98%;margin: auto"/>
                                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedLivraisonVente.deleteBeanArticles(false)}"/>
                                                        </p:contextMenu>
                                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_head_contenu_facture_achat" type="button"/>
                                                        <p:overlayPanel for="menu-search_contenu_fa" hideEffect="fade" style="width: 200px;background: black;color: white">
                                                            <h:inputText value="#{managedFactureAchat.articleContenu}" style="width:100%">
                                                                <p:ajax event="blur" listener="#{managedFactureAchat.findContenusByArticle()}" update="data_contenu_facture_achat"/>
                                                            </h:inputText>
                                                        </p:overlayPanel>
                                                    </f:facet>
                                                    <p:contextMenu for="btn_option_contenu_facture_achat" event="left click" style="font-size: 0.8em;width: 220px" styleClass="context_menu">
                                                        <p:menuitem value="#{lab.LC_PCV_voir_detail}" icon="ui-icon-search" actionListener="#{managedFactureAchat.initInfosContenu(artf)}" oncomplete="dlgInfosContenu.show()"
                                                                    update=":form_dlgInfosContenu_:blog_form_infos_contenu"/>
                                                        <p:menuitem value="#{lab.LC_PFA_quantite_recue}" icon="ui-icon-suitcase" global="false" actionListener="#{managedFactureAchat.addRecuContenu(artf)}" oncomplete="dlgAddRecu.show()"/>
                                                        <p:menuitem value="#{lab.LC_PFA_remise}" icon="ui-icon-suitcase" global="false" actionListener="#{managedFactureAchat.addRemiseContenu(artf)}" oncomplete="dlgAddRemise.show()"/>
                                                        <p:menuitem value="#{lab.LC_PFA_taxes}" icon="ui-icon-copy" global="false" actionListener="#{managedFactureAchat.loadTaxesAchat(artf)}" oncomplete="dlgListTaxesContenu.show()"/>                                                           
                                                        <p:menuitem value="#{lab.LC_PFA_bonus}" icon="ui-icon-suitcase" global="false" actionListener="#{managedFactureAchat.addBonusContenu(artf)}" oncomplete="dlgAddBonus.show()"/>
                                                        <p:separator style="width: 98%;margin: auto"/> 
                                                        <p:menuitem value="#{lab.LC_PFA_note}" icon="ui-icon-comment" global="false" actionListener="#{managedFactureAchat.addCommentaireContenu(artf)}" oncomplete="dlgAddCommentaire.show()"/>
                                                        <p:menuitem value="#{lab.LC_PFA_numero_serie}" icon="ui-icon-info" global="false" actionListener="#{managedFactureAchat.addNumSerieContenu(artf)}" oncomplete="dlgAddNumSerie.show()"/>
                                                        <p:menuitem value="#{lab.LC_PFA_date_livraison}" icon="ui-icon-clock" global="false" actionListener="#{managedFactureAchat.addDateLivraisonContenu(artf)}" oncomplete="dlgAddDateLivraison.show()"/>
                                                        <p:separator style="width: 98%;margin: auto"/>
                                                        <p:menuitem value="#{lab.LC_PFA_sections_analytique}" icon="ui-icon-bookmark" actionListener="#{managedFactureAchat.loadSectionsAchat(artf)}" oncomplete="dlgSectionAnalytique.show()"/>
                                                        <p:separator style="width: 98%;margin: auto"/>
                                                        <p:menuitem value="Lier à un projet" icon="ui-icon-folder-collapsed" actionListener="#{managedFactureAchat.onLoadContenuProjet(artf)}" oncomplete="dlgAddProjets.show()" rendered="#{managedProjet.parents.size() gt 0 }"/>
                                                        <p:menuitem value="#{lab.LC_PFA_envoyer_dans_une_reception}" icon="ui-icon-transferthick-e-w" actionListener="#{managedLivraisonAchat.loadLivraisonByFournisseur(artf, managedFactureAchat.docAchat, managedFactureAchat.docAchat.dateLivraison)}"
                                                                    update=":main_livraison_fa:data_livraison_content_fa" rendered="false"/>
                                                        <p:menuitem value="#{lab.LC_PFA_generer_livraison}" icon="ui-icon-circle-plus" actionListener="#{managedLivraisonAchat.generedLivraison(artf, managedFactureAchat.docAchat, managedFactureAchat.docAchat.dateLivraison)}"
                                                                    update=":main_livraison_fa:form_defined_contenu_fa"/>
                                                        <p:separator style="width: 98%;margin: auto"/>
                                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFactureAchat.deleteBeanContenu(artf)}" oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                                    </p:contextMenu>                           
                                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_facture_achat" type="button"/>
                                                </p:column> 
                                                <p:column selectionMode="multiple" style="width:16px;text-align:center"/>  
                                            </p:dataTable>
                                        </p:outputPanel>
                                    </p:outputPanel>
                                    <div style="clear: both"/>
                                </p:tab>
                                <p:tab title="#{lab.LC_PFA_couts_supplementaire} (#{managedFactureAchat.docAchat.couts.size()})" >
                                    <p:outputPanel id="blog_form_cout_facture_achat">
                                        <div style="width: 30%;float: left; font-size: 0.9em">
                                            <h:panelGrid id="form_cout_facture_achat" styleClass="yvs_table" columns="2" style="width: 100%" cellpadding="0" cellspacing="0">  
                                                <span>#{lab.L_type} </span>                                                    
                                                <h:selectOneMenu value="#{managedFactureAchat.cout.type.id}" id="select_type_cout_facture_achat" style="min-width: 120px">
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItems value="#{managedTypeCout.types}" var="typ" itemLabel="#{typ.libelle}" itemValue="#{typ.id}" />     
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItem itemLabel="#{lab.L_plus_choix}" itemValue="-1"/>             
                                                    <p:ajax event="valueChange" global="false" listener="#{managedFactureAchat.choosTypeCout}" update="sens_cout_achat"/>
                                                </h:selectOneMenu>  
                                                <span>#{lab.L_montant} </span>
                                                <pe:inputNumber value="#{managedFactureAchat.cout.montant}" style="text-align: right" decimalPlaces="0"/> 
                                                <span>#{lab.LC_PFA_sens} </span>
                                                <h:outputText id="sens_cout_achat" value="#{managedFactureAchat.cout.type.augmentation?'AUGMENTATION':'DIMINUTION'}"
                                                              style="margin-top: 3px;border: 2px solid black; border-radius: 5px;padding: 2px;background: #CCC;font-size: 0.8em"/>
                                            </h:panelGrid>
                                            <div style="margin-top: 5px">
                                                <p:commandButton icon="ui-icon-disk" id="save_cout_facture_achat" value="#{lab.L_enregistrer}" oncomplete="collapseForm('cout_facture_achat')"
                                                                 update="blog_form_cout_facture_achat :main_facture_achat:chp_fa_net_a_payer"
                                                                 actionListener="#{managedFactureAchat.saveNewCout()}" style="float: right"/>
                                            </div>
                                        </div>
                                        <div style="width: 69%;margin-left: 31%">
                                            <p:outputPanel>
                                                <h:inputHidden id="input_hide_cout_facture_achat" value="#{managedFactureAchat.tabIds_cout}"/>
                                                <p:dataTable id="data_cout_facture_achat" value="#{managedFactureAchat.docAchat.couts}" var="coux" rowKey="#{coux.id}" 
                                                             rowIndexVar="couIdx" selectionMode="single">
                                                    <p:ajax event="rowSelect" global="false" listener="#{managedFactureAchat.loadOnViewCout}" update=":main_facture_achat:tabview_facture_achat:form_cout_facture_achat"/>
                                                    <p:ajax event="rowUnselect" global="false" listener="#{managedFactureAchat.unLoadOnViewCout}" update=":main_facture_achat:tabview_facture_achat:form_cout_facture_achat"/>
                                                    <p:column headerText="N°" style="width: 7%">
                                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{coux.new_}"/>
                                                        <span>#{couIdx+1}</span>
                                                    </p:column>
                                                    <p:column headerText="#{lab.LC_PFA_type_cout}">
                                                        <span>#{coux.typeCout.libelle}</span>
                                                    </p:column>
                                                    <p:column headerText="#{lab.L_montant}" style="text-align: right;width: 30%">
                                                        <h:outputText value="#{coux.montant}" converter="#{managedFactureAchat.converter}"/>
                                                    </p:column>
                                                    <p:column style="width: 7%;text-align: center">
                                                        <h:graphicImage title="#{coux.typeCout.augmentation?'Augmente':'diminu'} le net à payer" library="icones" name="#{coux.typeCout.augmentation?'in.png':'out.png'}" width="15" height="15"/>                                                        
                                                    </p:column>
                                                    <p:column style="width: 7%;text-align: center">
                                                        <p:contextMenu for="btn_option_cout_facture_achat" event="left click" style="font-size: 0.8em" styleClass="context_menu">
                                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFactureAchat.deleteBeanCout_(coux)}" oncomplete="dlgConfirmDeleteCout_.show()"
                                                                        update=":main_facture_achat:chp_fa_net_a_payer"/>
                                                        </p:contextMenu>                           
                                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_cout_facture_achat" type="button"/>
                                                    </p:column> 
                                                    <p:column style="width: 7%;text-align: center" rendered="false">
                                                        <f:facet name="header">
                                                            <h:selectBooleanCheckbox styleClass="chek_all_line_cout_facture_achat" value="false"
                                                                                     onclick="selectionAllLineTab(#{managedFactureAchat.docAchat.couts.size()}, 'cout_facture_achat')">
                                                            </h:selectBooleanCheckbox>
                                                        </f:facet>
                                                        <h:selectBooleanCheckbox  value="#{coux.selectActif}" styleClass="chek_line_cout_facture_achat"
                                                                                  onclick="selectionLineTab(#{coux.id}, 'cout_facture_achat')">
                                                        </h:selectBooleanCheckbox>
                                                    </p:column>
                                                </p:dataTable>
                                                <p:commandButton id="delete_cout_facture_achat" value="#{lab.L_supprimer}" style="float: right" rendered="false"
                                                                 onclick="dlgConfirmDeleteCout.show()"/>
                                            </p:outputPanel>
                                        </div>                                        
                                    </p:outputPanel>
                                    <div style="clear: both"/>
                                </p:tab>
                                <p:tab title="#{lab.LC_PFA_reglements} (#{managedFactureAchat.docAchat.reglements.size()})" >
                                    <h:panelGrid id="form_mensualite_facture_achat" columns="1" style="width: 100%">
                                        <p:outputPanel>
                                            <h:panelGrid columns="3" style="width: 100%;background: white;border: 2px solid #045491!important; border-radius: 5px"  styleClass="yvs_nostyle" cellpadding="0" cellspacing="0"> 
                                                <p:commandLink actionListener="#{managedFactureAchat.genereMensualite()}" style="float: left;border: 2px solid black; border-radius: 5px;padding: 3px;background: white"
                                                               oncomplete="collapseForm('mensualite_facture_achat');" rendered="#{0==managedFactureAchat.docAchat.reglements.size()}" title="#{lab.LC_PFA_generer_plan_reglement}"
                                                               update="form_mensualite_facture_achat">
                                                    <h:graphicImage library="img" name="update.png" width="20" height="20"/>
                                                </p:commandLink>
                                                <h:panelGrid id="blog_form_mensualite_facture_achat" columns="6" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" style="padding-bottom: -5px; font-size: 0.8em">
                                                    <h:outputText value="#{lab.LC_PFA_mode_reglement}" />
                                                    <h:outputText value="#{lab.L_montant}" />
                                                    <h:outputText value="#{lab.LC_PFA_date_paiement}" />
                                                    <h:outputText value="#{lab.LC_PFA_caisse}" />
                                                    <h:outputText value="#{lab.LC_PFA_statut}"  />
                                                    <h:outputText value="#{lab.LC_PFA_ref_externe}" style="margin-left: 100px"/>                                                  
                                                    <h:panelGroup>
                                                        <h:outputText value="#{managedFactureAchat.reglement.id}" rendered="#{managedFactureAchat.reglement.id gt 0}"/>
                                                        <h:selectOneMenu value="#{managedFactureAchat.reglement.mode.id}" id="select_model_mens_facture_achat" style="min-width: 120px">
                                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                                            <f:selectItems value="#{managedModeReglement.modes}" var="modelm" itemLabel="#{modelm.designation}" itemValue="#{modelm.id}" />                              
                                                        </h:selectOneMenu>
                                                    </h:panelGroup>  
                                                    <pe:inputNumber value="#{managedFactureAchat.reglement.montant}"  style="text-align: right"/>
                                                    <p:calendar value="#{managedFactureAchat.reglement.datePaiement}" navigator="true" pattern="dd-MM-yyyy" size="10"/>
                                                    <h:selectOneMenu value="#{managedFactureAchat.reglement.caisse.id}" id="chmp_caisse_piece_achat">
                                                        <f:selectItem itemLabel="" itemValue="0" />
                                                        <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />         
                                                        <f:selectItem itemLabel="----" itemValue="0" itemDisabled=""/>
                                                        <f:selectItem itemLabel="--Tout afficher--" itemValue="-1" />   
                                                        <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseCaissePiece()}" update=":main_facture_achat:tabview_facture_achat:chmp_caisse_piece_achat"/>  
                                                    </h:selectOneMenu>
                                                    <h:selectOneMenu value="#{managedFactureAchat.reglement.statutPiece}" disabled="#{managedFactureAchat.reglement.statutPiece != constantes.STATUT_DOC_ATTENTE}">
                                                        <f:selectItem itemValue="#{constantes.STATUT_DOC_PAYER}" itemLabel="#{lab.LC_PFA_regler}" />
                                                        <f:selectItem itemValue="#{constantes.STATUT_DOC_ATTENTE}" itemLabel="#{lab.LC_PFA_en_attente}" />                                     
                                                        <f:selectItem itemValue="#{constantes.STATUT_DOC_ENCOUR}" itemLabel="#{lab.LC_PFA_en_cours}" itemDisabled="true"/>                                                   
                                                    </h:selectOneMenu>
                                                    <h:panelGroup style="margin-left: 100px">
                                                        <h:inputText value="#{managedFactureAchat.reglement.numRefExterne}" />
                                                        <p:commandButton id="save_mensualite_facture_achat" title="#{lab.LC_PFA_cliquer_pour_ajouter}" icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right" oncomplete="collapseForm('mensualite_facture_achat')"
                                                                         update="form_mensualite_facture_achat" actionListener="#{managedFactureAchat.saveNewReglement(false)}"/>
                                                    </h:panelGroup> 
                                                </h:panelGrid>
                                            </h:panelGrid>                         
                                            <h:inputHidden id="input_hide_mensualite_facture_achat" value="#{managedFactureAchat.tabIds_mensualite}"/>
                                            <p:dataTable id="data_mensualite_facture_achat" value="#{managedFactureAchat.docAchat.reglements}" var="men" rowKey="#{men.id}" 
                                                         rowIndexVar="menIdx" selectionMode="single" selection="#{managedReglementAchat.selectedPiece}">
                                                <p:ajax event="rowSelect"  listener="#{managedFactureAchat.loadOnViewMensualite}" oncomplete="collapseForm('mensualite_facture_achat')"
                                                        update=":main_facture_achat:tabview_facture_achat:blog_form_mensualite_facture_achat :main_facture_achat:tabview_facture_achat:zone_auteur_reg_fa"/>
                                                <p:ajax event="rowUnselect"  listener="#{managedFactureAchat.unLoadOnViewMensualite}" oncomplete="collapseForm('mensualite_facture_achat')"
                                                        update=":main_facture_achat:tabview_facture_achat:blog_form_mensualite_facture_achat :main_facture_achat:tabview_facture_achat:zone_auteur_reg_fa"/>
                                                <p:column headerText="N°" width="15" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <span>#{men.id}</span>
                                                </p:column>
                                                <p:column headerText="N°" width="30" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{men.new_}"/>
                                                    <span>#{menIdx+1}</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{managedReglementAchat.isComptabilise(men)}" styleClass="style_statut"/>
                                                    </h:panelGroup>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_mode_reglement}" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.model.designation}"/>
                                                    <span style="display: #{(men.statutPiece==constantes.STATUT_DOC_ATTENTE)?'inline-block':'none'}; width: 10px; height: 10px; background: #444;" title="#{lab.LC_PFA_en_attente_paiment}"></span>
                                                    <span style="display: #{(men.statutPiece==constantes.STATUT_DOC_ENCOUR)?'inline-block':'none'}; width: 10px; height: 10px; background: #f6a828" title="#{lab.LC_PFA_en_cours_paiment}"></span>
                                                    <span style="display: #{(men.statutPiece==constantes.STATUT_DOC_PAYER)?'inline-block':'none'}; width: 10px; height: 10px; background: #006666" title="#{lab.LC_PFA_piece_regler}"></span>
                                                    <span style="display: #{(men.phasesReglement.size() gt 0)?'inline-block':'none'}; width: 10px; height: 10px; background: #99ccff" title="#{lab.LC_PFA_phase_reglement_generer}"></span>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_piece_numero}" sortBy="#{men.datePiece}" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.numeroPiece}"/>
                                                    <h:outputText rendered="#{men.notifs.id gt 0}" value="A" styleClass="statut" title="#{lab.LC_PFA_paiement_lier_acompte} #{men.notifs.acompte.numRefrence}" style="float: right"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_date_edition}" sortBy="#{men.datePiece}" style="text-align: center" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.datePiece}" converter="DDMMYYYY"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_date_reglement}" sortBy="#{men.datePaimentPrevu}" style="text-align: center" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{(men.statutPiece eq constantes.STATUT_DOC_PAYER)?men.datePaiement:men.datePaimentPrevu}" converter="DATE"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PFA_caisses}" sortBy="#{men.datePaimentPrevu}" style="text-align: center" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.caisse.intitule}" />
                                                </p:column>
                                                <p:column headerText="#{lab.L_montant}" style="width: 12%;text-align: right" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.montant}" converter="#{managedFactureAchat.converter}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.L_reference}" style="width: 15%;text-align: right" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <h:outputText value="#{men.referenceExterne}"/>
                                                </p:column>
                                                <p:column width="20" style="text-align: center">
                                                    <p:contextMenu for="btn_option_mensualite_facture_achat" event="left click" style="font-size: 0.8em" styleClass="context_menu">
                                                        <p:menuitem value="#{!men.comptabilise?'Comptabiliser':'Annuler Comptabilité'}" actionListener="#{managedFactureAchat.setSelectReglement(men)}" 
                                                                    oncomplete="#{!men.comptabilise?'dlgComptabilisePiece.show()':'dlgUnComptabilisePiece.show()'}" icon="ui-icon-arrowthick-2-e-w" 
                                                                    rendered="#{men.id gt 0 and (men.statutPiece==constantes.STATUT_DOC_PAYER)}"/> 
                                                        <p:menuitem icon="ui-icon-pin-s" value="#{lab.LC_PFA_lettrer_piece}" actionListener="#{managedFactureAchat.lettrerCaisse(men)}" rendered="#{men.comptabilise}"/>
                                                        <p:menuitem value="#{(men.statutPiece=='P')?'Annuler':'Payer/Valider'}" icon="#{(men.statutPiece=='P')?'ui-icon-circle-close':'ui-icon-circle-check'}"  
                                                                    actionListener="#{managedFactureAchat.openConfirmPaiement(men,'F')}" rendered="#{men.id gt 0}" update="data_mensualite_facture_achat"/>
                                                        <p:menuitem value="#{lab.LC_PFA_aller_aux_cheques}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedFactureAchat.onSelectDistantReglement(men)}"
                                                                    rendered="#{accesPage.compta_view_reg_vente and men.model.typeReglement == constantes.MODE_PAIEMENT_BANQUE and men.phasesReglement.size() gt 0}" oncomplete="collapseList('suivi_chek')"/>                                                    
                                                        <p:menuitem value="#{lab.LC_PFA_voir_compensation}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedFactureAchat.onSelectDistantReglement(men)}"
                                                                    rendered="#{accesPage.compta_view_reg_achat and men.model.typeReglement == constantes.MODE_PAIEMENT_COMPENSATION}" oncomplete="collapseList('suivi_chek')"/>   
                                                        <p:menuitem value="#{lab.LC_PFA_aller_acompte}" icon="ui-icon-arrowthick-1-e"  actionListener="#{managedOperationFournisseur.onSelectDistant(iregV.notifs.acompte)}"
                                                                    rendered="#{accesPage.compta_ope_fsseur and iregV.notifs.id gt 0}"/>                                                 
                                                        <p:menuitem value="#{lab.LC_PFA_equilibrer}" icon="ui-icon-arrowthick-1-e" actionListener="#{managedCompensation.onSelectAchat(men)}" update=":select_fa_compensation data_mensualite_facture_achat"
                                                                    rendered="#{men.model.typeReglement == constantes.MODE_PAIEMENT_COMPENSATION}"/>
                                                        <p:separator style="width: 98%;margin: auto"/>
                                                        <p:menuitem value="#{lab.LC_PFA_dissocier}" icon="ui-icon-pin-w" actionListener="#{managedReglementAchat.dissocierNotif(men)}" rendered="#{men.notifs.id gt 0}"
                                                                    update="data_mensualite_facture_achat"/>
                                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFactureAchat.deleteBeanReglement_(men)}" oncomplete="dlgConfirmDeleteMensualite_.show()"
                                                                    update="data_mensualite_facture_achat"/>
                                                    </p:contextMenu>                           
                                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_mensualite_facture_achat" type="button"/>
                                                </p:column> 
                                                <p:column width="25" style="text-align: center" styleClass="statut_#{managedFactureAchat.giveStringStatut(men.statutPiece)}">
                                                    <f:facet name="header">
                                                        <h:selectBooleanCheckbox styleClass="chek_all_line_mensualite_facture_achat" value="false"
                                                                                 onclick="selectionAllLineTab(#{managedFactureAchat.docAchat.reglements.size()}, 'mensualite_facture_achat')">
                                                        </h:selectBooleanCheckbox>
                                                    </f:facet>
                                                    <h:selectBooleanCheckbox value="#{men.selectActif}" styleClass="chek_line_mensualite_facture_achat" 
                                                                             onclick="selectionLineTab(#{men.id}, 'mensualite_facture_achat')">
                                                    </h:selectBooleanCheckbox>
                                                </p:column>
                                            </p:dataTable>
                                            <p:commandButton id="delete_mensualite_facture_achat" value="#{lab.L_supprimer}" style="float: right" rendered="false"
                                                             onclick="dlgConfirmDeleteMensualite.show()"/>
                                        </p:outputPanel>
                                        <p:commandLink actionListener="#{managedFactureAchat.saveNewAllMensualite()}" update="form_mensualite_facture_achat" oncomplete="collapseForm('mensualite_facture_achat')" 
                                                       style="background: black;color: white;border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px;background: black"
                                                       rendered="#{managedFactureAchat.newMensualite and managedFactureAchat.docAchat.reglements.size() >0}" value="#{lab.LC_PFA_taut_enregistrer}"/>
                                    </h:panelGrid>
                                    <div style="clear: both"/>
                                    <div style="margin-bottom: -20px; font-size: 0.7em" align="right">
                                        <h:panelGroup  id="zone_auteur_reg_fa">
                                            <span>#{lab.L_par} </span>
                                            <h:outputText value="#{managedReglementAchat.selectedPiece.author.users.nomUsers}" />
                                            <span>#{lab.L_le} </span>
                                            <h:outputText value="#{managedReglementAchat.selectedPiece.dateUpdate}" converter="DATETIME" />
                                        </h:panelGroup>
                                    </div>
                                </p:tab>
                                <p:tab title="#{lab.LC_PFA_doc_lies} (#{managedFactureAchat.docAchat.documents.size()})" rendered="#{managedFactureAchat.docAchat.documents.size() gt 0}">
                                    <p:dataTable value="#{managedFactureAchat.selectDoc.documents}" var="iLivr" rowKey="#{iLivr.id}" rowIndexVar="iLivrIdx" selectionMode="single"
                                                 id="data_livraison_facture_achat">
                                        <p:column width="35" headerText="N°" styleClass="statut_#{iLivr.statut}">
                                            <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{iLivr.cloturer}"/>  
                                            <span>#{iLivrIdx+1}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_reference}" styleClass="statut_#{iLivr.statut}">
                                            <span>#{iLivr.numDoc}</span>
                                            <h:outputText value="#{lab.LC_PFA_vide}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=iLivr.contenus.size()}"/>                                   
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PFA_date_liv}" style="text-align: center" styleClass="statut_#{iLivr.statut}">
                                            <h:panelGroup rendered="#{iLivr.statut == constantes.ETAT_VALIDE}">
                                                <h:outputText value="#{iLivr.dateDoc}" converter="DDMMYYYY"/>
                                            </h:panelGroup>
                                            <h:outputText value="#{lab.LC_PFA_non_livrer}" rendered="#{iLivr.statut != constantes.ETAT_VALIDE}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PFA_tranche}" style="text-align: center" styleClass="statut_#{iLivr.statut}">
                                            <h:outputText value="#{iLivr.tranche.heureDebut}" converter="TIME"/>
                                            <span> - </span>
                                            <h:outputText value="#{iLivr.tranche.heureFin}" converter="TIME"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PFA_depot}" styleClass="statut_#{iLivr.statut}"> 
                                            <span>#{iLivr.depotReception.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PFA_valider_par}" styleClass="statut_#{iLivr.statut}">
                                            <span>#{iLivr.validerBy.nomUsers}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_type}" styleClass="statut_#{iLivr.statut}" style="text-align: center">
                                            <span >#{iLivr.typeDoc}</span>
                                        </p:column>
                                        <p:column style="width: 5%;text-align: center" styleClass="statut_#{iLivr.statut}">
                                            <p:contextMenu for="btn_option_livraison_facture_achat" event="left click" style="font-size: 0.8em" styleClass="context_menu">
                                                <p:menuitem value="#{lab.L_valider}" icon="ui-icon-circle-check" actionListener="#{managedFactureAchat.onValideDistantLivraison(iLivr)}" 
                                                            update="data_livraison_facture_achat :main_facture_achat:data_facture_achat" rendered="#{iLivr.statut != constantes.ETAT_VALIDE}"/>
                                                <p:menuitem value="#{lab.L_annuler}" icon="ui-icon-circle-triangle-w" actionListener="#{managedFactureAchat.onAnnulerDistantLivraison(iLivr)}" 
                                                            update="data_livraison_facture_achat :main_facture_achat:data_facture_achat" rendered="#{iLivr.statut != constantes.ETAT_EDITABLE}"/>
                                                <p:menuitem value="#{lab.L_suspendre}" icon="ui-icon-circle-close" actionListener="#{managedFactureAchat.onRefuserDistantLivraison(iLivr)}" 
                                                            update="data_livraison_facture_achat :main_facture_achat:data_facture_achat" rendered="false"/>
                                                <p:separator style="width: 98%;margin: auto"/>
                                                <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedFactureAchat.onSelectDistantLivraison(iLivr)}"/>
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFactureAchat.deleteBeanLie(iLivr)}" oncomplete="dlgConfirmDeleteLie.show()"/>
                                                <p:separator style="width: 100%"/>
                                                <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedFactureAchat.onPrintDistant(iLivr)}" ajax="false"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_livraison_facture_achat" type="button"/>
                                        </p:column> 
                                    </p:dataTable>
                                </p:tab>
                            </p:tabView>  
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="part_list">
                    <div class="yvs_list_facture_achat" style="width: 99%; margin: auto; background: white">
                        <h:inputText id="input_hide_facture_achat" value="#{managedFactureAchat.tabIds}"/>
                        <p:dataTable id="data_facture_achat" value="#{managedFactureAchat.documents}" var="bon" rowKey="#{bon.id}" 
                                     rowIndexVar="bonIdx" selectionMode="single" >
                            <p:ajax event="rowSelect" listener="#{managedFactureAchat.loadOnView}" 
                                    update=":main_facture_achat:save_facture_achat :main_facture_achat:chp_fa_net_a_payer data_facture_achat :main_facture_achat:txt_parc_linear_facture_achat :main_facture_achat:input_hide_facture_achat " 
                                    oncomplete="collapseForm('facture_achat');collapseForm('contenu_facture_achat');collapseForm('mensualite_facture_achat');collapseForm('cout_facture_achat');_slideShow('zone_show_detail_produit')"/>
                            <p:ajax event="rowToggle" listener="#{managedFactureAchat.displayContent(bon)}" global="false"/>
                            <p:column width="30" >
                                <p:rowToggler/>
                            </p:column>
                            <p:column width="30" headerText="N°" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>     
                                <span>#{bonIdx+1}</span>
                                <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{bon.id eq managedFactureAchat.docAchat.id}"/>
                                <h:graphicImage title="#{lab.LC_PFA_validation_incomplete}" library="icones" name="alert.png" width="15" height="15" rendered="#{bon.validIncomplet}" style="float: right"/>                                 
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numDoc}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_facture_regler}" value="R" rendered="#{bon.statutRegle == constantes.ETAT_REGLE}"
                                                  styleClass="style_statut"/>
                                    <p:spacer width="2" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"/>
                                    <h:outputText title="#{lab.LC_PFA_commande_recue}" value="L" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"
                                                  styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_date_fournisseur}" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_fournisseur}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.fournisseur.tiers.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_agence}" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.agence.designation}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_plan_paiement}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.modelReglement.reference}"/>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" 
                                                  rendered="#{bon.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_piece_externe}" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numPiece}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_etapes}"  width="60" styleClass="statut_#{bon.statut}" style="font-size: 0.8em;text-align: center">
                                <h:outputText value="#{bon.libEtapes}" />
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">                                
                                <f:facet name="header">
                                    <p:contextMenu for="btn_option_head_facture_achat" event="left click" styleClass="context_menu" style="width: 210px"> 
                                        <p:menuitem icon="ui-icon-link" value="#{lab.LC_PFA_etat_comptabiliser}" global="false" onclick="dglEtatComptabilised.show()"/>
                                    </p:contextMenu>
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_head_facture_achat" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_facture_achat" event="left click" style="font-size: 0.8em;width: 220px" styleClass="context_menu">
                                    <p:menuitem value="#{!bon.comptabilise?'Comptabiliser':'Annuler Comptabilité'}" actionListener="#{managedFactureAchat.setSelectDoc(bon)}" 
                                                oncomplete="#{!bon.comptabilise?'dlgComptabiliseDoc.show()':'dlgUnComptabiliseDoc.show()'}" icon="ui-icon-arrowthick-2-e-w" 
                                                rendered="#{bon.statut == constantes.ETAT_VALIDE}"/> 
                                    <p:menuitem icon="ui-icon-pin-s" value="#{lab.LC_PFA_lettrer_facture}" actionListener="#{managedFactureAchat.lettrer(bon)}" rendered="#{bon.comptabilise}"/>
                                    <p:menuitem icon="ui-icon-carat-2-e-w" value="#{lab.LC_PA_equilibrer_statut}" actionListener="#{managedFactureAchat.equilibre(bon)}" global="false" update=":main_facture_achat:data_facture_achat"/>
                                    <p:menuitem icon="ui-icon-pencil" value="#{lab.LC_PFV_ajouter_note}" update=":dglnote" global="false" actionListener="#{managedFactureAchat.selectdocs(bon)}" oncomplete="dlgAddNote.show()"/>
                                    <p:separator style="width: 98%;margin: auto"/> 
                                    <p:menuitem value="Valider" icon="ui-icon-check" actionListener="#{managedFactureAchat.validerOrderOne(bon, true)}" update="data_facture_achat"/>
                                    <p:menuitem value="#{bon.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{bon.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                                actionListener="#{managedFactureAchat.cloturer(bon)}" oncomplete="dlgConfirmClose.show()"/>
                                    <p:menuitem value="#{lab.L_suspendre}" icon="ui-icon-circle-close" global="false" actionListener="#{managedFactureAchat.openDlgToConfirmSuspend(bon)}" 
                                                oncomplete="dlgSuspendFact.show()"/>
                                    <p:separator/>
                                    <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-print"  actionListener="#{managedFactureAchat.print(bon, true)}" ajax="false"/>
                                    <p:menuitem value="#{lab.L_telecharger_sans_entete}" icon="ui-icon-print"  actionListener="#{managedFactureAchat.print(bon, false)}" ajax="false"/>
                                    <p:separator/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{managedFactureAchat.deleteBean_(bon)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_facture_achat" type="button"/>
                            </p:column> 
                            <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_facture_achat" value="false"
                                                             onclick="selectionAllLineTab(#{managedFactureAchat.documents.size()}, 'facture_achat')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{bon.selectActif}" styleClass="chek_line_facture_achat"
                                                          onclick="selectionLineTab(#{bonIdx}, 'facture_achat')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                            <p:rowExpansion >
                                <p:dataTable value="#{bon.contenus}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx" id="dt_row_ex_#{bon.id}">
                                    <p:column headerText="ID" style="width: 5%">
                                        #{artf.id}
                                    </p:column>
                                    <p:column headerText="N°" style="width: 5%">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                        <span title="#{lab.LC_PFA_compte} : #{artf.compte.numCompte}">#{artfIdx+1}</span>
                                        <h:panelGroup style="float: right">
                                            <h:graphicImage library="img" name="danger.png" rendered="#{artf.errorComptabilise}" width="23" height="23" title="#{artf.messageError}"/>
                                            <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" title="#{lab.LC_PFA_a_ete_commente}"/>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="#{lab.L_article}">
                                        [<span style="font-weight: bold" title="#{lab.LC_PFA_numero_serie} #{artf.numSerie}">#{artf.article.refArt}</span>]
                                        <span title="#{lab.LC_PFA_numero_serie} #{artf.numSerie}">#{artf.article.designation}</span>
                                        <h:outputText title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} #{lab.L_de} #{artf.articleBonus.designation}" value="B" rendered="#{artf.quantiteBonus gt 0}"
                                                      style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white;float: right"/>
                                    </p:column>
                                    <p:column id="colomn_qte_fa" headerText="#{lab.L_quantite} #{managedFactureAchat.afficheRecu?'Recue':''}" style="width: 10%;text-align: right">
                                        <h:panelGroup rendered="#{managedFactureAchat.afficheRecu}">
                                            <h:outputText value="#{artf.quantiteRecu}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} de #{artf.articleBonus.designation}" rendered="#{artf.quantiteBonus gt 0}"/>
                                            <h:outputText value="#{artf.quantiteRecu}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}" rendered="#{artf.quantiteBonus eq 0 or artf.quantiteBonus lt 0}"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{!managedFactureAchat.afficheRecu}">
                                            <h:outputText value="#{artf.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_bonus} : #{artf.quantiteBonus} #{artf.conditionnementBonus.unite.libelle} de #{artf.articleBonus.designation}" rendered="#{artf.quantiteBonus gt 0}"/>
                                            <h:outputText value="#{artf.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}" rendered="#{artf.quantiteBonus eq 0 or artf.quantiteBonus lt 0}"/>
                                        </h:panelGroup>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PFA_prix_u}" style="width: 8%;text-align: right">
                                        <h:outputText value="#{artf.prixAchat}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PFA_taxe}" style="width: 8%;text-align: right;">
                                        <h:outputText value="#{artf.taxe}" converter="DNS" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PFA_total_ht}" style="width: 10%;text-align: right;" rendered="#{accesRessource.fa_view_totaux}">
                                        <h:outputText value="#{((artf.prixTotal - artf.taxe) le 0)?0:(artf.prixTotal - artf.taxe)}" converter="DNS" title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_total}" style="width: 10%;text-align: right;" rendered="#{accesRessource.fa_view_totaux}">
                                        <h:outputText value="#{artf.prixTotal}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PFA_puv}." style="width: 8%;text-align: right" rendered="#{accesRessource.base_view_article_puv}">
                                        <h:outputText value="#{artf.conditionnement.prix}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                                    </p:column>  
                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column style="text-align: right;background: #CCC!important"/>
                                            <p:column style="text-align: right;background: #CCC!important"/>
                                            <p:column style="text-align: right;background: #CCC!important"/>
                                            <p:column style="text-align: right;background: #CCC!important"/>
                                            <p:column style="text-align: right;background: #CCC!important"/>
                                            <p:column style="text-align: right;background: #CCC!important">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{bon.montantTaxe}" converter="DNS"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column style="text-align: right;background: #CCC!important">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{bon.montantHT}" converter="DNS"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column style="text-align: right;background: #CCC!important">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{bon.montantTTC}" converter="#{managedFactureAchat.converter}"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column/>
                                        </p:row>
                                    </p:columnGroup>
                                </p:dataTable>
                            </p:rowExpansion>
                        </p:dataTable>      
                        <span class="nbSelectfacture_achat" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFactureAchat.init(false)}" global="false" update="data_facture_achat" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureAchat.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedFactureAchat.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedFactureAchat.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedFactureAchat.gotoPagePaginator()}" update="data_facture_achat"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedFactureAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedFactureAchat.init(true)}" global="false" update="data_facture_achat" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureAchat.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFactureAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFactureAchat.paginations}"/>
                                <p:ajax event="valueChange"  update="data_facture_achat"/>
                            </p:selectOneMenu>
                        </p:outputPanel>        
                    </div>  
                    <!-->
                     *****************************************************************************
                     Vue Grid
                     *****************************************************************************
                    <-->
                    <div class="yvs_grid_facture_achat">
                        <h:inputHidden id="input_hide_contenu_fa" value="#{managedFactureAchat.tabIds_article_fa}"/>
                        <p:dataTable id="data_contenu_fa" value="#{managedFactureAchat.all_contenus}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx"
                                     selectionMode="single">
                            <p:ajax event="rowSelect"  listener="#{managedFactureAchat.loadOnViewContent}" update=":main_facture_achat:chp_fa_net_a_payer"
                                    oncomplete="collapseForm('facture_achat');collapseForm('contenu_facture_achat');collapseForm('mensualite_facture_achat');collapseForm('cout_facture_achat');_slideShow('zone_show_detail_produit')"/>                                
                            <p:column headerText="N°" width="15" styleClass="statut_#{artf.docAchat.statut}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                <span title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}">#{artfIdx+1}</span>
                                <h:panelGroup style="float: right">                                      
                                    <h:graphicImage library="img" name="danger.png" rendered="#{artf.errorComptabilise}" width="23" height="23" title="#{artf.messageError}"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PC_ref} " width="100" styleClass="statut_#{artf.docAchat.statut}">
                                <span title="#{lab.LC_PFA_numero_serie}: #{artf.numSerie}" style="font-weight: bold">#{artf.article.refArt}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_article}" width="130" styleClass="statut_#{artf.docAchat.statut}">
                                <span title="#{artf.article.designation}">#{artf.article.designation}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_qte}" width="70"  style="text-align: justify" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.quantiteCommande}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}" style="margin-left: 2px"/>
                                <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399; float: right">#{artf.conditionnement.unite.reference}</span>                               
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_bonus}" width="70"  style="text-align: center" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.quantiteBonus}" converter="#{managedFactureAchat.converterStock}" title="#{lab.LC_PFA_quantite_bonus}" style="font-style: italic;color: blue;font-size: 0.9em;margin-right: 2px"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_prix_u}" width="70" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.prixAchat}" converter="#{managedFactureAchat.converter}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_date_fournisseur}" style="text-align: center" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText title="#{artf.docAchat.numDoc}" value="#{artf.docAchat.dateDoc}" converter="DATE"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_facture}" width="160" styleClass="statut_#{artf.docAchat.statut}">
                                <span title="#{artf.docAchat.numDoc}">#{artf.docAchat.numDoc}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_facture_regler}" value="R" rendered="#{artf.docAchat.statutRegle == constantes.ETAT_REGLE}"
                                                  styleClass="style_statut"/>
                                    <p:spacer width="2" rendered="#{artf.docAchat.statutLivre == constantes.ETAT_LIVRE}"/>
                                    <h:outputText title="#{lab.LC_PFA_facture_livrer}" value="L" rendered="#{artf.docAchat.statutLivre == constantes.ETAT_LIVRE}"
                                                  styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_fournisseur}" width="110" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.docAchat.fournisseur.nom_prenom}" title="#{artf.docAchat.fournisseur.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_depot}" width="100" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.docAchat.depotReception.designation}" title="#{artf.docAchat.depotReception.designation}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_total}" width="100" style="text-align: right" styleClass="statut_#{artf.docAchat.statut}">
                                <h:outputText value="#{artf.prixTotal}" converter="#{managedFactureAchat.converter}" title="#{lab.LC_PFA_numero_serie} : #{artf.numSerie}"/>
                            </p:column>
                            <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_facture_achat" value="false"
                                                             onclick="selectionAllLineTab(#{managedFactureAchat.all_contenus.size()}, 'contenu_fa')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{artf.selectActif}" styleClass="chek_line_facture_achat"
                                                          onclick="selectionLineTab(#{artfIdx}, 'contenu_fa')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                        </p:dataTable>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFactureAchat.loadContenus(false, false)}" global="false" update="data_contenu_fa" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureAchat.p_contenu.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedFactureAchat.p_contenu.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedFactureAchat.p_contenu.page}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedFactureAchat.gotoPagePaginatorContenu()}" update="data_contenu_fa"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedFactureAchat.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedFactureAchat.loadContenus(true, false)}" global="false" update="data_contenu_fa" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureAchat.p_contenu.disNext}"/>
                            <p:selectOneMenu value="#{managedFactureAchat.p_contenu.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureAchat.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFactureAchat.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_contenu_fa"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  
                    </div>                           
                </div> 
                <!-->
                 *****************************************************************************
                 Vue Tab
                 *****************************************************************************
                <-->
                <div class="yvs_tab_facture_achat">

                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <div class="yvs_form_facture_achat display_auteur" align="right"  style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedFactureAchat.selectDoc.dateSave}" converter="DTL"  styleClass="valeur" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedFactureAchat.selectDoc.dateUpdate}" converter="DTL" styleClass="valeur" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedFactureAchat.selectDoc.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <div id="zone_search_facture_achat">
                    <h:panelGrid id="blog_search_fa" columns="2" style="width: 100%; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="10" style="float: left; font-size:1.0em" cellpadding="0" cellspacing="0">
                            <h:outputText value="" />
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFactureAchat.date_}" style="float: left;margin-bottom: -5px">
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseDateSearch()}"
                                            update="blog_date_search_facture_achat blog_other_option_search_fa :main_facture_achat:data_facture_achat"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.LC_PFA_fournisseur}" />
                            <h:panelGroup>
                                <h:outputText value="#{lab.LC_PFA_regle}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedFactureAchat.egaliteStatutR}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PA_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PA_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat" listener="#{managedFactureAchat.addParamStatutRegle()}"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputText value="#{lab.LC_PFA_livre}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedFactureAchat.egaliteStatutL}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PA_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PA_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat" listener="#{managedFactureAchat.addParamStatutLivre()}"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputText value="#{lab.LC_PFA_statut}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedFactureAchat.egaliteStatut}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PA_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PA_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat" listener="#{managedFactureAchat.addParamStatut()}"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="#{lab.LC_PFA_a_faire}" />
                            <h:outputText value="" />
                            <span>&nbsp;</span>
                            <p:commandButton icon="ui-icon-bullet" actionListener="#{managedFactureAchat.clearParams()}" title="#{lab.L_reset_param}" style="width: 20px; height: 22px" 
                                             update="blog_search_fa :main_facture_achat:data_facture_achat"/>
                            <h:panelGroup id="blog_date_search_facture_achat">
                                <p:calendar value="#{managedFactureAchat.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.chooseDateSearch()}" update=":main_facture_achat:data_facture_achat"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedFactureAchat.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.chooseDateSearch()}" update=":main_facture_achat:data_facture_achat"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:inputText value="#{managedFactureAchat.codeFsseur_}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamFsseur()}" update=":main_facture_achat:data_facture_achat"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedFactureAchat.statutRegle_}" valueChangeListener="#{managedFactureAchat.chooseStatutRegle}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_en_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                                <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                                <f:selectItem itemLabel="#{lab.LC_PFA_regeler}" itemValue="#{constantes.STATUT_DOC_PAYER}"/>
                                <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedFactureAchat.statutLivre_}" valueChangeListener="#{managedFactureAchat.chooseStatutLivre}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_en_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                                <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                                <f:selectItem itemLabel="#{lab.LC_PFA_livrer}" itemValue="#{constantes.STATUT_DOC_LIVRER}"/>
                                <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedFactureAchat.statut_}" valueChangeListener="#{managedFactureAchat.chooseStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_editable.toUpperCase()}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{lab.L_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_plus}" itemValue="Z"/>
                                <p:ajax event="valueChange" update=":main_facture_achat:data_facture_achat"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedFactureAchat.numSearch_}">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.searchByNum()}" update=":main_facture_achat:data_facture_achat"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedFactureAchat.toValideLoad}" style="min-width: 80px">
                                <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                                <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamToValide()}" update=":main_facture_achat:data_facture_achat"/>
                            </h:selectOneMenu> 
                            <p:splitButton value="#{lab.L_rechercher}" actionListener="#{managedFactureAchat.loadAllFacture(true, true)}" icon="ui-icon-search">
                                <p:menuitem value="Plus d'options" icon="ui-icon-plus" onclick="dlgPlusOptions.show()"  global="false"/>
                                <p:menuitem value="Analyser" icon="ui-icon-search" oncomplete="dlgAnalyseQuery.show()"
                                            actionListener="#{managedFactureAchat.setInstance(managedFactureAchat)}"/>
                            </p:splitButton>
                        </h:panelGrid>
                        <h:panelGrid columns="2" id="blog_other_option_search_fa" style="float: right">
                            <p:commandLink actionListener="#{managedFactureAchat.equilibreByDate()}" style="border: 2px solid black; border-radius: 5px;padding: 3px;" 
                                           title="#{lab.LC_PFA_equilibrer_statuts}" rendered="#{managedFactureAchat.date_}">
                                <h:graphicImage library="img" name="balance.png" width="15" height="18" style="clear: none;margin-top: 2px!important;"/>   
                            </p:commandLink>
                            <p:commandLink onclick="dlgCleanAchat.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px; margin-right: 5%" 
                                           title="#{lab.LC_PFA_nettoyage_stock}">
                                <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                            </p:commandLink>
                        </h:panelGrid>
                    </h:panelGrid>
                </div>
                <div id="zone_find_facture_achat">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="10" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0"> 
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFactureAchat.dateContenu}" style="float: left;margin-bottom: -5px">
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.findByDateContenu()}" oncomplete="collapseGrid('facture_achat')"
                                            update="blog_date_search_facture_achat_"/>
                                </h:selectBooleanCheckbox>                                
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.LC_PFA_depot}" />
                            <h:outputText value="#{lab.LC_PFA_fournisseur}" />
                            <h:outputText value="#{lab.L_article}" />
                            <h:outputText value="#{lab.L_conditionnement}" />
                            <h:outputText value="#{lab.LC_PFA_statut}" />
                            <h:outputText value="#{lab.L_reference}" />
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFactureAchat.addPrix}" style="float: left;margin-bottom: -5px">
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamPrixContenu()}" oncomplete="collapseGrid('facture_achat')"
                                            update="blog_prix_search_facture_achat_"/>
                                </h:selectBooleanCheckbox>                                
                                <h:outputText value="#{lab.L_prix} " />
                            </h:panelGroup>
                            <span>&nbsp;</span>
                            <h:panelGroup id="blog_date_search_facture_achat_">
                                <p:calendar value="#{managedFactureAchat.dateDebutContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.addParamDateContenu}" oncomplete="collapseGrid('facture_achat')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedFactureAchat.dateFinContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.addParamDateContenu}" oncomplete="collapseGrid('facture_achat')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedFactureAchat.agenceContenu}" style="width: 100%">
                                <f:selectItem itemLabel="" itemValue="0"/>
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag" itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamAgence()}"  oncomplete="collapseGrid('facture_achat')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedFactureAchat.depot}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamDepot()}" oncomplete="collapseGrid('facture_achat')"/>
                            </h:inputText>
                            <h:inputText value="#{managedFactureAchat.fournisseurF}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamFournisseur()}" oncomplete="collapseGrid('facture_achat')"/>
                            </h:inputText>
                            <h:inputText value="#{managedFactureAchat.article}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamArticle()}" oncomplete="collapseGrid('facture_achat')" update="cond_art_s"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedFactureAchat.condArticle}" style="min-width: 120px" id="cond_art_s">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItems value="#{managedFactureAchat.lconditionnements}" var="i_cond" itemLabel="#{i_cond.libelle}" itemValue="#{i_cond.id}"/>
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamUnite()}" oncomplete="collapseGrid('facture_achat')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedFactureAchat.statutContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedFactureAchat.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedFactureAchat.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedFactureAchat.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamStatuts()}" oncomplete="collapseGrid('facture_achat')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedFactureAchat.reference}">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamReference()}" oncomplete="collapseGrid('facture_achat')"/>
                            </h:inputText>
                            <h:panelGroup id="blog_prix_search_facture_achat_">
                                <h:selectOneMenu value="#{managedFactureAchat.comparer}" disabled="#{!managedFactureAchat.addPrix}">
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_INF_EGALE}" itemValue="#{constantes.SYMBOLE_INF_EGALE}"/>
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_SUP_EGALE}" itemValue="#{constantes.SYMBOLE_SUP_EGALE}"/> 
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_BETWEEN}" itemValue="BETWEEN"/>
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamPrixContenu()}" oncomplete="collapseGrid('facture_achat')"
                                            update="blog_prix_search_facture_achat_"/>
                                </h:selectOneMenu>
                                <h:inputText value="#{managedFactureAchat.prixSearch}" style="width: 50px" disabled="#{!managedFactureAchat.addPrix}" rendered="#{!(managedFactureAchat.comparer eq constantes.SYMBOLE_INF_EGALE)}">
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamPrixContenu()}" oncomplete="collapseGrid('facture_achat')"/>
                                </h:inputText>
                                <h:inputText value="#{managedFactureAchat.prix2Search}" style="width: 50px" disabled="#{!managedFactureAchat.addPrix}" rendered="#{!(managedFactureAchat.comparer eq constantes.SYMBOLE_SUP_EGALE)}">
                                    <p:ajax event="valueChange" listener="#{managedFactureAchat.addParamPrixContenu()}" oncomplete="collapseGrid('facture_achat')"/>
                                </h:inputText>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
