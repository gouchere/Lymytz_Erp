<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Livraisons Vente','modGescom', 'smenBonLivraisonVente', true,managedLivraisonVente)}
    </ui:define> 
    <ui:define name="contents"> 
        #{managedLotReception.doNothing()}

        #{managedStockArticle.load(null)}

        #{managedAgence.loadAllUsable()}
        #{managedDepot.loadDepotsByAgence()}
        #{managedLivraisonVente.loadAll()}
        #{managedFactureVente.loadFactureNonLivre(true,true)}
        #{managedUser.loadActif(true)}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 140);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('contenu_livraison_vente');
                collapseForm('livraison_vente');
            });
        </script>

        <h:form prependId="false" id="main-agence">
            <p:dialog widgetVar="dlgAgenceForDepot" header="Selectionner une agence" width="50%" closeOnEscape="true"> 
                <p:dataTable value="#{managedAgence.agences}" var="ag" rowKey="#{ag.id}" selectionMode="single" id="table_agence" rowIndexVar="line_ag">
                    <p:ajax event="rowSelect" listener="#{managedDepot.onSelectAgenceForAction}" update=":main_livraison_vente:select_depot_livraison_vente" oncomplete="dlgAgenceForDepot.hide()"/>
                    <p:column headerText="#{lab.L_code}" width="200">
                        <h:outputText value="#{ag.codeagence}"/>
                    </p:column>                                
                    <p:column headerText="#{lab.L_designation}">
                        <h:outputText value="#{ag.designation}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>

        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedLivraisonVente.updateBean()}"/>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Liste lot de reception" widgetVar="dlgListLotReception" modal="true" closeOnEscape="true" width="60%"> 
                <p:outputPanel id="blog-contenu_blv_require_lot">
                    <p:dataTable value="#{managedLivraisonVente.contenu.lots}" var="aRL" rowKey="#{aRL.id}"
                                 id="data-contenu_blv_require_lot" editable="true" rendered="#{managedLivraisonVente.contenusRequireLot.isEmpty()}">
                        <p:ajax event="rowEdit" listener="#{managedLivraisonVente.onRowLotEdit}"/>
                        <f:facet name="header">
                            <div align="right">
                                <p:commandButton  icon="ui-icon-disk" value="Terminer" actionListener="#{managedLivraisonVente.saveAllContenuLot()}" oncomplete="dlgListLotReception.hide()"
                                                  update=":main_livraison_vente:blog_form_contenu_livraison_vente"/>
                            </div>
                        </f:facet>
                        <p:column headerText="Numero" style="text-align: left">
                            #{aRL.numero}
                        </p:column>
                        <p:column headerText="Date de fabrication" style="text-align: center">
                            <h:outputText value="#{aRL.dateFabrication}" converter="DATE" rendered="#{aRL.id gt 0}"/>
                            <h:outputText value="----" rendered="#{aRL.id lt 1}"/>
                        </p:column>
                        <p:column headerText="Date d'expiration" style="text-align: center">
                            <h:outputText value="#{aRL.dateExpiration}" converter="DATE" rendered="#{aRL.id gt 0}"/>
                            <h:outputText value="----" rendered="#{aRL.id lt 1}"/>
                        </p:column>
                        <p:column headerText="Stock" style="text-align: right">
                            <h:outputText value="#{aRL.stock}" converter="#{managedFactureAchat.converterStock}"/>
                            <span title="#{managedLivraisonVente.contenu.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{managedLivraisonVente.contenu.conditionnement.unite.reference}</span>
                        </p:column>
                        <p:column headerText="Quantité" style="text-align: center">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{aRL.quantitee}"/>
                                    <span title="#{managedLivraisonVente.contenu.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{managedLivraisonVente.contenu.conditionnement.unite.reference}</span>
                                </f:facet>
                                <f:facet name="input">
                                    <h:inputText value="#{aRL.quantitee}" style="width:100%;text-align: right"/>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column style="text-align: center;width: 5px">
                            <p:rowEditor rendered="#{aRL.id gt 0}"/>
                        </p:column>  
                    </p:dataTable>
                    <p:outputPanel  rendered="#{!managedLivraisonVente.contenusRequireLot.isEmpty()}">                        
                        <div style="float: right">
                            <p:commandButton  icon="ui-icon-disk" value="Terminer" actionListener="#{managedLivraisonVente.saveAllArticle()}" oncomplete="dlgListLotReception.hide()"
                                              update=":main_livraison_vente:blog_form_contenu_livraison_vente"/>
                        </div>
                        <div style="width: 100%;max-height: 400px;clear: both">
                            <div style="width: 100%;max-height: 350px;overflow-y: auto">
                                <c:forEach items="#{managedLivraisonVente.contenusRequireLot}" var="aRL" id="data-contenu_blv_require_lot">
                                    <p:dataTable value="#{aRL.lots}" var="lot" rowKey="#{lot.id}" style="width: 100%;clear:both" editable="true">
                                        <f:facet name="header">
                                            <div align="left">
                                                <h:outputText value="#{aRL.quantite}" converter="#{managedLivraisonVente.converterStock}" title="#{lab.LC_PFA_numero_serie}: #{aRL.numSerie}"/>
                                                <span title="#{aRL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{aRL.conditionnement.unite.reference}</span>
                                                de
                                                #{aRL.article.designation}
                                                <div style="float:right">
                                                    <h:outputText value="#{aRL.article.quantite}" converter="#{managedLivraisonVente.converterStock}"/>
                                                    <span title="#{aRL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{aRL.conditionnement.unite.reference}</span>
                                                    <h:outputText value="#{lab.LC_PFV_en_stock}"/>
                                                </div>
                                            </div>
                                        </f:facet>
                                        <p:column headerText="Numero de lot" style="text-align: center">
                                            #{lot.numero}
                                        </p:column>
                                        <p:column headerText="Date fabrication" style="text-align: center">
                                            <h:outputText value="#{lot.dateFabrication}" converter="DATE"/>
                                        </p:column>
                                        <p:column headerText="Date expiration" style="text-align: center">
                                            <h:outputText value="#{lot.dateExpiration}" converter="DATE"/>
                                        </p:column>
                                        <p:column headerText="Stock" style="text-align: right">
                                            <h:outputText value="#{lot.stock}" converter="#{managedFactureAchat.converterStock}"/>
                                            <span title="#{aRL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{aRL.conditionnement.unite.reference}</span>
                                        </p:column>
                                        <p:column headerText="Quantitée" style="text-align: right">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{lot.quantitee}"/>
                                                    <span title="#{aRL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{aRL.conditionnement.unite.reference}</span>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <h:inputText value="#{lot.quantitee}" style="width:100%;text-align: right">
                                                        <p:ajax event="valueChange" listener="#{managedLivraisonVente.onBlurQuantiteeLot(aRL, lot)}"/>
                                                    </h:inputText>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column style="text-align: center;width: 5px">
                                            <p:rowEditor />
                                        </p:column> 
                                    </p:dataTable>                                
                                </c:forEach>
                            </div>
                        </div>
                    </p:outputPanel>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des livraisons liée au contenu
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="main_livraison_blv">
            <p:dialog header="#{lab.LC_PLV_entree_quantitee}" widgetVar="dlgDefinedContenu" modal="true" width="50%"  closeOnEscape="true"> 
                <h:panelGrid id="form_defined_contenu_blv" columns="4" styleClass="yvs_table" style="width: 100%;background: #CCC" cellpadding="0" cellspacing="0">
                    <span>#{lab.LC_PLV_facture_numero} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.numDoc}" style="font-weight: bold"/>
                    <span>#{lab.L_du} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.dateEntete}" converter="DATE" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_client}:  </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.nom_client}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_vendeur} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.creneau.users.nomUsers}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_qte_vendu} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.quantite}" converter="#{managedLivraisonVente.converterStock}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_qte_livree} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.qteLivree}" converter="#{managedLivraisonVente.converterStock}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_point} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.creneau.creneauPoint.point.libelle}" style="font-weight: bold"/> 
                    <span>#{lab.LC_PLV_depot} : </span>
                    <h:outputText value="#{managedLivraisonVente.depotContenu.designation}" style="font-weight: bold"/> 
                    <f:facet name="footer">
                        <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%;margin: auto" cellpadding="0" cellspacing="0">
                            <f:facet name="header">
                                <h:panelGroup style="width: 100%">
                                    <h:inputText value="#{managedLivraisonVente.quantite_livree}"/> 
                                    <span> / </span>
                                    <h:inputText value="#{managedLivraisonVente.selectContenu.qteRestant}" readonly="true"/> 
                                </h:panelGroup>                        
                            </f:facet>
                            <span>#{lab.LC_PLV_depot} </span>
                            <h:selectOneMenu value="#{managedLivraisonVente.depotContenu.id}" style="width: 100%" id="select_depot_defined_blv">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedLivraisonVente.depotsLivraison}" var="dp" itemLabel="#{dp.designation}" itemValue="#{dp.id}" />    
                                <p:ajax event="valueChange" global="false" update="select_depot_change_blv"/>                              
                            </h:selectOneMenu>      
                            <span>#{lab.LC_PLV_date_livraison}</span>
                            <p:calendar value="#{managedLivraisonVente.dateLivraison}" pattern="dd-MM-yyyy" size="10"/>
                        </h:panelGrid>  
                    </f:facet>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                    <p:commandButton value="#{lab.L_enregistrer}" style="float: right;margin-top: -3px" oncomplete="dlgDefinedContenu.hide()"
                                     actionListener="#{managedLivraisonVente.insertInLivraison()}"/>
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PLV_detail_contenu}" widgetVar="dlgChangeDepot" modal="true" width="50%"  closeOnEscape="true"> 
                <h:panelGrid id="form_change_depot_contenu_blv" columns="4" styleClass="yvs_table" style="width: 100%;background: #CCC" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">                            
                            <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">                            
                                <span>#{lab.LC_PLV_depot} </span>
                                <h:selectOneMenu value="#{managedLivraisonVente.depotChange.id}" style="width: 100%" id="select_depot_change_blv">
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedLivraisonVente.depotsLivraison}" var="dpl" itemLabel="#{dpl.designation}" itemValue="#{dpl.id}" />  
                                    <p:ajax event="valueChange" global="false" update="select_depot_defined_blv"/>                            
                                </h:selectOneMenu> 
                            </h:panelGrid> 
                            <h:panelGroup style="float: right">
                                <p:commandButton icon="ui-icon-disk" title="#{lab.L_enregistrer}" actionListener="#{managedLivraisonVente.changeDepotContenu()}"/>
                            </h:panelGroup>  
                        </h:panelGrid>   
                    </f:facet>
                    <span>#{lab.LC_PLV_facture_numero} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.numDoc}" style="font-weight: bold"/>
                    <span>#{lab.L_du} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.dateEntete}" converter="DATE" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_client}:  </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.nom_client}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_vendeur} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.creneau.users.nomUsers}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_qte_vendu} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.quantite}" converter="#{managedLivraisonVente.converterStock}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_qte_livree} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.qteLivree}" converter="#{managedLivraisonVente.converterStock}" style="font-weight: bold"/>
                    <span>#{lab.LC_PLV_point} : </span>
                    <h:outputText value="#{managedLivraisonVente.selectContenu.docVente.enteteDoc.creneau.creneauPoint.point.libelle}" style="font-weight: bold"/> 
                    <span>#{lab.LC_PLV_depot} : </span>
                    <h:outputText value="#{managedLivraisonVente.depotContenu.designation}" style="font-weight: bold"/> 
                    <f:facet name="footer">
                        <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">                            
                            <span>#{lab.L_article} </span>
                            <h:panelGroup>
                                [<h:outputText style="font-weight: bold" value="#{managedLivraisonVente.selectContenu.article.refArt}"/>]
                                <h:outputText value="#{managedLivraisonVente.selectContenu.article.designation}"/>
                            </h:panelGroup>       
                            <span>#{lab.LC_PLV_puv} </span>
                            <h:outputText value="#{managedLivraisonVente.selectContenu.prix}" converter="#{managedLivraisonVente.converter}"/>
                            <span>#{lab.L_remise} </span>
                            <h:outputText value="#{managedLivraisonVente.selectContenu.remise}" converter="#{managedLivraisonVente.converter}"/>
                            <span>#{lab.LC_PLV_prix_total} </span>
                            <h:outputText value="#{managedLivraisonVente.selectContenu.prixTotal}" converter="#{managedLivraisonVente.converter}"/>
                        </h:panelGrid>   
                    </f:facet>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.LC_PLV_liste_bon_livraison}" widgetVar="dlgOpenLivraison" modal="true" width="80%"  closeOnEscape="true"> 
                <p:dataTable id="data_livraison_content_blv" value="#{managedLivraisonVente.livraisons}" var="bon" rowKey="#{bon.id}"
                             selectionMode="single" rowIndexVar="bonIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedLivraisonVente.loadOnViewLivraison}" 
                            oncomplete="dlgDefinedContenu.show()" update=":main_livraison_blv:form_defined_contenu_blv"/>
                    <p:ajax event="rowUnselect" global="false" listener="#{managedLivraisonVente.unLoadOnViewLivraison}" 
                            oncomplete="dlgDefinedContenu.show()" update=":main_livraison_blv:form_defined_contenu_blv"/>
                    <p:column headerText="N°" width="30" styleClass="statut_#{bon.statut}">
                        <span>#{bonIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bon.statut}">
                        <span>#{bon.numDoc}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_clients}" styleClass="statut_#{bon.statut}">
                        #{bon.client.nom_prenom}
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_depot}" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.depotLivrer.designation}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_tranche}" styleClass="statut_#{bon.statut}" style="text-align: center">
                        <h:outputText value="#{bon.trancheLivrer.heureDebut}" converter="TIME"/>
                        -
                        <h:outputText value="#{bon.trancheLivrer.heureFin}" converter="TIME"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_date_livraison}" style="text-align: center;width: 10%" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.dateLivraison}" converter="DDMMYYYY"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_livreur}" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.livreur.nomUsers}"/>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de la commande liée a la facture
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="data_contenus_fv_blv">
            <p:dialog widgetVar="dlgContenuFVBLV" modal="true" width="80%"  closeOnEscape="true"> 
                <f:facet name="header">
                    <span>#{lab.LC_PLV_facture_numero}</span>  
                    <h:panelGroup rendered="#{managedLivraisonVente.selectDoc.id gt 0}">
                        <p:commandLink style="color:white" global="false" value="#{managedLivraisonVente.selectDoc.documentLie.numDoc}" 
                                       actionListener="#{managedLivraisonVente.onSelectDistantObject(managedLivraisonVente.selectDoc.documentLie)}"/>                        
                    </h:panelGroup>
                    <h:panelGroup rendered="#{managedLivraisonVente.selectDoc == null}">
                        <span>#{managedLivraisonVente.facture.numDoc}</span> 
                    </h:panelGroup>
                    <p:spacer width="5" height="5" styleClass="#{managedLivraisonVente.facture.statutLivre}" title="Statut : #{managedLivraisonVente.giveNameStatut(managedLivraisonVente.facture.statutLivre)}"
                              style="border: 2px solid white; border-radius: 5px;padding: 3px;margin-top: 2px;margin-left: 10px;float: right;cursor: pointer"/>
                </f:facet>
                <p:dataTable value="#{managedLivraisonVente.facture.contenus}" var="y" rowKey="#{y.id}" rowIndexVar="yIdx">
                    <p:column headerText="N°" style="width: 5%;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <span title="#{lab.LC_PLV_numero_serie} : #{y.numSerie}">#{yIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_ref}. " style="width: 12%;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <span title="#{lab.LC_PLV_numero_serie}  : #{y.numSerie}">#{y.article.refArt}</span>
                        <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{y.onComment}" style="float: right" title="#{lab.LC_PLV_a_ete_commente}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_article}" style="color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <span title="#{lab.LC_PLV_numero_serie} : #{y.numSerie}">#{y.article.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_qte}" style="width: 8%;text-align: center;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <h:outputText value="#{y.quantite}" converter="#{managedLivraisonVente.converterStock}" title="#{lab.LC_PLV_numero_serie}  : #{y.numSerie}"/>
                        <span title="#{y.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{y.conditionnement.unite.reference}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_prix}" style="width: 10%;text-align: right;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <h:outputText value="#{(y.prix-y.rabais)}" converter="#{managedLivraisonVente.converter}" title="#{lab.LC_PLV_numero_serie} : #{y.numSerie}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_rem}" style="width: 10%;text-align: right;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <h:outputText value="#{y.remise}" converter="#{managedLivraisonVente.converter}" title="#{lab.LC_PLV_numero_serie} : #{y.numSerie}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_taxe}" style="width: 10%;text-align: right;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <h:outputText value="#{y.taxe}" converter="DNS" title="#{lab.LC_PLV_numero_serie}: #{y.numSerie}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_total}" style="width: 12%;text-align: right;color: #{y.etat()=='R'?'orange':(y.etat()=='P'?'red':'')};font-style: #{y.etat()!='E'?'italic':''}">
                        <h:outputText value="#{y.prixTotal}" converter="#{managedLivraisonVente.converter}" title="#{lab.LC_PLV_numero_serie} : #{y.numSerie}"/>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>


        <!-->
        *****************************************************************************
        Boite de dialogue creation des articles depot
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PLV_ajout_article_depot}" widgetVar="dlgAddArticleDepot" modal="true" width="40%"  closeOnEscape="true"> 
                <h:panelGrid id="blog_form_article_depot_blv" columns="2" style="width: 98%;margin: auto">
                    <f:facet name="header">
                        #{lab.LC_PLV_depot} : <b><span>#{managedStockArticle.article.depot.designation}</span></b>
                    </f:facet>
                    <span>#{lab.L_article} </span>
                    <h:inputText value="#{managedStockArticle.article.article.designation}" style="width: 98%" readonly="true"/>                                                  
                    <span>#{lab.LC_PLV_marge_stock}</span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedStockArticle.article.stockMin}" style="width: 30%;text-align: right" decimalPlaces="0">
                            <p:ajax event="blur" global="false" update="txt_stock_alert_art_depot_dep_blv"/>
                        </pe:inputNumber>
                        <span> #{lab.L_a} </span>
                        <pe:inputNumber value="#{managedStockArticle.article.stockMax}" style="width: 30%;text-align: right" decimalPlaces="0"/>
                    </h:panelGroup>            
                    <span>#{lab.LC_PLV_stock_securite}</span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedStockArticle.article.stockSecurite}" style="width: 30%;text-align: right" decimalPlaces="0">
                            <p:ajax event="blur" global="false" update="txt_stock_alert_art_depot_dep_blv"/>
                        </pe:inputNumber>
                        <div style="float: right;font-size: 0.8em;font-style: italic;margin-top: 5px">
                            #{lab.LC_PLV_stock_alert}
                            <h:outputText value="#{managedStockArticle.article.stockAlert}" converter="#{managedLivraisonVente.converterStock}" style="color: blue" id="txt_stock_alert_art_depot_dep_blv"/>
                        </div>
                    </h:panelGroup>   
                    <span title="#{lab.LC_PLV_mode_approvisionnement}">#{lab.LC_PLV_approv} </span>
                    <h:selectOneMenu value="#{managedStockArticle.article.modeAppro}">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>   
                        <f:selectItems value="#{constantes.MODES_APPRO}" var="MA" itemLabel="#{MA.libelle}" itemValue="#{MA.valeur}"/>                          
                        <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseModeApprovisionnement()}"/>
                    </h:selectOneMenu>  
                    <span title="#{lab.LC_PLV_mode_reapprovisionnement}">#{lab.LC_PLV_reapprov} </span>
                    <h:selectOneMenu value="#{managedStockArticle.article.modeReappro}">
                        <f:selectItems value="#{constantes.MODES_REAPPRO}" var="MRA" itemLabel="#{MRA.libelle}" itemValue="#{MRA.valeur}"/>                    
                        <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseModeReApprovisionnement()}" update="val_delai_alert_blv"/>
                    </h:selectOneMenu>    
                    <span title="#{lab.LC_PLV_lot_reapprovisionnement}">#{lab.LC_PLV_lot_reappro} </span>
                    <pe:inputNumber value="#{managedStockArticle.article.lotLivraison}"/>   
                    <span title="#{lab.LC_PLV_interval_reapprovisionnement}t">#{lab.LC_PLV_int_reappro} </span>
                    <h:panelGroup id="val_delai_alert_blv">
                        <pe:inputNumber value="#{managedStockArticle.article.intervalApprov}" style="width: 30%"
                                        disabled="#{(managedStockArticle.article.modeReappro != 'PERIODIQUE')}"/>
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedStockArticle.article.uniteInterval}" disabled="#{(managedStockArticle.article.modeReappro != 'PERIODIQUE')}">
                            <f:selectItems value="#{constantes.UNITES_TIMES_ALL}" var="tps" 
                                           itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup>   
                </h:panelGrid>
                <p:commandButton value="#{lab.L_enregistrer}" style="width: 100%" oncomplete="dlgAddArticleDepot.hide()"
                                 actionListener="#{managedStockArticle.saveNewArticle()}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des livreurs
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PLV_liste_livreurs}" widgetVar="dlgListUsers" modal="true" width="50%"  closeOnEscape="true"> 
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:inputText value="#{managedUser.numSearch}" style="margin-left: -10px">
                            <p:ajax event="keyup" global="false" update="data_livreur_livraison_vente" listener="#{managedUser.searchUsersActif(false)}"/>
                        </h:inputText>
                    </h:panelGroup>                    
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedUser.loadAll(false,false)}" global="false" update="data_livreur_livraison_vente" icon="ui-icon-circle-triangle-w" disabled="#{managedUser.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedUser.paginator.currentPage}/#{managedUser.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedUser.loadAll(true,false)}" global="false" update="data_livreur_livraison_vente" icon="ui-icon-circle-triangle-e" disabled="#{managedUser.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedUser.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedUser.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{managedUser.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_livreur_livraison_vente"/>
                        </p:selectOneMenu>
                    </p:outputPanel>  
                </h:panelGrid>
                <p:dataTable id="data_livreur_livraison_vente" value="#{managedUser.listUser}" var="art" rowKey="#{art.id}"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false" >
                    <p:ajax event="rowSelect" global="false" listener="#{managedLivraisonVente.loadOnViewLivreur}" oncomplete="dlgListUsers.hide()"/>
                    <p:column filterBy="#{art.codeUsers}" style="width: 2%">
                        <span>#{art.codeUsers}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_noms}" style="width: 6%">
                        <span>#{art.nomUsers}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PLV_groupe}" style="width: 4%">
                        <span>#{art.categorie.libelle}</span>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des entetes de vente
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgStatut_3">
            <p:dialog id="dlgStatut_3" header="Statut de la facture" modal="true" width="300px" height="20px" closeOnEscape="true" widgetVar="dlgStatut" resizable="false" style="background-color: #A0AFA0"> 
                <p:outputPanel id="grp_btn_etat_3" styleClass="yvs_form_of" style="width: 98%;margin: auto">  
                    <p:commandLink value="#{lab.LC_PLV_editable}" styleClass="button-stateOF #{(managedLivraisonVente.docSelect.statut == constantes.ETAT_EDITABLE)?'button-stateOF_actif':''}" 
                                   disabled="#{!(managedLivraisonVente.docSelect.statut == constantes.ETAT_VALIDE
                                               or managedLivraisonVente.docSelect.statut == constantes.ETAT_ANNULE)}" 
                                   actionListener="#{managedLivraisonVente._changeStatut(constantes.ETAT_EDITABLE)}"
                                   process="@this" update="grp_btn_etat_3" global="false"/>                                 
                    <p:commandLink value="#{lab.LC_PLV_valider}" styleClass="button-stateOF #{(managedLivraisonVente.docSelect.statut == constantes.ETAT_VALIDE)?'button-stateOF_actif':''}" 
                                   disabled="#{!(managedLivraisonVente.docSelect.statut == constantes.ETAT_EDITABLE)}" 
                                   actionListener="#{managedLivraisonVente._changeStatut(constantes.ETAT_VALIDE)}"
                                   process="@this" update="grp_btn_etat_3" global="false"/>
                    <p:commandLink value="#{lab.LC_PLV_annuler}" styleClass="button-stateOF #{(managedLivraisonVente.docSelect.statut==constantes.ETAT_ANNULE)?'button-stateOF_actif':''}" 
                                   disabled="#{!(managedLivraisonVente.docSelect.statut == constantes.ETAT_VALIDE)}" 
                                   actionListener="#{managedLivraisonVente._changeStatut(constantes.ETAT_ANNULE)}"
                                   process="@this" update="grp_btn_etat_3" global="false"/>
                    <p:commandLink value="#{(managedLivraisonVente.docSelect.cloturer)?'Ouvrir':'Cloturer'}" styleClass="button-stateOF" 
                                   actionListener="#{managedLivraisonVente._cloturer()}"
                                   process="@this" update="grp_btn_etat_3" global="false"/>
                </p:outputPanel>   
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des entetes de vente
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_entete_livraison_vente" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:outputText value="#{lab.L_agence}" rendered="#{acces.multiAgence}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.agence_}" id="_select_agence_blv" style="width: 100%" rendered="#{acces.multiAgence}">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedLivraisonVente.agences_}" var="ag"
                                       itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente._chooseAgence()}" oncomplete="collapseList('livraison_vente')" 
                                update="blog_entete_livraison_vente"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PLV_depot}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.depot_}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedDepot.depots_all}" var="de"
                                       itemLabel="#{de.designation}" itemValue="#{de.id}"/>
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente._chooseDepot()}" oncomplete="collapseList('livraison_vente')"
                                update="_select_tranche_livraison_vente"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.L_point_vente}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.point_}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedLivraisonVente.points_}" var="po"
                                       itemLabel="#{po.libelle}" itemValue="#{po.id}"/>
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente._choosePoint()}" oncomplete="collapseList('livraison_vente')"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.L_tranche}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.tranche_}" id="_select_tranche_livraison_vente" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedLivraisonVente.tranches_point_}" var="tr"
                                       itemLabel="#{tr.titre}" itemValue="#{tr.id}"/>
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente._chooseTranche()}" oncomplete="collapseList('livraison_vente')"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PLV_vendeur}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.users_}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedLivraisonVente.userss_}" var="us"
                                       itemLabel="#{us.nomUsers}" itemValue="#{us.id}"/>
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente._chooseVendeur()}" oncomplete="collapseList('livraison_vente')"/>
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LC_PLV_statut}"/>
                    <h:selectOneMenu value="#{managedLivraisonVente.statut}"  valueChangeListener="#{managedLivraisonVente._chooseStatut}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItems value="#{constantes.ETATS_}"/>
                    </h:selectOneMenu> 
                    <h:panelGroup>
                        <h:outputText value="#{lab.LC_PLV_heures}"/>
                        <h:selectBooleanCheckbox value="#{managedLivraisonVente.date_}" style="margin-top: 2px;float: right">
                            <p:ajax event="valueChange" listener="#{managedLivraisonVente.chooseDateSearch()}" oncomplete="collapseList('livraison_vente')"
                                    update="blog_date_search_livraison_vente :main_livraison_vente:data_livraison_vente"/>
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_livraison_vente">
                        <pe:timePicker value="#{managedLivraisonVente.dateDebut_}" disabled="#{!managedLivraisonVente.date_}" style="width: 80px;text-align: left">
                            <p:ajax event="timeSelect" listener="#{managedLivraisonVente.chooseDateSearch()}" update=":main_livraison_vente:data_livraison_vente" oncomplete="collapseList('livraison_vente')"/>
                        </pe:timePicker>
                        <p:spacer width="5px" style="background: black"/>
                        <pe:timePicker value="#{managedLivraisonVente.dateFin_}" disabled="#{!managedLivraisonVente.date_}" style="width: 80px;text-align: left">
                            <p:ajax event="timeSelect" listener="#{managedLivraisonVente.chooseDateSearch()}" update=":main_livraison_vente:data_livraison_vente" oncomplete="collapseList('livraison_vente')"/>
                        </pe:timePicker>
                    </h:panelGroup>
                    <h:outputText value="#{lab.LC_PLV_facture}"/>
                    <h:inputText value="#{managedLivraisonVente.numFacture}" style="width: 100%">
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente.chooseFacture()}" oncomplete="collapseList('livraison_vente')"/>
                    </h:inputText>  

                    <h:panelGroup>
                        <h:outputText value="#{lab.LDB_PC_dates}"  />
                        <h:selectBooleanCheckbox value="#{managedLivraisonVente.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client" oncomplete="collapseList('livraison_vente')" listener="#{managedLivraisonVente.addParamDates()}"/>
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedLivraisonVente.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedLivraisonVente.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedLivraisonVente.addParamDates}"  oncomplete="collapseList('livraison_vente')" />
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedLivraisonVente.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedLivraisonVente.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedLivraisonVente.addParamDates}"  oncomplete="collapseList('livraison_vente')"/>
                        </p:calendar>
                    </h:panelGroup>

                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedLivraisonVente.idsSearch}" style="width: 100%" title="#{lab.L_entrer_id_separer_virgules}">
                        <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamIds()}" oncomplete="collapseList('livraison_vente')"/>
                    </h:inputText>      
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de bon de commande
        *****************************************************************************
        <-->  

        <h:form prependId="false">                    
            <p:dialog header="#{lab.LC_PLV_liste_facture}" widgetVar="dlgListFactures" closeOnEscape="true" width="90%" modal="true" 
                      dynamic="true" resizable="false" height="500">                                  
                <div style="height: 100%">
                    <div class="dlg_part_fixe">
                        <p:watermark for="stat_liv_client" value="#{lab.LC_PLV_client}...." />
                        <p:watermark for="stat_liv_vendeur" value="#{lab.LC_PLV_vendeur}...." />
                        <p:watermark for="stat_liv_num_fv" value="#{lab.LC_PLV_numero_facture}...." />
                        <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">                        
                            <h:panelGroup  style="font-size: 0.8em">                        
                                <h:inputText id="stat_liv_num_fv" value="#{managedFactureVente.numSearch_}" style="float: left;color: #009999;text-align: center;margin-left: -10px">
                                    <p:ajax event="keyup"  listener="#{managedFactureVente.searchByNum()}" update="data_fv_livraison"/>
                                </h:inputText>   
                                <p:spacer width="2"/>
                                <h:selectOneMenu value="#{managedFactureVente.statut_}" valueChangeListener="#{managedFactureVente.chooseStatut}" style="min-width: 120px" title="Statut de la facture">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                    <f:selectItem itemLabel="#{lab.L_annule}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                    <f:selectItem itemLabel="#{lab.L_valide}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                    <p:ajax event="valueChange" global="false" update="data_fv_livraison"/>
                                </h:selectOneMenu>
                                <p:spacer width="2"/>
                                <h:selectOneMenu value="#{managedFactureVente.statutLivre_}" valueChangeListener="#{managedFactureVente.chooseStatutLivre}" style="min-width: 120px">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="#{lab.L_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                                    <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                                    <f:selectItem itemLabel="#{lab.L_livrer}" itemValue="#{constantes.STATUT_DOC_LIVRER}"/>
                                    <p:ajax event="valueChange" update="data_fv_livraison"/>
                                </h:selectOneMenu>
                                <h:inputText value="#{managedFactureVente.codeClient_}" id="stat_liv_client">
                                    <p:ajax event="keyup" listener="#{managedFactureVente.searchByClient()}"
                                            update="data_fv_livraison"/>
                                </h:inputText>
                                <h:inputText value="#{managedFactureVente.codeVendeur_}" id="stat_liv_vendeur">
                                    <p:ajax event="keyup" listener="#{managedFactureVente._searchVendeur()}"  
                                            update="data_fv_livraison"/>
                                </h:inputText>   
                                <h:selectOneMenu value="#{managedFactureVente.point_}" style="min-width: 120px">
                                    <f:selectItem itemLabel="--#{lab.LDB_PPC_precedent}--" itemValue="-1"/>
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedPointVente.pointsvente}" var="_po" 
                                                   itemLabel="#{_po.libelle}" itemValue="#{_po.id}" />  
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItem itemLabel="--#{lab.LDB_PPC_suivant}--" itemValue="-2"/>  
                                    <p:ajax event="valueChange" listener="#{managedFactureVente._choosePoint()}"
                                            update="data_fv_livraison @this"/>
                                </h:selectOneMenu>
                            </h:panelGroup>  
                            <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                                <p:commandButton actionListener="#{managedFactureVente.init(false)}" global="false" update="data_fv_livraison" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureVente.paginator.disPrev}"/>
                                <p:outputPanel ><p:outputLabel value="#{managedFactureVente.paginator.currentPage}/#{managedFactureVente.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                <p:commandButton actionListener="#{managedFactureVente.init(true)}" global="false" update="data_fv_livraison" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureVente.paginator.disNext}"/>
                                <p:selectOneMenu value="#{managedFactureVente.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureVente.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                    <f:selectItems value="#{managedFactureVente.paginations}"/>
                                    <p:ajax event="valueChange" global="false" update="data_fv_livraison"/>
                                </p:selectOneMenu>
                            </p:outputPanel> 
                        </h:panelGrid>  
                    </div>
                    <div class="dlg_part_scroll">
                        <div class="yvs_list_fv_livraison">
                            <p:dataTable id="data_fv_livraison"  value="#{managedFactureVente.documents}" var="bon" rowKey="#{bon.id}"
                                         selectionMode="single" rowIndexVar="fichfAIdx">
                                <p:ajax event="rowSelect" listener="#{managedLivraisonVente.loadOnViewDoc}" oncomplete="dlgListFactures.hide()" update=":data_contenus_fv_blv"/>
                                <p:column headerText="N°" style="width: 7%" styleClass="statut_#{bon.statut}">
                                    <span>#{fichfAIdx+1}</span>
                                </p:column>
                                <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bon.statut}">
                                    <span>#{bon.numDoc}</span>
                                    <h:panelGroup style="float: right">
                                        <h:outputText title="#{lab.LC_PFA_facture_regler}" value="R" rendered="#{bon.statutRegle == constantes.ETAT_REGLE}"
                                                      style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                        <p:spacer width="2" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"/>
                                        <h:outputText title="#{lab.LC_PFA_facture_livrer}" value="L" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"
                                                      style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                        <p:spacer width="2" rendered="#{bon.consigner}"/>
                                        <h:outputText title="#{lab.LC_PFV_facture_consigne}" value="C" rendered="#{bon.consigner}"
                                                      style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                    </h:panelGroup>
                                </p:column>
                                <p:column headerText="#{lab.L_date} " style="text-align: center" styleClass="statut_#{bon.statut}">
                                    <h:outputText value="#{bon.enteteDoc.dateEntete}" converter="DATE"/>
                                </p:column>
                                <p:column headerText="#{lab.LC_PLV_client}" styleClass="statut_#{bon.statut}">
                                    <h:outputText value="#{bon.nom_client}"/>
                                </p:column>
                                <p:column headerText="#{lab.LC_PLV_vendeur}" styleClass="statut_#{bon.statut}">
                                    <h:outputText value="#{bon.enteteDoc.creneau.users.nomUsers}"/>
                                </p:column>
                                <p:column headerText="#{lab.LC_PLV_point}" styleClass="statut_#{bon.statut}">
                                    <h:outputText value="#{bon.enteteDoc.creneau.creneauPoint.point.libelle}"/>
                                </p:column>
                            </p:dataTable>                            
                        </div>
                        <div class="yvs_grid_fv_livraison">

                        </div>
                    </div>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>


        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAddArticle" closeOnEscape="true"
                             message="#{lab.LC_PLV_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" onclick="dlgConfirmAddArticle.hide();
                        dlgAddArticleDepot.show()" global="false"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedLivraisonAchat.resetFicheArticle()}" oncomplete="dlgConfirmAddArticle.hide()" global="false"/>
            </p:confirmDialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.deleteBean()}" oncomplete="dlgConfirmDelete.hide();collapseList('livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide();collapseList('livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog id="id_confirm_close_blv" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="#{lab.LC_PLV_text10} #{managedLivraisonVente.selectDoc.cloturer?'dévérrouiller':'vérrouiller'}?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.cloturer()}" oncomplete="dlgConfirmClose.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.deleteBeanArticle()}" update=":main_livraison_vente:blog_form_contenu_livraison_vente"
                                 oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('contenu_livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.deleteBeanArticle_()}" update=":main_livraison_vente:blog_form_contenu_livraison_vente"
                                 oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('contenu_livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticles" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LC_PFV_memoriser_choix_session}</span>
                    <p:selectBooleanCheckbox value="#{managedLivraisonVente.memoriserDeleteContenu}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.deleteBeanArticles(true)}" update=":main_livraison_vente:blog_form_contenu_livraison_vente"
                                 oncomplete="dlgConfirmDeleteArticles.hide();collapseForm('contenu_livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticles.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByCancel" closeOnEscape="true" header="#{lab.LC_PLV_attention}"
                             message="#{lab.LC_PLV_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedLivraisonVente.annulerOrderByForce()}" oncomplete="dlgConfirmChangeInventaireByCancel.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByCancel.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByValid" closeOnEscape="true" header="#{lab.LC_PLV_attention}"
                             message="#{lab.LC_PLV_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedLivraisonVente.validerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByValid.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByValid.hide()"/>
            </p:confirmDialog>
        </h:form> 
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="#{lab.LC_PLV_text7}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.annulerOrder(true)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmAnnuler.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuser" closeOnEscape="true"
                             message="#{lab.LC_PLV_text7}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.refuserOrder(true)}" oncomplete="dlgConfirmRefuser.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmRefuser.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmSoumis" closeOnEscape="true"
                             message="#{lab.LC_PLV_text6}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.transmisOrder()}" oncomplete="dlgConfirmSoumis.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmSoumis.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgSaveEntete" closeOnEscape="true"
                             message="#{lab.LC_PLV_text5}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.saveNewEntete()}" oncomplete="dlgSaveEntete.hide();collapseForm('livraison_vente');collapseForm('contenu_livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgSaveEntete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgResetEntete" closeOnEscape="true"
                             message="#{lab.LC_PLV_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.resetFicheEntete()}" oncomplete="dlgResetEntete.hide();collapseForm('livraison_vente');collapseForm('contenu_livraison_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgResetEntete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanEntete" closeOnEscape="true"
                             message="#{lab.LC_PLV_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.cleanEnteteVente()}" oncomplete="dlgCleanEntete.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCleanEntete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanVente" closeOnEscape="true"
                             message="#{lab.LC_PLV_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedLivraisonVente.cleanVente()}" oncomplete="dlgCleanVente.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCleanVente.hide()"/>
            </p:confirmDialog>
        </h:form>           
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_confirmation}" width="40%" widgetVar="dlgValidDocAll" message="#{lab.LCF_POD_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedLivraisonVente.validerOrderAll()}" oncomplete="dlgValidDocAll.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgValidDocAll.hide()" />
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_livraison_vente">    
            <div class="part_fix">
                <div style="float: left">   
                    <p:splitButton value="#{lab.L_enregistrer}" id="save_livraison_vente" actionListener="#{managedLivraisonVente.saveNew()}" 
                                   icon="ui-icon-disk" update="@this">
                        <p:menuitem value="#{lab.L_nouveau}" id="cancel_livraison_vente"  icon="ui-icon-document" actionListener="#{managedLivraisonVente.resetFiche()}" 
                                    oncomplete="collapseForm('livraison_vente');collapseForm('contenu_livraison_vente')" update="save_livraison_vente"/>
                        <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger}" global="false" actionListener="#{managedLivraisonVente.print(managedLivraisonVente.selectDoc)}" 
                                    ajax="false" title="#{lab.LC_PFV_telecharger_facture}" rendered="#{managedLivraisonVente.docVente.id gt 0}"/>                   
                        <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger_sans_entete}" global="false" actionListener="#{managedLivraisonVente.print(managedLivraisonVente.selectDoc, false)}" 
                                    ajax="false" title="#{lab.LC_PFV_telecharger_facture}" rendered="#{managedLivraisonVente.docVente.id gt 0}"/>                   
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelete.show()" global="false"/>
                    </p:splitButton>
                    <p:splitButton value="Valider" id="delete_livraison_vente" icon="ui-icon-check" onclick="dlgValidDocAll.show()"  global="false" style="font-size: 0.8em">
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelete.show()" global="false"/>
                    </p:splitButton>
                </div>     
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedLivraisonVente.parcoursInAllResult(false)}"
                                     update="txt_parc_linear_livraison_vente save_livraison_vente" global="false"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('livraison_vente')"/>
                    <h:inputText value="#{managedLivraisonVente.offset}" style="width: 35px; text-align: center;"  title="Aller au N°..." id="txt_parc_linear_livraison_vente"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedLivraisonVente.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedLivraisonVente.parcoursInAllResult(true)}" 
                                     update="txt_parc_linear_livraison_vente save_livraison_vente" global="false" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('livraison_vente')"/>
                </h:panelGroup>  
                <div style="float: right">
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('livraison_vente');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('livraison_vente');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>            
                    <p:spacer />        
                    <h:link title="#{lab.LC_PLV_mode_consultation}" onclick="collapseGrid('livraison_vente');
                            return false">
                        <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>    
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_livraison_vente">
                    <p:outputPanel id="blog_form_livraison_vente" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="1" style="width: 100%">
                            <p:outputPanel id="form_entete_livraison_vente">
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -10px;margin-top: -10px" cellpadding="0" cellspacing="0" rendered="#{managedLivraisonVente.docVente.update}">
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white">                                            
                                        <span style="font-size: initial">#{lab.L_numero} : </span>
                                        <h:outputText id="txt_reference_document_livraison_vente" value="#{managedLivraisonVente.docVente.numDoc}"/>
                                    </h:panelGrid>
                                    <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: 1%">
                                        <p:outputPanel id="grp_btn_etat_livraison_vente" styleClass="yvs_form_of">  
                                            <p:commandLink value="#{lab.LC_PLV_editable}" styleClass="button-stateOF #{(managedLivraisonVente.docVente.statut == constantes.ETAT_EDITABLE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedLivraisonVente.docVente.statut == constantes.ETAT_VALIDE
                                                                       or managedLivraisonVente.docVente.statut == constantes.ETAT_ANNULE)}" 
                                                           actionListener="#{managedLivraisonVente.annulerOrder(false)}"
                                                           process="@this" update="grp_btn_etat_livraison_vente"/>                                 
                                            <p:commandLink value="#{lab.LC_PLV_valider}" styleClass="button-stateOF #{(managedLivraisonVente.docVente.statut == constantes.ETAT_VALIDE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedLivraisonVente.docVente.statut == constantes.ETAT_EDITABLE)}" 
                                                           actionListener="#{managedLivraisonVente.validerOrder()}"
                                                           process="@this" update="grp_btn_etat_livraison_vente"/>
                                            <p:commandLink value="#{lab.LC_PLV_annuler}" styleClass="button-stateOF #{(managedLivraisonVente.docVente.statut==constantes.ETAT_ANNULE)?'button-stateOF_actif':''}" 
                                                           disabled="#{managedLivraisonVente.docVente.statut == constantes.ETAT_ANNULE}" 
                                                           actionListener="#{managedLivraisonVente.refuserOrder(false)}"
                                                           process="@this" update="grp_btn_etat_livraison_vente"/>
                                        </p:outputPanel>                                                
                                    </h:panelGroup>                                     
                                </h:panelGrid> 
                            </p:outputPanel>
                            <p:outputPanel>
                                <div style="width: 40%;float: left">
                                    <h:panelGrid id="infos_document_livraison_vente" styleClass="yvs_table" columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                                        <f:facet name="header">
                                            <div align="left">
                                                <h:panelGroup>
                                                    <span>#{lab.LC_PLV_facture} </span>  
                                                    <p:commandButton icon="ui-icon-cart" style="width: 20px;height: 22px;margin-left: 10px;background: white!important" title="#{lab.LC_PLV_contenu_facture}" global="false"
                                                                     update=":data_contenus_fv_blv" oncomplete="dlgContenuFVBLV.show()"/>
                                                    <h:inputText id="select_document_facture_vente" value="#{managedLivraisonVente.facture.numDoc}" disabled="#{managedLivraisonVente.docVente.update}" 
                                                                 style="width: 150px;color: #{managedLivraisonVente.facture.error?'red':''}">                
                                                        <p:ajax event="valueChange" global="false" listener="#{managedLivraisonVente.searchFacture()}" update="data_contenu_fv_blv :data_contenus_fv_blv"/>                                                        
                                                    </h:inputText>
                                                    <h:outputText value="#{managedLivraisonVente.facture.nom_client}" style="margin-left: 5px;font-size: 0.9em"/>
                                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white!important" title="#{lab.LC_PLV_liste_facture}" oncomplete="dlgListFactures.show()"
                                                                     disabled="#{managedLivraisonVente.docVente.update}" global="false"/>
                                                    <h:panelGroup style="float: right;margin-right: 10px">
                                                        <h:panelGroup style="float: right; background: #FFF; color: #000; border: 1px solid #045491; padding: 3px; margin-right: -9px">
                                                            #{managedLivraisonVente.docVente.id}
                                                        </h:panelGroup>
                                                        <p:commandButton icon="ui-icon-gear" style="width: 25px; height: 25px" type="button" id="btn_print_opt" />
                                                        <p:contextMenu for="btn_print_opt" event="left click" style="width:220px">
                                                            <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger}" global="false" actionListener="#{managedLivraisonVente.print(managedLivraisonVente.selectDoc)}" ajax="false" title="#{lab.LC_PFV_telecharger_facture}"/>                   
                                                            <p:menuitem icon="ui-icon-print" value="#{lab.L_telecharger_sans_entete}" global="false" actionListener="#{managedLivraisonVente.print(managedLivraisonVente.selectDoc, false)}" ajax="false" title="#{lab.LC_PFV_telecharger_facture}"/>                   
                                                            <p:separator/>
                                                            <p:menuitem icon="ui-icon-trash" value="#{lab.L_supprimer}" global="false" actionListener="#{managedLivraisonVente.deleteBean_(managedLivraisonVente.selectDoc)}" oncomplete="dlgConfirmDelete_.show()"/>
                                                        </p:contextMenu>
                                                    </h:panelGroup>
                                                </h:panelGroup>
                                            </div>
                                        </f:facet>
                                        <span>#{lab.LC_PLV_client} </span>                                        
                                        <h:inputText id="txt_client_livraison_vente" value="#{managedLivraisonVente.docVente.nom_client}" style="width: 95%" readonly="true"/>
                                        <span>#{lab.LC_PLV_point_vente} </span>
                                        <h:inputText id="txt_pv_livraison_vente" value="#{managedLivraisonVente.docVente.enteteDoc.point.libelle}" style="width: 95%" readonly="true"/>
                                        <span title="#{lab.LC_PLV_categorie_comptable}">#{lab.L_categorie} </span>
                                        <h:inputText id="txt_cc_livraison_vente" value="#{managedLivraisonVente.docVente.categorieComptable.codeCategorie}" readonly="true"/>
                                        <span>#{lab.LC_PLV_depot} </span>
                                        <h:panelGroup>
                                            <h:selectOneMenu value="#{managedLivraisonVente.docVente.depot.id}" id="select_depot_livraison_vente"
                                                             disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}" style="min-width: 200px">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedDepot.depots}" var="dep_" 
                                                               itemLabel="#{dep_.designation}" itemValue="#{dep_.id}" />                                
                                                <p:ajax event="valueChange" global="false" listener="#{managedLivraisonVente.chooseDepotLivraison()}"/>
                                            </h:selectOneMenu> 
                                            <p:commandLink value="Selectionner agence" onclick="dlgAgenceForDepot.show()" global="false" rendered="#{managedAgence.agences.size() gt 1}"/>
                                        </h:panelGroup>
                                        <span>#{lab.L_tranche} </span>
                                        <h:selectOneMenu id="select_tranche_livraison_vente" value="#{managedLivraisonVente.docVente.tranche.id}" 
                                                         disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}" style="min-width: 200px">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedLivraisonVente.tranches_livraison}" var="trh0" 
                                                           itemLabel="#{trh0.titre}" itemValue="#{trh0.id}" />                                
                                            <p:ajax event="valueChange" global="false" listener="#{managedLivraisonVente.chooseTrancheLivraison()}"/>
                                        </h:selectOneMenu> 
                                        <span>#{lab.LC_PLV_livreur} </span>
                                        <h:panelGroup id="txt_livreur_livraison_vente">
                                            <h:inputText value="#{managedLivraisonVente.docVente.livreur.codeUsers}" title="#{managedLivraisonVente.docVente.livreur.nomUsers}" style="color: #{managedLivraisonVente.docVente.livreur.error?'red':''}"
                                                         disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}">
                                                <p:ajax event="blur" listener="#{managedLivraisonVente.searchLivreur()}" update="txt_livreur_livraison_vente"/>
                                            </h:inputText>  
                                            <h:outputText value="#{managedLivraisonVente.docVente.livreur.nomUsers}" style="color: #009999;margin-left: 10px"/>
                                            <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px;background: white" title="Liste Livreurs" global="false"
                                                             actionListener="#{managedLivraisonVente.initLivreurs()}" oncomplete="dlgListUsers.show()"
                                                             disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}"/>
                                        </h:panelGroup> 
                                        <span>#{lab.LC_PLV_date_livr} </span>
                                        <h:panelGroup>
                                            <p:calendar value="#{managedLivraisonVente.docVente.dateLivraison}" pattern="dd-MM-yyyy" size="10" 
                                                        disabled="#{managedLivraisonAchat.docAchat.statut != constantes.ETAT_EDITABLE}"/>
                                            <pe:timePicker value="#{managedLivraisonVente.docVente.heureDoc}" style="width: 80px"
                                                           disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}"/> 
                                        </h:panelGroup>
                                        <span>#{lab.L_reference} </span>
                                        <h:inputText id="txt_reference_livraison_vente" value="#{managedLivraisonVente.docVente.numPiece}" style="width: 95%"
                                                     disabled="#{managedLivraisonVente.docVente.statut != constantes.ETAT_EDITABLE}"/>
                                    </h:panelGrid>                                    
                                </div>
                                <div style="width: 59%;margin-left: 41%">
                                    <div style="background: #666;color: white;width: 100%;font-size: 1em;" >
                                        <span style="margin-top:5px;margin-left: 2px">#{lab.LC_PLV_contenu_facture_vente} </span>                                        
                                    </div>
                                    <p:dataTable id="data_contenu_fv_blv" value="#{managedLivraisonVente.contenus_fv}" var="artC" rowKey="#{artC.id}" 
                                                 rowIndexVar="artCIdx" selectionMode="single"  style="max-height: 188px;overflow-y: auto">
                                        <p:ajax event="rowSelect"  listener="#{managedLivraisonVente.loadOnViewArticle}" 
                                                update=":main_livraison_vente:form_contenu_livraison_vente"/>
                                        <p:ajax event="rowUnselect"  listener="#{managedLivraisonVente.unLoadOnViewArticle}" update=":main_livraison_vente:form_contenu_livraison_vente"/>
                                        <p:column style="width: 8%" headerText="N°">
                                            <span>#{artCIdx+1}</span>
                                        </p:column>
                                        <p:column filterBy="#{artC.article.refArt}" style="width: 18%">
                                            <span>#{artC.article.refArt}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_article}">
                                            <span>#{artC.article.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_qte}" style="width: 12%;text-align: right">
                                            <h:outputText value="#{artC.quantite}" converter="#{managedLivraisonVente.converterStock}"/>
                                            <span title="#{artC.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artC.conditionnement.unite.reference}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_bonus}" style="width: 12%;text-align: right" >
                                            <h:panelGroup rendered="#{artC.id gt 0}">
                                                <h:outputText value="#{artC.quantiteBonus}" converter="#{managedLivraisonVente.converterStock}" title="Sur l'article #{artC.articleBonus.designation}"/>
                                                <span title="#{artC.conditionnementBonus.unite.libelle}" style="font-size: 0.6em;color: #003399; display: #{(artC.quantiteBonus gt 0)?'inline':'none'}">#{artC.conditionnementBonus.unite.reference}</span>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{artC.id lt 0}">
                                                <h:outputText value="B" title="Bonus" style="font-weight: bold;border: 1px solid #666; border-radius: 4px;padding: 2px;background: #0099ff;color: white;font-size: 0.8em"/>
                                            </h:panelGroup>
                                        </p:column>
                                        <p:column headerText="#{lab.L_total}" style="width: 12%;text-align: right">
                                            <h:outputText value="#{artC.prixTotal}" converter="#{managedLivraisonVente.converter}"/>
                                        </p:column>
                                        <p:column style="text-align: center" width="30">
                                            <f:facet name="header" >
                                                <p:commandButton icon="ui-icon-circle-plus" styleClass="button_gear" update=":main_livraison_vente:blog_form_contenu_livraison_vente" actionListener="#{managedLivraisonVente.tryToSaveAllArticle()}"
                                                                 title="Ajouter tout le contenu dans le box de livraison"/>
                                            </f:facet>
                                            <p:commandButton icon="ui-icon-circle-plus" styleClass="button_gear" update=":main_livraison_vente:blog_form_contenu_livraison_vente" actionListener="#{managedLivraisonVente.saveOneArticle(artC, true, true)}"
                                                             title="Ajouter la ligne dans le box de livraison"/>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </p:outputPanel>
                            <p:outputPanel id="blog_form_contenu_livraison_vente">
                                <h:panelGrid class="headline_data" columns="2" styleClass="yvs_nostyle" style="width: 100%; font-size: 0.8em;cursor: pointer" onclick="slideZone()">
                                    <b><span> Contenus</span></b>
                                    <p:commandButton icon="ui-icon-circle-arrow-s" style="float: right;width: 20px;height: 20px;color: white;background:#FFF !important"
                                                     title="#{lab.LC_PLV_ajout_contenu}" onclick="slideZone()" type="button" rendered="false"/>
                                </h:panelGrid> 
                                <h:panelGrid id="form_contenu_livraison_vente" columns="1" styleClass="yvs_nostyle" style="width: 100%;background: white;border: 2px solid #045491!important; border-radius: 5px;padding: -5px" cellpadding="0" cellspacing="0">    
                                    <f:facet name="header">
                                        <h:panelGrid columns="1" id="desc_contenu_livraison_vente" style="position: relative;width: 100%;padding-top: -2px;padding-bottom: -3px">
                                            <h:panelGrid columns="2" style="font-size: 0.9em;width: 100%;background: #bbb" styleClass="yvs_nostyle" rendered="#{managedLivraisonVente.selectArt}">
                                                <h:panelGroup style="float: left">
                                                    <span style="font-weight: bold;color: #000">#{managedLivraisonVente.contenu.article.designation}</span>
                                                    <span> #{lab.LC_PLV_vendu_a} </span>
                                                    <h:outputText value="#{managedLivraisonVente.contenu.article.puv}" converter="#{managedLivraisonVente.converter}" style="font-weight: bold;color: #000"/>
                                                    <span>Fcfa  </span>
                                                </h:panelGroup>
                                                <h:panelGroup style="float: right">
                                                    <h:outputText value="#{managedLivraisonVente.contenu.article.stock}" converter="#{managedLivraisonVente.converterStock}" style="font-weight: bold;color: #000"/>
                                                    <h:outputText value=" #{managedLivraisonVente.contenu.conditionnement.unite.reference}"/>
                                                    <span> #{lab.LC_PLV_en_stock}</span>
                                                </h:panelGroup>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </f:facet>
                                    <h:panelGrid columns="#{managedLivraisonVente.contenu.article.requiereLot?'6':'5'}" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                        <h:outputText value="#{lab.L_article}"/>
                                        <h:outputText value="#{lab.L_conditionnement}"/>
                                        <h:outputText value="#{lab.LC_PLV_puv}"/>
                                        <h:outputText value="#{lab.L_quantite}"/>
                                        <h:outputText value="#{lab.LC_PLV_lot}" rendered="#{managedLivraisonVente.contenu.article.requiereLot}"/>
                                        <h:outputText value=""/>
                                        <h:inputText value="#{managedLivraisonVente.contenu.article.refArt}" readonly="true" style="width: 100%"
                                                     title="#{lab.LC_PLV_selectionner_element_tableau_contenus}" />    
                                        <h:inputText value="#{managedLivraisonVente.contenu.conditionnement.unite.reference}" readonly="true"/>    
                                        <h:inputText value="#{managedLivraisonVente.contenu.prix}" style="width: 100px;text-align: center" readonly="true" converter="#{managedLivraisonVente.converter}"/>
                                        <h:panelGroup>
                                            <h:inputText value="#{managedLivraisonVente.contenu.quantite}" style="width: 100px;text-align: right">
                                                <p:ajax event="blur" global="false" listener="#{managedLivraisonVente.onQuantiteBlur()}" />
                                            </h:inputText>
                                            <span> / </span>      
                                            <h:inputText value="#{managedLivraisonVente.contenu.quantite_}" style="width: #{managedLivraisonVente.contenu.quantiteBonus gt 0?'50px':'100px'};text-align: center" readonly="true" converter="#{managedLivraisonVente.converterStock}"/>
                                            <h:panelGroup style="margin-left: -5px" rendered="#{managedLivraisonVente.contenu.quantiteBonus gt 0}">
                                                <span>+</span>  
                                                <h:inputText value="#{managedLivraisonVente.contenu.quantiteBonus}" title="#{managedLivraisonVente.contenu.articleBonus.designation}"
                                                             style="width: 50px;text-align: center" readonly="true" converter="#{managedLivraisonVente.converterStock}"/>
                                            </h:panelGroup>
                                        </h:panelGroup>       
                                        <h:inputText id="select_lot" value="#{managedLivraisonVente.contenu.lot.numero}" ondblclick="dlgListLotReception.show()" 
                                                     readonly="true" title="Cliquer deux fois pour ouvrir la liste des lots de reception"
                                                     rendered="#{managedLivraisonVente.contenu.article.requiereLot}"/>                             
                                        <p:commandButton id="save_contenu_livraison_vente" icon="ui-icon-circle-plus" value="Ajouter" oncomplete="collapseForm('contenu_livraison_vente')"
                                                         update="blog_form_contenu_livraison_vente" actionListener="#{managedLivraisonVente.saveNewArticle()}"/>
                                    </h:panelGrid>  
                                </h:panelGrid>                                    
                                <p:outputPanel>
                                    <h:inputHidden id="input_hide_contenu_livraison_vente" value="#{managedLivraisonVente.tabIds_article}"/>
                                    <p:dataTable id="data_contenu_livraison_vente" value="#{managedLivraisonVente.docVente.contenus}" var="artf" rowKey="#{artf.id}" 
                                                 rowIndexVar="artfIdx" selection="#{managedLivraisonVente.selectContenus}" style="max-height: 380px;overflow-y: auto">
                                        <p:ajax event="rowSelect" global="false" listener="#{managedLivraisonVente.loadOnViewContenu}" update=":main_livraison_vente:form_contenu_livraison_vente"/>
                                        <p:ajax event="rowUnselect" global="false" listener="#{managedLivraisonVente.unLoadOnViewContenu}" update=":main_livraison_vente:form_contenu_livraison_vente"/>
                                        <p:column width="30" headerText="N°">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                #{artfIdx+1}
                                            </span>
                                        </p:column>
                                        <p:column width="30" headerText="ID">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                #{artf.id}
                                            </span>
                                        </p:column>
                                        <p:column  headerText="#{lab.L_reference}" style="width: 15%">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                #{artf.article.refArt}
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_article}">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                #{artf.article.designation}
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PLV_lot}" style="text-align: center;width: 10%" rendered="#{managedLivraisonVente.currentParam.useLotReception}">
                                            <span title="#{managedLivraisonVente.ldf.format(artf.dateSave)}">
                                                #{artf.lot.numero}
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_quantite}" style="text-align: right;width: 10%">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                <h:outputText value="#{artf.quantite}" converter="#{managedLivraisonVente.converterStock}"/>
                                            </span>
                                            <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_prix}" style="text-align: right;width: 10%">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                <h:outputText value="#{artf.prix}" converter="#{managedLivraisonVente.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PLV_rem}" style="text-align: right;width: 10%">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                <h:outputText value="#{artf.remise}" converter="#{managedLivraisonVente.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_total}" style="text-align: right;width: 12%">
                                            <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                                <h:outputText value="#{artf.prixTotal}" converter="#{managedLivraisonVente.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column style="width: 30px;text-align: center">
                                            <f:facet name="header">
                                                <p:contextMenu for="btn_option_contenu_livraison_vente_head" event="left click" style="font-size: 0.8em;width: 200px">
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedLivraisonVente.deleteBeanArticles(false)}"/>
                                                </p:contextMenu>                           
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_livraison_vente_head" type="button"/>
                                            </f:facet>
                                            <p:contextMenu for="btn_option_contenu_livraison_vente" event="left click" style="font-size: 0.8em;width: 200px">
                                                <p:menuitem value="#{artf.calculPr?'Désactiver':'Activer'} #{lab.LC_PLV_calcul_pr}" icon="#{artf.calculPr?'ui-icon-pause':'ui-icon-play'}"
                                                            actionListener="#{managedLivraisonVente.changeCalculPr(artf)}" update="data_contenu_livraison_vente"/>
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedLivraisonVente.deleteBeanArticle_(artf)}" oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_livraison_vente" type="button"/>
                                        </p:column> 
                                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>  
                                    </p:dataTable>
                                </p:outputPanel>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="part_list">
                    <div class="yvs_list_livraison_vente" style="width: 99%; margin: auto; background: white">
                        <h:inputHidden id="input_hide_livraison_vente" value="#{managedLivraisonVente.tabIds}"/>
                        <p:dataTable id="data_livraison_vente" value="#{managedLivraisonVente.documents}" var="bon" rowKey="#{bon.id}"
                                     selectionMode="single" rowIndexVar="bonIdx" selection="#{managedLivraisonVente.selectDoc}">
                            <p:ajax event="rowSelect" listener="#{managedLivraisonVente.loadOnView}"  
                                    update=":main_livraison_vente:input_hide_livraison_vente :main_livraison_vente:save_livraison_vente"
                                    oncomplete="collapseForm('livraison_vente');collapseForm('contenu_livraison_vente')"/>  
                            <p:ajax event="rowToggle" listener="#{managedLivraisonVente.displayContent(bon)}" global="false"/>   
                            <p:column width="30" >
                                <p:rowToggler/>
                            </p:column>         
                            <p:column headerText="N°" width="30" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>  
                                <span>#{bonIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numDoc}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_clients}" styleClass="statut_#{bon.statut}">
                                #{bon.nom_client}
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_depot}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.depotLivrer.designation}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_tranche}" styleClass="statut_#{bon.statut}" style="text-align: center" rendered="false">
                                <h:outputText value="#{bon.trancheLivrer.heureDebut}" converter="TIME"/>
                                -
                                <h:outputText value="#{bon.trancheLivrer.heureFin}" converter="TIME"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_date_livraison}" style="text-align: center;width: 10%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateLivraison}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_facture}" styleClass="statut_#{bon.statut}">
                                <span>#{bon.documentLie.numDoc}</span>
                                <p:spacer width="10px" style="float: right;margin-top: 2px" styleClass="#{bon.documentLie.statutRegle}" title="STATUT : #{managedLivraisonVente.giveNameStatut(bon.documentLie.statutRegle)}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_livreur}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.livreur.nomUsers}"/>
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <p:contextMenu for="btn_option_livraison_vente" event="left click" style="font-size: 0.8em; width: 220px">
                                    <p:menuitem icon="ui-icon-document" value="#{lab.LC_PLV_voir_facture}" actionListener="#{managedLivraisonVente.setSelectDoc(bon)}" global="false" update=":data_contenus_fv_blv" oncomplete="dlgContenuFVBLV.show()" rendered="#{bon.documentLie.id > 0}"/>
                                    <p:menuitem value="#{bon.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{bon.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                                actionListener="#{managedLivraisonVente.cloturer(bon)}" oncomplete="dlgConfirmClose.show()"/>   
                                    <p:menuitem value="Valider" icon="ui-icon-check" actionListener="#{managedLivraisonVente.validerOrderOne(bon, true, true)}" update="data_livraison_vente"/>                                 
                                    <p:separator style="width: 100%"/>
                                    <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedLivraisonVente.print(bon)}" ajax="false"/>
                                    <p:menuitem value="#{lab.L_telecharger_sans_entete}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedLivraisonVente.print(bon, false)}" ajax="false"/>
                                    <p:separator style="width: 100%"/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedLivraisonVente.deleteBean_(bon)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_livraison_vente" type="button"/>
                            </p:column> 
                            <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_livraison_vente" value="false"
                                                             onclick="selectionAllLineTab(#{managedLivraisonVente.documents.size()}, 'livraison_vente')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{bon.selectActif }" styleClass="chek_line_livraison_vente" 
                                                          onclick="selectionLineTab(#{bonIdx}, 'livraison_vente')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                            <p:rowExpansion>
                                <p:dataTable id="dt_row_ex_#{bon.id}" value="#{bon.contenus}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx">
                                    <p:column width="30" headerText="N°">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            #{artfIdx+1}
                                        </span>
                                    </p:column>
                                    <p:column  headerText="#{lab.L_reference}" style="width: 15%">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            #{artf.article.refArt}
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_article}">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            #{artf.article.designation}
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PLV_lot}" style="text-align: center;width: 10%" rendered="#{managedLivraisonVente.currentParam.useLotReception}">
                                        <span title="#{managedLivraisonVente.ldf.format(artf.dateSave)}">
                                            #{artf.lot.numero}
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_quantite}" style="text-align: right;width: 10%">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            <h:outputText value="#{artf.quantite}" converter="#{managedLivraisonVente.converterStock}"/>
                                        </span>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_prix}" style="text-align: right;width: 10%">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            <h:outputText value="#{artf.prix}" converter="#{managedLivraisonVente.converter}"/>
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PLV_rem}" style="text-align: right;width: 10%">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            <h:outputText value="#{artf.remise}" converter="#{managedLivraisonVente.converter}"/>
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_total}" style="text-align: right;width: 12%">
                                        <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                            <h:outputText value="#{artf.prixTotal}" converter="#{managedLivraisonVente.converter}"/>
                                        </span>
                                    </p:column>
                                </p:dataTable>
                            </p:rowExpansion>
                        </p:dataTable>                               
                        <span class="nbSelectlivraison_vente" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedLivraisonVente.init(false)}" global="false" update="data_livraison_vente" icon="ui-icon-circle-triangle-w" disabled="#{managedLivraisonVente.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedLivraisonVente.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedLivraisonVente.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="blur" listener="#{managedLivraisonVente.gotoPagePaginator()}" update="data_livraison_vente"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedLivraisonVente.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedLivraisonVente.init(true)}" global="false" update="data_livraison_vente" icon="ui-icon-circle-triangle-e" disabled="#{managedLivraisonVente.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedLivraisonVente.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedLivraisonVente.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedLivraisonVente.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_livraison_vente"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  
                    </div> 

                    <!-->
                     *****************************************************************************
                     Vue Grid
                     *****************************************************************************
                    <-->
                    <div class="yvs_grid_livraison_vente" style="width: 99%; margin: auto; background: white">
                        <p:dataTable id="data_contenu_blv" value="#{managedLivraisonVente.all_contenus}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx"
                                     selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{managedLivraisonVente.loadOnViewContenuFacture}"  oncomplete="collapseForm('livraison_vente');collapseForm('contenu_livraison_vente')"
                                    update=":main_livraison_vente:form_contenu_livraison_vente"/>
                            <p:column headerText="N°" style="text-align: center" width="30" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    #{artfIdx+1}
                                </span>
                            </p:column>
                            <p:column headerText="" styleClass="statut_#{artf.docVente.statutLivre}" width="80">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" style="font-weight: bold" >
                                    #{artf.article.refArt}
                                </span>
                                <h:outputText title="#{lab.LC_PFV_facture_consigne}" value="C" rendered="#{artf.idReservation ne null}"
                                              style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 1px;background: black;color: white; float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.L_article}" styleClass="statut_#{artf.docVente.statutLivre}">  
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    #{artf.article.designation}
                                </span>                                
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_lot}" style="text-align: center;width: 10%" rendered="#{managedLivraisonVente.currentParam.useLotReception}">
                                <span title="#{managedLivraisonVente.ldf.format(artf.dateSave)}">
                                    #{artf.lot.numero}
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.L_qte}" style="width: 8%;" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    <h:outputText value="#{artf.quantite}" converter="#{managedLivraisonVente.converterStock}" style="margin-left: 2px"/>
                                </span>
                                <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{artf.quantiteBonus}" converter="#{managedLivraisonVente.converterStock}" title="#{lab.LC_PLV_quantite_bonus}" style="font-style: italic;color: blue;font-size: 0.9em;margin-right: 2px"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_facture}" width="200" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    #{artf.docVente.numDoc}
                                </span>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PBRA_facture_reglee}" value="R" rendered="#{artf.docVente.statutRegle == constantes.ETAT_REGLE}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                    <p:spacer width="2" rendered="#{artf.docVente.statutLivre == constantes.ETAT_LIVRE}"/>
                                    <h:outputText title="#{lab.LC_PBRA_facture_livree}" value="L" rendered="#{artf.docVente.statutLivre == constantes.ETAT_LIVRE}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                    <p:spacer width="2" rendered="#{artf.docVente.consigner}"/>
                                    <h:outputText title="#{lab.LC_PCV_stock_facture_consigne}" value="C" rendered="#{managedFactureVente.isConsigner(artf.docVente)}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" width="80" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    <h:outputText value="#{artf.docVente.enteteDoc.dateEntete}" converter="DATE"/>
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_liv_prevu}" width="80"  styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    <h:outputText value="#{artf.docVente.dateLivraisonPrevu}"/>
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PLV_client}" width="200" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    <h:outputText value="#{artf.docVente.nom_client}" />
                                </span>
                            </p:column> 
                            <p:column headerText="#{lab.L_total}" width="90" style="text-align: right" styleClass="statut_#{artf.docVente.statutLivre}">
                                <span title="#{managedLivraisonVente.currentParam.useLotReception ? managedLivraisonVente.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lot.numero)}" >
                                    <h:outputText value="#{artf.prixTotal}" converter="#{managedLivraisonVente.converter}"/>
                                </span>
                            </p:column>
                            <p:column style="text-align: center" width="10">
                                <p:contextMenu for="btn_option_contenu_blv" event="left click" style="font-size: 0.8em;width: 220px">
                                    <p:menuitem value="#{lab.LC_PLV_voir_detail}" icon="ui-icon-person" global="false" actionListener="#{managedLivraisonVente.beginLivraison(artf, true)}"
                                                oncomplete="dlgChangeDepot.show()" update=":main_livraison_blv:form_change_depot_contenu_blv"/>
                                    <p:menuitem value="#{lab.LC_PLV_envoyer_livraison}" icon="ui-icon-transferthick-e-w" actionListener="#{managedLivraisonVente.loadLivraisonByClient(artf)}"
                                                update=":main_livraison_blv:data_livraison_content_blv"/>
                                    <p:menuitem value="#{lab.LC_PLV_generer_livraison}" icon="ui-icon-circle-plus" actionListener="#{managedLivraisonVente.generedLivraison(artf)}"
                                                update=":main_livraison_blv:form_defined_contenu_blv"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_blv" type="button"/>
                            </p:column> 
                        </p:dataTable>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedLivraisonVente.loadContenus(false, false)}" global="false" update="data_contenu_blv" icon="ui-icon-circle-triangle-w" disabled="#{managedLivraisonVente.p_contenu.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedLivraisonVente.p_contenu.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedLivraisonVente.p_contenu.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="blur" listener="#{managedLivraisonVente.gotoPagePaginatorContenu()}" update="data_contenu_blv"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedLivraisonVente.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedLivraisonVente.loadContenus(true, false)}" global="false" update="data_contenu_blv" icon="ui-icon-circle-triangle-e" disabled="#{managedLivraisonVente.p_contenu.disNext}"/>
                            <p:selectOneMenu value="#{managedLivraisonVente.page}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedLivraisonVente.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedLivraisonVente.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_contenu_blv"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  
                    </div>                                                        
                </div> 
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <div class="yvs_form_livraison_vente display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedLivraisonVente.selectDoc.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedLivraisonVente.selectDoc.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedLivraisonVente.selectDoc.author.users.nomUsers}" styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div> 
                <div id="zone_search_livraison_vente">
                    <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGrid id="blog_search_livraison_vente" columns="9" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0">
                            <h:outputText value="" />
                            <h:panelGroup>                                
                                <h:selectBooleanCheckbox value="#{managedLivraisonVente.date_}" valueChangeListener="#{managedLivraisonVente.choixParamDate}">
                                    <p:ajax event="valueChange" oncomplete="collapseList('livraison_vente')"
                                            update="blog_date_search_entete_livraison_vente"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="Date" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.LC_PLV_depots}" />
                            <h:outputText value="#{lab.LC_PLV_livreur}" />
                            <h:panelGroup>
                                <h:outputText value="#{lab.LC_PLV_statut}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedLivraisonVente.egaliteStatut}" style="float:right;margin-right: 5px;height: 20px">
                                    <f:selectItem itemLabel="#{lab.LC_PLV_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PLV_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatut()}" oncomplete="collapseList('livraison_vente')"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="" />
                            <span>&nbsp;</span>
                            <p:commandButton icon="ui-icon-bullet" actionListener="#{managedLivraisonVente.clearParams()}" title="#{lab.L_reset_param}" style="width: 20px; height: 22px" 
                                             update="blog_search_livraison_vente"/>
                            <h:panelGroup id="blog_date_search_entete_livraison_vente">
                                <p:calendar value="#{managedLivraisonVente.dateDebut}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedLivraisonVente.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedLivraisonVente.addParamDate}" oncomplete="collapseList('livraison_vente')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedLivraisonVente.dateFin}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedLivraisonVente.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedLivraisonVente.addParamDate}" oncomplete="collapseList('livraison_vente')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedLivraisonVente.agence_}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamAgence()}" oncomplete="collapseList('livraison_vente')" 
                                        update="search_select_depot_livraison_vente"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedLivraisonVente.depotSearch}" style="min-width: 120px; max-width: 180px" id="search_select_depot_livraison_vente">
                                <f:selectItem itemLabel="" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="de"
                                               itemLabel="#{de.designation}" itemValue="#{de.id}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.chooseDepotLivr()}" oncomplete="collapseList('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedLivraisonVente.codeLivreur_}" style="min-width: 120px">
                                <p:ajax event="keyup" listener="#{managedLivraisonVente.addParamLivreur(managedLivraisonVente.codeLivreur_)}" oncomplete="collapseList('livraison_vente')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedLivraisonVente.statut_}" 
                                             valueChangeListener="#{managedLivraisonVente.chooseStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" update=":main_livraison_vente:data_livraison_vente" oncomplete="collapseList('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedLivraisonVente.numSearch_}">
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.searchByNum()}" oncomplete="collapseList('livraison_vente')"/>
                            </h:inputText>
                            <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                           onclick="dlgPlusOption.show()" global="false" value="#{lab.L_plus_option}"/>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">
                            <p:commandLink onclick="dlgCleanVente.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;" 
                                           title="#{lab.LC_PLV_nettoyage_stock}">
                                <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                            </p:commandLink>
                        </h:panelGroup>
                    </h:panelGrid>                    
                </div>
                <div id="zone_find_livraison_vente">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="11" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <span>&nbsp;</span>
                            <h:panelGroup>                                
                                <h:selectBooleanCheckbox value="#{managedLivraisonVente.dateContenu}">
                                    <p:ajax event="valueChange" listener="#{managedLivraisonVente.findByDateContenu()}" oncomplete="collapseGrid('livraison_vente')"
                                            update="blog_date_search_entete_livraison_vente_"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="Date" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.L_point_vente}" />
                            <h:outputText value="#{lab.LC_PLV_client}" />
                            <h:outputText value="#{lab.L_article}" />
                            <h:panelGroup>
                                <h:selectOneMenu value="#{managedLivraisonVente.opeStatut}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PLV_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PLV_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                                </h:selectOneMenu> 
                                <h:outputText value="#{lab.LC_PLV_statut_facture}" />
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{managedLivraisonVente.opStatutLiv}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PLV_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PLV_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutLivContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                                </h:selectOneMenu> 
                                <h:outputText value="#{lab.LC_PLV_statut_liv}" />
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{managedLivraisonVente.opStatutReg}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.LC_PLV_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.LC_PLV_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutRegContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                                </h:selectOneMenu> 
                                <h:outputText value="#{lab.LC_PLV_statut_reg}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_reference}" />
                            <span>&nbsp;</span>
                            <p:commandButton icon="ui-icon-bullet" style="width: 22px; height: 22px" actionListener="#{managedLivraisonVente.clearParamContenu()}" 
                                             oncomplete="collapseGrid('livraison_vente')" />
                            <h:panelGroup id="blog_date_search_entete_livraison_vente_">
                                <p:calendar value="#{managedLivraisonVente.dateDebutContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedLivraisonVente.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedLivraisonVente.addParamDateContenu}" oncomplete="collapseGrid('dateContenu')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedLivraisonVente.dateFinContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedLivraisonVente.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedLivraisonVente.addParamDateContenu}" oncomplete="collapseGrid('livraison_vente')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedLivraisonVente.agenceContenu}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamAgenceContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedLivraisonVente.pointvente}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamPoint()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:inputText>
                            <h:inputText value="#{managedLivraisonVente.clientF}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamClient()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:inputText>
                            <h:inputText value="#{managedLivraisonVente.article}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamArticle()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedLivraisonVente.statutContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedLivraisonVente.statutLiv}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_LIVRE)}" itemValue="#{constantes.ETAT_LIVRE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ENCOURS)}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ATTENTE)}" itemValue="#{constantes.ETAT_ATTENTE}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutLivContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedLivraisonVente.statutReg}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_REGLE)}" itemValue="#{constantes.ETAT_REGLE}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ENCOURS)}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{managedLivraisonVente.giveNameStatut(constantes.ETAT_ATTENTE)}" itemValue="#{constantes.ETAT_ATTENTE}"/>
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamStatutRegContenu()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedLivraisonVente.reference}">
                                <p:ajax event="valueChange" listener="#{managedLivraisonVente.addParamReference()}" oncomplete="collapseGrid('livraison_vente')"/>
                            </h:inputText>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>