<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">    
    <div>          
        <p:dataTable value="#{managedWarning.pointsVente}" var="point" rowKey="#{point.id}" rowIndexVar="line_" selectionMode="single" liveScroll="true" scrollRows="100"
                     lazy="true" scrollable="true" scrollHeight="550">
            <f:facet name="header">
                <div align="left" style="font-weight: bold">
                    #{managedWarning.warning.description}
                </div>
            </f:facet>
            <p:ajax event="rowSelect" listener="#{managedWarning.loadOnView}" />                             
            <p:column  headerText="NÂ°" style="width:16px">
                #{line_+1}
            </p:column>  
            <p:column headerText="#{lab.L_reference}">
                <span>#{point.code}</span>
                <p:spacer style="width: 10px;background: #{point.color};float: right;margin-top: 2px"/>
            </p:column>
            <p:column headerText="#{lab.L_designation}">
                <span>#{point.libelle}</span>
            </p:column>
            <p:column headerText="#{lab.LC_PPV_adresse}">
                <span>#{point.adresse}</span>
            </p:column>   
            <p:column headerText="#{lab.L_secteur}">
                <span>#{point.secteur.libele}</span>
            </p:column>   
            <p:column headerText="#{lab.L_parent}">
                <span>#{point.parent.libelle}</span>
            </p:column>   
            <p:column headerText="#{lab.L_agence}">
                <span>#{point.agence.codeagence}</span>
            </p:column>   
            <p:column headerText="#{lab.LC_PTBS_type}">
                <span>#{point.type eq constantes.SERVICE_RESTAURANT?'RESTAURANT / SNACK-BAR':'COMMERCE GENERAL'}</span>
            </p:column>   
            <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                <h:graphicImage library="img"  name="#{(point.actif)?'yes.png':'no.png'}" width="15" height="15"/>
            </p:column>
        </p:dataTable>    
    </div>
</ui:composition>

