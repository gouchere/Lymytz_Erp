<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template_page.xhtml"
                xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:h="http://java.sun.com/jsf/html"      
                xmlns:p="http://primefaces.org/ui"  
                xmlns:ui="http://java.sun.com/jsf/facelets"   
                xmlns:pe="http://primefaces.org/ui/extensions"  
                >
        <ui:define name="headPage">
            <h:form prependId="false" id="head_type_chomage_00"> 
                <h:panelGrid columns="2" style="float: left" rendered="#{managedParamsChomage.selectTypeChomage}">
                    <p:commandButton value="Modifier" actionListener="#{managedParamsChomage.updateBean()}" rendered="#{managedParamsChomage.optionUpdate}"/>
                    <p:splitButton value="Autres options">
                        <p:menuitem value="Detail du type" onclick="dlgDetailTypeChomage.show()"/>
                        <p:menuitem value="Supprimer" onclick="dlgConfirmDelete.show()"/>
                    </p:splitButton> 
                </h:panelGrid>
                <h:panelGrid columns="2" style="float: left" rendered="#{!managedParamsChomage.viewListe}">
                    <p:commandButton value="Enregistrer" actionListener="#{managedParamsChomage.saveNew()}"/>
                    <p:commandButton value="Nouveau" actionListener="#{managedParamsChomage.resetFiche()}"/>
                </h:panelGrid>
                <h:panelGrid columns="1" style="float: right">
                    <p:commandButton value="#{(managedParamsChomage.viewListe)?'Creation':'Liste'}" update="@this"
                                     actionListener="#{managedParamsChomage.changeView()}"/>
                </h:panelGrid>
                <div style="clear: right"/>
            </h:form>
        </ui:define>
        <ui:define name="restPage">
            <h:form prependId="false">
                <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                                 message="Êtes-vous sûr de vouloir supprimer?">
                    <p:commandButton value="Oui" actionListener="#{managedParamsChomage.deleteBean()}" oncomplete="dlgConfirmDelete.hide()"/>
                    <p:commandButton value="Non" onclick="dlgConfirmDelete.hide()"/>
                </p:confirmDialog>
            </h:form>
            <h:form prependId="false">
                <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteDetail" closeOnEscape="true"
                                 message="Êtes-vous sûr de vouloir supprimer?">
                    <p:commandButton value="Oui" actionListener="#{managedParamsChomage.deleteBeanDetail()}" oncomplete="dlgConfirmDeleteDetail.hide()"/>
                    <p:commandButton value="Non" onclick="dlgConfirmDeleteDetail.hide()"/>
                </p:confirmDialog>
            </h:form>
            <h:form prependId="false">
                <p:dialog header="Detail Type Chomage" widgetVar="dlgDetailTypeChomage" closeOnEscape="true" resizable="false"
                          dynamic="true" modal="true" width="50%">
                    <p:outputPanel id="head_dlg_detail_type_chomage">
                        <h:panelGrid columns="2" style="float: left" rendered="#{managedParamsChomage.selectDetailTypeChomage}">
                            <p:commandButton value="Modifier" actionListener="#{managedParamsChomage.updateBeanDetail()}" rendered="#{managedParamsChomage.optionUpdateDetail}"/>
                            <p:splitButton value="Autres options">
                                <p:menuitem value="Supprimer" onclick="dlgConfirmDeleteDetail.show()"/>
                            </p:splitButton>
                        </h:panelGrid>
                        <h:panelGrid columns="2" style="float: left" rendered="#{!managedParamsChomage.viewListeDetail}">
                            <p:commandButton value="Enregistrer" actionListener="#{managedParamsChomage.saveNewDetail()}"/>
                            <p:commandButton value="Nouveau" actionListener="#{managedParamsChomage.resetFicheDetail()}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="1" style="float: right">
                            <p:commandButton value="#{(managedParamsChomage.viewListeDetail)?'Creation':'Liste'}" update="@this"
                                             actionListener="#{managedParamsChomage.changeViewDetail()}"/>
                        </h:panelGrid>
                        <div style="clear: right"/>
                    </p:outputPanel>
                    <p:separator style="width: 100%"/>
                    <p:outputPanel id="body_dlg_detail_type_chomage">
                        <p:outputPanel id="form_dlg_detail_type_chomage_00">
                            <p:dataTable value="#{paramsTauxChomageTechnique.detailTypeChomageList}" var="deta" rowKey="#{deta.id}"
                                         selectionMode="single" rendered="#{managedParamsChomage.viewListeDetail}">
                                <p:ajax event="rowSelect" listener="#{managedParamsChomage.loadOnViewDetail}"/>
                                <p:ajax event="rowUnselect" listener="#{managedParamsChomage.unLoadOnViewDetail}"/>
                                <p:column width="16">
                                    <h:graphicImage library="img"  name="#{(deta.selectActif)?'connecte.png':'deconnecte.png'}" width="15" height="15"/>
                                </p:column> 
                                <p:column headerText="Indice">
                                    <h:outputText value="#{deta.indiceChomage}" converter="DN"/>
                                </p:column>
                                <p:column headerText="Pourcentage">
                                    <h:outputText value="#{deta.pourcentage}"/>
                                </p:column>
                            </p:dataTable>
                        </p:outputPanel>                        
                        <p:outputPanel id="form_dlg_detail_type_chomage_01">
                            <h:panelGrid columns="1" style="width: 90%; margin: auto" rendered="#{!managedParamsChomage.viewListeDetail}">
                                <p:panelGrid style="width: 100%">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Indice : "/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{managedParamsChomage.detailTypeChomage.indiceChomage}"/>
                                        </p:column>
                                    </p:row> 
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Pourcentage : "/>
                                        </p:column>
                                        <p:column>
                                            <pe:inputNumber value="#{managedParamsChomage.detailTypeChomage.pourcentage}"/> 
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:outputPanel>
                </p:dialog>
            </h:form>
            #{managedParamsChomage.loadAll()}
            <h:form prependId="false" id="body_type_chomage_00">
                <p:outputPanel id="form_type_chomage_00">
                    <p:dataTable value="#{managedParamsChomage.paramsChomages}" var="typ" rowKey="#{typ.id}"
                                 selectionMode="single" rendered="#{managedParamsChomage.viewListe}">
                        <p:ajax event="rowSelect" listener="#{managedParamsChomage.loadOnView}"/>
                        <p:ajax event="rowUnselect" listener="#{managedParamsChomage.unLoadOnView}"/>
                        <p:column width="16">
                            <h:graphicImage library="img"  name="#{(typ.selectActif)?'connecte.png':'deconnecte.png'}" width="15" height="15"/>
                        </p:column> 
                        <p:column headerText="Code">
                            <h:outputText value="#{typ.code}"/>
                        </p:column>
                        <p:column headerText="Libelle">
                            <h:outputText value="#{typ.libelle}"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>                        
                <p:outputPanel id="form_type_chomage_01">
                    <h:panelGrid columns="1" style="width: 90%;margin: auto" rendered="#{!managedParamsChomage.viewListe}">
                        <p:panelGrid style="width: 100%">
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Code : "/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{paramsTauxChomageTechnique.code}">
                                        <p:ajax event="blur" global="false"/>
                                    </p:inputText>
                                </p:column>
                            </p:row> 
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Libelle : "/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{paramsTauxChomageTechnique.libelle}">
                                        <p:ajax event="blur" global="false"/>
                                    </p:inputText>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </h:panelGrid>
                </p:outputPanel>
            </h:form>
        </ui:define>
</ui:composition>