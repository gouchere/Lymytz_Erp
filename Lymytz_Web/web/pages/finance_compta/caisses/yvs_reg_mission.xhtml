<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">  
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Règlements Missions','modCompta', 'smenRegMiss', true)}
    </ui:define>        
    <ui:define name="contents">
        <script type="text/javascript">
            $(function() {
                collapseForm('piece_mission');
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 135);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                slideZoneUp();
                collapseForm('piece_missionAcompte');
            });
            function slideZoneUp() {
                $('.zone_editPC').slideUp();
            }
            function slideZoneDown() {
                $('.zone_editPC').slideDown();
            }
            function slideZone() {
                $('.zone_editPC').slideToggle("fast", function() {
                    //legend.children("span").html(value);
                });
            }
        </script>          
        #{managedSaisiePiece.doNothing()}
        #{managedReglementMission.loadAll()}
        #{managedMission.setIncludeDocCloture(true)}
        #{managedMission.loadAllMission(true)}
        #{managedBonProvisoire.loadNoJustifier()}
        #{managedModeReglement.loadActif()}
        #{managedCaisses.loadAllCaisseActif(true)}   

        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dglEtatComptabilised" closeOnEscape="true" resizable="false" width="25%">
                <h:panelGrid id="dialog-statut_comptabilise" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <p:commandButton value="#{lab.LCF_PRM_toutes_missions}" actionListener="#{managedReglementMission.verifyComptabilised(null)}" style="width: 99%" disabled="#{managedReglementMission.comptaSearch eq null}" update="dialog-statut_comptabilise"/>
                    <p:commandButton value="#{lab.LCF_PRM_missions_comptabilise}" actionListener="#{managedReglementMission.verifyComptabilised(true)}" style="width: 99%" disabled="#{managedReglementMission.comptaSearch}" update="dialog-statut_comptabilise"/>
                    <p:commandButton value="#{lab.LCF_PRM_missions_non_comptabilise}" actionListener="#{managedReglementMission.verifyComptabilised(false)}" style="width: 99%" disabled="#{managedReglementMission.comptaSearch eq false}" update="dialog-statut_comptabilise"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_bon_mission">
            <p:dialog header="#{lab.LCF_PRV_liste_bons_provisoires}" widgetVar="dlgListBons" width="80%" height="400" closeOnEscape="true" footer="&copy; Lymytz">
                <div class="dlg_part_fixe">
                    <div style="float: left">  
                        <p:watermark for="txt_numero_bon_m" value="#{lab.L_rechercher}..." />
                        <p:watermark for="txt_beneficiaire_bon_m" value="#{lab.LCF_PRV_entrer_beneficiaire}..." />
                        <h:panelGrid id="find_bon_divers" columns="3">
                            <h:inputText value="#{managedBonProvisoire.numSearch}" style="font-size: 0.7em" id="txt_numero_bon_m">
                                <p:ajax event="valueChange" listener="#{managedBonProvisoire.addParamNumero()}"  update="table_bon_mission"/>
                            </h:inputText>
                            <h:inputText value="#{managedBonProvisoire.tiersSearch}" style="font-size: 0.7em" id="txt_beneficiaire_bon_m">
                                <p:ajax event="valueChange" listener="#{managedBonProvisoire.addParamTiers()}"  update="table_bon_mission"/>
                            </h:inputText>
                            <p:outputPanel layout="block" autoUpdate="true">
                                <p:commandButton actionListener="#{managedBonProvisoire.avancer(false)}" update="table_bon_mission" icon="ui-icon-circle-triangle-w" disabled="#{managedBonProvisoire.paginator.disPrev}"
                                                 style="width: 22px; height: 22px"/>
                                <p:outputLabel value="#{managedBonProvisoire.paginator.currentPage}/#{managedBonProvisoire.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                                <p:commandButton actionListener="#{managedBonProvisoire.avancer(true)}" update="table_bon_mission" icon="ui-icon-circle-triangle-e" disabled="#{managedBonProvisoire.paginator.disNext}"
                                                 style="width: 22px; height: 22px"/>
                                <p:selectOneMenu value="#{managedBonProvisoire.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedBonProvisoire.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                    <f:selectItems value="#{managedBonProvisoire.paginations}"/>
                                    <p:ajax event="valueChange" update="table_bon_mission"/>
                                </p:selectOneMenu>
                            </p:outputPanel>                            
                        </h:panelGrid>
                    </div>
                    <div style="float: right">     

                    </div>
                    <div style="clear: both"/>
                    <p:separator style="width: 100%;margin-bottom: 2px"/>
                </div>
                <div class="dlg_part_scroll">
                    <p:dataTable value="#{managedBonProvisoire.documents}" var="bonp" emptyMessage="#{lab.LDB_PTT_aucun_compte}" 
                                 rowIndexVar="bIdx" rowKey="#{bonp.id}" selectionMode="single" id="table_bon_mission">
                        <p:ajax event="rowSelect" listener="#{managedReglementMission.loadBonProvisoire}" oncomplete="dlgListBons.hide()"/>
                        <p:column width="40" styleClass="statut_#{bonp.statut}">                            
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bIdx+1}</span>
                        </p:column>                            
                        <p:column headerText="#{lab.L_numero}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}" style="float: left">#{bonp.numero}</span>
                            <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{bonp.statutPaiement=='P'}" style="float: right;margin-top: 5px"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_date_bon}" styleClass="statut_#{bonp.statut}" width="80" style="text-align: center">
                            <h:outputText title="#{managedBonProvisoire.resumeText(bonp.description)}" value="#{bonp.dateBon}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.L_montant}" styleClass="statut_#{bonp.statut}" width="80" style="text-align: right">
                            <h:outputText title="#{managedBonProvisoire.resumeText(bonp.description)}" value="#{bonp.montant}" converter="DN"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_beneficiaire}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.beneficiaire}</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_ordonnateur}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.ordonnateur.nomUsers}</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRM_caisse}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.caisse.intitule}</span>
                        </p:column>
                    </p:dataTable>                        
                </div>
            </p:dialog>
        </h:form>         
        <h:form prependId="false" id="form_confirm_bind_pcMission_Mission">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelAll" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text18}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementMission.deleteAllPiece()}" 
                                 oncomplete="dlgConfirmDelAll.hide();"  update=":main_form_regMission:table_regMission :main_form_regMission:txt_restToPlanMission :main_form_regMission:zone_pcv_edit_pieceMission"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmDelAll.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePC" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementMission.deletePieceCaisse(false)}" 
                                 oncomplete="dlgConfirmDeletePC.hide();" update=":main_form_regMission:table_regMission :main_form_regMission:txt_restToPlanMission :main_form_regMission:zone_pcv_edit_pieceMission"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePC.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmPaye" closeOnEscape="true"
                             message="#{lab.LC_PFV_text27}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementMission.reglerPieceTresorerie(true)}" 
                                 oncomplete="dlgConfirmPaye.hide();" 
                                 update=":main_form_regMission:table_regMission :main_form_regMission:txt_restToPlanMission :form_edit_new_pc_acompteMission:table_acompte_employes"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmPaye.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_confirm_bind_pcMission">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text7} #{managedReglementMission.selectedDoc.numeroMission}
                             ?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementMission.bindPieceAndFacture(false)}" 
                                 oncomplete="dlgConfirmBind.hide();" update=":form_edit_new_pc_acompteMission:table_acompte_employes :form_edit_new_pc_acompteMission:form_edit_pc_acompteMission"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_confirm_unbind_pcMission">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmUnBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text8} #{managedReglementMission.pieceMission.mission.numeroMission}
                             ?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementMission.unbindLiasonCaisse()}" 
                                 oncomplete="dlgConfirmUnBind.hide();" update=":form_edit_new_pc_acompteMission:table_acompte_employes :form_edit_new_pc_acompteMission:form_edit_pc_acompteMission"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmUnBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmContinuBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text19}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementMission.bindPieceAndFacture(true)}" 
                                 oncomplete="dlgConfirmContinuBind.hide();" update=":form_edit_new_pc_acompteMission:table_acompte_employes :form_edit_new_pc_acompteMission:form_edit_pc_acompteMission"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmContinuBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePC1" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementMission.deleteOneLinePc()}" 
                                 oncomplete="dlgConfirmDeletePC1.hide();" update=":form_edit_new_pc_acompteMission:table_acompte_employes :form_edit_new_pc_acompteMission:form_edit_pc_acompteMission"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePC1.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuleDoc" closeOnEscape="true"
                             message="#{lab.LC_PFV_text25}" header="#{lab.L_confirmation}">
                <p:commandButton type="button" value="#{lab.L_oui}" onclick="dlgConfirmPaye.show();
                        dlgConfirmAnnuleDoc.hide()" />
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmAnnuleDoc.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabilisePiece" message="#{lab.LCF_PRV_text12}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserCaisseMission(managedReglementMission.pieceMission, true)}"
                                 update=":main_form_regMission:table_regMission " oncomplete="dlgComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabilisePiece.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePiece" message="#{lab.LCF_PRV_text13}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseMission(managedReglementMission.pieceMission, true)}"
                                 update=":main_form_regMission:table_regMission " oncomplete="dlgUnComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePiece.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">                    
            <p:dialog header="#{lab.LC_PA_liste_fournisseurs}" widgetVar="dlgListFournisseurs" 
                      closeOnEscape="true" width="50%" modal="true" dynamic="true">                                  
                <p:dataTable id="data_employe_acomptes"  value="#{managedFournisseur.fournisseurs}" var="employe_" rowKey="#{employe_.id}"
                             selectionMode="single" rowIndexVar="fsseurIdx">
                    <p:ajax event="rowSelect"  listener="#{managedReglementMission.chooseOneCLient}" oncomplete="dlgListFournisseurs.hide()"
                            update=":form_edit_new_pc_acompteMission:edit_employe_acompte"/>
                    <p:column headerText="N°" style="width: 8%;text-align: center">
                        <span>#{fsseurIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_code}">
                        <span>#{employe_.codeFsseur}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_nom}">
                        <span>#{employe_.nom_prenom}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}">
                        <span>#{employe_.categorie.libelle}</span>
                    </p:column>
                </p:dataTable>   
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(false, false)}" global="false" update="data_employe_acomptes" icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.paginator.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedFournisseur.paginator.currentPage}/#{managedFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(true, false)}" global="false" update="data_employe_acomptes" icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.paginator.disNext}"/>
                    <p:selectOneMenu value="#{managedFournisseur.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedFournisseur.paginations}"/>
                        <p:ajax event="valueChange" global="false" update="data_employe_acomptes"/>
                    </p:selectOneMenu>
                </p:outputPanel> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_edit_new_pc_acompteMission">
            <p:dialog header="#{lab.LCF_PRV_enregistrer_acompte}" widgetVar="dlgSaveAvance" width="90%" footer="&copy;Lymytz 2014" modal="true" 
                      closeOnEscape="true">                
                <div class="dlg_part_fixe">
                    <div style="float: left">
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedReglementMission.saveNewPc()}" id="save_piece_missionAcompte" 
                                         update="table_acompte_employes txt_ref_acc_mission"/>
                        <p:commandButton value="#{lab.L_nouveau}" actionListener="#{managedReglementMission.resetViewPc()}" id="cancel_piece_missionAcompte" update="form_edit_pc_acompteMission"/>
                    </div>
                    <div style="float: right">
                        <div style="float: right">
                            <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('piece_missionAcompte');
                                    return false">
                                <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>               
                            <p:spacer />
                            <h:link title="#{lab.L_mode_liste}" onclick="collapseList('piece_missionAcompte');
                                    return false" >
                                <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>   
                        </div>
                    </div>
                </div>
                <div class="dlg_part_scroll" style="clear: both">
                    <div class="yvs_form_piece_missionAcompte">
                        <h:panelGrid columns="4" cellpadding="0" cellspacing="0" styleClass="yvs_table" style="width: 100%"
                                     id="form_edit_pc_acompteMission">
                            <f:facet name="header">
                                <div align="left" ><span style="font-weight: normal">PC. N°: </span><h:outputText style="font-size: 1.1em; padding: 2px" value="#{managedReglementMission.pieceAvance.numPiece}" id="txt_ref_acc_mission"/></div>
                            </f:facet>
                            <span>#{lab.LDB_PA_fournisseurs}</span>
                            <h:panelGroup id="edit_employe_acompte">
                                <h:inputText value="#{managedReglementMission.pieceAvance.docAchat.fournisseur.codeFsseur}" style="color: #{managedReglementMission.pieceAvance.docAchat.fournisseur.error?'red':''}">
                                    <p:ajax event="blur" global="false" listener="#{managedReglementMission.ecouteSaisieFournisseur()}" update="edit_employe_acompte"/>
                                </h:inputText> 
                                #{managedReglementMission.pieceAvance.docAchat.fournisseur.nom_prenom}
                                <p:commandButton icon="ui-icon-note" style="float: right; width: 16px;height: 20px" title="#{lab.LDB_PA_liste_fournisseur}" global="false"
                                                 disabled="#{managedFactureAchat.docAchat.statut != constantes.ETAT_EDITABLE}"
                                                 actionListener="#{managedFactureAchat.initFsseurs()}" oncomplete="dlgListFournisseurs.show()"/>
                            </h:panelGroup>
                            <span>#{lab.L_montant}</span>
                            <pe:inputNumber value="#{managedReglementMission.pieceAvance.montant}" decimalPlaces="0" />
                            <span>#{lab.LCF_PRV_paiement_prevu}</span> 
                            <p:calendar value="#{managedReglementMission.pieceAvance.datePaiementPrevu}" pattern="dd-MM-yyyy" size="8"/>
                            <span>#{lab.LCF_PRM_caisse}</span>
                            <h:selectOneMenu value="#{managedReglementMission.pieceAvance.caisse.id}">
                                <f:selectItem itemLabel=" " itemValue="0" />
                                <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}"
                                               itemValue="#{icaiss.id}" />
                            </h:selectOneMenu>
                            <f:facet name="footer">
                                <span>Note</span>
                                <h:inputTextarea value="#{managedReglementMission.pieceAvance.description}" style="width: 100%"  rows="4"/>
                            </f:facet>
                        </h:panelGrid>
                    </div>
                    <div class="yvs_list_piece_missionAcompte">
                        <p:watermark for="txt_search_num_pcMission" value="#{lab.LCF_PRV_n_piece}..." />
                        <p:watermark for="txt_search_employe_pc" value="#{lab.L_codeFournisseur}..." />
                        <p:dataTable value="#{managedReglementMission.avances}" var="acClt" rowIndexVar="line_av" rowKey="#{acClt.id}"
                                     selectionMode="single" id="table_acompte_employes">
                            <p:ajax event="rowSelect" listener="#{managedReglementMission.loadOnViewPiece}" update=":form_edit_new_pc_acompteMission:form_edit_pc_acompteMission" 
                                    oncomplete="collapseForm('piece_missionAcompte')" />
                            <p:column headerText="N°" style="text-align: center" styleClass="statut_#{acClt.statutPiece}"> 
                                #{line_av+1}
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_reste}" styleClass="statut_#{acClt.statutPiece}">
                                #{acClt.numeroPiece}
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="statut_#{acClt.statutPiece}">
                                <h:outputText value="#{acClt.montant}" converter="DNS" />
                            </p:column>
                            <p:column headerText="#{lab.L_date}" width="80" styleClass="statut_#{acClt.statutPiece}">
                                <h:outputText value="#{acClt.datePaiement}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRM_employe}" styleClass="statut_#{acClt.statutPiece}">
                                #{acClt.mission.employe.nom_prenom}
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRM_a_payer_le}" styleClass="statut_#{acClt.statutPiece}">
                                <h:outputText value="#{acClt.datePaimentPrevu}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRM_caisse}" width="80" styleClass="statut_#{acClt.statutPiece}">
                                <h:outputText value="#{acClt.caisse.intitule}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_facture}" styleClass="statut_#{acClt.statutPiece}">
                                <h:outputText value="#{acClt.mission.numeroMission}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_statut}" style="text-align: center" width="15" styleClass="statut_#{acClt.statutPiece}">
                                <h:graphicImage rendered="#{acClt.statutPiece=='P'}" library="img" name="vu.png" width="15" height="15" title="Pièce encaissé"/>
                                <h:outputText value="#{acClt.statutPiece}" rendered="#{acClt.statutPiece!='P'}" style="font-weight: bold" />
                            </p:column>
                            <p:column headerText=" " style="text-align: center">
                                <p:contextMenu for="btn_option_acc" event="left click">
                                    <p:menuitem value="#{lab.L_modifier}" icon="ui-icon-pencil" actionListener="#{managedReglementMission.loadPcOnViewPiece(acClt)}" update=":form_edit_new_pc_acompteMission:form_edit_pc_acompteMission" 
                                                oncomplete="collapseForm('piece_missionAcompte')"/>
                                    <p:menuitem value="#{(acClt.statutPiece=='P')?'Annuler':'Encaisser'}" icon="#{(acClt.statutPiece=='P')?'ui-icon-circle-close':'ui-icon-circle-check'}" actionListener="#{managedReglementMission.openAndVerifyConfirmPaiement(acClt)}" />
                                    <p:menuitem value="#{(acClt.mission==null)?'Lier à la facture':'Délier'}" icon="#{(acClt.mission==null)?'ui-icon-shuffle':'ui-icon-arrowrefresh-1-e'}" actionListener="#{managedReglementMission.openDlgToBindDv(acClt)}"/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementMission.openTodeleteOneLinePc(acClt)}"/>
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" type="button" style="width: 20px; height: 20px; background: #FFF !important"  id="btn_option_acc"/>
                            </p:column>
                        </p:dataTable>
                        <p:inputText value="#{managedReglementMission.numPieceF}" id="txt_search_num_pcMission" style="background: #006666; color: white; text-align: center; font-size: 0.8em"/>
                        <p:inputText value="#{managedReglementMission.employeF}" id="txt_search_employe_pc" style="background: #006666; color: white; text-align: center; font-size: 0.8em"/>
                        <p:commandButton icon="ui-icon-bullet" actionListener="#{managedReglementMission.cleanParametrePiece()}" title="#{lab.L_reset_param}"
                                         style="width: 20px; height: 22px" update="table_acompte_employes"/>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedReglementMission.loadAllPiece(false, false)}" global="false" update="table_acompte_employes" icon="ui-icon-circle-triangle-w" disabled="#{managedReglementMission.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedReglementMission.paginator.currentPage}/#{managedReglementMission.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedReglementMission.loadAllPiece(true, false)}" global="false" update="table_acompte_employes" icon="ui-icon-circle-triangle-e" disabled="#{managedReglementMission.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedReglementMission.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReglementMission.choosePaginatorPc}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedReglementMission.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="table_acompte_employes"/>
                            </p:selectOneMenu>
                        </p:outputPanel>
                    </div>
                </div>                
            </p:dialog>
        </h:form>       
        <h:form prependId="false" id="main_form_regMission">            
            <div class="part_fix">
                <div align="left" style="float: left">

                </div>
                <div style="float: right">                     
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('piece_mission');

                            return false;">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>          
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('piece_mission');

                            return false;" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>                                   
                </div> 
                <div style="clear: right"/>                
            </div>
            <div class="part_scroll">
                <div class="yvs_form_piece_mission" style="margin: auto; background: white;">
                    <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="zone_form_regMission" style="width: 100%" >
                        <f:facet name="header">                            
                            <div align="left" style="padding: 5px; margin: 3px; margin-left: 0px; padding-left: 0px; cursor: pointer">
                                #{lab.LCF_PRM_mission_n} :
                                <h:outputText value="[#{managedReglementMission.selectedDoc.numeroMission}]" style="background: #aaa; padding: 5px"/>
                            </div>
                        </f:facet>
                        <span>#{lab.LCF_PRM_lieu}</span>
                        <h:inputText value="#{managedReglementMission.selectedDoc.lieu.libelle}" disabled="true"/>
                        <span class="styleTotalFacture">#{lab.LCF_PRM_total_frais}</span>
                        <h:inputText value="#{managedReglementMission.selectedDoc.totalFraisMission}" style="float: right; text-align: right" styleClass="styleTotalFacture"
                                     disabled="true" converter="DNS"/>
                        <span>#{lab.LCF_PRM_employe}</span>
                        <h:panelGroup>
                            <h:inputText value="#{managedReglementMission.selectedDoc.employe.nom_prenom}" disabled="true"/>
                            <h:outputText value="[#{managedReglementMission.selectedDoc.employe.matricule}]"  />
                        </h:panelGroup>
                        <span class="styleTotalNet">#{lab.LCF_PRM_total_net_payer}</span>
                        <h:inputText value="#{managedReglementMission.selectedDoc.totalFraisMission - managedReglementMission.selectedDoc.totalPaye}" style="float: right; text-align: right" styleClass="styleTotalNet"
                                     disabled="true" converter="DNS"/>
                        <span>#{lab.LCF_PRM_model_reglement}</span>
                        <h:selectOneMenu value="#{managedReglementMission.selectedDoc.modeReglement.id}">
                            <f:selectItem itemValue="0" itemLabel="" />
                            <f:selectItems value="#{managedModeReglement.models}" var="imdl" itemValue="#{imdl.id}" itemLabel="#{imdl.reference}" />
                            <p:ajax event="valueChange" listener="#{managedReglementMission.chooseModelReglement()}" update="data_tranches_mdr_reg_mission txt_modelMission"/>
                        </h:selectOneMenu>
                        <span class="styleTotalAvance">#{lab.LCF_PRM_total_avance}</span>
                        <h:inputText value="#{managedReglementMission.selectedDoc.totalPaye}" style="float: right; text-align: right" styleClass="styleTotalAvance"
                                     disabled="true" converter="DNS"/>
                        <f:facet name="footer">                            
                            <div style="width: 100%">
                                <p:overlayPanel for="txt_modelMission"> 
                                    <p:dataTable id="data_tranches_mdr_reg_mission" value="#{managedReglementMission.selectedDoc.modeReglement.tranches}"
                                                 var="itreM" rowIndexVar="line_tr">
                                        <p:column headerText="N°" width="20" style="text-align: center">
                                            #{line_tr+1}
                                        </p:column>
                                        <p:column headerText="#{lab.LCF_PRV_interval_jour}" width="80" style="text-align: center">
                                            #{itreM.intervalJour}
                                        </p:column>
                                        <p:column headerText="#{lab.LCF_PRV_a_payer}" width="80" style="text-align: right">
                                            #{itreM.taux}% 
                                        </p:column>
                                        <p:column headerText="#{lab.LCF_PGG_mode}" width="100" style="text-align: center">
                                            #{itreM.mode.designation}
                                        </p:column>
                                    </p:dataTable>
                                    <p:commandButton rendered="#{managedReglementMission.selectedDoc.reglements.size() le 0}" icon="ui-icon-circle-arrow-s"  update=":main_form_regMission:table_regMission"
                                                     actionListener="#{managedReglementMission.generatedAllpiece()}"  style="height: 21px; float: right; background: #FFF !important" />
                                </p:overlayPanel>
                                <div class="headline_data" style="cursor: pointer;" onclick="slideZone()">
                                    #{lab.LCF_PRM_reglements} :<h:outputText value="[#{managedReglementMission.selectedDoc.modeReglement.designation}]" style="font-weight: bold;cursor: pointer" id="txt_modelMission" />
                                    <p:commandButton  icon="ui-icon-circle-arrow-s"  update=":main_form_regMission:table_regMission" type="button"
                                                      style="height: 21px; float: right; background: #FFF !important" />
                                    <span style="clear: right"></span>
                                    <h:panelGroup style="float: right">
                                        #{lab.LCF_PRM_reste_a_planifier} :
                                        <h:outputText value="#{managedReglementMission.selectedDoc.totalFraisMission  - (managedReglementMission.giveTotalPT(managedReglementMission.selectedDoc.reglements) + managedReglementMission.selectedDoc.totalBon)}" converter="DNS" id="txt_restToPlanMission"/>
                                    </h:panelGroup>
                                </div>
                                <div class="zone_editPC" >
                                    <h:panelGrid styleClass="yvs_nostyle" columns="2" style="width: 100%" cellpadding="0">
                                        <h:panelGrid styleClass="yvs_nostyle" columns="5" style="font-size: 0.8em;" id="zone_pcv_edit_pieceMission" cellpadding="0">
                                            <h:outputText value="#{lab.LCF_PRM_mode_paiement}" style="font-weight: bold"/>
                                            <h:outputText value="#{lab.L_montant}" style="font-weight: bold"/>
                                            <h:outputText value="#{lab.LCF_PRM_a_payer_le}" style="font-weight: bold"/>
                                            <h:outputText value="#{lab.LCF_PRM_caisse_paiement}" style="font-weight: bold"/>
                                            <h:outputText value=""/>
                                            <h:selectOneMenu value="#{managedReglementMission.pieceMission.model.id}">
                                                <f:selectItem itemLabel=" " itemValue="0" />
                                                <f:selectItems value="#{managedModeReglement.modes}" var="mdr_" itemLabel="#{mdr_.designation}"
                                                               itemValue="#{mdr_.id}" />
                                            </h:selectOneMenu>
                                            <pe:inputNumber value="#{managedReglementMission.pieceMission.montant}" style="width: 120px"/>
                                            <p:calendar value="#{managedReglementMission.pieceMission.datePaimentPrevu}" size="8" pattern="dd-MM-yyyy"/>                                                                                
                                            <h:selectOneMenu value="#{managedReglementMission.pieceMission.caisse.id}">
                                                <f:selectItem itemLabel=" " itemValue="0" />
                                                <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}"
                                                               itemValue="#{icaiss.id}" />
                                            </h:selectOneMenu>
                                            <p:commandButton icon="ui-icon-circle-plus" style="float: right; width: 22px; height: 22px" 
                                                             actionListener="#{managedReglementMission.createNewPiece()}" update=":main_form_regMission:table_regMission :main_form_regMission:txt_restToPlanMission :main_form_regMission:zone_pcv_edit_pieceMission" />
                                        </h:panelGrid>
                                        <p:commandButton title="#{lab.LCF_PRM_rattacher_reglement}" icon="ui-icon-pin-s" actionListener="#{managedReglementMission.openListBon(null, false)}"
                                                         rendered="#{managedReglementMission.pieceMission.id lt 1}"/>
                                    </h:panelGrid>
                                </div>
                                <p:dataTable value="#{managedReglementMission.selectedDoc.reglements}" var="iregV"   
                                             rowIndexVar="line_regMission" selectionMode="single" rowKey="#{iregV.id}" id="table_regMission">
                                    <p:ajax event="rowSelect" listener="#{managedReglementMission.selectOnePiece}" update=":main_form_regMission:zone_pcv_edit_pieceMission " oncomplete="slideZoneDown()" />
                                    <p:ajax event="rowUnselect" listener="#{managedReglementMission.unselectOnePiece}" update=":main_form_regMission:zone_pcv_edit_pieceMission " oncomplete="slideZoneDown()" />
                                    <p:column headerText="N°" width="30">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iregV.new_}"/>
                                        #{line_regMission+1}
                                        <h:panelGroup style="float: right">
                                            <h:outputText title="#{lab.LC_PJV_comptabilise}" value="C" rendered="#{managedReglementMission.isComptabilise(iregV)}" styleClass="style_statut"/>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="#{lab.LCF_PRV_paiement_prevu_le}" styleClass="etat_#{iregV.statutPiece}" width="100" style="text-align: center">
                                        <h:outputText value="#{iregV.datePaimentPrevu}" converter="DATE"/>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="BP" class="indice_statut" rendered="#{iregV.justify.id gt 0}" title="#{lab.LCF_PRM_bon_provisiore_n} #{iregV.justify.piece.numero}"/>
                                        </h:panelGroup>  
                                    </p:column>
                                    <p:column headerText="#{lab.L_numero}" styleClass="etat_#{iregV.statutPiece}">
                                        <h:outputText value="#{iregV.numeroPiece}" />
                                        <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{iregV.statutPiece=='P'}" style="float: right"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LCF_PRM_mode_paiement}" styleClass="etat_#{iregV.statutPiece}">
                                        <h:outputText value="#{iregV.model.designation}" />
                                    </p:column>
                                    <p:column headerText="#{lab.LCF_PRM_caisse}" styleClass="etat_#{iregV.statutPiece}">
                                        <h:outputText value="#{iregV.caisse.intitule}" />
                                    </p:column>
                                    <p:column headerText="#{lab.L_montant}" styleClass="etat_#{iregV.statutPiece}" style="text-align: right">
                                        <h:outputText value="#{iregV.montant}" converter="DNS"/>
                                    </p:column>
                                    <p:column width="20" style="text-align: center" styleClass="etat_#{iregV.statutPiece}">
                                        <p:commandLink global="false" actionListener="#{managedReglementMission.print(iregV)}" style="margin-top: 5px" ajax="false">
                                            <h:graphicImage title="#{lab.L_imprimer}" library="img" name="pdf.png" width="15" height="15"/>                                        
                                        </p:commandLink>
                                    </p:column>
                                    <p:column width="20" style="text-align: center" styleClass="etat_#{iregV.statutPiece}">
                                        <f:facet name="header">
                                            <p:contextMenu for="btn_option_regPV1_" event="left click" style="font-size: 0.8em">                                            
                                                <p:menuitem value="#{lab.LCF_PRV_tout_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelAll.show()"/>
                                            </p:contextMenu>
                                            <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="btn_option_regPV1_" type="button"/>
                                        </f:facet>
                                        <p:contextMenu for="btn_option_regPV1" event="left click" style="font-size: 0.8em">                                            
                                            <p:menuitem value="#{!iregV.comptabilise?'Comptabiliser':'Annuler Comptabilité'}" actionListener="#{managedReglementMission.setPieceMission(iregV)}" 
                                                        oncomplete="#{!iregV.comptabilise?'dlgComptabilisePiece.show()':'dlgUnComptabilisePiece.show()'}" icon="ui-icon-arrowthick-2-e-w" 
                                                        rendered="#{iregV.id gt 0 and (iregV.statutPiece==constantes.STATUT_DOC_PAYER)}"/> 
                                            <p:menuitem value="#{(iregV.statutPiece!='S')?'Suspendre':'Valider'}" icon="#{(iregV.statutPiece!='S')?'ui-icon-circle-close':'ui-icon-circle-check'}" rendered="#{(iregV.statutPiece!='P' and iregV.id gt 0)}"
                                                        actionListener="#{managedReglementMission.toogleSuspendPieceCaisse(iregV)}" update=":main_form_regMission:table_regMission :main_form_regMission:txt_restToPlanMission" />
                                            <p:menuitem value="#{(iregV.statutPiece=='P')?'Annuler':'Payer'}" icon="#{(iregV.statutPiece=='P')?'ui-icon-circle-close':'ui-icon-circle-check'}"  actionListener="#{managedReglementMission.openAndVerifyConfirmPaiement(iregV)}" rendered="#{iregV.id gt 0}"/>
                                            <p:menuitem value="#{lab.LCF_PRV_rattacher_bon}" icon="ui-icon-link" actionListener="#{managedReglementMission.openListBon(iregV, true)}" rendered="#{iregV.justify == null}"/>
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementMission.openConfirmDelePC(iregV)}" />
                                        </p:contextMenu> 
                                        <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="btn_option_regPV1" type="button"
                                                         />
                                    </p:column>
                                    <f:facet name="footer">                                        
                                        <div align="right">
                                            <p:commandButton value="#{lab.L_enregistrer}" icon="ui-icon-disk"  rendered="#{managedReglementMission.displayBtnSave}" 
                                                             actionListener="#{managedReglementMission.saveModelreglement()}" update=":main_form_regMission:zone_form_regMission" oncomplete="slideZoneUp()"/>
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </div>                           
                        </f:facet>
                    </h:panelGrid>
                </div>
                <div class="yvs_list_piece_mission" style="background: white;">
                    <p:dataTable value="#{managedMission.listMission}" var="item2"
                                 widgetVar="tableauMission" id="data_mission_reg" rowIndexVar="lineMission"
                                 rowKey="#{item2.id}" selectionMode="single"> 
                        <p:ajax event="rowSelect"   listener="#{managedReglementMission.loadOnView}" oncomplete="collapseForm('piece_mission');slideZoneUp();" 
                                update=":main_form_regMission:zone_form_regMission" />                    
                        <p:column headerText="N°" width="35" styleClass="statutMiss_#{item2.statutMission}" style="text-align: center">
                            #{lineMission+1}
                            <h:graphicImage library="img/icones" name="cloch.jpg" width="15" height="15" rendered="#{item2.dateFin.before(managedMission.currentDate) and item2.statutMission!='C'}" />
                            <h:graphicImage library="icones" name="lock.png" width="15" height="15" rendered="#{item2.statutMission=='C'}" />
                            <h:outputText value="#{item2.statutPaiement}" styleClass="indice_statut" style="color: #{item2.statutPaiement eq 'P'?'blue':'orange'}" rendered="#{item2.statutPaiement eq 'P'}"/> 
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRM_employe}" width="150" styleClass="statutMiss_#{item2.statutMission}">
                            <h:outputText value="#{item2.employe.nom_prenom}"/> 
                        </p:column>
                        <p:column headerText="#{lab.L_numero}" width="100" styleClass="statutMiss_#{item2.statutMission}" style="text-align: center">
                            <h:outputText value="#{item2.numeroMission}"/> 
                        </p:column>
                        <p:column headerText="#{lab.L_reference}" styleClass="statutMiss_#{item2.statutMission}" width="100" >                            
                            <h:outputText value="#{item2.referenceMission} #{item2.fraisMissions.size()}" style="width: 50px" title="#{item2.ordre}"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRM_lieu} " width="100" styleClass="statutMiss_#{item2.statutMission}">
                            <h:outputText value="#{item2.lieu.libele}"/> 
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRM_periode} " width="100" styleClass="statutMiss_#{item2.statutMission}">
                            <h:outputText value="#{item2.dateDebut}" converter="DATE"/> <span style="width: 22px"> - </span>
                            <h:outputText value="#{item2.dateFin}" converter="DATE"/>
                            <span style="font-size: 0.8em">(#{item2.dureeMission} Jours)</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRM_etapes}"  width="60" styleClass="statutMiss_#{item2.statutMission}" style="font-size: 0.8em">
                            <h:outputText value="Etp.  #{item2.etapeValide} / #{item2.etapesValidations.size()}" />
                            <h:outputText value="#{(item2.docClasse)?'Classé':''}" style="font-style: italic; font-size: 0.8em; margin-left: 5px; color: darkblue"/>
                        </p:column>
                        <p:column headerText=""  width="25" styleClass="statutMiss_#{item2.statutMission}" style="font-size: 0.8em; text-align: center">
                            <f:facet name="header">
                                <p:contextMenu for="btn_option_head_mission" event="left click" styleClass="context_menu" style="width: 210px">    
                                    <p:menuitem icon="ui-icon-link" value="#{lab.LC_PFA_etat_comptabiliser}" global="false" onclick="dglEtatComptabilised.show()"/>
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_head_mission" type="button"/>
                            </f:facet>
                            <p:contextMenu for="btn_option_mission" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.LCF_PRV_generer_piece}" icon="ui-icon-circle-arrow-w" actionListener="#{managedReglementMission.createOnePieceCaisse(item2)}"
                                            oncomplete="collapseForm('piece_mission')"  update=":main_form_regMission:zone_form_regMission"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_mission" type="button"/>                          
                        </p:column>
                        <p:column width="25" style="text-align: center">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox value="false" class="chek_all_line_mission" onclick="selectionAllLineTab(#{managedMission.listMission.size()}, 'mission')"/>
                            </f:facet>
                            <h:selectBooleanCheckbox value="false" class="chek_line_mission" onclick="selectionLineTab(#{lineMission}, 'mission')"/>
                        </p:column>
                    </p:dataTable>                       
                    <span class="nbSelectmission" style="font-size: .8em; font-style: italic; color: #828c95;"></span>                   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block" >
                        <p:commandButton actionListener="#{managedMission.pagineResult_(false)}" update="data_mission_reg" icon="ui-icon-circle-triangle-w"  disabled="#{managedMission.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedMission.paginator.currentPage}/#{managedMission.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton action="#{managedMission.pagineResult_(true)}" update="data_mission_reg" icon="ui-icon-circle-triangle-e"  disabled="#{managedMission.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedMission.imax}" label="#{lab.L_nombre_max_resultat}" style="float: right; font-size: 0.9em;" 
                                         valueChangeListener="#{managedMission.changePage}">
                            <f:selectItems value="#{managedMission.paginations}" />
                            <p:ajax event="valueChange"  update="data_mission_reg" />
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC"> 
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">
                <h:panelGrid columns="7" style="font-size: 0.8em" cellpadding="0" cellspacing="0">
                    <h:outputText value="&nbsp;" />
                    <h:outputText value="#{lab.LCF_PRM_periode} " /> 
                    <h:outputText value="#{lab.LCF_PRM_employe}" />
                    <h:outputText value="#{lab.LCF_PRM_lieu}" />                   
                    <h:outputText value="#{lab.L_reference}" />
                    <h:outputText value="#{lab.L_statut}" />
                    <span>&nbsp;</span>
                    <p:commandButton icon="ui-icon-bullet" actionListener="#{managedMission.clearParams()}" title="#{lab.LCF_PRM_reset_param_recherche}" style="width: 20px; height: 22px"
                                     update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                    <h:panelGroup id="zone_search_by_date_regM">
                        <h:selectBooleanCheckbox value="#{managedMission.paramDate}" valueChangeListener="#{managedMission.addParamDate(managedMission.paramDate)}">
                            <p:ajax event="valueChange" update=":main_form_regMission:data_mission_reg zone_search_by_date_regM" oncomplete="collapseList('piece_mission')" />
                        </h:selectBooleanCheckbox>
                        <p:calendar value="#{managedMission.dateDF}" pattern="dd-MM-yyyy" size="8" disabled="#{!managedMission.paramDate}">
                            <p:ajax event="dateSelect" listener="#{managedMission.addParamDate1}" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                        </p:calendar>
                        <p:calendar value="#{managedMission.dateF}" pattern="dd-MM-yyyy" size="8" disabled="#{!managedMission.paramDate}">
                            <p:ajax event="dateSelect" listener="#{managedMission.addParamDate1}" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                        </p:calendar>
                    </h:panelGroup>
                    <h:inputText value="#{managedMission.matriculeF}" >
                        <p:ajax event="blur" listener="#{managedMission.findByEmploye()}" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                    </h:inputText>
                    <h:selectOneMenu  value="#{managedMission.lieuF}" valueChangeListener="#{managedMission.addParamLieu}" style="min-width: 120px">
                        <f:selectItem itemValue="0" itemLabel="--" /> 
                        <f:selectItems value="#{Mdico.listVille}" var="villeF"  
                                       itemValue="#{villeF.id}" itemLabel="#{villeF.libele}"/>  
                        <p:ajax event="valueChange" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                    </h:selectOneMenu>
                    <h:inputText value="#{managedMission.referenceF}" >
                        <p:ajax event="keyup" listener="#{managedMission.addParamReference()}" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')" />
                    </h:inputText>
                    <h:selectOneMenu value="#{managedMission.statutF}"  valueChangeListener="#{managedMission.addParamSatatut}">
                        <f:selectItem itemValue="#{null}" itemLabel="#{lab.L_tout}" /> 
                        <f:selectItem itemValue="W" itemLabel="#{lab.L_en_attente}" /> 
                        <f:selectItem itemValue="E" itemLabel="#{lab.L_en_cours}" /> 
                        <f:selectItem itemValue="V" itemLabel="#{lab.L_valide}" /> 
                        <f:selectItem itemValue="A" itemLabel="#{lab.L_annule}" /> 
                        <f:selectItem itemValue="S" itemLabel="#{lab.L_suspendu}" /> 
                        <f:selectItem itemValue="C" itemLabel="#{lab.L_cloture}" /> 
                        <p:ajax event="valueChange" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')"/>
                    </h:selectOneMenu>
                    <p:selectBooleanCheckbox value="#{managedMission.includeDocCloture}"  valueChangeListener="#{managedMission.addParamSatatutC}" itemLabel="#{lab.LCF_PRM_inclure_doc_classee}">
                        <p:ajax event="valueChange" update=":main_form_regMission:data_mission_reg" oncomplete="collapseList('piece_mission')"/>
                    </p:selectBooleanCheckbox>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
