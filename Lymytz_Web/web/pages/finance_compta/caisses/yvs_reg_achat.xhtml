<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">   
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('RÃ¨glements Achats','modCompta', 'smenRegAchat', true)}
    </ui:define>        
    <ui:define name="contents">
        <script type="text/javascript">
            $(function() {
                collapseForm('piece_achat');
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 135);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                slideZoneUp();
                collapseForm('piece_achatAcompte');
            });
            function slideZoneUp() {
                $('.zone_editPC').slideUp();
            }
            function slideZoneDown() {
                $('.zone_editPC').slideDown();
            }
            function slideZone() {
                $('.zone_editPC').slideToggle("fast", function() {
                    //legend.children("span").html(value);
                });
            }
        </script>          
        #{managedSaisiePiece.doNothing()}
        #{managedFournisseur.doNothing()}
        #{managedCompensation.doNothing()}

        #{managedReglementAchat.loadAll()}
        #{managedReglementAchat.loadAllPieces(true, true)}
        #{managedBonProvisoire.loadNoJustifier()}
        #{managedOperationFournisseur.loadAll("A")}
        #{managedFactureAchat.loadFactureNonRegle(true,true)}
        #{managedModeReglement.loadModels('F')}    
        #{managedUser.loadAll()}
        #{managedCaisses.loadAllCaisseActif(true)} 
        <h:form prependId="false" id="main_bon_achat">
            <p:dialog header="#{lab.LCF_PRV_liste_bons_provisoires}" widgetVar="dlgListBons" width="80%" height="400" closeOnEscape="true" footer="&copy; Lymytz">
                <div class="dlg_part_fixe">
                    <div style="float: left">  
                        <p:watermark for="txt_numero_bon_a" value="#{lab.L_rechercher}..." />
                        <p:watermark for="txt_beneficiaire_bon_a" value="#{lab.LCF_PRV_entrer_beneficiaire}..." />
                        <h:panelGrid id="find_bon_divers" columns="3">
                            <h:inputText value="#{managedBonProvisoire.numSearch}" style="font-size: 0.7em" id="txt_numero_bon_a">
                                <p:ajax event="valueChange" listener="#{managedBonProvisoire.addParamNumero()}"  update="table_bon_achat"/>
                            </h:inputText>
                            <h:inputText value="#{managedBonProvisoire.tiersSearch}" style="font-size: 0.7em" id="txt_beneficiaire_bon_a">
                                <p:ajax event="valueChange" listener="#{managedBonProvisoire.addParamTiers()}"  update="table_bon_achat"/>
                            </h:inputText>
                            <p:outputPanel layout="block" autoUpdate="true">
                                <p:commandButton actionListener="#{managedBonProvisoire.avancer(false)}" update="table_bon_achat" icon="ui-icon-circle-triangle-w" disabled="#{managedBonProvisoire.paginator.disPrev}"
                                                 style="width: 22px; height: 22px"/>
                                <p:outputLabel value="#{managedBonProvisoire.paginator.currentPage}/#{managedBonProvisoire.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                                <p:commandButton actionListener="#{managedBonProvisoire.avancer(true)}" update="table_bon_achat" icon="ui-icon-circle-triangle-e" disabled="#{managedBonProvisoire.paginator.disNext}"
                                                 style="width: 22px; height: 22px"/>
                                <p:selectOneMenu value="#{managedBonProvisoire.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedBonProvisoire.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                    <f:selectItems value="#{managedBonProvisoire.paginations}"/>
                                    <p:ajax event="valueChange" update="table_bon_achat"/>
                                </p:selectOneMenu>
                            </p:outputPanel>                            
                        </h:panelGrid>
                    </div>
                    <div style="float: right">     

                    </div>
                    <div style="clear: both"/>
                    <p:separator style="width: 100%;margin-bottom: 2px"/>
                </div>
                <div class="dlg_part_scroll">
                    <p:dataTable value="#{managedBonProvisoire.documents}" var="bonp" emptyMessage="#{lab.LC_PPG_aucun_compte}" 
                                 rowIndexVar="bIdx" rowKey="#{bonp.id}" selectionMode="single" id="table_bon_achat">
                        <p:ajax event="rowSelect" listener="#{managedReglementAchat.loadBonProvisoire}" oncomplete="dlgListBons.hide()"/>
                        <p:column width="40" styleClass="statut_#{bonp.statut}">                            
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bIdx+1}</span>
                        </p:column>                            
                        <p:column headerText="#{lab.L_numero}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}" style="float: left">#{bonp.numero}</span>
                            <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{bonp.statutPaiement=='P'}" style="float: right;margin-top: 5px"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_date_bon}" styleClass="statut_#{bonp.statut}" width="80" style="text-align: center">
                            <h:outputText title="#{managedBonProvisoire.resumeText(bonp.description)}" value="#{bonp.dateBon}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.L_montant}" styleClass="statut_#{bonp.statut}" width="80" style="text-align: right">
                            <h:outputText title="#{managedBonProvisoire.resumeText(bonp.description)}" value="#{bonp.montant}" converter="DN"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_beneficiaire}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.beneficiaire}</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_ordonnateur}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.ordonnateur.nomUsers}</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_caisse}" styleClass="statut_#{bonp.statut}" width="100">
                            <span title="#{managedBonProvisoire.resumeText(bonp.description)}">#{bonp.caisse.intitule}</span>
                        </p:column>
                    </p:dataTable>                        
                </div>
            </p:dialog>
        </h:form>  
        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dglEtatComptabilised" closeOnEscape="true" resizable="false" width="25%">
                <h:panelGrid id="dialog-statut_comptabilise" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <p:commandButton value="#{lab.LCF_PRV_tous_reglements}" actionListener="#{managedReglementAchat.verifyComptabilised(null)}" style="width: 99%" disabled="#{managedReglementAchat.comptaSearch eq null}" update="dialog-statut_comptabilise"/>
                    <p:commandButton value="#{lab.LCF_PRV_reglements_comptabilise}" actionListener="#{managedReglementAchat.verifyComptabilised(true)}" style="width: 99%" disabled="#{managedReglementAchat.comptaSearch}" update="dialog-statut_comptabilise"/>
                    <p:commandButton value="#{lab.LCF_PRV_reglements_non_comptabilise}" actionListener="#{managedReglementAchat.verifyComptabilised(false)}" style="width: 99%" disabled="#{managedReglementAchat.comptaSearch eq false}" update="dialog-statut_comptabilise"/> 
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LCF_PRV_liste_factures_non_regler}" widgetVar="dlgFacture" width="80%" footer="&copy;Lymytz 2014">
                <div >
                    <h:panelGrid id="blog_search_fv" columns="6" style="font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:outputText value="" />
                        <h:outputText value="#{lab.L_date}" />
                        <h:panelGroup>
                            <span>#{lab.L_statut}</span>
                            <h:selectOneMenu value="#{managedFactureAchat.egaliteStatutR}">
                                <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                <p:ajax event="valueChange" update="data_facture_achat_reg" listener="#{managedFactureAchat.addParamStatutRegle()}" />
                            </h:selectOneMenu>
                        </h:panelGroup>
                        <h:outputText value="#{lab.LCF_PRV_fournisseur}" />
                        <h:outputText value="#{lab.L_reference}" />
                        <span>&nbsp;</span>
                        <p:commandButton icon="ui-icon-bullet" actionListener="#{managedFactureAchat.clearParams()}" title="#{lab.L_reset_param}" style="width: 20px; height: 22px" 
                                         update="blog_search_fv data_facture_achat_reg"/>
                        <h:panelGrid columns="2" >
                            <h:selectBooleanCheckbox value="#{managedFactureAchat.date_}" style="margin-top: 2px;float: right">
                                <p:ajax event="valueChange" listener="#{managedFactureAchat.chooseDateSearch}" update="zone_search_by_date_fA data_facture_achat_reg"/>
                            </h:selectBooleanCheckbox>
                            <h:panelGroup id="zone_search_by_date_fA">
                                <p:calendar value="#{managedFactureAchat.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.chooseDateSearch()}" update="data_facture_achat_reg" />
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedFactureAchat.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFactureAchat.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFactureAchat.chooseDateSearch()}" update="data_facture_achat_reg" />
                                </p:calendar>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:selectOneMenu value="#{managedFactureAchat.statutRegle_}" valueChangeListener="#{managedFactureAchat.chooseStatutRegle}" style="min-width: 120px" title="Etat de reglement de la facture">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_attente}" itemValue="#{constantes.ETAT_ATTENTE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                            <f:selectItem itemLabel="#{lab.L_regler}" itemValue="#{constantes.ETAT_REGLE}"/>
                            <p:ajax event="valueChange" update="data_facture_achat_reg"/>
                        </h:selectOneMenu>
                        <h:inputText value="#{managedFactureAchat.codeFsseur_}" style="width: 100%">
                            <p:ajax event="blur" listener="#{managedFactureAchat.addParamFsseur()}"  update="data_facture_achat_reg"/>
                        </h:inputText>                     
                        <h:inputText value="#{managedFactureAchat.numSearch_}">
                            <p:ajax event="blur" listener="#{managedFactureAchat.searchByNum()}" update="data_facture_achat_reg"/>
                        </h:inputText>
                    </h:panelGrid>
                </div>
                <p:dataTable id="data_facture_achat_reg" value="#{managedFactureAchat.documents}" var="bon" rowKey="#{bon.id}" rowIndexVar="bonIdx" 
                             selectionMode="single" selection="#{managedFactureAchat.selectDoc}">
                    <p:ajax event="rowSelect"   listener="#{managedReglementAchat.loadOnView}"  oncomplete="dlgFacture.hide()" 
                            update=":main_form_regFA:zone_form_regFA :main_form_regFA:table_reg_facture_FA :main_form_regFA:txt_reference_facture_reg_FA"/>
                    <p:column width="35" headerText="NÂ°" styleClass="statut_#{bon.statutRegle}">
                        <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>  
                        <span >#{bonIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bon.statut}"> 
                        <span >#{bon.numDoc}</span>
                        <h:outputText title="#{lab.LC_PFA_facture_regler}" value="R" rendered="#{bon.statutRegle == constantes.ETAT_REGLE}"
                                      styleClass="style_statut"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PCC_date_facture}" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PRA_fournisseur}" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.fournisseur.tiers.nom_prenom}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PCV_mode_reglement}" styleClass="statut_#{bon.statut}">
                        <h:outputText value="#{bon.modelReglement.reference}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PFV_piece_externe}" style="width: 18%" styleClass="statut_#{bon.statut}">
                        <span>#{bon.numPiece}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PCC_etapes}"  width="60" styleClass="statut_#{bon.statut}" style="font-size: 0.8em">
                        <h:outputText value="#{bon.libEtapes}" />
                    </p:column>
                    <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                        <p:contextMenu for="btn_option_facture_achat" event="left click" style="font-size: 0.8em">
                            <p:menuitem value="#{lab.LCF_PRV_generer_piece}" icon="ui-icon-circle-arrow-w" actionListener="#{managedReglementAchat.createOnePieceCaisse(bon)}"
                                        oncomplete="collapseForm('piece_achat')"  update=":main_form_regFA:zone_form_regFA"/>
                        </p:contextMenu>                           
                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_facture_achat" type="button"/>
                    </p:column>
                </p:dataTable>      
                <span class="nbSelectfacture_achat" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedFactureAchat.init(false)}" update="data_facture_achat_reg" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureAchat.paginator.disPrev}"/>
                    <p:outputPanel >
                        <p:inplace label="#{managedFactureAchat.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                            <pe:inputNumber value="#{managedFactureAchat.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                <p:ajax event="blur" listener="#{managedFactureAchat.gotoPagePaginator()}" update="data_facture_achat_reg"/>
                            </pe:inputNumber>
                        </p:inplace><p:outputLabel value="/#{managedFactureAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                    </p:outputPanel>
                    <p:commandButton actionListener="#{managedFactureAchat.init(true)}" update="data_facture_achat_reg" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureAchat.paginator .disNext}"/>
                    <p:selectOneMenu value="#{managedFactureAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedReglementAchat.paginations}"/>
                        <p:ajax event="valueChange"   update="data_facture_achat_reg"/>
                    </p:selectOneMenu>
                </p:outputPanel>              
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="select_rega_compensation">
            #{managedReglementVente.doNothing()}
            <p:dialog header="#{lab.LC_PFA_compensation_client_fournisseur}" width="50%" widgetVar="dlgCompensation" modal="true" closeOnEscape="true">
                <div style="border: solid 2px; height: 170px; padding: 2px; border-radius: 5px;">
                    <span style="display: inline-block; background: #CCC; width: 100%; font-size: 0.9em">
                        <span style="font-weight: bold">#{lab.LCF_PRV_factures_ventes}</span> 
                        <h:panelGroup style="float:right" id="total_reg_vente_compensation">
                            <span>#{lab.LC_PFA_total_facture} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensation.vente.montantTotal}" converter="DNA"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                    </span>
                    <div style="width: 99.5%; height: 130px; border: solid 1px; margin: auto;overflow-y: auto">
                        <p:dataTable value="#{managedCompensation.ventes}" var="ac" rowKey="#{ac.id}" selectionMode="single" rowIndexVar="Idx" id="data_reg_vente_compensation">
                            <p:ajax event="rowSelect" listener="#{managedCompensation.loadOnViewVente}"
                                    update=":select_rega_compensation:total_reg_vente_compensation :select_rega_compensation:blog_compensation_reglement_achat"/>
                            <p:column width="30" headerText="NÂ°" styleClass="statut_#{ac.statut}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{ac.new_}"/> 
                                <span>#{Idx+1}</span>
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{ac.cloturer}"/>      
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" style="width: 20%" styleClass="statut_#{ac.statut}">
                                <span>#{ac.numDoc}</span>
                                <h:outputText value="#{lab.LC_PFA_vide}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=ac.contenus.size()}"/>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_facture_livrer}" value="L" rendered="#{ac.statutLivre == constantes.ETAT_LIVRE}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" style="text-align: center;width: 15%" styleClass="statut_#{ac.statut}">
                                <h:outputText value="#{ac.enteteDoc.dateEntete}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_client}" styleClass="statut_#{ac.statut}">
                                <h:outputText value="#{ac.nom_client}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFV_piece_externe}" style="width: 20%" styleClass="statut_#{ac.statut}">
                                <span>#{ac.numPiece}</span>
                            </p:column>
                        </p:dataTable>
                    </div>
                    <div style="font-size:0.9em">
                        <h:panelGroup style="float: left">
                            <span>#{lab.LC_PFV_total_reglement} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensation.selectPieceAchat.montant}" converter="DNA"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                        <h:panelGroup style="float: right" id="total_reg_reg_vente_compensation_equilibre">
                            <span>#{lab.LC_PFV_total_equilibre} : </span>
                            <h:outputText style="font-weight: bold" value="#{managedCompensaselectPieceAchatAchat.sommeVente}" converter="DNA"/>
                            <span style="font-size:0.8em">Fcfa </span>
                        </h:panelGroup>
                    </div>
                </div> 
                <p:separator/>
                <p:outputPanel id="blog_compensation_reglement_achat">
                    <h:panelGrid id="form_compensation_reglement_achat" columns="4" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" 
                                 style="padding-top: 2px;padding-bottom: -5px;background: #CCC;width: 100%">
                        <h:outputText value="#{lab.L_montant}" />
                        <h:outputText value="#{lab.LC_PJV_date_paiment}" />
                        <h:outputText value="#{lab.LC_PJV_caisse}" />
                        <h:outputText value="#{lab.L_reference}"/>
                        <pe:inputNumber value="#{managedCompensation.pieceVente.montant}"  style="text-align: right"/>
                        <p:calendar value="#{managedCompensation.pieceVente.datePaiementPrevu}" navigator="true" pattern="dd-MM-yyyy" size="10"/>
                        <h:selectOneMenu value="#{managedCompensation.pieceVente.caisse.id}">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}"
                                           itemValue="#{icaiss.id}" />
                        </h:selectOneMenu>
                        <h:panelGroup>
                            <h:inputText value="#{managedCompensation.pieceVente.numRefExterne}" />
                            <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right"
                                             update="blog_compensation_reglement_achat" actionListener="#{managedCompensation.saveNew()}"/>
                        </h:panelGroup> 
                    </h:panelGrid>                                            
                    <p:dataTable id="data_compensation_reglement_achat" value="#{managedCompensaselectPieceAchatAchat.compensations}" var="acc" rowKey="#{acc.id}" rowIndexVar="Idx" selectionMode="single">
                        <p:ajax event="rowSelect" global="false" listener="#{managedCompensation.loadOnView}" 
                                update=":select_rega_compensation:form_compensation_reglement_achat :select_rega_compensation:total_reg_vente_compensation :select_rega_compensation:data_reg_vente_compensation"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedCompensation.unLoadOnView}" 
                                update=":select_rega_compensation:form_compensation_reglement_achat :select_rega_compensation:total_reg_vente_compensation"/>
                        <p:column headerText="NÂ°" width="20" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{acc.vente.new_}"/>
                            <h:outputText value="#{Idx+1}"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_date_edition}" sortBy="#{acc.vente.datePiece}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{acc.vente.datePiece}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PRV_date_reglement}" sortBy="#{acc.vente.datePaimentPrevu}" style="text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{acc.vente.datePaimentPrevu}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <h:outputText value="#{acc.vente.montant}" converter="DNS"/>
                        </p:column>                                                                                    
                        <p:column style="width: 5%;text-align: center">
                            <p:commandButton icon="#{acc.id gt 0? 'ui-icon-minusthick':'ui-icon-plusthick'}" title="#{acc.id gt 0? 'Enlever':'Associer'}"
                                             style="width: 20px;height: 20px" actionListener="#{managedCompensation.addComprensation(acc)}" 
                                             update="data_compensation_reglement_achat :select_rega_compensation:total_reg_reg_vente_compensation_equilibre"/>
                        </p:column>  
                        <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedCompensation.giveStringStatut(acc.vente.statutPiece)}">
                            <p:contextMenu for="btn_option_compensation_reglement_achat" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedCompensation.deleteBean(acc)}" 
                                            update="data_compensation_reglement_achat :select_rega_compensation:total_reg_reg_vente_compensation_equilibre"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_compensation_reglement_achat" type="button"/>
                        </p:column> 
                    </p:dataTable>
                </p:outputPanel>
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="form_confirm_bind_pcFA_FA">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelAll" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text18}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementAchat.deleteAllPiece()}" 
                                 oncomplete="dlgConfirmDelAll.hide();"  update=":main_form_regFA:table_regFA :main_form_regFA:txt_restToPlanFA :main_form_regFA:zone_pcv_edit_pieceFA"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmDelAll.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePC" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementAchat.deletePieceCaisse(false)}" 
                                 oncomplete="dlgConfirmDeletePC.hide();" update=":main_form_regFA:table_regFA :main_form_regFA:txt_restToPlanFA :main_form_regFA:zone_pcv_edit_pieceFA"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePC.hide()"/>
            </p:confirmDialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgCancelPcv1" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text1} ">
                <span>#{lab.LCF_PRV_text16}</span>
                <p:commandButton value="#{lab.L_continuer}" icon="ui-icon-circle-check" actionListener="#{managedReglementAchat.cancelStatutPayeOfPCVForBanque()}" oncomplete="dlgCancelPcv1.hide()" />
                <p:commandButton value="#{lab.L_annuler}" onclick="dlgCancelPcv1.hide()"  type="button" icon="ui-icon-circle-close"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgCancelPcv3" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text2}">
                <p:commandButton value="#{lab.L_continuer}" icon="ui-icon-circle-check" actionListener="#{managedReglementAchat.cancelStatutPayeOfPCVByCompensation1()}" oncomplete="dlgCancelPcv3.hide()"
                                 update=":main_form_regFA:table_regFA :main_form_regFA:table_cmpens_p_vente :main_form_regFA:table_reg_facture_FA"/>
                <p:commandButton value="#{lab.L_annuler}" onclick="dlgCancelPcv3.hide()"  type="button" icon="ui-icon-circle-close"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmPaye" closeOnEscape="true"
                             message="#{lab.LC_PFV_text27}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LCF_PRV_text6}</span>
                    <p:selectBooleanCheckbox value="#{managedReglementAchat.needConfirmation}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementAchat.reglerPieceTresorerie(true)}" oncomplete="dlgConfirmPaye.hide();" 
                                 update=":main_form_regFA:table_regFA :main_form_regFA:txt_restToPlanFA :form_edit_new_pc_acompteFA:table_acompte_fsseurs"/>
                <p:commandButton type="button" icon="ui-icon-circle-close" value="#{lab.L_non}" onclick="dlgConfirmPaye.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_confirm_bind_pcFA">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text7} #{managedReglementAchat.selectedDoc.numDoc} ?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementAchat.bindPieceAndFacture()}" oncomplete="dlgConfirmBind.hide();" 
                                 update=":form_edit_new_pc_acompteFA:table_acompte_fsseurs :form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_confirm_unbind_pcFA">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmUnBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text8} #{managedReglementAchat.pieceAchat.achat.numDoc}?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementAchat.unbindLiasonCaisse()}" oncomplete="dlgConfirmUnBind.hide();" 
                                 update=":form_edit_new_pc_acompteFA:table_acompte_fsseurs :form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmUnBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmContinuBind" closeOnEscape="true" width="45%"
                             message="#{lab.LCF_PRV_text19}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_continuer}" actionListener="#{managedReglementAchat.bindPieceAndFacture()}" 
                                 oncomplete="dlgConfirmContinuBind.hide();" update=":form_edit_new_pc_acompteFA:table_acompte_fsseurs :form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
                <p:commandButton type="button"  value="#{lab.L_annuler}" onclick="dlgConfirmContinuBind.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePC1" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementAchat.deleteOneLinePc()}" 
                                 oncomplete="dlgConfirmDeletePC1.hide();" update=":form_edit_new_pc_acompteFA:table_acompte_fsseurs :form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeletePC1.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeletePiece" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text10}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedOperationFournisseur.confirmDeletePiece(true)}" 
                                 oncomplete="dlgConfirmDeletePiece.hide();" update=":form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
                <p:commandButton value="Non" actionListener="#{managedOperationFournisseur.confirmDeletePiece(false)}" 
                                 oncomplete="dlgConfirmDeletePiece.hide();" update=":form_edit_new_pc_acompteFA:form_edit_pc_acompteFA"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnulePiece" closeOnEscape="true"
                             message="#{lab.LCF_PRV_text11}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReglementAchat.openConfirmrPaiement()}" oncomplete="dlgConfirmAnnulePiece.hide()" 
                                 update=":main_form_regFA:btn_comptabilised_caisse_achat :main_form_regFA:table_regFA :main_form_regFA:grp_btn_etat_reg_achat"/>
                <p:commandButton type="button" value="#{lab.L_non}" onclick="dlgConfirmAnnulePiece.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabilisePiece" message="#{lab.LCF_PRV_text12}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserCaisseAchat(managedReglementAchat.pieceAchat, true, true)}"
                                 update=":main_form_regFA:btn_comptabilised_caisse_achat :main_form_regFA:table_cmpens_p_vente" oncomplete="dlgComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabilisePiece.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePiece" message="#{lab.LCF_PRV_text13}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseAchat(managedReglementAchat.pieceAchat, true)}"
                                 update=":main_form_regFA:btn_comptabilised_caisse_achat :main_form_regFA:table_cmpens_p_vente" oncomplete="dlgUnComptabilisePiece.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePiece.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">                    
            <p:dialog header="#{lab.LC_PRA_liste_fournisseurs}" widgetVar="dlgListFournisseurs" closeOnEscape="true" width="50%" modal="true" dynamic="true">      
                <div class="dlg_part_fixe">
                    <h:inputText value="#{managedFournisseur.numSearch_}" style="width: 140px">
                        <p:ajax event="keyup" listener="#{managedFournisseur.searchByNum()}" update="data_fournisseur_acomptes"/>
                    </h:inputText>   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(false, false)}"  update="data_fournisseur_acomptes" icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.paginator.disPrev}"
                                         style="width: 22px; height: 22px"/>
                        <p:outputPanel ><p:outputLabel value="#{managedFournisseur.paginator.currentPage}/#{managedFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(true, false)}"  update="data_fournisseur_acomptes" icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.paginator.disNext}"
                                         style="width: 22px; height: 22px"/>
                        <p:selectOneMenu value="#{managedFournisseur.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedFournisseur.paginations}"/>
                            <p:ajax event="valueChange" update="data_fournisseur_acomptes"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </div>
                <div class="dlg_part_scroll" style="clear: right">
                    <p:dataTable id="data_fournisseur_acomptes"  value="#{managedFournisseur.fournisseurs}" var="fsseur_" rowKey="#{fsseur_.id}"
                                 selectionMode="single" rowIndexVar="fsseurIdx">
                        <p:ajax event="rowSelect"  listener="#{managedOperationFournisseur.loadOnViewFournisseur}" oncomplete="dlgListFournisseurs.hide()"
                                update=":form_edit_new_pc_acompteFA:edit_fsseur_acompte"/>
                        <p:column headerText="NÂ°" style="width: 8%;text-align: center">
                            <span>#{fsseurIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_code}">
                            <span>#{fsseur_.codeFsseur}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_nom}">
                            <span>#{fsseur_.nom_prenom}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_designation}">
                            <span>#{fsseur_.categorie.libelle}</span>
                        </p:column>
                    </p:dataTable>  
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_edit_new_pc_acompteFA">
            <p:dialog header="#{lab.LCF_PRV_gerer_acomptes}" widgetVar="dlgSaveAvance" width="90%" footer="&copy;Lymytz 2014" modal="true" 
                      closeOnEscape="true" height="400" maximizable="true">                
                <div class="dlg_part_fixe">
                    <div style="float: left">
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedOperationFournisseur.saveNew()}" id="save_piece_achatAcompte" update="table_acompte_fsseurs txt_ref_acc_achat"/>
                        <p:commandButton value="#{lab.L_nouveau}" actionListener="#{managedOperationFournisseur.resetFiche()}" id="cancel_piece_achatAcompte" update="form_edit_pc_acompteFA"/>
                        <div id="search_piece_achatAcompte">
                            <p:outputPanel autoUpdate="true" style="float: left" layout="block">
                                <p:commandButton actionListener="#{managedOperationFournisseur.paginer(false)}" global="false" update="table_acompte_fsseurs" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationFournisseur.paginator.disPrev}"/>
                                <p:outputPanel ><p:outputLabel value="#{managedOperationFournisseur.paginator.currentPage}/#{managedOperationFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                <p:commandButton actionListener="#{managedOperationFournisseur.paginer(true)}" global="false" update="table_acompte_fsseurs" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationFournisseur.paginator.disNext}"/>
                                <p:selectOneMenu value="#{managedOperationFournisseur.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedOperationFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                    <f:selectItems value="#{managedOperationFournisseur.paginations}"/>
                                    <p:ajax event="valueChange" global="false" update="table_acompte_fsseurs"/>
                                </p:selectOneMenu>
                            </p:outputPanel>      
                            <h:panelGroup style="margin-top: 5px; font-size: 0.8em">
                                <p:watermark for="txt_search_num_pcFA" value="#{lab.LCF_PRV_n_piece}..." />
                                <p:watermark for="txt_search_fsseur_pc" value="#{lab.L_codeFournisseur}..." />
                                <p:watermark for="txt_search_statutfsseur_pc" value="#{lab.L_statut}..." />
                                <h:inputText value="#{managedOperationFournisseur.numSearch}" id="txt_search_num_pcFA" style="background: #006666; color: white; text-align: center">
                                    <p:ajax event="valueChange" listener="#{managedOperationFournisseur.addParamReference()}" update="table_acompte_fsseurs"/>
                                </h:inputText>
                                <h:inputText value="#{managedOperationFournisseur.codeFournisseur}" id="txt_search_fsseur_pc" style="background: #006666; color: white; text-align: center">
                                    <p:ajax event="valueChange" listener="#{managedOperationFournisseur.addParamFournisseur()}" update="table_acompte_fsseurs"/>
                                </h:inputText>
                                <h:selectOneMenu value="#{managedOperationFournisseur.statutSearch}" id="txt_search_statutfsseur_pc" 
                                                 style="min-width: 120px">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                    <f:selectItem itemLabel="#{lab.L_attente}" itemValue="#{constantes.ETAT_ATTENTE}"/>
                                    <f:selectItem itemLabel="#{lab.L_annuler.toUpperCase()}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                    <f:selectItem itemLabel="#{lab.L_regler}" itemValue="#{constantes.ETAT_REGLE}"/>
                                    <p:ajax event="valueChange" listener="#{managedOperationFournisseur.addParamStatut()}" update="table_acompte_fsseurs"/>
                                </h:selectOneMenu>
                                <p:commandButton icon="ui-icon-bullet" actionListener="#{managedOperationFournisseur.cleanParams()}" title="#{lab.L_reset_param}"
                                                 style="width: 20px; height: 22px" update="table_acompte_fsseurs"/>   
                            </h:panelGroup>
                        </div>
                    </div>
                    <div style="float: right">
                        <div style="float: right">
                            <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('piece_achatAcompte');
                                    return false">
                                <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>               
                            <p:spacer />
                            <h:link title="#{lab.L_mode_liste}" onclick="collapseList('piece_achatAcompte');
                                    return false" >
                                <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>   
                        </div>
                    </div>
                </div>
                <div class="dlg_part_scroll" style="clear: both">
                    <div class="yvs_form_piece_achatAcompte">
                        <p:outputPanel id="form_edit_pc_acompteFA">
                            <div style="float: left;width: 40%">
                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" styleClass="yvs_table" style="width: 100%; margin-top: 2px">
                                    <f:facet name="header">
                                        <div align="left" >
                                            <span style="font-weight: normal">PC. NÂ°: </span>
                                            <h:outputText style="font-size: 1.1em; padding: 2px" value="#{managedOperationFournisseur.compte.numRefrence}" id="txt_ref_acc_achat"/>
                                        </div>
                                    </f:facet>
                                    <span>#{lab.LDB_PA_fournisseurs}</span>
                                    <h:panelGroup id="edit_fsseur_acompte">
                                        <h:inputText value="#{managedOperationFournisseur.compte.fournisseur.codeFsseur}" style="color: #{managedOperationFournisseur.compte.fournisseur.error?'red':''}">
                                            <p:ajax event="blur" global="false" listener="#{managedOperationFournisseur.searchFournisseur()}" update="edit_fsseur_acompte"/>
                                        </h:inputText> 
                                        #{managedOperationFournisseur.compte.fournisseur.nom_prenom}
                                        <p:commandButton icon="ui-icon-note" style="float: right; width: 16px;height: 20px" title="#{lab.LDB_PA_liste_fournisseur}" global="false"
                                                         actionListener="#{managedOperationFournisseur.initFournisseurs()}" oncomplete="dlgListFournisseurs.show()"/>
                                    </h:panelGroup>
                                    <span>#{lab.L_montant}</span>
                                    <pe:inputNumber value="#{managedOperationFournisseur.compte.montant}" decimalPlaces="0" />
                                    <span>#{lab.LCF_PRV_paiement_prevu}</span> 
                                    <p:calendar value="#{managedOperationFournisseur.compte.dateAcompte}" pattern="dd-MM-yyyy" size="8"/>
                                    <span>#{lab.LCF_PRV_caisse}</span>
                                    <h:selectOneMenu value="#{managedOperationFournisseur.compte.caisse.id}">
                                        <f:selectItem itemLabel=" " itemValue="0" />
                                        <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                        <p:ajax event="valueChange" global="false" listener="#{managedOperationFournisseur.chooseCaisseCompte()}" />
                                    </h:selectOneMenu>
                                    <span>#{lab.LCF_PRV_mode_paiement}</span>                        
                                    <h:selectOneMenu value="#{managedOperationFournisseur.compte.mode.id}" style="min-width: 200px">
                                        <f:selectItem itemLabel="" itemValue="0"/>
                                        <f:selectItems value="#{managedModeReglement.modes}" var="mo" itemLabel="#{mo.designation}" itemValue="#{mo.id}"/>
                                        <p:ajax event="valueChange" global="false" listener="#{managedOperationFournisseur.chooseModeCompte()}" />
                                    </h:selectOneMenu>      
                                    <span>#{lab.LCF_PRV_numero_externe}</span>
                                    <h:inputText value="#{managedOperationFournisseur.compte.referenceExterne}"/>   
                                    <f:facet name="footer">
                                        <span>#{lab.LCF_PRV_note}</span>
                                        <h:inputTextarea value="#{managedOperationFournisseur.compte.commentaire}" style="width: 100%"  rows="4"/>
                                    </f:facet>
                                </h:panelGrid>
                            </div>
                            <div style="margin-left: 40%;">
                                <p:outputPanel id="date_notifs_acompte_fa">
                                    <div style="width: 98%; border: solid 2px; height: 340px; padding: 2px; border-radius: 5px;margin-top: 5px">
                                        <span style="display: inline-block; background: #CCC; width: 100%">
                                            <span class="button_slide">[-]</span>
                                            #{lab.LCF_PRV_reglements_lies} 
                                            <div style="float: right">#{lab.LCF_PRV_reste} : <div style="float: right"><h:outputText value="#{managedOperationFournisseur.compte.reste}" converter="DNS" style="font-weight: bold"/> Fcfa</div></div>
                                        </span>
                                        <div class="zone_slide" style="width: 98%; border: solid 1px; height: 270px; margin: auto;overflow-y: auto">
                                            <p:dataTable value="#{managedOperationFournisseur.compte.achatsEtDivers}" var="acom" rowKey="#{acom.id}" >
                                                <p:column headerText="NÂ°" style="width: 7%" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{men.new_}"/>
                                                    <span>#{Idx+1}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.LCF_PRV_mode_reglement}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <h:outputText value="#{acom.mode.designation}"/>
                                                    <span style="display: #{(acom.statutPiece==constantes.STATUT_DOC_ATTENTE)?'inline-block':'none'}; width: 10px; height: 10px; background: #444;" title="#{lab.LC_PFA_en_attente_paiment}"></span>
                                                    <span style="display: #{(acom.statutPiece==constantes.STATUT_DOC_ENCOUR)?'inline-block':'none'}; width: 10px; height: 10px; background: #f6a828" title="#{lab.LC_PFA_en_cours_paiment}"></span>
                                                    <span style="display: #{(acom.statutPiece==constantes.STATUT_DOC_PAYER)?'inline-block':'none'}; width: 10px; height: 10px; background: #006666" title="#{lab.LC_PFA_piece_regler}"></span>
                                                </p:column>
                                                <p:column headerText="#{lab.LCF_PRV_date_edition}" sortBy="#{acom.datePiece}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <h:outputText value="#{acom.datePiece}" converter="DDMMYYYY"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LCF_PRV_date_reglement}" sortBy="#{acom.dateReglement}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <h:outputText value="#{acom.dateReglement}" converter="DDMMYYYY"/>
                                                </p:column>
                                                <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <h:outputText value="#{acom.montant}" converter="DNS"/>
                                                </p:column>
                                                <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(acom.statutPiece)}">
                                                    <p:contextMenu for="btn_option_notif_acompte" event="left click" style="font-size: 0.8em">
                                                        <p:menuitem value="#{lab.LCF_PRV_payer_valider}" rendered="#{acom.statutPiece == 'W'}" 
                                                                    update=":form_edit_new_pc_acompteFA:date_notifs_acompte_fa :form_edit_new_pc_acompteFA:table_acompte_fsseurs" 
                                                                    actionListener="#{managedOperationFournisseur.encaisserPieces(acom)}" icon="ui-icon-circle-check" />
                                                        <p:menuitem value="#{lab.L_annuler}" rendered="#{acom.statutPiece == 'P'}" 
                                                                    update=":form_edit_new_pc_acompteFA:date_notifs_acompte_fa :form_edit_new_pc_acompteFA:table_acompte_fsseurs"  
                                                                    actionListener="#{managedOperationFournisseur.annulerPieces(acom, true)}" icon="ui-icon-circle-close" />
                                                        <p:menuitem value="Mettre en attente" rendered="#{acom.statutPiece == 'A'}" 
                                                                    update=":form_edit_new_pc_acompteFA:date_notifs_acompte_fa :form_edit_new_pc_acompteFA:table_acompte_fsseurs"  
                                                                    actionListener="#{managedOperationFournisseur.annulerPieces(acom, false)}" icon="ui-icon-circle-close" />
                                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedOperationFournisseur.deleteBeanPieces(acom)}"
                                                                    oncomplete="dlgConfirmDeletePiece.show()"/>
                                                    </p:contextMenu>                           
                                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_notif_acompte" type="button"/>
                                                </p:column> 
                                            </p:dataTable>
                                        </div>  
                                        <div class="zone_bottom">
                                            <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                                <h:panelGrid columns="2" style="margin-left: -10px">
                                                    <h:panelGrid columns="2" >
                                                        <h:selectBooleanCheckbox value="#{managedOperationFournisseur.addDateNotif}" style="margin-top: 2px;float: right">
                                                            <p:ajax event="valueChange" listener="#{managedOperationFournisseur.findByDatesNotif()}" update="date_search_notifs_acompte date_notifs_acompte_fa"/>
                                                        </h:selectBooleanCheckbox>
                                                        <h:panelGroup id="date_search_notifs_acompte">
                                                            <p:calendar value="#{managedOperationFournisseur.dateDebutSearchNotif}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedOperationFournisseur.addDateNotif}" size="10" style="font-size: 0.8em">
                                                                <p:ajax event="dateSelect" listener="#{managedOperationFournisseur.findByDatesNotif()}" update="date_notifs_acompte_fa"/>
                                                            </p:calendar>
                                                            <p:spacer width="5px" style="background: black"/>
                                                            <p:calendar value="#{managedOperationFournisseur.dateFinSearchNotif}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedOperationFournisseur.addDateNotif}" size="10" style="font-size: 0.8em">
                                                                <p:ajax event="dateSelect" listener="#{managedOperationFournisseur.findByDatesNotif()}" update="date_notifs_acompte_fa"/>
                                                            </p:calendar>
                                                        </h:panelGroup>
                                                    </h:panelGrid>
                                                    <h:inputText value="#{managedOperationFournisseur.numeroSearchNotif}">
                                                        <p:ajax event="valueChange" update="date_notifs_acompte_fa" listener="#{managedOperationFournisseur.findByNumeroNotif()}"/>
                                                    </h:inputText>
                                                </h:panelGrid>   
                                                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                                                    <p:commandButton actionListener="#{managedOperationFournisseur.loadNotifAcompte(false, false)}" global="false" update="date_notifs_acompte_fa" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationFournisseur.pAchat.disPrev}"/>
                                                    <p:outputPanel ><p:outputLabel value="#{managedOperationFournisseur.pAchat.currentPage}/#{managedOperationFournisseur.pAchat.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                                    <p:commandButton actionListener="#{managedOperationFournisseur.loadNotifAcompte(true, false)}" global="false" update="date_notifs_acompte_fa" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationFournisseur.pAchat.disNext}"/>
                                                    <p:selectOneMenu value="#{managedOperationFournisseur.max}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedOperationFournisseur.choosePaginatorNotif}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                                        <f:selectItems value="#{managedOperationFournisseur.paginations}"/>
                                                        <p:ajax event="valueChange" global="false" update="date_notifs_acompte_fa"/>
                                                    </p:selectOneMenu>
                                                </p:outputPanel> 
                                            </h:panelGrid>
                                        </div>
                                    </div>
                                </p:outputPanel>
                            </div>
                        </p:outputPanel>
                    </div>
                    <div class="yvs_list_piece_achatAcompte">
                        <p:dataTable value="#{managedOperationFournisseur.acomptes}" var="acClt" rowIndexVar="line_av" rowKey="#{acClt.id}"
                                     selectionMode="single" id="table_acompte_fsseurs">
                            <p:ajax event="rowSelect" listener="#{managedOperationFournisseur.loadOnView}" update=":form_edit_new_pc_acompteFA:form_edit_pc_acompteFA" 
                                    oncomplete="collapseForm('piece_achatAcompte')" />
                            <p:column headerText="NÂ°" style="text-align: center" styleClass="statut_#{acClt.statut}"> 
                                #{line_av+1}
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_reste}" styleClass="statut_#{acClt.statut}">
                                #{acClt.numRefrence}
                            </p:column>
                            <p:column headerText="#{lab.L_date}" width="80" styleClass="statut_#{acClt.statut}">
                                <h:outputText value="#{acClt.dateAcompte}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_fournisseurs}" styleClass="statut_#{acClt.statut}">
                                #{acClt.fournisseur.nom_prenom}
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_caisse}" width="80" styleClass="statut_#{acClt.statut}">
                                <h:outputText value="#{acClt.caisse.intitule}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="statut_#{acClt.statut}"  style="text-align: right">
                                <h:outputText value="#{acClt.montant}" converter="DNS" />
                            </p:column>
                            <p:column headerText="Reste" styleClass="statut_#{acClt.statut}" style="text-align: right">
                                <h:outputText value="#{acClt.reste}" converter="DNS" />
                            </p:column>
                            <p:column headerText=" " style="text-align: center">
                                <f:facet name="header">
                                    <p:contextMenu for="btn_option_acr_head" event="left click" style="font-size: 0.8em">                                            
                                        <p:menuitem value="Charger les restes" icon="ui-icon-refresh" actionListener="#{managedOperationFournisseur.loadAllReste()}"
                                                    update="table_acompte_fsseurs"/>
                                    </p:contextMenu>
                                    <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="btn_option_acr_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_acr" event="left click">
                                    <p:menuitem value="#{lab.LCF_PRV_encaisser_valider}" rendered="#{acClt.statut == 'W'}" update="table_acompte_fsseurs" 
                                                actionListener="#{managedOperationFournisseur.encaisserAcompte(acClt)}" icon="ui-icon-circle-check" />
                                    <p:menuitem value="#{lab.L_annuler}" rendered="#{acClt.statut == 'P'}" update="table_acompte_fsseurs"  
                                                actionListener="#{managedOperationFournisseur.annulerAcompte(acClt, true)}" icon="ui-icon-circle-close" />
                                    <p:menuitem value="#{lab.LP_PSO_mettre_en_attente}" rendered="#{acClt.statut == 'A'}"  update="table_acompte_fsseurs" 
                                                actionListener="#{managedOperationFournisseur.annulerAcompte(acClt, false)}" icon="ui-icon-circle-close" />
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" update="table_acompte_fsseurs" actionListener="#{managedOperationFournisseur.deleteBeanCompte(acClt)}"/>
                                    <p:menuitem value="#{lab.LCF_PRV_lier_facture}" icon="ui-icon-shuffle" rendered="#{0 lt acClt.resteUnBind and managedReglementAchat.pieceAchat.id gt 0}"
                                                actionListener="#{managedReglementAchat.openDlgToBindDv(acClt)}"/>
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" type="button" style="width: 20px; height: 20px; background: #FFF !important" id="btn_option_acr"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>                
            </p:dialog>
        </h:form>       
        <h:form prependId="false" id="main_form_regFA">
            <div class="part_fix">
                <div align="left" style="float: left">
                    <p:splitButton value="#{lab.L_nouveau}" title="#{lab.LCF_PRV_nouvelle_piece_reglement}" icon="ui-icon-document" actionListener="#{managedReglementAchat.resetViewPc()}"
                                   update="zone_pcv_edit_pieceFA all_bloc_info_reg_FA">

                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementAchat.openConfirmDelePC(iregV)}" />

                    </p:splitButton>
                    <span>#{lab.LCF_PRV_enregistrer_acompte}</span>
                    <p:commandButton icon="ui-icon-radio-on" style="width: 20px; height: 18px; margin-left: 10px" type="button" onclick="dlgSaveAvance.show()"/>
                </div>
                <div style="float: right">                  
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('piece_achat');

                            return false;">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>          
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('piece_achat');

                            return false;" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>                                   
                </div> 
                <div style="clear: right"/>                
            </div>
            <div class="part_scroll">
                <div class="yvs_form_piece_achat" style="margin: auto; background: white;">
                    <div >
                        <p:outputPanel id="zone_pcv_edit_pieceFA">
                            <h:panelGroup id="grp_btn_etat_reg_achat" style="float: right; position: relative">                            
                                <p:outputPanel autoUpdate="true" style="float: left;margin-top: 7px">     
                                    <p:outputPanel styleClass="yvs_form_of" rendered="#{managedReglementAchat.pieceAvance.id gt 0}">  
                                        <p:commandLink value="#{lab.L_en_attente}" styleClass="#{(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_ATTENTE)?'statut_valide':'etat_formation_true'}" 
                                                       disabled="#{!(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_PAYER
                                                                   or managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_ANNULE)}" 
                                                       actionListener="#{managedReglementAchat.openConfirmPaiement()}"
                                                       process="@this" update="grp_btn_etat_reg_achat" />                                 
                                        <p:commandLink value="#{(managedReglementAchat.pieceAvance.statutPiece eq constantes.STATUT_DOC_PAYER)?'PAY&Eacute;':'PAYER'}"
                                                       styleClass="#{(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}" 
                                                       disabled="#{!(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_ATTENTE)}" 
                                                       actionListener="#{managedReglementAchat.openConfirmPaiement()}"
                                                       process="@this" update="grp_btn_etat_reg_achat" />
                                        <p:commandLink value="#{managedReglementAchat.isComptabiliseBean(managedReglementAchat.pieceAvance)?'COMPTABILISE':'COMPTABILISER'}"
                                                       type="button" styleClass="#{managedReglementAchat.pieceAvance.comptabilise?'statut_valide':'etat_formation_true'}"
                                                       onclick="dlgComptabilisePiece.show()" global="false" id="btn_comptabilised_caisse_achat" 
                                                       rendered="#{managedReglementAchat.pieceAvance.id gt 0 and managedReglementAchat.pieceAvance.statutPiece==constantes.STATUT_DOC_PAYER}"/>
                                        <p:contextMenu for="btn_comptabilised_caisse_achat" style="font-size: 0.7em">
                                            <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.L_annuler}" onclick="dlgUnComptabilisePiece.show()" disabled="#{!managedReglementAchat.pieceAvance.comptabilise}"/>
                                        </p:contextMenu>
                                    </p:outputPanel> 
                                </p:outputPanel>
                                <p:commandButton title="#{lab.LCF_PRV_rattacher_reglement}" icon="ui-icon-pin-s"  actionListener="#{managedReglementAchat.openListBon(null, false,false)}"
                                                 rendered="#{managedReglementAchat.pieceAvance.id lt 1}"/>
                            </h:panelGroup>
                            <h:panelGrid columns="9" style="font-size: 0.8em;">
                                <h:outputText value="#{lab.LCF_PRV_fournisseur}" style="font-weight: bold"/>
                                <h:panelGroup>
                                    <h:outputText value="#{lab.LCF_PRV_facture}" style="font-weight: bold"/>
                                    <p:commandButton icon="ui-icon-note" type="button" style="width: 20px;height: 22px; float: right" title="#{lab.LCF_PRV_liste_facture}" onclick="dlgFacture.show()"/>
                                </h:panelGroup>
                                <h:outputText value="#{lab.LCF_PRV_mode_paiement}" style="font-weight: bold"/>
                                <h:outputText value="#{lab.L_montant}" style="font-weight: bold"/>
                                <h:outputText value="#{lab.LCF_PRV_a_payer_le}" style="font-weight: bold"/>
                                <h:outputText value="#{lab.LCF_PRV_caisse_paiement}" style="font-weight: bold"/>
                                <p:selectBooleanCheckbox value="#{managedReglementAchat.pieceAvance.acompte}" itemLabel="#{lab.LCF_PRV_paiement_acompte}"/>
                                <h:outputText value="#{lab.LC_PTS_ref_externe}" style="font-weight: bold"/>
                                <h:outputText value="" style="font-weight: bold"/>
                                <h:inputText value="#{managedReglementAchat.pieceAvance.fournisseur.codeFsseur}" disabled="#{managedReglementAchat.pieceAvance.id gt 0}"
                                             style="color: #{managedReglementAchat.pieceAvance.fournisseur.error?'red':''}" title="#{managedReglementAchat.pieceAvance.fournisseur.nom_prenom}">
                                    <p:ajax listener="#{managedReglementAchat.findByFournisseur(managedReglementAchat.pieceAvance.fournisseur.codeFsseur)}" event="valueChange" 
                                            update="@this table_reg_facture_FA"/>
                                </h:inputText>
                                <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.numDoc}" disabled="#{managedReglementAchat.pieceAvance.id gt 0}" id="txt_reference_facture_reg_FA">
                                    <p:ajax listener="#{managedReglementAchat.findOneFacture(managedReglementAchat.pieceAvance.docAchat.numDoc)}" event="valueChange" 
                                            update="@this table_reg_facture_FA"/>
                                </h:inputText>
                                <h:selectOneMenu value="#{managedReglementAchat.pieceAvance.mode.id}" valueChangeListener="#{managedReglementAchat.chooseModeReglement}">
                                    <f:selectItem itemLabel=" " itemValue="0" />
                                    <f:selectItems value="#{managedModeReglement.modes}" var="mdr_" itemLabel="#{mdr_.designation}"
                                                   itemValue="#{mdr_.id}" />
                                </h:selectOneMenu>
                                <pe:inputNumber value="#{managedReglementAchat.pieceAvance.montant}" style="width: 120px"/>
                                <p:calendar value="#{managedReglementAchat.pieceAvance.datePaiementPrevu}" size="8" pattern="dd-MM-yyyy"/>  
                                <h:selectOneMenu value="#{managedReglementAchat.pieceAvance.caisse.id}" style="width: 200px" id="chmp_caisse_piece_achat">
                                    <f:selectItem itemLabel=" " itemValue="0" />
                                    <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}"
                                                   itemValue="#{icaiss.id}" />          
                                    <f:selectItem itemLabel="----" itemValue="0" itemDisabled=""/>
                                    <f:selectItem itemLabel="--Tout afficher--" itemValue="-1" /> 
                                    <p:ajax event="valueChange" global="false" listener="#{managedReglementAchat.chooseCaisse()}" update="chmp_caisse_piece_achat"/>
                                </h:selectOneMenu>  
                                <h:inputText value="#{managedReglementAchat.pieceAvance.numPiece}" id="txt_acmpte_fsseur" readonly="true"/>                                                                            
                                <h:inputText value="#{managedReglementAchat.pieceAvance.numRefExterne}"/>                                                                            
                                <h:panelGroup style="margin-left: 100px">
                                    <p:commandButton icon="ui-icon-disk" style="float: right" value="#{lab.L_enregistrer}" actionListener="#{managedReglementAchat.createNewPiece(false)}" 
                                                     update=":main_form_regFA:table_regFA :main_form_regFA:txt_restToPlanFA zone_pcv_edit_pieceFA" />
                                </h:panelGroup>                                       
                            </h:panelGrid>
                        </p:outputPanel>
                    </div>
                    <p:outputPanel layout="block" id="all_bloc_info_reg_FA">
                        <h:panelGrid columns="4" cellpadding="0" cellspacing="0" id="zone_form_regFA"
                                     style="width: 50%; float: left; background: #aaa; font-size: 0.8em" >
                            <f:facet name="header">                            
                                <div align="left" style="padding: 5px; margin: 3px; margin-left: 0px; padding-left: 0px; cursor: pointer; width: 100%">
                                    <p:overlayPanel for="txt_caiss_numDocFA">
                                        <div class="headline_data">
                                            Contenu facture                                    
                                        </div>
                                        <p:dataTable value="#{managedReglementAchat.pieceAvance.docAchat.contenus}" var="icontent" 
                                                     rowIndexVar="line_c" >
                                            <p:column headerText="NÂ°" width="20">
                                                #{line_c+1}
                                            </p:column>
                                            <p:column headerText="#{lab.L_articles}" width="150">
                                                <h:outputText value="#{icontent.article.designation}" />
                                            </p:column>
                                            <p:column headerText="#{lab.L_quantite}" width="80" style="text-align: center">
                                                <h:outputText value="#{icontent.quantiteCommande}" />
                                            </p:column>
                                            <p:column headerText="#{lab.L_prix} " width="100" style="text-align: right">
                                                <h:outputText value="#{icontent.prixTotal}" converter="DNS"/>
                                            </p:column>
                                        </p:dataTable>
                                    </p:overlayPanel>
                                    <h:outputText value="#{managedReglementAchat.pieceAvance.docAchat.numDoc}" styleClass="style_reference" id="txt_caiss_numDocFA"/>
                                    <div style="float:right;margin-right: 10px;display: #{managedReglementAchat.pieceAvance.docAchat.id gt 0 ? 'inline': 'none'}">
                                        <span style="font-weight: normal">#{lab.LCF_PRV_statut_paiement} </span>
                                        <h:outputText value="#{managedReglementAchat.giveNameStatut(managedReglementAchat.pieceAvance.docAchat.statutRegle)}" styleClass="style_identifiant_white" style="float: right"/>
                                    </div>
                                </div>
                            </f:facet>
                            <span>#{lab.L_depot}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.depotReception.designation}" disabled="true"/>
                            <span>#{lab.L_montant}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.montant}" converter="DNS" styleClass="styleTotalNet" disabled="true"/>
                            <span>#{lab.LCF_PRV_fournisseur}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.fournisseur.nom_prenom}" disabled="true"/>
                            <span>#{lab.L_date} </span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.datePiece}"  converter="DATE" styleClass="styleTotalNet" disabled="true"/>
                            <span>#{lab.LCF_PRV_model_reglement}</span>
                            <h:selectOneMenu value="#{managedReglementAchat.pieceAvance.docAchat.modeReglement.id}">
                                <f:selectItem itemValue="0" itemLabel="" />
                                <f:selectItems value="#{managedModeReglement.models}" var="imdl" itemValue="#{imdl.id}" itemLabel="#{imdl.reference}" />
                                <p:ajax event="valueChange" listener="#{managedReglementAchat.chooseModelReglement()}" update="data_tranches_mdr_reg_achat txt_modelFA"/>
                            </h:selectOneMenu>
                            <span>#{lab.LCF_PRV_mode_paiement} </span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.mode.designation}" styleClass="styleTotalNet"
                                         disabled="true"/>
                            <span class="styleTotalFacture">#{lab.LC_PFV_total_facture}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.montantTTC}" style="text-align: right" styleClass="styleTotalFacture"
                                         disabled="true" converter="DNS"/>
                            <span>#{lab.LCF_PRV_caisse_banques} </span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.caisse.intitule}" styleClass="styleTotalNet"
                                         disabled="true"/>
                            <span class="styleTotalNet">#{lab.LCF_PRV_total_net_payer}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.montantNetApayer}" style="text-align: right" styleClass="styleTotalNet"
                                         disabled="true" converter="DNS"/>
                            <span style="font-weight: bold">#{lab.LCF_PRV_total_avance}</span>
                            <h:inputText value="#{managedReglementAchat.pieceAvance.docAchat.montantAvance}" style="text-align: right" styleClass="styleTotalAvance"
                                         disabled="true" converter="DNS"/>
                            <f:facet name="footer">                            
                                <div style="width: 100%">
                                    <p:overlayPanel for="txt_modelFA"> 
                                        <p:dataTable id="data_tranches_mdr_reg_achat" value="#{managedReglementAchat.pieceAvance.docVente.modeReglement.tranches}"
                                                     var="itreM" rowIndexVar="line_tr">
                                            <p:column headerText="NÂ°" width="20" style="text-align: center">
                                                #{line_tr+1}
                                            </p:column>
                                            <p:column headerText="#{lab.LCF_PRV_interval_jour}" width="80" style="text-align: center">
                                                #{itreM.intervalJour}
                                            </p:column>
                                            <p:column headerText="#{lab.LCF_PRV_a_payer}" width="80" style="text-align: right">
                                                #{itreM.taux}% 
                                            </p:column>
                                            <p:column headerText="#{lab.LCF_PGG_mode}" width="100" style="text-align: center">
                                                #{itreM.mode.designation}
                                            </p:column>
                                        </p:dataTable>
                                        <p:commandButton rendered="#{managedReglementAchat.pieceAvance.docVente.reglements.size() le 0}" icon="ui-icon-circle-arrow-s"  update=":main_form_regFA:table_regFA"
                                                         actionListener="#{managedReglementAchat.generatedAllpiece()}"  style="height: 21px; float: right; background: #FFF !important" />
                                    </p:overlayPanel>
                                </div>                           
                            </f:facet>
                        </h:panelGrid>
                        <p:dataTable value="#{managedReglementAchat.pieceAvance.docAchat.reglements}" var="ireg" style="margin-left: 50%" id="table_reg_facture_FA">
                            <p:column headerText="Id" styleClass="etat_#{ireg.statutPiece}">
                                <h:outputText value="#{ireg.id}" />
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PJV_comptabilise}" value="C" rendered="#{managedReglementAchat.isComptabilise(ireg)}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{ireg.statutPiece}">
                                <h:outputText value="#{ireg.numeroPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{ireg.statutPiece=='P'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" styleClass="etat_#{ireg.statutPiece}" width="100" style="text-align: center">
                                <h:outputText value="#{ireg.datePiece}" converter="DATE"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_mode_paiement}" styleClass="etat_#{ireg.statutPiece}">
                                <h:outputText value="#{ireg.model.designation}" />
                                <h:outputText rendered="#{ireg.notifs.id gt 0}" value="A" styleClass="statut" title="#{lab.LC_PFV_paiement_lie_acompte} #{ireg.notifs.acompte.numRefrence}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_caisse}" styleClass="etat_#{ireg.statutPiece}">
                                <h:outputText value="#{ireg.caisse.intitule}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="etat_#{ireg.statutPiece}" style="text-align: right">
                                <h:outputText value="#{ireg.montant}" converter="DNS"/>
                            </p:column>
                            <p:column width="20" headerText="#{lab.L_statut}" style="text-align: right" styleClass="etat_#{ireg.statutPiece}">
                                <h:outputText value="#{managedReglementAchat.giveNameStatut(ireg.statutPiece)}" style="font-weight: bold;" />
                            </p:column>
                        </p:dataTable>
                        <div class="headline_data" style="cursor: pointer;clear: left" onclick="slideZone()">
                            #{lab.LCF_PRV_autres_reglements} :<h:outputText value="[#{managedReglementAchat.pieceAchat.achat.modelReglement.reference}]" style="font-weight: bold;cursor: pointer" id="txt_modelFA" />
                            <p:commandButton  icon="ui-icon-circle-arrow-s"  update=":main_form_regFA:table_regFA" type="button"
                                              style="height: 21px; float: right; background: #FFF !important" />
                            <span style="clear: right"></span>
                            <h:panelGroup style="float: right">
                                #{lab.LCF_PRV_solde_acompte} :
                                <h:outputText value="#{managedReglementAchat.pieceAvance.docAchat.fournisseur.acompte}" converter="DNS" id="txt_restToPlanFA"/>
                            </h:panelGroup>
                        </div>
                        <p:dataTable value="#{managedReglementAchat.pieceAvance.compensations}" var="icomp" style="width: 50%" id="table_cmpens_p_vente">
                            <p:column headerText="Id" styleClass="etat_#{icomp.vente.statutPiece}">
                                <h:outputText value="#{icomp.id}" />
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PJV_comptabilise}" value="C" rendered="#{managedReglementVente.isComptabilise(icomp.vente)}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{icomp.vente.statutPiece}">
                                <h:outputText value="#{icomp.vente.numeroPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{icomp.vente.statutPiece=='P'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PJV_client}" styleClass="etat_#{icomp.vente.statutPiece}" width="100" style="text-align: center">
                                <h:outputText value="#{icomp.vente.vente.client.nom_prenom}" />
                            </p:column>
                            <p:column headerText="#{lab.LC_PCC_facture}" styleClass="etat_#{icomp.vente.statutPiece}">
                                <h:outputText value="#{icomp.vente.vente.numDoc}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="etat_#{icomp.vente.statutPiece}" style="text-align: right">
                                <h:outputText value="#{icomp.vente.montant}" converter="DNS"/>
                            </p:column> 
                            <p:column style="width: 5%;text-align: center" styleClass="etat_#{icomp.vente.statutPiece}">
                                <p:contextMenu for="btn_option_compensation_vente" event="left click" style="font-size: 0.8em" styleClass="context_menu">
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e"  actionListener="#{managedReglementAchat.onSelectDistantVente(icomp.vente)}"
                                                rendered="#{accesPage.compta_view_reg_vente}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_compensation_vente" type="button"/>
                            </p:column> 
                        </p:dataTable>
                    </p:outputPanel>                    
                </div>
                <div class="yvs_list_piece_achat" style="background: white;">
                    <p:dataTable value="#{managedReglementAchat.piecesCaisses}" var="iregV"   
                                 rowIndexVar="line_regFA" selectionMode="single" rowKey="#{iregV.id}" id="table_regFA">
                        <p:ajax event="rowSelect" listener="#{managedReglementAchat.selectOnePiece}" update=":main_form_regFA:zone_pcv_edit_pieceFA :main_form_regFA:all_bloc_info_reg_FA" oncomplete="slideZoneDown(); collapseForm('piece_achat')" />
                        <p:ajax event="rowUnselect" listener="#{managedReglementAchat.unselectOnePiece}" update=":main_form_regFA:zone_pcv_edit_pieceFA " oncomplete="slideZoneDown()" />
                        <p:column headerText="NÂ°" width="20">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iregV.new_}"/>
                            <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{iregV.id eq managedReglementAchat.pieceAvance.id}"/>
                            #{line_regFA+1}
                        </p:column>
                        <p:column headerText="Date" styleClass="etat_#{iregV.statutPiece}" style="text-align: center">
                            <h:outputText value="#{iregV.datePiece}" converter="DATE"/>
                            <h:panelGroup style="float: right">
                                <h:outputText value="BP" class="indice_statut" rendered="#{iregV.justify.id gt 0}" 
                                              title="Bon Provisoire NÂ° #{iregV.justify.bon.numero} (#{iregV.justify.bon.montant})"/>
                            </h:panelGroup>  
                        </p:column>
                        <p:column headerText="#{lab.L_numero}" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.numeroPiece}" />
                            <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{iregV.statutPiece=='P'}" style="float: right"/>
                        </p:column>  
                        <p:column headerText="#{lab.L_reference}" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.referenceExterne}" />
                            <h:outputText rendered="#{iregV.notifs.id gt 0}" value="A" styleClass="statut" title="#{lab.LC_PFA_paiement_lier_acompte} #{iregV.notifs.acompte.numRefrence}" style="float: right"/>
                        </p:column>  
                        <p:column headerText="#{lab.LCF_PRV_paiement_prevu_le}" styleClass="etat_#{iregV.statutPiece}" width="100" style="text-align: center">
                            <h:outputText value="#{(iregV.statutPiece eq constantes.STATUT_DOC_PAYER)?iregV.datePaiement:iregV.datePaimentPrevu}" converter="DATE"/>
                        </p:column>     
                        <p:column headerText="#{lab.LCF_PRV_facture}" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.achat.numDoc}" />
                        </p:column>
                        <p:column headerText="#{lab.LC_PRA_fournisseur}" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.achat.fournisseur.nom_prenom}" title="#{iregV.achat.fournisseur.codeFsseur}"/>
                            <h:panelGroup style="float: right">
                                <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{iregV.comptabilised}" styleClass="style_statut"/>
                            </h:panelGroup>
                        </p:column>      
                        <p:column headerText="#{lab.LCF_PRV_mode_paiement}" style="width: 10%" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.model.designation}" />
                        </p:column>                    
                        <p:column headerText="#{lab.LC_PFA_caisse}" styleClass="etat_#{iregV.statutPiece}">
                            <h:outputText value="#{iregV.caisse.intitule}" />
                        </p:column>   
                        <p:column headerText="#{lab.L_montant}" styleClass="etat_#{iregV.statutPiece}" style="text-align: right">
                            <h:outputText value="#{iregV.montant}" converter="DNS"/>
                        </p:column>
                        <p:column width="20" headerText="#{lab.L_statut}" style="text-align: right" styleClass="etat_#{iregV.statutPiece}">
                            <h:panelGroup style="float: left">
                                <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{iregV.comptabilise}" styleClass="style_statut"/>
                            </h:panelGroup>
                            <h:outputText value="#{managedReglementAchat.giveNameStatut(iregV.statutPiece)}" style="font-weight: bold;" />
                        </p:column>
                        <p:column width="20" style="text-align: center" styleClass="etat_#{iregV.statutPiece}">
                            <f:facet name="header">
                                <p:contextMenu for="btn_option_regPV1_" event="left click" style="font-size: 0.8em">                                            
                                    <p:menuitem value="#{lab.LCF_PRV_tout_supprimer}" icon="ui-icon-trash" global="false" onclick="dlgConfirmDelAll.show()"/>
                                    <p:menuitem icon="ui-icon-link" value="#{lab.LC_PFA_etat_comptabiliser}" global="false" onclick="dglEtatComptabilised.show()"/>
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="btn_option_regPV1_" type="button"/>
                            </f:facet>
                            <p:contextMenu for="btn_option_regPV1" event="left click" style="font-size: 0.8em"> 
                                <p:menuitem value="#{(iregV.statutPiece=='P')?'Annuler':'Encaisser/Valider'}" icon="#{(iregV.statutPiece=='P')?'ui-icon-circle-close':'ui-icon-circle-check'}" 
                                            actionListener="#{managedReglementAchat.openConfirmrPaiement(iregV,'F', true)}" rendered="#{iregV.id gt 0}" update="table_regFA"/>   
                                <p:menuitem value="#{lab.LC_PFA_equilibrer}" icon="ui-icon-arrowthick-1-e" actionListener="#{managedCompensation.onSelectAchat(iregV)}" update=":select_rega_compensation"
                                            rendered="#{iregV.model.typeReglement == constantes.MODE_PAIEMENT_COMPENSATION}"/>
                                <p:separator style="width: 98%;margin: auto"/>
                                <p:menuitem value="#{lab.LC_PFA_aller_aux_cheques}" icon="ui-icon-arrowthick-1-e"  actionListener="#{managedReglementAchat.onSelectDistantReglement(iregV)}"
                                            rendered="#{accesPage.compta_view_reg_vente and iregV.model.typeReglement == constantes.MODE_PAIEMENT_BANQUE}"/>
                                <p:menuitem value="#{lab.LC_PFA_aller_acompte}" icon="ui-icon-arrowthick-1-e"  actionListener="#{managedOperationFournisseur.onSelectDistant(iregV.notifs.acompte)}"
                                            rendered="#{accesPage.compta_ope_fsseur and iregV.notifs.id gt 0}"/>
                                <p:menuitem value="#{lab.LCF_PRV_rattacher_bon}" icon="ui-icon-link" actionListener="#{managedReglementAchat.openListBon(iregV, true,false)}" rendered="#{iregV.justify == null}"/>
                                <p:menuitem value="#{lab.LCF_PRV_changer_bon}" icon="ui-icon-link" actionListener="#{managedReglementAchat.openListBon(iregV, true,true)}" rendered="#{(iregV.justify ne null) and (iregV.statutPiece ne constantes.STATUT_DOC_PAYER)}"/>
                                <p:menuitem value="#{lab.LCF_PRV_annuler_bon}" icon="ui-icon-closethick" actionListener="#{managedReglementAchat.mooveBon(iregV)}"
                                            rendered="#{(iregV.justify ne null) and (iregV.statutPiece ne constantes.STATUT_DOC_PAYER)}" update="table_regFA"/>
                                <p:menuitem value="#{lab.LC_PFA_dissocier}" icon="ui-icon-pin-w" actionListener="#{managedReglementAchat.dissocierNotif(iregV)}" rendered="#{iregV.notifs.id gt 0}"
                                            update="table_regFA" title="#{lab.LCF_PRV_dissocier_acompte}"/>
                                <p:separator  />
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementAchat.openConfirmDelePC(iregV)}" />
                                <p:separator  />
                                <p:menuitem value="#{lab.L_telecharger}" title="#{lab.LCF_PRV_telecharger_piece}" action="#{managedReglementAchat.print(iregV)}" ajax="false" icon="ui-icon-arrowthickstop-1-s"/> 
                            </p:contextMenu> 
                            <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="btn_option_regPV1" type="button"
                                             />
                        </p:column>
                        <f:facet name="footer">                                        
                            <div align="right">
                                <p:commandButton value="#{lab.L_enregistrer}" icon="ui-icon-disk"  rendered="#{managedReglementAchat.displayBtnSave}" 
                                                 actionListener="#{managedReglementAchat.saveModelreglement()}" update=":main_form_regFA:zone_form_regFA" oncomplete="slideZoneUp()"/>
                            </div>
                        </f:facet>
                    </p:dataTable>       
                    <span class="nbSelectfacture_achat" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedReglementAchat.loadAllPieces(false, false)}" update=":main_form_regFA:table_regFA" icon="ui-icon-circle-triangle-w" disabled="#{managedReglementAchat.paginator.disPrev}"/>
                        <p:outputPanel >
                            <p:inplace label="#{managedReglementAchat.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                <pe:inputNumber value="#{managedReglementAchat.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                    <p:ajax event="blur" listener="#{managedReglementAchat.gotoPagePaginator()}" update=":main_form_regFA:table_regFA"/>
                                </pe:inputNumber>
                            </p:inplace><p:outputLabel value="/#{managedReglementAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                        </p:outputPanel>
                        <p:commandButton actionListener="#{managedReglementAchat.loadAllPieces(true, false)}"   update=":main_form_regFA:table_regFA" icon="ui-icon-circle-triangle-e" disabled="#{managedReglementAchat.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedReglementAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReglementAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedReglementAchat.paginations}"/>
                            <p:ajax event="valueChange"   update=":main_form_regFA:table_regFA"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC"> 
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">
                <div class="yvs_form_piece_achat display_auteur" align="right"  style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedReglementAchat.pieceAchat.dateSave}" converter="LD"  styleClass="valeur" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedReglementAchat.pieceAchat.dateUpdate}" converter="LD" styleClass="valeur" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedReglementAchat.pieceAchat.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <h:panelGrid id="blog_search_piece_fa" columns="9" style="font-size: 0.8em" cellpadding="0" cellspacing="0">
                    <h:outputText value="" />
                    <h:outputText value="#{lab.L_date}" />
                    <h:panelGroup>
                        <h:outputText value="#{lab.L_statut}" />
                        <h:selectOneMenu value="#{managedReglementAchat.operateurStatut}">
                            <f:selectItem itemValue="=" itemLabel="#{lab.L_egale}"/>
                            <f:selectItem itemValue="!=" itemLabel="#{lab.L_different}" itemDescription="#{lab.L_different}"/>
                            <p:ajax event="valueChange"  update=":main_form_regFA:table_regFA txt_zone_montant" listener="#{managedReglementAchat.addParamStatut()}"
                                    oncomplete="collapseList('piece_achat')"/>
                        </h:selectOneMenu>
                    </h:panelGroup>
                    <h:outputText value="#{lab.LCF_PRV_mode_paiement}" />
                    <h:outputText value="#{lab.LCF_PRV_fournisseur}" />
                    <h:outputText value="#{lab.LCF_PRV_caisses}" />
                    <h:panelGroup>
                        <h:outputText value="#{lab.L_montant}" />
                        <h:selectOneMenu value="#{managedReglementAchat.operateurMontant}">
                            <f:selectItem itemValue="=" itemLabel="#{lab.L_egale}"/>
                            <f:selectItem itemValue="BETWEEN" itemLabel="#{lab.LCF_PRV_entre}"/>
                            <f:selectItem itemValue="&lt;" itemLabel="#{lab.LCF_PRV_tout_inferieur}" />
                            <f:selectItem itemValue="&gt;" itemLabel="#{lab.LC_PCOM_superieur}" />
                            <p:ajax event="valueChange" update=":main_form_regFA:table_regFA txt_zone_montant blog_search_piece_fa"
                                    listener="#{managedReglementAchat.addParamMontant()}" oncomplete="collapseList('piece_achat')"/>
                        </h:selectOneMenu>
                    </h:panelGroup>
                    <h:outputText value="#{lab.L_reference}" />
                    <span>&nbsp;</span>
                    <p:commandButton icon="ui-icon-bullet" actionListener="#{managedReglementAchat.cleanParametrePiece()}" title="#{lab.L_reset_param}" style="width: 22px; height: 22px" 
                                     update="blog_search_piece_fa :main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')"/>
                    <h:panelGroup  >
                        <h:selectBooleanCheckbox value="#{managedReglementAchat.dateSearch}" style="margin-top: 2px;float: right">
                            <p:ajax event="valueChange" listener="#{managedReglementAchat.addParamDates}" oncomplete="collapseList('piece_achat')" 
                                    update="zone_search_by_date_regA :main_form_regFA:table_regFA"/>
                        </h:selectBooleanCheckbox>
                        <h:panelGroup id="zone_search_by_date_regA">
                            <p:calendar value="#{managedReglementAchat.dateDebutSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReglementAchat.dateSearch}" size="8">
                                <p:ajax event="dateSelect" listener="#{managedReglementAchat.addParamDates}" oncomplete="collapseList('piece_achat')"
                                        update=":main_form_regFA:table_regFA" />
                            </p:calendar>
                            <p:spacer width="5px" style="background: black"/>
                            <p:calendar value="#{managedReglementAchat.dateFinSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReglementAchat.dateSearch}" size="8">
                                <p:ajax event="dateSelect" listener="#{managedReglementAchat.addParamDates}" oncomplete="collapseList('piece_achat')"
                                        update=":main_form_regFA:table_regFA" />
                            </p:calendar>
                        </h:panelGroup>
                    </h:panelGroup>
                    <h:selectOneMenu value="#{managedReglementAchat.statut_}"   style="min-width: 120px">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.STATUT_DOC_EDITABLE}"/>
                        <f:selectItem itemLabel="#{lab.L_en_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                        <f:selectItem itemLabel="#{lab.L_regler}" itemValue="#{constantes.STATUT_DOC_PAYER}"/>
                        <p:ajax event="valueChange"  update=":main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')" listener="#{managedReglementAchat.addParamStatut()}"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu value="#{managedReglementAchat.modeFind}" valueChangeListener="#{managedReglementAchat.addParamModePaiement}" 
                                     >
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{0}"/>
                        <f:selectItems value="#{managedModeReglement.modes}" var="imdl_" itemValue="#{imdl_.id}" itemLabel="#{imdl_.designation}" />
                        <p:ajax event="valueChange" update=":main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')"/>
                    </h:selectOneMenu>
                    <h:inputText value="#{managedReglementAchat.fournisseurF}" style="width: 100%">
                        <p:ajax event="blur" listener="#{managedReglementAchat.addParamFournisseur()}" oncomplete="collapseList('piece_achat')"
                                update=":main_form_regFA:table_regFA"/>
                    </h:inputText> 
                    <h:selectOneMenu value="#{managedReglementAchat.caisseF}" valueChangeListener="#{managedReglementAchat.addParamCaisse}" 
                                     >
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{0}"/>
                        <f:selectItems value="#{managedCaisses.caisses}" var="ic_" itemValue="#{ic_.id}" itemLabel="#{ic_.intitule}" />
                        <p:ajax event="valueChange" update=":main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')"/>
                    </h:selectOneMenu>
                    <h:panelGroup id="txt_zone_montant">
                        <p:inputText value="#{managedReglementAchat.montantF}" style="width: 90px">
                            <p:ajax event="blur" listener="#{managedReglementAchat.addParamMontant()}" update=":main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')"/>
                        </p:inputText>
                        <p:inputText value="#{managedReglementAchat.montantF1}" rendered="#{managedReglementAchat.operateurMontant eq 'BETWEEN'}" style="width: 90px">
                            <p:ajax event="blur" listener="#{managedReglementAchat.addParamMontant()}" update=":main_form_regFA:table_regFA" oncomplete="collapseList('piece_achat')"/>
                        </p:inputText>
                    </h:panelGroup>
                    <h:inputText value="#{managedReglementAchat.numPieceF}">
                        <p:ajax event="blur" listener="#{managedReglementAchat.addParamReference()}" oncomplete="collapseList('piece_achat')"
                                update=":main_form_regFA:table_regFA"/>
                    </h:inputText>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
