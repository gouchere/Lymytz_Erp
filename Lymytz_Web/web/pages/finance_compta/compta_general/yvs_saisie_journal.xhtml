
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"> 
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Saisie Libre','modCompta', 'smenSaisieJournal', true)}
    </ui:define>      
    <ui:define name="contents">
        #{managedSalaire.doNothing()}
        #{managedVente.doNothing()}
        #{managedFactureVente.doNothing()}
        #{managedFactureAchat.doNothing()}
        #{managedDocDivers.doNothing()}
        #{managedReglementMission.doNothing()}
        #{managedReglementAchat.doNothing()}
        #{managedReglementVente.doNothing()}
        #{managedVirement.doNothing()}
        #{managedOperationClient.doNothing()}   
        #{managedOperationFournisseur.doNothing()}   


        #{managedExercice.loadAllExrecice()}
        #{managedJournaux.loadAllActif()}
        #{managedCentreAnalytique.loadAllByNamedQuery()}

        <script type="text/javascript">
            $(function() {
                collapseForm('saisieJ');
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 175);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
            function _slideShow(node) {

            }
        </script>  
        <h:form prependId="false" >
            <p:dialog header="#{lab.LCF_PR_liste_comptes}" widgetVar="dlgCmpteG" width="55%" closeOnEscape="true" footer="&copy; Lymytz" >
                <div class="dlg_part_fixe">
                    <p:watermark for="txt_cmpte_fin_by_numC" value="#{lab.L_rechercher}..." />
                    <h:inputText value="#{managedCompte.numCompteF}" style="font-size: 0.7em" id="txt_cmpte_fin_by_numC">
                        <p:ajax event="valueChange" listener="#{managedCompte.addParamNumCompte(managedCompte.numCompteF)}"  />
                    </h:inputText>
                    <p:outputPanel style="float: right" layout="block" autoUpdate="true">
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(false)}" update="table_cpt_compte_change" icon="ui-icon-circle-triangle-w" disabled="#{managedCompte.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedCompte.paginator.currentPage}/#{managedCompte.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(true)}" update="table_cpt_compte_change" icon="ui-icon-circle-triangle-e" disabled="#{managedCompte.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedCompte.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedCompte.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedCompte.paginations}"/>
                            <p:ajax event="valueChange" update="table_cpt_compte_change"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div>
                <p:dataTable value="#{managedCompte.listComptes}" var="cptG" emptyMessage="Aucun compte" 
                             rowIndexVar="line_cg" rowKey="#{cptG.id}" selectionMode="single" id="table_cpt_compte_change">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.choisirCompteChange}" 
                            oncomplete="dlgCmpteG.hide()"/>
                    <p:column headerText="N°" width="20" style="text-align: center">
                        #{line_cg+1}
                    </p:column>
                    <p:column headerText="#{lab.L_numero}" width="100" >
                        #{cptG.numCompte}
                    </p:column>
                    <p:column headerText="#{lab.L_intitule}" width="200" >
                        #{cptG.intitule}
                    </p:column>
                    <p:column headerText="#{lab.L_type}" width="100" >
                        #{cptG.typeCompte}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PTT_repport}" width="100" >
                        #{cptG.typeReport}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PPC_compte_general}" width="100" >
                        #{cptG.compteGeneral.numCompte}
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="Modifier le compte général" width="40%"  closeOnEscape="true" widgetVar="dlgEditCompte" resizable="false"> 
                <h:panelGrid columns="1" style="width: 100%" cellpadding="0" cellspacing="0">  
                    <span>#{lab.LCF_POD_compte_general} </span>   
                    <h:panelGroup id="bloc_compte_change">
                        <h:inputText value="#{managedSaisiePiece.compteChange.numCompte}"  style="color: #{managedSaisiePiece.compteChange.error?'red':'normal'};" tabindex="60"> 
                            <p:ajax event="valueChange" listener="#{managedSaisiePiece.ecouteSaisierCompteChange()}" update="bloc_compte_change"/>
                        </h:inputText> 
                        <p:commandButton icon="ui-icon-note" style="width: 20px; height: 20px; margin-left: 5px" type="button" onclick="dlgCmpteG.show()"/>  
                        <h:outputText value="#{managedSaisiePiece.compteChange.intitule}" style="margin-left: 5px; font-size: 0.7em"/>                                                        
                    </h:panelGroup>
                    <f:facet name="footer">
                        <p:commandButton value="Appliquer" icon="ui-icon-check" style="float: right" oncomplete="dlgEditCompte.hide()"
                                         actionListener="#{managedSaisiePiece.changeCompteForContent()}"/>
                    </f:facet>  
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="Modifier le compte général" width="40%"  closeOnEscape="true" widgetVar="dlgEditJournal" resizable="false"> 
                <h:panelGrid columns="1" style="width: 100%" cellpadding="0" cellspacing="0">  
                    <span>Journal </span>   
                    <h:selectOneMenu value="#{managedSaisiePiece.journalChange.id}" style="width: 100%">
                        <f:selectItem itemValue="0" itemLabel="" />
                        <f:selectItems value="#{managedJournaux.journaux}" var="ijj" itemValue="#{ijj.id}" itemLabel="#{ijj.intitule}" />
                        <p:ajax event="valueChange" listener="#{managedSaisiePiece.chooseJournalChange()}" />
                    </h:selectOneMenu>
                    <f:facet name="footer">
                        <p:commandButton value="Appliquer" icon="ui-icon-check" style="float: right" oncomplete="dlgEditJournal.hide()"
                                         actionListener="#{managedSaisiePiece.changeJournalForPiece()}"/>
                    </f:facet>  
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_saisieJ" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">  
                    <span>Afficher les pièces déséquilibrées</span>
                    <h:selectOneMenu value="#{managedSaisiePiece.displayPieceDesequilibrer}" style="min-width: 120px">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_oui.toUpperCase()}" itemValue="#{true}"/>
                        <f:selectItem itemLabel="#{lab.L_non.toUpperCase()}" itemValue="#{false}"/>
                        <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamDisplayDesequilibrer()}"   />
                    </h:selectOneMenu>
                    <h:panelGroup>
                        <h:selectBooleanCheckbox value="#{managedSaisiePiece.dateSaveSearch}">
                            <p:ajax event="valueChange" listener="#{managedSaisiePiece.findByDateSave()}"  update="blog_date_save_search_saisieJ"/>
                        </h:selectBooleanCheckbox>
                        <h:outputText value="#{lab.LCF_PSL_date_saisie}" />
                    </h:panelGroup> 
                    <h:panelGroup id="blog_date_save_search_saisieJ">
                        <p:calendar value="#{managedSaisiePiece.debutSaveSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateSaveSearch}" size="10" style="font-size: 0.8em">
                            <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDateSave}" />
                        </p:calendar>
                        <p:spacer width="5px" style="background: black"/>
                        <p:calendar value="#{managedSaisiePiece.finSaveSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateSaveSearch}" size="10" style="font-size: 0.8em">
                            <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDateSave}" />
                        </p:calendar>
                    </h:panelGroup>   
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LCF_PSL_choisir_profil}"  widgetVar="dlgProfilTiers" width="70%" closeOnEscape="true" footer="&copy; Lymytz 2014">
                <p:dataTable value="#{managedSaisiePiece.content.compteT.profils}" var="ipro" rowIndexVar="line_p" rowKey="#{ipro.numero}" selectionMode="single"
                             id="table_profils_tiers">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.choisirProfils}"  />
                    <p:column headerText="N°" width="20">
                        <span >#{line_p+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_type}" width="100" style="font-weight: bold">
                        <span>#{ipro.type}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_code}" width="100">
                        <span >#{ipro.code}</span>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSL_matricule}" width="100">
                        <span >#{ipro.matricule}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_noms_prenoms}">
                        <span >#{ipro.nomPrenom}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_compte}">
                        <span title="#{ipro.compte.intitule}">#{ipro.compte.numCompte}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                        <h:graphicImage library="img"  name="#{(ipro.actif)?'vu.png':'vu_non.png'}" width="15" height="15"/>
                    </p:column>                    
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_affectation">
            <p:dialog widgetVar="dlgAffectation" width="70%" closeOnEscape="true" footer="&copy; Lymytz">
                <f:facet name="header">
                    <span>Affectation analytique pour '<h:outputText id="title_affectation" value="#{managedSaisiePiece.content.libelle}" style="font-weight: bold;font-size: 0.9em"/>'</span>
                </f:facet>
                <h:panelGrid columns="1" id="blog_affectation" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <div align="left">
                            <h:panelGrid id="form_affectation" styleClass="yvs_nostyle" columns="5" cellpadding="0" cellspacing="0" style="float: left">
                                <h:outputText value="#{lab.LCF_PSL_date_saisie}"/>
                                <h:outputText value="#{lab.LDB_PP_centre_analytique}"/>
                                <h:outputText value="#{lab.LDB_PUM_coefficient}"/>
                                <h:outputText value="#{lab.L_valeur}"/>
                                <h:outputText value=""/>
                                <p:calendar value="#{managedSaisiePiece.contentAnal.dateSasie}" pattern="dd-MM-yyyy" size="10"/>
                                <h:selectOneMenu value="#{managedSaisiePiece.contentAnal.centre.id}" style="min-width:140px">
                                    <f:selectItem itemLabel="--" itemValue="#{0}"/>
                                    <f:selectItems value="#{managedCentreAnalytique.centres}" var="centr"
                                                   itemLabel="#{centr.designation}" itemValue="#{centr.id}"/>
                                    <p:ajax event="valueChange" global="false" listener="#{managedSaisiePiece.chooseCentre()}"/>
                                </h:selectOneMenu>
                                <h:panelGroup>
                                    <h:inputText value="#{managedSaisiePiece.contentAnal.coefficient}" style="width:100px;text-align: center" >
                                        <p:ajax event="blur" global="false" update="txt_debit_affectation txt_credit_affectation" listener="#{managedSaisiePiece.blurCoefficientAffection()}"/>                            
                                    </h:inputText> %
                                </h:panelGroup>
                                <h:inputText id="txt_debit_affectation" value="#{managedSaisiePiece.contentAnal.debit}" style="width:150px" rendered="#{managedSaisiePiece.content.debit ne 0}"/>
                                <h:inputText id="txt_credit_affectation" value="#{managedSaisiePiece.contentAnal.credit}" style="width:150px" rendered="#{managedSaisiePiece.content.debit eq 0}"/>
                                <p:commandButton icon="ui-icon-plus" value="#{lab.L_ajouter}" actionListener="#{managedSaisiePiece.addNewContentAnalytique()}" update="blog_affectation"/>
                            </h:panelGrid> 
                            <p:commandButton icon="ui-icon-arrow-4-diag" value="#{lab.LCF_PSL_eclater_affectation}" actionListener="#{managedSaisiePiece.eclaterAffectation()}"
                                             style="float: right;margin-top: 15px" update="data_affectation"/>
                        </div>
                    </f:facet>
                    <p:dataTable id="data_affectation" value="#{managedSaisiePiece.content.analytiques}" var="aff" rowIndexVar="xAff" rowKey="#{aff.id}"
                                 selectionMode="single">
                        <p:ajax event="rowSelect" global="false" listener="#{managedSaisiePiece.loadOnViewAffectation}" update=":main_affectation:form_affectation"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedSaisiePiece.unLoadOnViewAffectation}" update=":main_affectation:form_affectation"/>
                        <p:column headerText="N°" width="30">
                            <span>#{xAff+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_date_saisie}" style="text-align: center;width: 20%">
                            <h:outputText value="#{aff.dateSaisie}" converter="DATE"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PVC_centre}">
                            <h:outputText value="#{aff.centre.designation}"/>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PTA_coef}." style="text-align: right;width: 20%">
                            <h:outputText value="#{aff.coefficient}" converter="DNS"/>
                        </p:column>
                        <p:column headerText="#{lab.L_valeur}" style="text-align: right;width: 20%">
                            <h:outputText value="#{aff.debit}" converter="DNS" rendered="#{aff.debit != 0}"/>
                            <h:outputText value="#{aff.credit}" converter="DNS" rendered="#{aff.credit != 0}"/>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <p:commandButton icon="ui-icon-circle-minus" title="#{lab.LCF_PSL_enlever}" actionListener="#{managedSaisiePiece.deleteBeanAffectation(aff)}"
                                             style="height: 20px;width: 20px" update=":main_affectation:blog_affectation"/>
                        </p:column>
                    </p:dataTable>
                    <f:facet name="footer">
                        <div align="left">
                            <h:panelGroup>
                                <span>#{lab.LCF_PSL_montant_contenu} : </span>
                                <h:outputText style="font-weight: bold" value="#{managedSaisiePiece.content.debit}" converter="DNS" rendered="#{managedSaisiePiece.content.debit != 0}"/>
                                <h:outputText style="font-weight: bold" value="#{managedSaisiePiece.content.credit}" converter="DNS" rendered="#{managedSaisiePiece.content.credit != 0}"/>
                                <span>  /  </span>
                                <span>#{lab.LCF_PSL_affectation} : </span>
                                <h:outputText style="font-weight: bold" value="#{managedSaisiePiece.valeurAffectation()}" converter="DNS"/>
                            </h:panelGroup>
                            <p:commandButton icon="ui-icon-disk" value="#{lab.L_appliquer}" actionListener="#{managedSaisiePiece.saveAllAffectation()}" style="float:right" disabled="#{managedSaisiePiece.content.id lt 1}"/>
                        </div>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form> 

        <h:form prependId="false" id="form_cpt">
            <p:dialog widgetVar="dlgCompteT"  width="60%" closeOnEscape="true" footer="&copy; Lymytz" header="Liste des tiers">
                <div class="dlg_part_fixe">
                    <p:watermark for="txt_saisieJ_finD_by_numT" value="#{lab.L_rechercher}..." />
                    <h:inputText value="#{managedTiers.numSearch_}" style="font-size: 0.7em" id="txt_saisieJ_finD_by_numT">
                        <p:ajax event="valueChange" listener="#{managedTiers.searchByNum()}" update="form_table_compteT_saisieJ" />
                    </h:inputText>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedTiers.init(false)}" global="false" update="form_table_compteT_saisieJ" icon="ui-icon-circle-triangle-w" disabled="#{managedTiers.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedTiers.paginator.currentPage}/#{managedTiers.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTiers.init(true)}" global="false" update="form_table_compteT_saisieJ" icon="ui-icon-circle-triangle-e" disabled="#{managedTiers.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedTiers.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTiers.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedTiers.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="form_table_compteT_saisieJ"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </div>
                <p:dataTable id="form_table_compteT_saisieJ" value="#{managedTiers.listTiers}" var="clt" rowKey="#{clt.id}" rowIndexVar="cltIdx"
                             selectionMode="single" emptyMessage="#{lab.LCF_PPC_aucun_tiers}">
                    <p:ajax event="rowSelect"  listener="#{managedSaisiePiece.chooseCompteT}"  
                            update=":main_piece_compta:txt_zone_saisie_ct"  oncomplete="dlgCompteT.hide()" />
                    <p:column width="30">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_code}" style="width: 15%">
                        <span>#{clt.codeTiers}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_nom}">
                        <span>#{clt.nom_prenom}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_region}" style="width: 30%">
                        <span>#{clt.region}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                        <h:graphicImage library="img"  name="#{(clt.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                    </p:column>
                </p:dataTable>   
            </p:dialog>
        </h:form>
        <h:form prependId="false" >
            <p:dialog header="#{lab.LDB_PTT_liste_comptes}" widgetVar="dlgCompteG" width="55%" closeOnEscape="true"
                      footer="&copy; Lymytz" >
                <div class="dlg_part_fixe">
                    <p:watermark for="txt_saisieJ_fin_by_numG" value="#{lab.L_rechercher}..." />
                    <h:inputText value="#{managedCompte.numCompteF}" style="font-size: 0.7em" id="txt_saisieJ_fin_by_numG">
                        <p:ajax event="valueChange" listener="#{managedCompte.addParamNumCompte(managedCompte.numCompteF)}" update="form_table_compteG_saisieJ" />
                    </h:inputText>
                    <p:outputPanel style="float: right" layout="block" autoUpdate="true">
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(false)}" update="form_table_compteG_saisieJ" icon="ui-icon-circle-triangle-w" disabled="#{managedCompte.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedCompte.paginator.currentPage}/#{managedCompte.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedCompte.pagineDataCompte(true)}" update="form_table_compteG_saisieJ" icon="ui-icon-circle-triangle-e" disabled="#{managedCompte.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedCompte.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedCompte.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedCompte.paginations}"/>
                            <p:ajax event="valueChange" update="form_table_compteG_saisieJ"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div>
                <p:dataTable value="#{managedCompte.listComptes}" var="cptG" emptyMessage="Aucun compte" 
                             rowIndexVar="line_cg" rowKey="#{cptG.id}" selectionMode="single" id="form_table_compteG_saisieJ">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.chooseCompteG}"  oncomplete="dlgCompteG.hide()"/>
                    <p:column headerText="N°" width="20" style="text-align: center">
                        #{line_cg+1}
                    </p:column>
                    <p:column headerText="#{lab.L_numero}" width="100" >
                        #{cptG.numCompte}
                    </p:column>
                    <p:column headerText="#{lab.L_intitule}" width="200" >
                        #{cptG.intitule}
                    </p:column>
                    <p:column headerText="#{lab.L_type}" width="100" >
                        #{cptG.typeCompte}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PTT_repport}" width="100" >
                        #{cptG.typeReport}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PTT_compte_g}" width="100" >
                        #{cptG.compteGeneral.numCompte}
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LCF_PSL_schema_predefini}" width="40%" closeOnEscape="true" modal="true" widgetVar="dlgModelSaisie">
                <p:dataTable value="#{managedModeleSaisie.modelesSaisies}" var="imodel" rowIndexVar="line_m" rowKey="#{imodel.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewModel}" oncomplete="dlgModelSaisie.hide()"/>
                    <p:column headerText="N°">
                        #{line_m+1}
                    </p:column>
                    <p:column headerText="#{lab.L_intitule}">
                        #{imodel.intitule}
                    </p:column>
                    <p:column headerText="#{lab.L_type}">
                        #{imodel.typeModele}
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_export_compta">
            <p:dialog header="#{lab.LCF_PSL_model_exportation}" width="40%" closeOnEscape="true" widgetVar="dlgListExport">
                <p:dataTable id="data_model_export_compta" value="#{managedSaisiePiece.exports}" var="exp" rowIndexVar="Idx" rowKey="#{exp.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnExport}" global="false" update=":main_export_compta:btn_export_compta"/>
                    <p:ajax event="rowUnselect" listener="#{managedSaisiePiece.unLoadOnExport}" global="false" update=":main_export_compta:btn_export_compta"/>
                    <p:column headerText="N°">
                        #{Idx+1}
                    </p:column>
                    <p:column headerText="#{lab.L_reference}">
                        #{exp.reference}
                    </p:column>
                    <p:column headerText="#{lab.L_intitule}">
                        #{exp.libelle}
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSL_extension}">
                        #{exp.format}
                    </p:column>
                </p:dataTable>
                <f:facet name="footer">
                    <p:commandButton style="float: right;margin-top: -3px" value="#{lab.LDB_PA_exporter}" ajax="false" id="btn_export_compta"
                                     actionListener="#{managedSaisiePiece.export(true)}" disabled="#{managedSaisiePiece.model == null}"/>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LCF_PSL_selectionner_type_document}" closeOnEscape="true" widgetVar="dlgChooseType" resizable="false">
                <p:commandButton value="#{lab.LCF_PSL_operations_diverses}" actionListener="#{managedSaisiePiece.loadOdWaitComptabilised()}"
                                 oncomplete="dlgListComptaOd.show(); dlgChooseType.hide();" style="width: 99%;margin: auto" 
                                 update=":main-data_od:btn-lier_od_compta :main-data_od:data-compta_od :main-data_od:blog-compta_od"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-data_od">
            <p:dialog header="#{lab.LCF_PSL_selectionner_document}" width="80%" closeOnEscape="true" widgetVar="dlgListComptaOd">
                <h:panelGrid id="blog-compta_od" columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="6" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGroup>
                            <h:selectBooleanCheckbox value="#{managedDocDivers.date}">
                                <p:ajax event="valueChange" listener="#{managedDocDivers.addParamDate()}" update="blog_date_search_others :main-data_od:data-compta_od"  />
                            </h:selectBooleanCheckbox>
                            <h:outputText value="#{lab.L_date}" />
                        </h:panelGroup>
                        <h:outputText value="#{lab.LCF_PLC_tiers}" />
                        <h:outputText value="#{lab.L_compte}" />
                        <h:panelGroup>
                            <h:outputText value="#{lab.L_statut}" style="float:left;margin-top: 2px"/>
                            <h:selectOneMenu value="#{managedDocDivers.egaliteStatut}" style="float:right;margin-right: 5px;">
                                <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                <p:ajax event="valueChange" listener="#{managedDocDivers.addParamStatut()}" update=":main-data_od:data-compta_od"  />
                            </h:selectOneMenu>  
                        </h:panelGroup>
                        <h:panelGroup>
                            <h:outputText value="#{lab.LC_PFA_regler}" style="float:left;margin-top: 2px"/>
                            <h:selectOneMenu value="#{managedDocDivers.egaliteStatutReg}" style="float:right;margin-right: 5px;">
                                <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                <p:ajax event="valueChange" listener="#{managedDocDivers.addParamStatutRegle(true)}" update=":main-data_od:data-compta_od" />
                            </h:selectOneMenu>  
                        </h:panelGroup>
                        <h:outputText value="#{lab.L_reference}" />
                        <h:panelGroup id="blog_date_search_others">
                            <p:calendar value="#{managedDocDivers.dateDebut}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedDocDivers.date}" size="10" style="font-size: 0.8em">
                                <p:ajax event="dateSelect" listener="#{managedDocDivers.addParamDate()}" update=":main-data_od:data-compta_od" />
                            </p:calendar>
                            <p:spacer width="5px" style="background: black"/>
                            <p:calendar value="#{managedDocDivers.dateFin}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedDocDivers.date}" size="10" style="font-size: 0.8em">
                                <p:ajax event="dateSelect" listener="#{managedDocDivers.addParamDate()}" update=":main-data_od:data-compta_od" />
                            </p:calendar>
                        </h:panelGroup>
                        <h:inputText value="#{managedDocDivers.codeTiers}">
                            <p:ajax event="blur" listener="#{managedDocDivers.addParamTiers()}" update=":main-data_od:data-compta_od" />
                        </h:inputText>
                        <h:inputText value="#{managedDocDivers.numCompte}">
                            <p:ajax event="blur" listener="#{managedDocDivers.addParamCompte()}" update=":main-data_od:data-compta_od" />
                        </h:inputText> 
                        <h:selectOneMenu value="#{managedDocDivers.statutSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                            <f:selectItem itemLabel="#{lab.L_annuler.toUpperCase()}" itemValue="#{constantes.ETAT_ANNULE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                            <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                            <f:selectItem itemLabel="" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_plus}" itemValue="Z"/>
                            <p:ajax event="valueChange" listener="#{managedDocDivers.addParamStatut()}" update=":main-data_od:data-compta_od" />
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{managedDocDivers.statutRegSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_en_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                            <f:selectItem itemLabel="#{lab.LC_PEV_regles}" itemValue="#{constantes.STATUT_DOC_PAYER}"/>
                            <f:selectItem itemLabel="" itemValue="#{null}"/>
                            <p:ajax event="valueChange" listener="#{managedDocDivers.addParamStatutRegle(true)}" update=":main-data_od:data-compta_od" />
                        </h:selectOneMenu> 
                        <h:inputText value="#{managedDocDivers.numSearch}">
                            <p:ajax event="blur" listener="#{managedDocDivers.searchByNum()}" update=":main-data_od:data-compta_od" />
                        </h:inputText>
                    </h:panelGrid>
                    <h:panelGroup style="float: right">
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedDocDivers.init(false)}" update="data-compta_od" icon="ui-icon-circle-triangle-w" disabled="#{managedDocDivers.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedDocDivers.paginator.currentPage}/#{managedDocDivers.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedDocDivers.init(true)}" update="data-compta_od" icon="ui-icon-circle-triangle-e" disabled="#{managedDocDivers.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedDocDivers.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedDocDivers.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedDocDivers.paginations}"/>
                                <p:ajax event="valueChange"  update="data-compta_od"/>
                            </p:selectOneMenu>
                        </p:outputPanel>    
                    </h:panelGroup>
                </h:panelGrid>
                <p:dataTable id="data-compta_od" value="#{managedDocDivers.documents}" var="oth" rowKey="#{oth.id}" rowIndexVar="othIdx" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.onSelectDivers}" update=":main-data_od:btn-lier_od_compta"/>
                    <p:column width="40" styleClass="statut_#{oth.statutDoc}">                            
                        <span title="#{oth.description}">#{othIdx+1}</span>                                             
                    </p:column>                            
                    <p:column headerText="#{lab.LC_PFA_numero_piece}" styleClass="statut_#{oth.statutDoc}" width="100">
                        <span title="#{oth.description}">#{oth.numPiece}</span>
                        <h:panelGroup style="float: right;margin-top: 4px">
                            <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{oth.statutRegle eq constantes.ETAT_REGLE}" title="Opération réglée"/>
                        </h:panelGroup>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PTT_compte_g}" styleClass="statut_#{oth.statutDoc}" width="80" style="text-align: center">
                        <span title="#{oth.compteGeneral.intitule}">#{oth.compteGeneral.numCompte}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PC_tiers}" styleClass="statut_#{oth.statutDoc}" width="100">
                        <span title="#{oth.description}">#{managedDocDivers.findNameTiers(oth.idTiers, oth.tableTiers)}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_date}" width="80" styleClass="statut_#{oth.statutDoc}" style="text-align: center">
                        <h:outputText value="#{oth.dateDoc}" converter="DDMMYYYY" title="#{oth.description}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_montant}" style="text-align: right;" width="100" styleClass="statut_#{oth.statutDoc}">
                        <h:outputText value="#{oth.montant}" converter="DN" style="padding-right: 2px" title="#{oth.description}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_description}" style="text-align: right;" width="100" styleClass="statut_#{oth.statutDoc}">
                        <h:outputText value="#{managedDocDivers.resumeText(oth.description)}" style="padding-left: 2px" title="#{oth.description}"/>
                    </p:column>
                    <p:column width="20" style="text-align: center" styleClass="statut_#{oth.statutDoc}"> 
                        <h:graphicImage library="img/icones" name="#{(oth.mouvement == 'R' )?'in.png':'out.png'}"
                                        width="15" height="15" title="#{(oth.mouvement == 'R' )?'Recettes':'Dépenses'}"/>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer">
                    <h:panelGroup id="btn-lier_od_compta" style="float: right;margin-top: -3px">
                        <p:selectBooleanCheckbox value="#{managedSaisiePiece.selectDivers.new_}" itemLabel="#{lab.LCF_PSL_rattacher_egalement_reglement}" rendered="#{managedSaisiePiece.selectDivers ne null}" style="float: left;margin-top: 5px;margin-right: 5px"/>
                        <p:commandButton value="#{lab.LCF_PSL_rattacher}" actionListener="#{managedSaisiePiece.rattacherDivers()}" disabled="#{managedSaisiePiece.selectDivers eq null}"/>
                    </h:panelGroup>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteAll" closeOnEscape="true"
                             message="#{lab.LCF_PSL_text}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedSaisiePiece.deleteSelection()}" oncomplete="dlgConfirmDeleteAll.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteAll.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LCF_PSL_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedSaisiePiece.deleteBean()}" oncomplete="dlgConfirmDelete.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteContent" closeOnEscape="true"
                             message="#{lab.LCF_PSL_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedSaisiePiece.deleteBeanContent()}" oncomplete="dlgConfirmDeleteContent.hide()"
                                 update=":main_piece_compta:save_saisieJ :main_piece_compta:cancel_saisieJ"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteContent.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDestroyContent" closeOnEscape="true"
                             message="#{lab.LCF_PSL_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedSaisiePiece.destroyContent()}" oncomplete="dlgConfirmDestroyContent.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDestroyContent.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSL_reprendre_formulaire}" message="#{lab.LCF_PSL_text2}"
                             widgetVar="dlgConfirmReset" closeOnEscape="true" >
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.resetFiche()}" oncomplete="dlgConfirmReset.hide()"
                                 update=":main_piece_compta:table_content_Pcomptable :main_piece_compta:zone_edit_piece_compta" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmReset.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="main_piece_compta">
            <div class="part_fix">
                <h:panelGroup id="form_btn_saisieJ" style="float: left">  
                    <p:splitButton icon="ui-icon-disk" value="#{lab.L_enregistrer}"  id="save_saisieJ"
                                   disabled="#{(managedSaisiePiece.giveSoePiece(piecesCompta)!=0 or 0 >= piecesCompta.contentsPieces.size())}"
                                   actionListener="#{managedSaisiePiece.saveNew()}" update="table_pc_comptable form_entete_saisieJ zone_edit_piece_compta">
                        <p:menuitem icon="ui-icon-clipboard" value="#{lab.L_nouveau}" 
                                    global="false" onclick="dlgConfirmReset.show()" id="cancel_saisieJ" update="form_entete_saisieJ"/>                    
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" onclick="dlgConfirmDeleteAll.show()"/>
                    </p:splitButton>
                    <p:splitButton type="button" value="#{lab.L_options}" id="delete_saisieJ" style="font-size: 0.8em">
                        <p:menuitem value="#{lab.L_exporter}" icon="ui-icon-extlink" actionListener="#{managedSaisiePiece.loadExport()}" oncomplete="dlgListExport.show()"/>
                        <p:menuitem value="#{lab.LC_PFA_reconstruire_reference}" icon="ui-icon-refresh" actionListener="#{managedSaisiePiece.reBuildNumero()}" update=":main_piece_compta:table_pc_comptable"/>
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false"  onclick="dlgConfirmDeleteAll.show()"/>
                    </p:splitButton>
                </h:panelGroup>    
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedSaisiePiece.parcoursInAllResult(false)}" update="txt_parc_linear_saisieJ table_pc_comptable" icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('saisieJ')"/>
                    <h:inputText value="#{managedSaisiePiece.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_saisieJ"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedSaisiePiece.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedSaisiePiece.parcoursInAllResult(true)}" update="txt_parc_linear_saisieJ table_pc_comptable" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('saisieJ')"/>
                </h:panelGroup>                 
                <div style="float: right">                        
                    <h:link title="#{lab.L_mode_cretaion}" onclick="collapseForm('saisieJ');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>             
                    <p:spacer />                
                    <h:link onclick="collapseList('saisieJ');
                            return false" title="Liste des pièces" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />        
                    <h:link title="Liste des contenus" onclick="collapseGrid('saisieJ');
                            return false">
                        <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>                       
                </div> 
            </div>
            <div class="part_scroll">
                <div class="yvs_form_saisieJ">
                    <p:outputPanel style="width: 100%" autoUpdate="true" id="form_entete_saisieJ">
                        <h:outputText value="#{piecesCompta.numPiece}" style="font-size: 0.9em;color: #FFF;background: #000; padding: 2px"  rendered="#{piecesCompta.numPiece.trim().length() gt 0}"/>
                        <h:outputText value="#{piecesCompta.id}" style="background: #aaa; padding: 2px;margin-left: 0.1%; font-size: 0.9em" />
                        <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: -5px;margin-bottom: -5px" rendered="#{piecesCompta.id gt 0}">
                            <p:outputPanel id="grp_btn_etat_saisieJ" styleClass="yvs_form_of">                                    
                                <p:commandLink value="#{lab.L_editable.toLowerCase()}" styleClass="button-stateOF #{(piecesCompta.statutPiece == constantes.STATUT_DOC_EDITABLE)?'button-stateOF_actif':''}" 
                                               disabled="#{(!((piecesCompta.statutPiece == constantes.STATUT_DOC_VALIDE
                                                           or piecesCompta.statutPiece == constantes.STATUT_DOC_ANNULE)))}"
                                               actionListener="#{managedSaisiePiece.changeStatut(constantes.STATUT_DOC_EDITABLE)}"
                                               process="@this" update="grp_btn_etat_saisieJ" global="false"/>
                                <p:commandLink value="#{lab.L_valide.toLowerCase()}" styleClass="button-stateOF #{(piecesCompta.statutPiece==constantes.STATUT_DOC_VALIDE)?'button-stateOF_actif':''}" 
                                               disabled="#{!((piecesCompta.statutPiece == constantes.STATUT_DOC_EDITABLE))}" 
                                               actionListener="#{managedSaisiePiece.changeStatut(constantes.STATUT_DOC_VALIDE)}"
                                               process="@this" update="grp_btn_etat_saisieJ" global="false"/>
                                <p:commandLink value="#{lab.L_annuler}" styleClass="button-stateOF #{(piecesCompta.statutPiece==constantes.STATUT_DOC_ANNULE)?'button-stateOF_actif':''}" 
                                               disabled="#{((piecesCompta.statutPiece == constantes.STATUT_DOC_ANNULE))}" 
                                               actionListener="#{managedSaisiePiece.changeStatut(constantes.STATUT_DOC_ANNULE)}"
                                               process="@this" update="grp_btn_etat_saisieJ" global="false"/>
                            </p:outputPanel>                                                
                        </h:panelGroup>   
                    </p:outputPanel>
                    <div style="clear: both"/>
                    <div style="float: left; width: 22%; ">
                        <h:panelGrid columns="1" style="font-size: 0.8em; border: 1px solid #ccc; width: 100%; background: #FFF" 
                                     styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" id="zone_edit_piece_compta">
                            <f:facet name="header">
                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" styleClass="yvs_nostyle">
                                    <span>#{lab.LCF_PSL_journal}</span>
                                    <h:panelGroup>
                                        <h:selectOneMenu value="#{piecesCompta.journal.id}" disabled="#{piecesCompta.contentsPieces.size() ne 0}"
                                                         valueChangeListener="#{managedSaisiePiece.giveSoldeJournal}" style="min-width: 120px;max-width: 220px">
                                            <f:selectItem itemValue="0" itemLabel="" />
                                            <f:selectItems value="#{managedJournaux.journaux}" var="ijj" itemValue="#{ijj.id}" itemLabel="#{ijj.intitule}" />
                                            <p:ajax event="valueChange"  oncomplete="giveFocusTo()" />
                                        </h:selectOneMenu>
                                        <p:commandLink actionListener="#{managedSaisiePiece.resetFicheContent()}" update="table_pc_comptable zone_edit_piece_compta"
                                                       style="position: relative; top: 8px">
                                            <h:graphicImage library="icones" name="kedit.png" width="20" height="20" />
                                        </p:commandLink>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </f:facet>
                            <p:separator />
                            <h:panelGroup>  
                                <span>#{lab.L_date}</span>
                                <p:commandButton icon="ui-icon-folder-collapsed" style="width: 18px; height: 18px;float: right;margin-top: 3px"
                                                 type="button" onclick="dlgModelSaisie.show()" title="#{lab.LCF_PSL_choisir_schema_saisie}" />
                            </h:panelGroup>
                            <h:panelGroup>
                                <p:calendar value="#{managedSaisiePiece.pieceCompta.datePiece}" tabindex="5" id="txt_zone_saisie_jour" pattern="dd-MM-yyyy" />
                                <p:selectBooleanCheckbox value="#{managedSaisiePiece.content.report}" itemLabel="Report ?" style="float: right;margin-top: 5px"/>
                            </h:panelGroup>
                            <span>#{lab.L_reference}</span>
                            <h:inputText value="#{managedSaisiePiece.content.numPiece}" tabindex="20"/>
                            <span>#{lab.LCF_PSL_compte_general}</span>
                            <h:panelGroup id="txt_zone_saisie_cg">
                                <h:inputText value="#{managedSaisiePiece.content.compteG.numCompte}" tabindex="30">
                                    <p:ajax event="valueChange" update="chp_zone_saisie_cg txt_zone_saisie_ct txt_saisie_echeance @this" listener="#{managedSaisiePiece.ecouteSaisieCompteG(managedSaisiePiece.content.compteG.numCompte)}" />
                                </h:inputText>                        
                                <h:outputText value="#{managedSaisiePiece.content.compteG.intitule}" style="font-size: 0.7em; color: #006666" id="chp_zone_saisie_cg"/>
                            </h:panelGroup>
                            <span>#{lab.LCF_PSL_compte_tierss}</span>
                            <h:panelGroup id="txt_zone_saisie_ct">
                                <h:inputText value="#{managedSaisiePiece.content.compteT.selectProfil.code}" readonly="#{!managedSaisiePiece.content.compteG.saisieCompteTiers}" tabindex="40">
                                    <p:ajax update="chp_zone_saisie_ct" event="valueChange" listener="#{managedSaisiePiece.ecouteSaisieCompteT(managedSaisiePiece.content.compteT.selectProfil.code)}" />
                                </h:inputText>
                                <h:outputText value="#{managedSaisiePiece.content.compteT.selectProfil.nomPrenom}" style="font-size: 0.7em; color: #006666" id="chp_zone_saisie_ct"/>
                            </h:panelGroup>
                            <span>#{lab.L_libelle}</span>
                            <h:inputText value="#{managedSaisiePiece.content.libelle}" tabindex="50" style="width: 100%"/>
                            <span>#{lab.LCF_PSL_debit}</span>
                            <pe:inputNumber value="#{managedSaisiePiece.content.debit}" tabindex="60" disabled="#{!managedSaisiePiece.canEditDebit()}"
                                            maxValue="999999999999999999">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.blurDebitContent()}" update=":main_affectation:data_affectation"/>
                            </pe:inputNumber>
                            <span>#{lab.LCF_PSL_credit}</span>
                            <pe:inputNumber value="#{managedSaisiePiece.content.credit}" tabindex="70" disabled="#{!managedSaisiePiece.canEditCredit()}"
                                            maxValue="999999999999999999">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.blurCreditContent()}" update=":main_affectation:data_affectation"/>
                            </pe:inputNumber>
                            <span>#{lab.LCF_PSL_echeance}</span>
                            <h:panelGroup>
                                <p:calendar id="txt_saisie_echeance" value="#{managedSaisiePiece.content.echeance}" pattern="dd-MM-yyyy" size="8" readonly="#{!managedSaisiePiece.content.compteG.saisieEcheance}" tabindex="80"/>  
                                <p:commandButton value="#{lab.L_ajouter}" icon="ui-icon-circle-plus" actionListener="#{managedSaisiePiece.addNewContentPiece()}" oncomplete="giveFocusTo()"
                                                 update="table_content_Pcomptable save_saisieJ cancel_saisieJ zone_edit_piece_compta" style="float: right" tabindex="90"  />
                            </h:panelGroup>
                            <f:facet name="footer">
                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" styleClass="yvs_nostyle" style="font-size: 0.8em">
                                    <span>#{lab.LCF_PSL_solde_piece} :</span>
                                    <h:outputText id="txt_solde_piece_compta" value="#{piecesCompta.solde}" converter="DNS" style="font-weight: bold; color: #000;cursor: pointer"/>
                                    <span>#{lab.LCF_PSL_solde_journal} :</span>
                                    <h:outputText value="#{piecesCompta.journal.soldeJournal}" converter="DNS" style="font-weight: bold; color: #000"/>
                                </h:panelGrid>
                            </f:facet>
                        </h:panelGrid>
                    </div>
                    <div style="margin-left: 22%" class="table_content">
                        <p:outputPanel id="table_content_Pcomptable">
                            <p:dataTable value="#{piecesCompta.contentsPieces}" var="icontent" selectionMode="single" rowIndexVar="line_c" rowKey="#{icontent.id}" style="overflow-y: auto;max-height: 79.5%">   
                                <p:ajax event="rowSelect" global="false" listener="#{managedSaisiePiece.loadOnViewContent}"  />
                                <p:ajax event="rowUnselect" global="false" listener="#{managedSaisiePiece.unLoadOnViewContent}"  />
                                <p:column headerText="N°" width="30" style="text-align: center">
                                    <span title="#{icontent.libelle}">#{line_c+1}</span>   
                                    <h:panelGroup style="float: right;margin-right: 5px">
                                        <p:commandLink value="#{icontent.analytiques.size() gt 0 ? icontent.analytiques.size():'A'}" title="#{lab.LCF_PSL_saisir_affectation}" actionListener="#{managedSaisiePiece.loadContentJournal(icontent)}"
                                                       update=":main_affectation:blog_affectation :main_affectation:title_affectation" oncomplete="dlgAffectation.show()" rendered="#{icontent.compteGeneral.saisieAnalytique}"
                                                       style="font-weight: bold;border: 1px solid #666; border-radius: 4px;padding: 2px;background: #0099ff;color: white;font-size: 0.8em"/>
                                    </h:panelGroup>
                                </p:column>
                                <p:column headerText="Id " width="15" style="text-align: center">
                                    <span title="#{icontent.id}">#{icontent.id}</span>   
                                    <h:panelGroup style="float: right;margin-right: 5px">
                                        <h:outputText title="Report" value="R" rendered="#{icontent.report}" styleClass="style_statut_blue"/>
                                    </h:panelGroup>
                                </p:column>
                                <p:column headerText="#{lab.L_jour}" width="15" style="text-align: center">
                                    <span title="#{icontent.libelle}">#{icontent.jour}</span>   
                                </p:column>
                                <p:column headerText="#{lab.L_reference}" width="100">
                                    <span title="#{icontent.libelle}">#{icontent.numRef}</span>                                
                                </p:column>                        
                                <p:column headerText="#{lab.LCF_PSS_compte_g}" style="text-align: center">
                                    <span title="#{icontent.compteGeneral.intitule}">#{icontent.compteGeneral.numCompte}</span>                                
                                </p:column>
                                <p:column headerText="#{lab.LCF_PSS_compte_t}" width="80" style="text-align: center">
                                    <span title="#{managedSaisiePiece.findNameTiers(icontent.compteTiers, icontent.tableTiers, 'N')}">
                                        #{managedSaisiePiece.findNameTiers(icontent.compteTiers, icontent.tableTiers, 'R')}
                                    </span>                                
                                </p:column>
                                <p:column headerText="#{lab.LCF_PSL_debit}" style="text-align: right">
                                    <h:panelGroup style="float: left" rendered="#{icontent.debit gt 0}">
                                        <h:outputText title="#{lab.LCF_PLC_lettrage}" value="#{icontent.lettrage}" rendered="#{icontent.lettrage != null ? icontent.lettrage ne '': false}" styleClass="style_statut"/>
                                    </h:panelGroup>     
                                    <h:outputText value="#{icontent.debit}" converter="DNS"  title="#{icontent.libelle}"/>
                                </p:column>
                                <p:column headerText="#{lab.LCF_PSL_credit}" style="text-align: right">
                                    <h:panelGroup style="float: left" rendered="#{icontent.credit gt 0}">
                                        <h:outputText title="#{lab.LCF_PLC_lettrage}" value="#{icontent.lettrage}" rendered="#{icontent.lettrage != null ? icontent.lettrage ne '': false}" styleClass="style_statut"/>
                                    </h:panelGroup>     
                                    <h:outputText value="#{icontent.credit}" converter="DNS"  title="#{icontent.libelle}"/>
                                </p:column>
                                <p:column headerText="#{lab.LCF_PSL_echeance}" width="80" style="text-align: center">
                                    <h:outputText value="#{icontent.echeance}" converter="DATE"  title="#{icontent.libelle}"/>
                                </p:column>
                                <p:column headerText=" " width="10" style="text-align: center">
                                    <p:contextMenu for="btn_option_content_saisie_journal" event="left click" style="font-size: 0.8em">
                                        <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" actionListener="#{managedSaisiePiece.onSelectedDistant(icontent)}"
                                                    title="#{lab.L_aller_a} '#{icontent.tableExterne}' #{lab.LCF_PSL_pour_element} (#{icontent.refExterne})"/>
                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedSaisiePiece.setSelectContent(icontent)}" oncomplete="dlgConfirmDeleteContent.show()"/>
                                    </p:contextMenu>   
                                    <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_content_saisie_journal" global="false"/>
                                </p:column>
                            </p:dataTable>
                            <h:panelGrid columns="8" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                                <span>&nbsp;</span>
                                <h:outputText value="#{lab.L_compte}" />
                                <h:outputText value="#{lab.LCF_PLC_tiers}" />
                                <h:outputText value="#{lab.LCF_PLC_lettrage}" />
                                <h:outputText value="#{lab.LCF_PLC_lettrer}" />
                                <h:outputText value="Debit" />
                                <h:outputText value="Credit" />
                                <h:outputText value="Mouvement" />
                                <p:commandButton icon="ui-icon-bullet" style="width: 22px; height: 22px;" title="#{lab.LCF_PLC_initialiser_filtres}"
                                                 actionListener="#{managedSaisiePiece.clearParamsContenuForPiece()}" disabled="#{piecesCompta.id lt 1}"/>
                                <h:inputText value="#{managedSaisiePiece.compteContenuSearch}" style="min-width: 120px" disabled="#{piecesCompta.id lt 1}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamCompteContentForPiece()}" />
                                </h:inputText>
                                <h:inputText value="#{managedSaisiePiece.tiersContenuSearch}" style="min-width: 120px" disabled="#{piecesCompta.id lt 1}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamTiersContentForPiece()}" />
                                </h:inputText>
                                <h:inputText value="#{managedSaisiePiece.lettrageContenuSearch}" style="width: 100px" disabled="#{piecesCompta.id lt 1}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamLettrageContentForPiece()}" />
                                </h:inputText>
                                <h:selectOneMenu value="#{managedSaisiePiece.lettrerContenuSearch}" disabled="#{piecesCompta.id lt 1}">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="#{lab.L_oui.toUpperCase()}" itemValue="#{true}"/>
                                    <f:selectItem itemLabel="#{lab.L_non.toUpperCase()}" itemValue="#{false}"/>
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamLettrerContentForPiece()}"   />
                                </h:selectOneMenu>
                                <h:inputText value="#{managedSaisiePiece.debitContenuSearch}" style="width: 100px" disabled="#{piecesCompta.id lt 1}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamDebitContentForPiece()}" />
                                </h:inputText>
                                <h:inputText value="#{managedSaisiePiece.creditContenuSearch}" style="width: 100px" disabled="#{piecesCompta.id lt 1}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamCreditContentForPiece()}" />
                                </h:inputText>
                                <h:selectOneMenu value="#{managedSaisiePiece.mouvementContenuSearch}" disabled="#{piecesCompta.id lt 1}">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="DEBIT" itemValue="D"/>
                                    <f:selectItem itemLabel="CREDIT" itemValue="C"/>
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamMouvementContentForPiece()}"   />
                                </h:selectOneMenu>
                            </h:panelGrid>
                            <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                                <p:commandButton actionListener="#{managedSaisiePiece.loadAllContenuForPiece(false, false)}" global="false" update="table_content_Pcomptable" icon="ui-icon-circle-triangle-w" disabled="#{managedSaisiePiece.paginatorContenu.disPrev}"/>
                                <p:outputPanel ><p:outputLabel value="#{managedSaisiePiece.paginatorContenu.currentPage}/#{managedSaisiePiece.paginatorContenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                <p:commandButton actionListener="#{managedSaisiePiece.loadAllContenuForPiece(true, false)}" global="false" update="table_content_Pcomptable" icon="ui-icon-circle-triangle-e" disabled="#{managedSaisiePiece.paginatorContenu.disNext}"/>
                                <p:selectOneMenu value="#{managedSaisiePiece.paginatorContenu.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedSaisiePiece.choosePaginatorContenuForPiece}"
                                                 style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" disabled="#{piecesCompta.id lt 1}" >
                                    <f:selectItems value="#{managedSaisiePiece.paginations}"/>
                                    <p:ajax event="valueChange" global="false" update="table_content_Pcomptable form_btn_saisieJ"/>
                                </p:selectOneMenu>
                            </p:outputPanel>  
                        </p:outputPanel>
                    </div>
                    <p:overlayPanel for="txt_solde_piece_compta" hideEffect="fade" style="width: 35%;background: black;color: white">
                        <p:outputPanel id="blog_form_montant_piece_compta" autoUpdate="true">
                            <h:panelGrid columns="2" style="width: 100%;font-weight: bolder;margin-top: 5px;color: white">
                                <span>#{lab.LCF_PSL_total_debit}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{piecesCompta.debits}" converter="DNS"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LCF_PSL_total_credit}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{piecesCompta.credits}" converter="DNS"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:outputPanel>
                    </p:overlayPanel>
                </div>
                <div class="yvs_list_saisieJ">
                    <h:inputHidden id="input_hide_saisieJ" value="#{managedSaisiePiece.tabIds}"/>
                    <p:dataTable value="#{managedSaisiePiece.listePiece}" var="iPiece" rowIndexVar="line_pc"
                                 rowKey="#{iPiece.id}" id="table_pc_comptable" selectionMode="single">
                        <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnView}" oncomplete="collapseForm('saisieJ')" update=":main_piece_compta:input_hide_saisieJ"/>
                        <p:column headerText="N°" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}" style="width: 5%">
                            <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{iPiece.id eq piecesCompta.id}"/>
                            #{line_pc+1}
                            <h:graphicImage library="img" name="redo.png" rendered="#{iPiece.new_}" />
                        </p:column>
                        <p:column headerText="#{lab.L_numero}" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            #{iPiece.numPiece}
                            <h:panelGroup style="float: right">                               
                                <h:graphicImage library="img" name="danger.png" rendered="#{!managedSaisiePiece.controleContenu(iPiece)}" width="23" height="23" title="#{lab.LCF_PSL_cette_piece_pas_contenu_journal}"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_journal}" style="text-align: center;width: 12%" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            #{iPiece.journal.intitule}
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_date_saisie}" sortBy="#{iPiece.dateSaisie}" style="text-align: center;width: 12%" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            <h:outputText value="#{iPiece.dateSaisie}" converter="DATE" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_date_piece}" sortBy="#{iPiece.datePiece}" style="text-align: center;width: 12%" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            <h:outputText value="#{iPiece.datePiece}" converter="DATE" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PLC_exercice}" style="text-align: center;width: 12%" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            <h:outputText value="#{iPiece.exercice.reference}"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PLC_solde}" style="text-align: right;width: 12%" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            <h:outputText value="#{iPiece.solde}" title="#{lab.LCF_PSL_debit} : #{iPiece.debits} - #{lab.LCF_PSL_credit} : #{iPiece.credits}" converter="DNS" />
                        </p:column>
                        <p:column headerText=" " width="20" style="text-align: center" styleClass="statut_#{(iPiece.solde lt 0) ? 'A':iPiece.statutPiece}">
                            <f:facet name="header">
                                <p:contextMenu for="btn_option_saisie_journal_head" event="left click" styleClass="context_menu" style="width: 210px">
                                    <p:menuitem value="Modifier le journal" icon="ui-icon-pencil" actionListener="#{managedSaisiePiece.setSelectPiece(null)}" oncomplete="dlgEditJournal.show()"
                                                rendered="#{accesRessource.compta_change_compte_content}"/>
                                </p:contextMenu>  
                                <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_saisie_journal_head" global="false"/>
                            </f:facet>
                            <p:contextMenu for="btn_option_saisie_journal" event="left click" styleClass="context_menu" style="width: 210px">
                                <p:menuitem value="Modifier le journal" icon="ui-icon-pencil" actionListener="#{managedSaisiePiece.setSelectPiece(iPiece)}" oncomplete="dlgEditJournal.show()"
                                            rendered="#{accesRessource.compta_change_compte_content}"/>
                                <p:menuitem value="#{lab.LCF_PSL_rattacher}" icon="ui-icon-link" global="false" actionListener="#{managedSaisiePiece.setSelectPiece(iPiece)}" oncomplete="dlgChooseType.show()"/>
                                <p:menuitem value="#{lab.LC_PFA_reconstruire_reference}" icon="ui-icon-refresh" global="false" actionListener="#{managedSaisiePiece.reBuildNumero(iPiece, true, true)}" update=":main_piece_compta:table_pc_comptable"/>
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedSaisiePiece.setSelectPiece(iPiece)}" oncomplete="dlgConfirmDelete.show()"/>
                                <p:separator style="width: 98%;margin: auto"/>
                                <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-print" global="false" actionListener="#{managedSaisiePiece.print(iPiece)}" ajax="false"/>
                            </p:contextMenu>  
                            <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_saisie_journal" global="false"/>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox styleClass="chek_all_line_saisieJ" value="false"
                                                         onclick="selectionAllLineTab(#{managedSaisiePiece.listePiece.size()}, 'saisieJ')">
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  value="#{iPiece.select}" styleClass="chek_line_saisieJ" 
                                                      onclick="selectionLineTab(#{line_pc}, 'saisieJ')">
                            </h:selectBooleanCheckbox>
                        </p:column>
                    </p:dataTable>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedSaisiePiece.init(false)}" global="false" update="table_pc_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedSaisiePiece.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedSaisiePiece.paginator.currentPage}/#{managedSaisiePiece.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedSaisiePiece.init(true)}" global="false" update="table_pc_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedSaisiePiece.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedSaisiePiece.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedSaisiePiece.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedSaisiePiece.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="table_pc_comptable"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </div>
                <!-->
                 *****************************************************************************
                 Vue Grid
                 *****************************************************************************
                <-->
                <div class="yvs_grid_saisieJ" style="width: 99%; margin: auto; background: white">
                    <h:inputHidden id="input_hide_saisieJ_contenu" value="#{managedSaisiePiece.tabIds_contenu}"/>
                    <p:dataTable id="data_contenu_piece" value="#{managedSaisiePiece.contenus}" var="cont" rowIndexVar="line" 
                                 rowKey="#{cont.id}" selectionMode="single">  
                        <p:ajax event="rowSelect" global="false" listener="#{managedSaisiePiece.loadOnViewContenu}" oncomplete="collapseForm('saisieJ')"/>
                        <p:column headerText="N°" width="30" style="text-align: center">
                            <span title="#{cont.libelle}">#{line+1}</span>   
                            <h:panelGroup style="float: right;margin-right: 5px">
                                <p:commandLink value="A" title="#{lab.LCF_PSL_saisir_affectations}" actionListener="#{managedSaisiePiece.loadContentJournal(cont)}"
                                               update=":main_affectation:blog_affectation :main_affectation:title_affectation" oncomplete="dlgAffectation.show()" rendered="#{cont.analytiques.size() gt 0}"
                                               style="font-weight: bold;border: 1px solid #666; border-radius: 4px;padding: 2px;background: #0099ff;color: white;font-size: 0.8em"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_piece}" width="100">
                            <span title="#{cont.libelle}">#{cont.piece.numPiece}</span>      
                            <h:panelGroup style="float: right;margin-right: 5px">
                                <h:outputText title="Report" value="R" rendered="#{cont.report}" styleClass="style_statut_blue"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.L_date}" width="80" style="text-align: center">
                            <h:outputText value="#{cont.piece.datePiece}" converter="DATE"  title="#{cont.libelle}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_jour}" width="15" style="text-align: center">
                            <span title="#{cont.libelle}">#{cont.jour}</span>   
                        </p:column>
                        <p:column headerText="#{lab.L_reference}" width="100">
                            <span title="#{cont.libelle}">#{cont.numRef}</span>                         
                        </p:column>                      
                        <p:column headerText="#{lab.L_numero}" width="100">
                            <span title="#{cont.libelle}">#{cont.numPiece}</span>                         
                        </p:column>                      
                        <p:column headerText="#{lab.LC_PFA_compte_g}" width="80" style="text-align: center">
                            <span title="#{cont.compteGeneral.intitule}">#{cont.compteGeneral.numCompte}</span>                                
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_compte_t}" width="80" style="text-align: center">
                            <span title="#{managedSaisiePiece.findNameTiers(cont.compteTiers, cont.tableTiers, 'N')}">
                                #{managedSaisiePiece.findNameTiers(cont.compteTiers, cont.tableTiers, 'R')}
                            </span>    
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_debit}" width="150" style="text-align: right">
                            <h:panelGroup style="float: left" rendered="#{cont.debit gt 0}">
                                <h:outputText title="#{lab.LCF_PLC_lettrage}" value="#{cont.lettrage}" rendered="#{cont.lettrage != null ? cont.lettrage ne '': false}" styleClass="style_statut"/>
                            </h:panelGroup>     
                            <h:outputText value="#{cont.debit}" converter="#{managedSaisiePiece.converter}"  title="#{cont.libelle}"/>  
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_credit}" width="150" style="text-align: right">
                            <h:panelGroup style="float: left" rendered="#{cont.credit gt 0}">
                                <h:outputText title="#{lab.LCF_PLC_lettrage}" value="#{cont.lettrage}" rendered="#{cont.lettrage != null ? cont.lettrage ne '': false}" styleClass="style_statut"/>
                            </h:panelGroup>     
                            <h:outputText value="#{cont.credit}" converter="#{managedSaisiePiece.converter}"  title="#{cont.libelle}"/>  
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSL_echeance}" width="80" style="text-align: center">
                            <h:outputText value="#{cont.echeance}" converter="DATE"  title="#{cont.libelle}"/>
                        </p:column>
                        <p:column headerText=" " width="20" style="text-align: center">
                            <f:facet name="header">
                                <p:contextMenu for="btn_option_saisieJ_contenu_head" event="left click" styleClass="context_menu" style="width: 210px">
                                    <p:menuitem value="Modifier le compte" icon="ui-icon-pencil" actionListener="#{managedSaisiePiece.setSelectContent(null)}" oncomplete="dlgEditCompte.show()"
                                                rendered="#{accesRessource.compta_change_compte_content}"/>
                                </p:contextMenu>  
                                <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_saisieJ_contenu_head" global="false"/>
                            </f:facet>
                            <p:contextMenu for="btn_option_saisieJ_contenu" event="left click" styleClass="context_menu" style="width: 210px">
                                <p:menuitem value="Modifier le compte" icon="ui-icon-pencil" actionListener="#{managedSaisiePiece.setSelectContent(cont)}" oncomplete="dlgEditCompte.show()"
                                            rendered="#{accesRessource.compta_change_compte_content}"/>
                            </p:contextMenu>  
                            <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_saisieJ_contenu" global="false"/>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox styleClass="chek_all_line_saisieJ_contenu" value="false"
                                                         onclick="selectionAllLineTab(#{managedSaisiePiece.contenus.size()}, 'saisieJ_contenu')">
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  value="false" styleClass="chek_line_saisieJ_contenu" 
                                                      onclick="selectionLineTab(#{line}, 'saisieJ_contenu')">
                            </h:selectBooleanCheckbox>
                        </p:column>
                    </p:dataTable>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedSaisiePiece.loadAllContenu(false, false)}" global="false" update="data_contenu_piece" icon="ui-icon-circle-triangle-w" disabled="#{managedSaisiePiece.p_contenu.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedSaisiePiece.p_contenu.currentPage}/#{managedSaisiePiece.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedSaisiePiece.loadAllContenu(true, false)}" global="false" update="data_contenu_piece" icon="ui-icon-circle-triangle-e" disabled="#{managedSaisiePiece.p_contenu.disNext}"/>
                        <p:selectOneMenu value="#{managedSaisiePiece.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedSaisiePiece.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedSaisiePiece.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_contenu_piece"/>
                        </p:selectOneMenu>
                    </p:outputPanel>  
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">    
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">              
                <div class="display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedSaisiePiece.selectPiece.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedSaisiePiece.selectPiece.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedSaisiePiece.selectPiece.author.users.nomUsers}" style="font-weight: bold" styleClass="valeur" /></span>
                    </p:outputPanel>
                </div>
                <div id="zone_search_saisieJ">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="8" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <span>&nbsp;</span>
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedSaisiePiece.dateSearch}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.findByDate()}"  update="blog_date_search_saisieJ"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.LCF_PLC_exercice}" />
                            <h:outputText value="#{lab.LCF_PSL_journal}" />
                            <h:outputText value="#{lab.LCF_PPC_source}" />
                            <h:outputText value="#{lab.LCF_PSL_numero_externe}" />
                            <h:outputText value="#{lab.L_numero}" />                            
                            <h:outputText value="" />                        
                            <p:commandButton icon="ui-icon-bullet" style="width: 22px; height: 22px;" title="#{lab.LCF_PLC_initialiser_filtres}" 
                                             actionListener="#{managedSaisiePiece.clearParams()}"/>
                            <h:panelGroup id="blog_date_search_saisieJ">
                                <p:calendar value="#{managedSaisiePiece.debutSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateSearch}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDate}" />
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedSaisiePiece.finSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateSearch}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDate}" />
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedSaisiePiece.exerciceSearch}"  >
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="0"/>
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedExercice.exercices}" var="ixo_" itemValue="#{ixo_.id}" itemLabel="#{ixo_.reference}" />
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamExercice()}" />
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedSaisiePiece.journalSearch}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="0"/>
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedJournaux.journaux}" var="jrn" itemValue="#{jrn.id}" itemLabel="#{jrn.intitule}" />
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamJournal()}" />
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedSaisiePiece.natureFind}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItems value="#{managedSaisiePiece.listAllNaturePiece()}" var="nature"
                                               itemLabel="#{nature.libelle}" itemValue="#{nature.valeur}"/>
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamNaturePiece(managedSaisiePiece.natureFind)}" />
                            </h:selectOneMenu>
                            <h:inputText value="#{managedSaisiePiece.refExtFind}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamNaturePiece(managedSaisiePiece.natureFind,managedSaisiePiece.refExtFind)}" />
                            </h:inputText>
                            <h:inputText value="#{managedSaisiePiece.numeroSearch}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamNumero()}" />
                            </h:inputText>
                            <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                           onclick="dlgPlusOption.show()" global="false" value="#{lab.L_plus_option}"/>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
                <div id="zone_find_saisieJ">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid id="zone-search_contenu_journal" columns="9" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <span>&nbsp;</span>
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedSaisiePiece.dateContentSearch}">
                                    <p:ajax event="valueChange" listener="#{managedSaisiePiece.findByDateContent()}" 
                                            update="blog_date_search_saisieJ_"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.LCF_PSL_journal}" />
                            <h:outputText value="#{lab.L_compte}" />
                            <h:outputText value="#{lab.LCF_PLC_tiers}" />
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="#{lab.LCF_PLC_lettrage}" />
                            <h:outputText value="#{lab.LCF_PLC_lettrer}" />
                            <h:outputText value="Mouvement" />
                            <p:commandButton icon="ui-icon-bullet" style="width: 22px; height: 22px;" title="#{lab.LCF_PLC_initialiser_filtres}" actionListener="#{managedSaisiePiece.clearParamsContenu()}"/>
                            <h:panelGroup id="blog_date_search_saisieJ_">
                                <p:calendar value="#{managedSaisiePiece.debutContentSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateContentSearch}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDateContent}" />
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedSaisiePiece.finContentSearch}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedSaisiePiece.dateContentSearch}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedSaisiePiece.addParamDateContent}" />
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedSaisiePiece.journalContentSearch}" style="min-width: 120px;max-width: 160px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="0"/>
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedJournaux.journaux}" var="jrn" itemValue="#{jrn.id}" itemLabel="#{jrn.intitule}" />
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamJournalContent()}" />
                            </h:selectOneMenu>
                            <h:inputText value="#{managedSaisiePiece.compteSearch}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamCompteContent()}" />
                            </h:inputText>
                            <h:inputText value="#{managedSaisiePiece.tiersSearch}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamTiersContent()}" />
                            </h:inputText>
                            <h:inputText value="#{managedSaisiePiece.referenceSearch}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamReferenceContent()}" />
                            </h:inputText>
                            <h:inputText value="#{managedSaisiePiece.lettrageSearch}" style="width: 100px">
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamLettrageContent()}" />
                            </h:inputText>
                            <h:selectOneMenu value="#{managedSaisiePiece.lettrerSearch}">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_oui.toUpperCase()}" itemValue="#{true}"/>
                                <f:selectItem itemLabel="#{lab.L_non.toUpperCase()}" itemValue="#{false}"/>
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamLettrerContent()}"   />
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedSaisiePiece.mouvementSearch}">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="DEBIT" itemValue="D"/>
                                <f:selectItem itemLabel="CREDIT" itemValue="C"/>
                                <p:ajax event="valueChange" listener="#{managedSaisiePiece.addParamMouvementContent()}"   />
                            </h:selectOneMenu>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">
                            <p:commandLink oncomplete="dlgCleanContent.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;" 
                                           title="#{lab.LCF_PSL_nettoyer_contenus_sans_liaison}" actionListener="#{managedSaisiePiece.clearContentJournal(true)}">
                                <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                            </p:commandLink>
                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
