<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"      
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"     
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Bulletins de paye','modRh', 'smenBulletinS', true,managedSalaire)}
    </ui:define>         
    <ui:define name="contents">        
        <h:outputScript library="js/donne_de_base" name="param_db.js" />
        <script type="text/javascript">
            $(function() {
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
        </script> 
        <script type="text/javascript">
            $(function() {
                collapseForm('bulletin');
                initRegle_();
            });
        </script>  
        #{managedExercice.loadAllExrecice()}
        #{MEmps.addParamActifSimple(true)}
        #{managedSalaire.loadAll()}     
        #{managedSalaire.loadListeParametre()}     
        #{managedSalaire.loadAllBulletin()}  
        #{managedSalaire.loadPlanifOrdreCalcul()}         
        #{managedSalaire.loadExercicesActif()}   
        <h:form prependId="false">
            <p:confirmDialog widgetVar="confirmDeleteDoublon" header="#{lab.L_supprimer} !"
                             message="
                             #{lab.LRH_PB_text}" style="font-size: 0.8em">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSalaire.continuCompile(true)}" 
                                 oncomplete="confirmDeleteDoublon.hide()" update=":body_bulletin:table_buletin_calcule" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" actionListener="#{managedSalaire.continuCompile(false)}" 
                                 oncomplete="confirmDeleteDoublon.hide()" update=":body_bulletin:table_buletin_calcule" />
                <p:selectBooleanCheckbox itemLabel="#{lab.LRH_PB_memoriser_votre_choix}" value="#{managedSalaire.deleteAllDoublon}" >
                    <p:ajax event="valueChange" update=":body_bulletin:chmp_del_dob_period" global="false"/>
                </p:selectBooleanCheckbox>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmDelAll" header="#{lab.L_supprimer} !"
                             message="#{lab.LRH_PB_text1} ">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSalaire.deleteAllSelection()}" 
                                 oncomplete="dlgConfirmDelAll.hide()" update=":body_bulletin:table_buletin_calcule" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmDelAll.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmDelSelection" header="#{lab.L_supprimer} !"
                             message="#{lab.LRH_PB_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSalaire.deleteBean()}" 
                                 oncomplete="dlgConfirmDelSelection.hide()" update=":body_bulletin:table_buletin_calcule" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmDelSelection.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmContinueSave" header="#{lab.LRH_PB_erreur_duplication_bulletin} !"
                             message="#{lab.LRH_PB_text2} ">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSalaire.createBulletin(true)}" 
                                 oncomplete="dlgConfirmContinueSave.hide()" update=":body_bulletin:table_buletin_calcule :body_bulletin:tabV-salaire" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmContinueSave.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" >
            <p:dialog widgetVar="dlgUpdateCodeParamBulletin" width="50%" styleClass="dlg_panel"
                      closeOnEscape="true" showHeader="false" modal="true">
                <div align="center" style="color: #990000">
                    #{lab.L_attention}!!!
                    #{lab.LRH_PB_text3}
                </div>
                <h:panelGrid styleClass="yvs_table" columns="4" id="form_addParam_" cellpadding="0" cellspacing="0">
                    <span>#{lab.LRH_PB_code_element}</span>
                    <h:inputText value="#{managedSalaire.newParam.codeElement}" title="#{lab.LRH_PB_code_utiliser_regle_salaire}"/>
                    <span>#{lab.L_description}</span>
                    <h:inputText value="#{managedSalaire.newParam.description}" />                   
                    <span>#{lab.L_actif}</span>
                    <p:selectBooleanCheckbox value="#{managedSalaire.newParam.actif}" />
                </h:panelGrid>
                <p:commandButton value="#{lab.L_modifier}" icon="ui-icon-disk" actionListener="#{managedSalaire.applyNewCode()}" oncomplete="dlgUpdateCodeParamBulletin.hide()"
                                 update=":form_formulaire_addParamBull:form_Form_AddPAram form_addParam_" style="float: right"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false" >
            <p:dialog widgetVar="dlgUpdateParamBulletin" width="50%" styleClass="dlg_panel"
                      closeOnEscape="true" showHeader="false" modal="true">
                <h:panelGrid styleClass="yvs_table" columns="4" id="form_addParam" cellpadding="0" cellspacing="0">
                    <span>#{lab.LRH_PB_code_element}</span>
                    <h:inputText value="#{managedSalaire.newParam.codeElement}" disabled="#{managedSalaire.updateParam}"  title="#{lab.LRH_PB_code_utiliser_regle_salaire}"/>
                    <span>#{lab.L_description}</span>
                    <h:inputText value="#{managedSalaire.newParam.description}" disabled="#{managedSalaire.updateParam}"/>
                    <span>#{lab.L_valeur}</span>
                    <h:inputText value="#{managedSalaire.newParam.valeur}" />
                    <span>#{lab.L_actif}</span>
                    <p:selectBooleanCheckbox value="#{managedSalaire.newParam.actif}" disabled="#{managedSalaire.updateParam}"/>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_ajouter}" icon="ui-icon-circle-plus" actionListener="#{managedSalaire.addLineParam()}" oncomplete="dlgUpdateParamBulletin.hide()"
                                 update=":form_formulaire_addParamBull:form_Form_AddPAram form_addParam" style="float: right"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_formulaire_addParamBull">
            <p:dialog widgetVar="dlgAddParamBulletin" width="80%" closeOnEscape="true" footer="&copy;Lymytz 2014">
                <f:facet name="header">
                    <h:panelGroup id="header_Form_AddPAram">
                        <span>#{lab.LRH_PB_modifier_element_pour}: </span>
                        <span style="font-size: 0.8em; font-weight: bold; color: #006666">(#{managedSalaire.currentParam.contrat.employe.matricule}) #{managedSalaire.currentParam.contrat.employe.nom} #{managedSalaire.currentParam.contrat.employe.prenom}  </span>
                        #{lab.LRH_PM_periode}:
                        <span style="font-size: 0.8em; font-weight: bold; color: #006666">#{managedSalaire.currentParam.headerBulletin.reference}</span>
                    </h:panelGroup>
                </f:facet>
                <p:dataTable value="#{managedSalaire.listeParametre}" var="param_"
                             rowKey="#{param_.id}" rowIndexVar="line_param_" id="form_Form_AddPAram" editable="true">
                    <p:ajax event="rowEdit" listener="#{managedSalaire.onRowLineParamEdit}"/>
                    <p:column headerText="NÂ°" width="15">
                        <h:outputText value="#{line_param_+1}" />
                    </p:column>
                    <p:column headerText="#{lab.LRH_PB_code_element}" width="150">
                        <h:outputText value="#{param_.codeElement}" />
                    </p:column> 
                    <p:column headerText="#{lab.L_description}" width="200">
                        <h:outputText value="#{param_.description}" />
                    </p:column> 
                    <p:column headerText="#{lab.L_valeur}" width="100" style="text-align: right">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{param_.valeur}" converter="DN"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{param_.valeur}" style="width:70%"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column> 
                    <p:column headerText="#{lab.L_actif}" width="100" style="text-align: right">
                        <h:graphicImage library="img" name="#{(param_.actif)?'vu.png':'vu_non.png'}" width="20" height="20" />
                    </p:column> 
                    <p:column headerText=" " width="25" style="text-align: center">
                        <p:contextMenu for="bull_optionAttr" event="click" style="text-shadow: none;background: #241f1f; color: #FFF; font-weight: bold; font-size: 0.8em">
                            <p:menuitem value="#{lab.L_cacher}" icon="ui-icon-circle-minus" actionListener="#{managedSalaire.hideElementFromList(param_)}" update="form_Form_AddPAram"/>
                            <p:menuitem value="#{(param_.actif)?lab.L_desactiver:lab.L_activer}" icon="#{(param_.actif)?'ui-icon-circle-check':'ui-icon-circle-close'}" actionListener="#{managedSalaire.disableElement(param_)}" update="form_Form_AddPAram"/>
                            <p:menuitem value="#{lab.LRH_PB_modifier_code}" icon="ui-icon-refresh" actionListener="#{managedSalaire.openDlgConfirmRename(param_)}" />
                        </p:contextMenu>
                        <p:commandButton type="button" icon="ui-icon-gear" style="width: 22px; height: 22px" id="bull_optionAttr" />
                    </p:column> 
                    <p:column style="text-align: center;width: 5px">
                        <p:rowEditor />
                    </p:column>  
                </p:dataTable>
                <p:commandButton value="#{lab.L_enregistrer}" icon="ui-icon-disk" actionListener="#{managedSalaire.saveParametreBulletin()}" 
                                 update="form_Form_AddPAram" style="float: left; margin-left: 50%" oncomplete="dlgAddParamBulletin.hide()"/>
                <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px; float: right" disabled="#{!accesRessource.grh_bull_add_regle}"  
                                 title="#{lab.LRH_PB_ajouter_regle}" actionListener="#{managedSalaire.openToaddLineParam(false)}"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgretenuesMois" width="80%" closeOnEscape="true" footer="&copy;Lymytz 2014"
                      header="#{lab.LRH_PB_retenues_mois}">
                <p:dataTable value="#{managedSalaire.listeRetenues}" var="retM" rowKey="#{retM.id}"
                             selectionMode="single"
                             rowIndexVar="line_Ret_">  
                    <p:column headerText="NÂ°" width="15">
                        <h:outputText value="#{line_Ret_+1}" />
                    </p:column>
                    <p:column headerText="#{lab.LRH_PRS_retenues}" width="200">
                        <h:outputText value="#{retM.retenue.typeElement.libelle}" />
                    </p:column>                        
                    <p:column headerText="#{lab.LRH_PB_a_retenir_le}" width="80" style="text-align: center">
                        <h:outputText value="#{retM.datePrelevement}" converter="DATE"/>
                    </p:column>
                    <p:column headerText="#{lab.L_valeur}" width="100">
                        <h:outputText value="#{retM.valeur}" />
                    </p:column>
                </p:dataTable> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgNonTraite" width="80%" height="600" closeOnEscape="true" footer="&copy;Lymytz 2014"
                      header="#{lab.LRH_PB_liste_employes_traites}">
                <p:dataTable value="#{managedSalaire.employesNonTraite}" var="employ" rowKey="#{employ.id}"
                             selectionMode="single" id="list_Bull_nonTraite"
                             rowIndexVar="line_empC_">  
                    <p:column headerText="NÂ°" width="15">
                        <h:outputText value="#{line_empC_+1}" />
                    </p:column>
                    <p:column headerText="#{lab.L_noms_prenoms}" width="200">
                        <h:outputText value="#{employ.nom} #{employ.prenom}" />
                    </p:column>                        
                    <p:column headerText="#{lab.LDB_PD_matricule}" width="80" style="text-align: center">
                        <h:outputText value="#{employ.matricule}" />
                    </p:column>
                    <p:column headerText="#{lab.LRH_PPT_contrat}" width="100">
                        <h:outputText value="#{employ.contrat.referenceContrat}" />
                    </p:column>
                    <p:column headerText="#{lab.LRH_PB_convention}" width="80" >
                        <h:outputText value="#{employ.convention.categorie.categorie} - #{employ.convention.echelon.echelon}" />
                    </p:column>
                    <p:column headerText="#{lab.LDB_PCB_poste} " width="100">
                        <h:outputText value="#{employ.posteActif.intitule}" />
                    </p:column>
                </p:dataTable> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_dlg_ordre">
            <p:dialog widgetVar="dlgOrdreCalcul" showEffect="scale" hideEffect="scale" width="60%" closeOnEscape="true"
                      header="#{lab.LRH_PB_programmer_ordre_calcul_salaires}">
                <p:splitButton value="#{lab.L_enregistrer}" actionListener="#{managedSalaire.savecPlanCalculSalaire()}" 
                               update="table_planif_calcul :body_bulletin:champRefHead" id="save_planifCalcul">
                    <p:menuitem value="#{lab.L_nouveau}" actionListener="#{managedSalaire.resetOrdrePlanif()}" 
                                update="table_contrat_ form_odreP" id="cancel_planifCalcul" />
                </p:splitButton> 
                <h:panelGroup id="delete_planifCalcul">
                    <p:commandButton value="#{lab.L_supprimer}"  actionListener="#{managedSalaire.deleteOrdrePlanif()}"
                                     update="table_planif_calcul">
                        <!--<p:confirm message="Etes vous sure de vouloir supprimer cet ordre de calcul ?" header="Supprimer des orderes !" icon="ui-icon-trash"/>-->
                    </p:commandButton>
                    <p:commandButton icon="ui-icon-locked" value="#{lab.LRH_PM_cloturer}"  actionListener="#{managedSalaire.cloturePeriodeCalcul()}" 
                                     style="margin-left: 30%" update="table_planif_calcul">
                        <!--<p:confirm message="La clÃ´ture d'une pÃ©riode est une opÃ©ration irreversible; elle entrainera le vÃ©rro de l'ensemble des opÃ©rations effectuÃ©es au cours de cette pÃ©riode.Ãªtes-vous sure de vouloir continuer?"  header="Supprimer des orderes !" icon="ui-icon-locked"/>-->
                    </p:commandButton>
                </h:panelGroup>
                <div style="float: right">
                    <h:inputHidden value="#{managedSalaire.chaineSelectOc}" id="input_hide_planifCalcul" />
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('planifCalcul');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <h:link onclick="collapseList('planifCalcul');
                            return false" title="#{lab.L_mode_liste}" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link> 
                </div>                    
                <div style="clear: right"></div>
                <div class="yvs_form_planifCalcul">
                    <h:inputHidden value="#{managedSalaire.refAction}" id="refAction"/>
                    <h:panelGrid columns="2" styleClass="yvs_table" style="width: 97%; margin: auto" id="form_odreP"
                                 cellpadding="0" cellspacing="0">
                        <span style="color: #3b679e; font-size: 1.1em; font-weight: bold;">#{lab.LRH_PB_salaire_periode} </span>                            
                        <h:panelGroup styleClass="yvs_nostyle" >
                            <span style="font-weight: bold; font-size: 1.1em;margin-right: 15px">#{managedSalaire.ordreCalcul.reference}</span>
                            <p:calendar value="#{managedSalaire.ordreCalcul.debutMois}" pattern="dd-MM-yyyy" size="8"/>
                            <p:spacer style="width: 10px; background: firebrick; height: 10px"/>
                            <p:calendar value="#{managedSalaire.ordreCalcul.finMois}" pattern="dd-MM-yyyy" size="8"/> 
                        </h:panelGroup>
                        <span>#{lab.LRH_PB_periode_traitement}</span>
                        <h:panelGroup styleClass="yvs_nostyle" >                           
                            <p:calendar value="#{managedSalaire.ordreCalcul.debutTraitement}" pattern="dd-MM-yyyy" size="8"/>
                            <p:spacer style="width: 10px; background: firebrick; height: 10px"/>
                            <p:calendar value="#{managedSalaire.ordreCalcul.finTraitement}" pattern="dd-MM-yyyy" size="8"/>
                        </h:panelGroup>
                        <span>#{lab.LRH_PB_date_lancement}</span>
                        <p:calendar value="#{managedSalaire.ordreCalcul.dateExecution}" pattern="dd-MM-yyyy"/>
                        <span>#{lab.LRH_PB_heure}</span>
                        <h:panelGroup>
                            <pe:timePicker value="#{managedSalaire.ordreCalcul.heureExecution}" style="margin-right: 15px"/>
                            <h:outputText value="#{lab.LRH_PB_cloturer_le} " style="font-size: 0.8em; font-style: italic; color: brown"  rendered="#{managedSalaire.ordreCalcul.cloture}"/>
                            <h:outputText value="#{managedSalaire.ordreCalcul.dateCloture}" style="font-size: 0.8em; font-style: italic; color: brown"  rendered="#{managedSalaire.ordreCalcul.cloture}" converter="LD"/>
                            <p:commandButton style="float: right; width: 23px; height: 23px" icon="ui-icon-person" type="button" onclick="dlgEmploye.show();
                                    collapseList('bulletinEmploye')" 
                                             global="false" />
                        </h:panelGroup>                            
                    </h:panelGrid>  
                    <p:outputPanel id="table_contrat_">
                        <p:dataTable value="#{managedSalaire.ordreCalcul.listContrat}" var="con_" rowIndexVar="linecE_"
                                     emptyMessage="employÃ©s concernÃ©" rendered="#{!managedSalaire.ordreCalcul.listContrat.isEmpty()}">                                
                            <p:column headerText="NÂ°" width="15">
                                #{linecE_+1}
                            </p:column>                                                        
                            <p:column headerText="#{lab.L_noms_prenoms}" width="200">
                                <h:outputText value="#{con_.employe.nom} #{con_.employe.prenom}" />
                            </p:column>                                      
                            <p:column headerText="#{lab.LDB_PD_matricule}" width="150">
                                <h:outputText value="#{con_.employe.matricule}" />
                            </p:column>
                            <p:column headerText="#{lab.LDB_PCB_poste}" width="150">
                                <h:outputText value="#{con_.employe.posteDeTravail.intitule}" />
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </div>
                <div class="yvs_list_planifCalcul" style="clear: right">
                    <span>#{lab.LC_PTBC_exercice}</span>
                    <h:selectOneMenu value="#{managedSalaire.idExercice}" valueChangeListener="#{managedSalaire.choixExercice}">
                        <f:selectItem itemLabel="" itemValue="#{null}" />
                        <f:selectItems value="#{managedExercice.exercices}" var="iexo" itemLabel="#{iexo.reference}" itemValue="#{iexo.id}" />
                        <p:ajax event="valueChange" update="table_planif_calcul" />
                    </h:selectOneMenu>
                    <p:dataTable value="#{managedSalaire.listPlanification}" var="plan_" rowIndexVar="linePl_"
                                 id="table_planif_calcul" selectionMode="single" rowKey="#{plan_.id}" style="max-height: 400px">
                        <p:ajax event="rowSelect" listener="#{managedSalaire.loadOnviewOrdreP}" 
                                update=":body_bulletin:bulletin_dates :body_bulletin:bulletin_dates_ :body_bulletin:tabV-salaire:pagination_bulletin :form_dlg_ordre:refAction :body_bulletin:champRefHead"/>
                        <p:column headerText="NÂ°" width="25">
                            <span class="cloture_#{plan_.cloture}"> #{linePl_+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_reference}">
                            <h:outputText value="#{plan_.reference}" styleClass="cloture_#{plan_.cloture}"/>
                            <h:panelGroup style="float: right">
                                <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{managedSaisiePiece.isComptabilise(plan_.id, constantes.SCR_SALAIRE)}" styleClass="style_statut"/>
                            </h:panelGroup>
                        </p:column> 
                        <p:column headerText="#{lab.LDB_PEX_periode}">
                            <h:outputText value="#{plan_.debutMois}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>&nbsp;&brvbar;&nbsp;
                            <h:outputText value="#{plan_.finMois}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>
                            <h:graphicImage library="icones" name="lock.png" width="12" height="12" rendered="#{plan_.cloture}" style="float: right"/>
                        </p:column>                          
                        <p:column headerText="#{lab.LRH_PB_date_excution}">
                            <h:outputText value="#{plan_.dateExecution}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>&nbsp;
                            <h:outputText value="#{plan_.heureExecution}" converter="TIME" styleClass="cloture_#{plan_.cloture}"/>
                            <h:outputText styleClass="num_" value="(#{plan_.contrats.size()})" rendered="#{plan_.contrats.size()!=0}"/>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <p:contextMenu for="btn_option_planifCalcul" event="left click" style="font-size: 0.8em">
                                <p:menuitem icon="ui-icon-refresh" value="Modifier" actionListener="#{managedSalaire.loadOnviewOrdrePToUpdate(plan_)}"
                                            update=":form_dlg_ordre:form_odreP :form_dlg_ordre:table_contrat_" oncomplete="collapseForm('planifCalcul');"/>
                                <p:separator />
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedSaisiePiece.comptabiliserSalaire(plan_, true, true)}"
                                            rendered="#{!managedSaisiePiece.isComptabilise(plan_.id, constantes.SCR_SALAIRE)}" update="table_planif_calcul"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedSaisiePiece.unComptabiliserSalaire(plan_, true)}"
                                            rendered="#{managedSaisiePiece.isComptabilise(plan_.id, constantes.SCR_SALAIRE)}" update="table_planif_calcul"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_planifCalcul" type="button"/>
                        </p:column>
                        <p:column width="25">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox value="false" class="chek_all_line_planifCalcul" onclick="selectionAllLineTab(#{managedSalaire.listPlanification.size()}, 'planifCalcul')"/>
                            </f:facet>                                
                            <h:selectBooleanCheckbox value="false" class="chek_line_planifCalcul" onclick="selectionLineTab(#{linePl_}, 'planifCalcul')"/>                                
                        </p:column>                            
                    </p:dataTable>
                </div>                                       
                <f:facet name="footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="fomr_SalEmps">
            <p:dialog header="#{lab.LRH_PD_liste_employes_actif}" widgetVar="dlgEmploye" width="90%" height="650"
                      closeOnEscape="true">     
                <div class="dlg_part_fixe">  
                    <h:panelGrid columns="5" cellpadding="0" cellspacing="0" style="font-size: 0.8em; float: left">
                        <h:outputText value="#{lab.LRH_PPT_employe}" />
                        <h:outputText value="#{lab.L_agence}" />
                        <h:outputText value="#{lab.LRH_PE_profil}" />
                        <h:outputText value="Statut social" />
                        <h:outputText value="" />
                        <h:inputText value="#{MEmps.matriculeToUpdate}"  title="#{lab.LRH_PB_filtrer_employe}">
                            <p:ajax event="valueChange" listener="#{MEmps.findSimpleEmploye(MEmps.matriculeToUpdate)}"
                                    update="salaire-tabEmployes"  />
                        </h:inputText>
                        <h:selectOneMenu value="#{MEmps.agence_}" valueChangeListener="#{MEmps.addSimpleParamAgence}" >
                            <f:selectItem itemValue="0" itemLabel="...#{lab.LDB_PA_agences}..." />
                            <f:selectItems value="#{managedDepartement.currentScte.agences}" var="itemA" itemValue="#{itemA.id}" itemLabel="#{itemA.designation}" />
                            <f:selectItem itemValue="-1" itemLabel="#{lab.LDB_PCB_toutes_societe}" />
                            <p:ajax event="valueChange" update="salaire-tabEmployes"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{MEmps.profilF}" valueChangeListener="#{MEmps.loadSimpleEmployeByProfil}" >
                            <f:selectItem itemValue="0" itemLabel="...#{lab.LRH_PB_profils_employes}..." />
                            <f:selectItems value="#{MEmps.profils}" var="iprof" itemValue="#{iprof.id}" itemLabel="#{iprof.statutProfil}" />
                            <f:selectItem itemValue="-1" itemLabel="#{lab.LRH_PB_tous_profils}" />
                            <p:ajax event="valueChange" update="salaire-tabEmployes"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{MEmps.statutSocialFilter}" valueChangeListener="#{MEmps.addParamStatutSociel}">
                            <f:selectItem itemValue="#{null}" itemLabel="Tous" />
                            <f:selectItem itemValue="#{1}" itemLabel="EmployÃ©s immatriculÃ©s" />
                            <f:selectItem itemValue="#{2}" itemLabel="EmployÃ©s Non immatriculÃ©s" />
                            <p:ajax event="valueChange" update="salaire-tabEmployes"  />
                        </h:selectOneMenu>
                        <p:outputPanel  autoUpdate="true">
                            <p:commandButton actionListener="#{MEmps.pagineSimpleResult(false)}" update="salaire-tabEmployes" icon="ui-icon-circle-triangle-w" disabled="#{MEmps.paginator.disPrev}"
                                             style="width: 22px; height: 22px"/>
                            <p:outputPanel >
                                <p:outputLabel value="#{MEmps.paginator.currentPage} / #{MEmps.paginator.nbPage}" style="margin-top: 0px; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{MEmps.pagineSimpleResult(true)}" update="salaire-tabEmployes" icon="ui-icon-circle-triangle-e" disabled="#{MEmps.paginator.disNext}"
                                             style="width: 22px; height: 22px"/>
                            <p:selectOneMenu value="#{MEmps.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{MEmps.changeSimpleMaxResult}" 
                                             style="font-size: 0.9em;min-width: 50px; top: 2px; position: relative" >
                                <f:selectItems value="#{MEmps.paginations}"/>
                                <p:ajax event="valueChange" update="salaire-tabEmployes"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 
                    </h:panelGrid>                    
                    <div style="clear: left" />
                </div>
                <div class="dlg_part_scroll">
                    <div class="yvs_list_bulletinEmploye">
                        <p:dataTable value="#{MEmps.listEmployes}" var="emp" rowKey="#{emp.id}"
                                     widgetVar="tabEmployes" id="salaire-tabEmployes" selectionMode="single"
                                     rowIndexVar="line_empC" editMode="cell" editable="true">                              
                            <p:ajax event="cellEdit"   global="false" process="@this"  listener="#{managedSalaire.saveOrUpdateNewElt}"/>
                            <p:column headerText="NÂ°" width="15">
                                <h:outputText value="#{line_empC+1}" />
                            </p:column>
                            <p:column headerText="#{lab.L_noms_prenoms}" width="200">
                                <h:outputText value="#{emp.nom} #{emp.prenom}" />
                            </p:column>                        
                            <p:column headerText="#{lab.LDB_PD_matricule}" width="60" >
                                <h:outputText value="#{emp.matricule}" />
                            </p:column>
                            <p:column headerText="#{lab.LDB_PD_matricule} Social" width="80" >
                                <h:outputText value="#{emp.matriculeCnps}" />
                            </p:column>
                            <p:column headerText="#{lab.LRH_PB_contrat}" width="100">
                                <h:outputText value="#{emp.contrat.referenceContrat}" />
                            </p:column>                            
                            <p:column headerText="#{lab.LDB_PCB_poste} " width="100">
                                <h:outputText value="#{emp.posteActif.intitule}" />
                            </p:column>                             
                            <p:column headerText=" " width="25" style="text-align: center"> 
                                <f:facet name="header">
                                    <p:contextMenu for="btn_option_employe_h" event="left click">
                                        <p:menuitem value="#{lab.LRH_PB_ajouter_element}" icon="ui-icon-circle-plus" actionListener="#{managedSalaire.openDialogToAddOthersElement()}"/>
                                        <p:menuitem disabled="true"  value="#{lab.LRH_PE_ordonner}" icon="ui-icon-triangle-2-n-s" style="font-weight: bold" />
                                        <p:menuitem title="#{lab.LRH_PE_ordonner_par_matricule}" value="#{lab.LRH_PE_par_matricule}" icon="ui-icon-triangle-1-n" style="font-weight: bold; text-indent: 20px;" actionListener="#{MEmps.changeOrderList('y.matricule')}"
                                                    update="salaire-tabEmployes"/>
                                        <p:menuitem title="#{lab.LRH_PB_ordonner_nom_prenom}" value="#{lab.LRH_PE_par_nom}"  icon="ui-icon-triangle-1-n" style="font-weight: bold; text-indent: 20px;" actionListener="#{MEmps.changeOrderList('y.nom, y.prenom')}"
                                                    update="salaire-tabEmployes"/>                                    
                                    </p:contextMenu>
                                    <p:commandButton tabindex="-1" type="button" icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_employe_h"/>
                                </f:facet>
                                <p:contextMenu for="bull_emps_act" event="click" style="text-shadow: none;background: #241f1f; color: #FFF; font-weight: bold; font-size: 0.8em"
                                               styleClass="context_menu">
                                    <p:menuitem value="#{lab.LRH_PB_ajouter_element}" icon="ui-icon-circle-plus" actionListener="#{managedSalaire.openDialogToAddOthersElement(emp)}"/>
                                    <p:menuitem value="#{lab.LRH_PB_compiler}" icon="ui-icon-refresh" actionListener="#{managedSalaire.compileOneBulletin(emp,false,true)}" update=":body_bulletin:table_buletin_calcule :body_bulletin:tabV-salaire"
                                                onstart="dlgWait.show()" oncomplete="dlgWait.hide()"  />
                                    <p:menuitem value="#{lab.LRH_PB_voir_bulletins}" icon="ui-icon-folder-open" actionListener="#{managedSalaire.loadBulletinOneEmploye(emp)}" oncomplete="collapseList('bulletin')"
                                                update=":body_bulletin:table_buletin_calcule"/>
                                </p:contextMenu>
                                <p:commandButton tabindex="-1" type="button" icon="ui-icon-gear" style="width: 22px; height: 22px" id="bull_emps_act" />
                            </p:column> 
                            <p:column width="25" style="text-align: center  ">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox tabindex="-1" value="false" class="chek_all_line_bulletinEmploye chek_all_line_employe" 
                                                             onclick="selectionAllLine2Tab(#{MEmps.listEmployes.size()}, 'bulletinEmploye', 'employe')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox tabindex="-1" value="false" class="chek_line_bulletinEmploye chek_line_employe" 
                                                         onclick="selectionLine2Tab(#{line_empC}, 'bulletinEmploye', 'employe')"/>
                            </p:column>
                            <p:column headerText="#{managedSalaire.codeParamSal} " width="50" rendered="#{(managedSalaire.codeParamSal!=null) and managedSalaire.currentBulletin.entete.id gt 0}"
                                      style="text-align: right">
                                <p:cellEditor >
                                    <f:facet name="output">
                                        <h:outputText value="#{managedSalaire.giveValueElt(emp, managedSalaire.codeParamSal)}" />
                                    </f:facet>
                                    <f:facet name="input">
                                        <h:inputText value="#{emp.valeurElt}" tabindex="#{line_empC+1}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                        </p:dataTable>                         
                        <h:panelGroup >
                            <h:inputHidden value="#{managedSalaire.tabIds}" id="input_hide_employe"/>
                            <span class="nbSelectemploye" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        </h:panelGroup> 
                    </div>
                </div>                               
                <f:facet name="footer">
                    <span>&copy;Lymytz 2014</span>
                    <p:selectOneRadio value="#{MEmps.optionSearch}" style="float: right; font-size: 0.8em" 
                                      valueChangeListener="#{MEmps.loadEmployeWithoutContrat}">
                        <f:selectItem itemValue="1" itemLabel="#{lab.LRH_PE_tous}" />
                        <f:selectItem itemValue="2" itemLabel="#{lab.LRH_PC_employe_sans_contrat}" />      
                        <p:ajax event="valueChange" process="@this" update=":fomr_SalEmps:salaire-tabEmployes"/>
                    </p:selectOneRadio>
                </f:facet>
            </p:dialog>                                               
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_confirmer_suppression}" message="#{lab.LRH_PB_vraiment_supprimer}" widgetVar="dlgConfirmDelete" width="300">
                <h:panelGrid columns="2" style="width: 80%; margin: auto">
                    <p:commandButton value="#{lab.L_oui}" actionListener="#{managedSalaire.deleteBean()}" oncomplete="dlgConfirmDelete.hide()" 
                                     style="width: 100%; margin: auto"/>
                    <p:commandButton value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()" style="width: 100%; margin: auto"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_confirmer_valider}" message="#{lab.LRH_PB_text4}" widgetVar="dlgConfirmB">
                <h:panelGrid columns="2" style="width: 80%; margin: auto">
                    <p:commandButton value="#{lab.L_oui} (#{lab.L_confirmer})" icon="ui-icon-check" actionListener="#{managedSalaire.confirmValide()}" oncomplete="dlgConfirmB.hide()" 
                                     style="width: 100%; margin: auto" update=":body_bulletin:table_buletin_calcule :body_bulletin:etape_valid_bulletin"/>
                    <p:commandButton value="#{lab.L_non}(#{lab.LRH_PB_maintenir})" icon="ui-icon-circle-close" 
                                     onclick="dlgConfirmB.hide()" style="width: 100%; margin: auto"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_confirmer_valider}" message="#{lab.LRH_PB_text4}" widgetVar="dlgConfirmBS">
                <h:panelGrid columns="2" style="width: 80%; margin: auto">
                    <p:commandButton value="#{lab.L_oui} (#{lab.L_confirmer})" icon="ui-icon-check" actionListener="#{managedSalaire.confirmValidSelection()}" oncomplete="dlgConfirmBS.hide()" 
                                     style="width: 100%; margin: auto" update=":body_bulletin:table_buletin_calcule :body_bulletin:etape_valid_bulletin"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmBS.hide()" style="width: 100%; margin: auto"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_confirmer_valider}" message="#{lab.LRH_PB_text5} "  widgetVar="dlgConfirmPB">
                <h:panelGrid columns="2">
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.payeBulletin()}" oncomplete="dlgConfirmPB.hide()" 
                                     update=":body_bulletin:table_buletin_calcule :body_bulletin:etape_valid_bulletin"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmPB.hide()" />
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_annuler}"   message="#{lab.LRH_PB_text6} " widgetVar="dlgConfirmAB">
                <h:panelGrid columns="2" >
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.confirmCancel()}" oncomplete="dlgConfirmAB.hide()" 
                                     style="margin: auto" update=":body_bulletin:table_buletin_calcule :body_bulletin:etape_valid_bulletin"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmAB.hide()"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_annuler}"   message="#{lab.LRH_PB_text6} " widgetVar="dlgConfirmABS">
                <h:panelGrid columns="2" >
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.confirmCancelValidSelection()}" oncomplete="dlgConfirmABS.hide()" 
                                     style="margin: auto" update=":body_bulletin:table_buletin_calcule :body_bulletin:etape_valid_bulletin"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmABS.hide()"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabiliseHead" message="#{lab.LC_PJV_text2}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserHeaderVente(managedVente.selectDoc, true, true)}"
                                 update=":body_bulletin:table_buletin_calcule :body_bulletin:btn_comptabilised_head_bulletin" oncomplete="dlgComptabiliseHead.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabiliseHead.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseHead" message="#{lab.LC_PJV_text3}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserHeaderVente(managedVente.selectDoc, true)}"
                                 update=":body_bulletin:table_buletin_calcule :body_bulletin:btn_comptabilised_head_bulletin" oncomplete="dlgUnComptabiliseHead.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseHead.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabiliseDoc" message="#{lab.LRH_PB_text7}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserBulletin(managedSalaire.selectBull)}"
                                 update=":body_bulletin:btn_comptabilised_head_bulletin" oncomplete="dlgComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabiliseDoc.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseDoc" message="#{lab.LRH_PB_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserBulletin(managedSalaire.selectBull, true)}"
                                 update=":body_bulletin:btn_comptabilised_head_bulletin" oncomplete="dlgUnComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseDoc.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dglEtatComptabilised" closeOnEscape="true" resizable="false" width="25%">
                <p:commandButton value="#{lab.LRH_PB_tous_bulletins}" actionListener="#{managedSalaire.verifyComptabilised(null)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LRH_PB_bulletins_comptabilise}" actionListener="#{managedSalaire.verifyComptabilised(true)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LRH_PB_bulletins_non_comptabilise}" actionListener="#{managedSalaire.verifyComptabilised(false)}" style="width: 99%"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_validation_multiple}"  message="#{lab.LRH_PB_confirmer_validation_elements} "  widgetVar="dlgConfirmValidAll">
                <h:panelGrid columns="2" >
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.confirmValidAll()}" oncomplete="dlgConfirmValidAll.hide()" 
                                     update=":body_bulletin:table_buletin_calcule"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmValidAll.hide()"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="Invalidation multiple" widgetVar="dlgConfirmInvalidAll"
                             message="Confirmez-vous l'invalidation de toute la liste des Ã©lÃ©ments">
                <h:panelGrid columns="2" >
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.confirmCancelValidAll()}" oncomplete="dlgConfirmInvalidAll.hide()" 
                                     update=":body_bulletin:table_buletin_calcule"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmInvalidAll.hide()"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LRH_PB_payement_mutilple}" 
                             message="#{lab.LRH_PB_text9} "
                             widgetVar="dlgConfirmPayeAll">
                <h:panelGrid columns="2" >
                    <p:commandButton value="#{lab.L_oui}" icon="ui-icon-check" actionListener="#{managedSalaire.confirmPayeAll()}" oncomplete="dlgConfirmPayeAll.hide()" 
                                     update=":body_bulletin:table_buletin_calcule"/>
                    <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" onclick="dlgConfirmPayeAll.hide()"/>
                </h:panelGrid>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_pptes_compta">
            <p:dialog  width="60%" widgetVar="dlgPpteCompta" closeOnEscape="true" header="PiÃ¨ces comptable">
                <ui:include src="../../finance_compta/compta_general/yvs_schema_compta.xhtml" />
                <f:facet name="footer">
                    &copy;Lymytz 2014
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="body_bulletin">   
            <div class="part_fix">
                <h:panelGrid columns="3" style="float: left" >
                    <h:panelGroup  id="save_bulletin" >
                        <h:selectBooleanCheckbox  value="#{managedSalaire.deleteAllDoublon}" title="#{lab.LRH_PB_supprimer_doublons_periode} " 
                                                  id="chmp_del_dob_period">
                            <p:ajax event="valueChange" update=":body_bulletin:chmp_del_dob_period" global="false"/>
                        </h:selectBooleanCheckbox>

                        <p:commandButton value="#{lab.LRH_PB_compiler_selection}" icon="ui-icon-disk" 
                                         actionListener="#{managedSalaire.createBulletin(false)}"
                                         update=":body_bulletin:table_buletin_calcule tabV-salaire" />                            
                        <h:inputHidden value="#{managedSalaire.chaineSelectEmploye}" id="input_hide_bulletinEmploye" class="input_hide_bulletinEmploye"/>
                        <p:commandButton icon="ui-icon-search"  global="false" style="width: 23px; height: 23px;"
                                         oncomplete="dlgEmploye.show();" actionListener="#{managedSalaire.setTabIds('')}"/>
                        <span class="nbSelectbulletinEmploye" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:contextMenu for="table_buletin_calcule">
                            <p:menuitem value="#{lab.LRH_PB_imprimer_bulletin}" icon="ui-icon-print" 
                                        actionListener="#{managedSalaire.exporteBulletin()}" ajax="false" />
                        </p:contextMenu>
                        <div style="margin-right: 0.5%" align="right  ">
                            <p:contextMenu  styleClass="context_menu" for="delete_bulletin" event="left click">
                                <p:menuitem icon="ui-icon-circle-check"  update=":body_bulletin:table_buletin_calcule tabV-salaire" global="false" onclick="dlgConfirmB.show();"
                                            value="#{lab.LC_PCV_valider}" />    
                                <p:menuitem icon="ui-icon-circle-close"  update=":body_bulletin:table_buletin_calcule tabV-salaire" global="false" onclick="dlgConfirmAB.show();"
                                            value="Invalider" />    
                                <p:menuitem value="#{lab.LRH_PB_marquer_payer}"  icon="ui-icon-locked" global="false" onclick="dlgConfirmPB.show();"
                                            update=":body_bulletin:table_buletin_calcule input_hide_bulletin" />                            
                                <p:separator />
                                <p:menuitem icon="ui-icon-circle-arrow-s"  value="TÃ©lÃ©charger" actionListener="#{managedSalaire.exporteALLBulletin()}" ajax="false" />
                                <p:separator />                           
                                <p:menuitem value="Valider la selection" onclick="dlgConfirmBS.show()" icon="ui-icon-circle-check"/>
                                <p:menuitem value="Invalider la selection" onclick="dlgConfirmABS.show()" icon="ui-icon-circle-close"/>
                                <p:menuitem value="#{lab.LRH_PB_supprimer_selection}" onclick="dlgConfirmDelSelection.show()" icon="ui-icon-trash"/>
                            </p:contextMenu>
                            <p:commandButton type="button" icon="ui-icon-gear" value="#{lab.L_options}" id="delete_bulletin" />                       
                        </div>
                    </h:panelGroup>
                </h:panelGrid>                 
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedSalaire.parcoursInAllResult(false)}" update="txt_parc_linear_bulletin" global="false"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('bulletin')"/>
                    <h:inputText value="#{managedSalaire.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_bulletin"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedSalaire.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedSalaire.parcoursInAllResult(true)}" update="txt_parc_linear_bulletin" global="false" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('bulletin')"/>
                </h:panelGroup>                
                <div style="float: right">                        
                    <h:inputHidden value="#{managedSalaire.chaineSelectBulletin}" id="input_hide_bulletin" />
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('bulletin');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <h:link onclick="collapseList('bulletin');
                            return false" title="#{lab.L_mode_liste}" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>                        
                </div>                
                <div style="clear: right"></div>
            </div>
            <div class="part_scroll">
                <div class="yvs_form_bulletin">                        
                    <h:panelGrid columns="1" style="width: 100%; background: white">
                        <p:outputPanel id="input_employe_bulletin">
                            <h:panelGroup id="etape_valid_bulletin">
                                <h:panelGroup style="float: left;margin: 5px;" rendered="#{managedSalaire.currentBulletin.statut==constantes.STATUT_DOC_VALIDE}">
                                    <p:commandLink value="#{managedSaisiePiece.isComptabilise(managedSalaire.currentBulletin.id, constantes.SCR_BULLETIN)?lab.L_comptabilise:lab.L_comptabiliser}"
                                                   type="button" styleClass="#{(managedSaisiePiece.isComptabilise(managedSalaire.currentBulletin.id, constantes.SCR_BULLETIN))?'statut_valide':'etat_formation_true'}"
                                                   onclick="dlgComptabiliseDoc.show()" rendered="#{managedSalaire.currentBulletin.statut==constantes.STATUT_DOC_VALIDE}" global="false" id="btn_comptabilised_head_bulletin"/>
                                    <p:contextMenu for="btn_comptabilised_head_bulletin" style="font-size: 0.7em">
                                        <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(managedSalaire.currentBulletin.id, constantes.SCR_BULLETIN)}" 
                                                    update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>
                                        <p:separator style="width: 100%" />
                                        <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.L_annuler}" onclick="dlgUnComptabiliseDoc.show()" disabled="#{!managedSaisiePiece.isComptabilise(managedSalaire.currentBulletin.id, constantes.SCR_BULLETIN)}"/>
                                    </p:contextMenu>
                                </h:panelGroup>
                                <div style="float: right; display: #{(managedSalaire.currentBulletin.id!=0)?'block':'none'}">
                                    <p:commandLink><li class="file_#{managedSalaire.currentBulletin.statut==constantes.STATUT_DOC_EDITABLE}" >Brouillon</li></p:commandLink>
                                    <p:commandLink onclick="dlgConfirmB.show()" global="false" type="button"><li class="file_#{managedSalaire.currentBulletin.statut==constantes.STATUT_DOC_VALIDE}">#{lab.LC_PCV_valider}</li></p:commandLink>
                                    <p:commandLink onclick="dlgConfirmPB.show()" global="false" type="button"><li class="file_#{managedSalaire.currentBulletin.statut==constantes.STATUT_DOC_PAYER}">#{lab.LCF_PBP_payer}</li></p:commandLink>
                                </div> 
                            </h:panelGroup>                                      
                            <div style="clear: both"></div> 
                            <div align="center" style="display: #{(managedSalaire.currentBulletin.id!=0)?'block':'none'}">
                                #{lab.LRH_PB_bulletin_numero} 
                                <span style="font-size: 1.1em; font-weight: bold; margin-right: 5%">
                                    #{managedSalaire.currentBulletin.refBulletin}
                                </span>
                                #{lab.LRH_PC_anciennete} : 
                                <span style="font-size: 1.1em; font-weight: bold">
                                    #{managedSalaire.currentBulletin.anciennete}
                                </span>
                            </div>
                            <h:panelGrid columns="6" styleClass="yvs_table" cellpadding="0" cellspacing="0" 
                                         style="width: 100%; margin: auto"> 
                                <span>#{lab.LRH_PRS_periode}</span>
                                <h:selectOneMenu value="#{managedSalaire.currentBulletin.entete.id}" id="champRefHead"
                                                 valueChangeListener="#{managedSalaire.choiHeader}">
                                    <f:selectItem itemValue="0" itemLabel="" />
                                    <f:selectItems value="#{managedSalaire.listPlanification}" var="head_" itemValue="#{head_.id}"
                                                   itemLabel="#{head_.reference}" rendered="#{head_.cloture}" />
                                    <f:selectItem itemValue="0" itemLabel="" />
                                    <f:selectItem itemValue="-1" itemLabel="#{lab.L_plus_de_choix}" />
                                    <p:ajax event="valueChange" global="false" oncomplete="collapseForm('planifCalcul')"
                                            update=":body_bulletin:bulletin_dates :body_bulletin:bulletin_dates_ :body_bulletin:tabV-salaire:pagination_bulletin :form_dlg_ordre:refAction" />
                                </h:selectOneMenu>
                                <h:panelGroup styleClass="yvs_nostyle" id="bulletin_dates">                                                                  
                                    <p:calendar value="#{managedSalaire.debut}" pattern="dd-MM-yyyy" size="8" disabled="true"/>
                                    <p:spacer style="width: 10px; background: firebrick; height: 10px"/>
                                    <p:calendar value="#{managedSalaire.fin}" pattern="dd-MM-yyyy" size="8" disabled="true"/>
                                </h:panelGroup>
                                <h:panelGroup styleClass="yvs_nostyle" id="bulletin_dates_">                                                                  
                                    <p:calendar value="#{managedSalaire.currentBulletin.entete.debutTraitement}" pattern="dd-MM-yyyy" size="8" disabled="true"/>
                                    <p:spacer style="width: 10px; background: firebrick; height: 10px"/>
                                    <p:calendar value="#{managedSalaire.currentBulletin.entete.finTraitement}" pattern="dd-MM-yyyy" size="8" disabled="true"/>
                                </h:panelGroup>
                                <span>#{lab.LRH_PC_structure_salaire}</span>
                                <p:inputText value="#{managedSalaire.currentBulletin.contrat.structSalaire.nom}" 
                                             disabled="true" /> 
                                <span>#{lab.LRH_PB_contrat}</span>
                                <h:panelGroup >
                                    <h:inputText value="#{managedSalaire.currentBulletin.contrat.reference}" disabled="true"/> &nbsp;&nbsp;                                    
                                </h:panelGroup>                                    
                                <span>#{lab.LCF_PBP_employe} </span>
                                <h:inputText value="#{managedSalaire.currentBulletin.contrat.employe.nom} #{managedSalaire.currentBulletin.contrat.employe.prenom}" disabled="true" />
                                <span>#{lab.LRH_PD_poste} </span>
                                <h:inputText value="#{managedSalaire.currentBulletin.contrat.employe.posteDeTravail.intitule}" disabled="true" />                                
                            </h:panelGrid>                         
                            <div style="float: left; font-size: 0.7em">

                            </div>
                            <div style="float: right" class="contains_">
                                <p:splitButton icon="ui-icon-gear" type="button" global="false">
                                    <p:menuitem icon="ui-icon-pin-w" value="#{lab.LRH_PB_planifier_ordre}" 
                                                update=":body_bulletin:table_buletin_calcule tabV-salaire" global="false" onclick="choixHeader();
                                                        collapseForm('planifCalcul')"/>
                                    <p:menuitem icon="ui-icon-folder-open" value="#{lab.LRH_PB_ordres_en_cours}"  global="false" onclick="choixHeader();
                                            collapseList('planifCalcul')"
                                                update=":body_bulletin:table_buletin_calcule tabV-salaire"/>

                                </p:splitButton>
                            </div>
                        </p:outputPanel>                           
                        <p:tabView id="tabV-salaire">                       
                            <p:tab title="#{lab.LRH_PB_elements_additionnels}" rendered="false">
                                <p:tooltip  for="txt-code-eltB" value="#{lab.LRH_PB_text10}"
                                            showEffect="clip" hideEffect="explode" />
                                <p:panelGrid columns="7" style="width: 100%"> 
                                    <p:outputLabel value="#{lab.L_libelle}" />
                                    <p:inputText value="#{detailsBulletin.elementSalaire.nom}"/>
                                    <p:outputLabel value="#{lab.L_code}" />
                                    <p:inputText value="#{detailsBulletin.elementSalaire.code}" id="txt-code-eltB"/>
                                    <p:outputLabel value="#{lab.L_montant}" />
                                    <pe:inputNumber value="#{detailsBulletin.base}"/>  
                                    <p:commandButton value="#{lab.LRH_PB_creer}" actionListener="#{managedSalaire.addElmtBulletin()}" 
                                                     update="tab_elt_bull"/>
                                </p:panelGrid>  
                                <p:dataTable value="#{managedSalaire.bulletins}" var="eltB"  
                                             id="tab_elt_bull" rowKey="#{eltB.id}" selectionMode="single">            
                                    <p:column headerText="NÂ°" >
                                        #{eltB.id}
                                    </p:column>
                                    <p:column headerText="#{lab.L_libelle}" >
                                        #{eltB.elementSalaire.nom}
                                    </p:column>
                                    <p:column headerText="#{lab.L_code}" >
                                        #{eltB.elementSalaire.code}
                                    </p:column>
                                    <p:column headerText="#{lab.L_montant}" >
                                        <h:outputText value="#{eltB.base}" converter="DN" />
                                    </p:column>
                                    <p:column style="width:4%;text-align: center">
                                        <p:commandButton icon="ui-icon-close" title="#{lab.L_supprimer}" actionListener="#{managedSalaire.deleteEltBulletin(eltB)}">

                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable> 
                            </p:tab>
                            <p:tab title="AperÃ§u bulletin" >
                                <h:panelGroup style="width: 100%">                                    
                                    <p:commandLink actionListener="#{managedSalaire.navigueInAppercu(-1)}" style="float: left"
                                                   update=":body_bulletin:tabV-salaire:bulletins :body_bulletin:input_employe_bulletin :body_bulletin:tabV-salaire:bulletins_App pagination_bulletin" process="@this"
                                                   global="false" >
                                        <h:graphicImage style="border:none; margin-left: 0.1em; cursor: pointer;"  
                                                        alt="img" library="img"  name="menBg_.png" width="25" height="15"/>                        
                                    </p:commandLink> 
                                    <p:outputLabel styleClass="counter_navigue" value="#{managedSalaire.position} / #{managedSalaire.nombreBulletin}" id="pagination_bulletin" style="margin-left: 40%; font-style: italic; font-size: 0.8em"/>
                                    <p:commandLink action="#{managedSalaire.navigueInAppercu(1)}" global="false" style="float: right"
                                                   update=":body_bulletin:tabV-salaire:bulletins :body_bulletin:input_employe_bulletin :body_bulletin:tabV-salaire:bulletins_App pagination_bulletin" process="@this">
                                        <h:graphicImage style="border:none; margin-left: 0.1em; cursor: pointer;"
                                                        alt="img" library="img"  name="menBg.png" width="25" height="15"/>                                                        
                                    </p:commandLink> 
                                </h:panelGroup>
                                <p:dataTable value="#{managedSalaire.currentBulletin.listElementApercu}" var="rubr"  
                                             id="bulletins_App" rowKey="#{rubr.id}"
                                             rowIndexVar="lineBul_">    
                                    <p:columnGroup type="header">                                                               
                                        <p:row>
                                            <p:column rowspan="2" headerText="#{lab.LRH_PB_designation_element}"  width="300"/>
                                            <p:column rowspan="2" headerText="#{lab.L_quantite}" />
                                            <p:column rowspan="2" headerText="#{lab.LRH_PB_base}" />
                                            <p:column colspan="3" headerText="#{lab.LRH_PB_salariales}" />
                                            <p:column colspan="2" headerText="#{lab.LRH_PB_patronales}" />                               
                                        </p:row>
                                        <p:row>
                                            <p:column headerText="#{lab.L_taux}(%)" />
                                            <p:column headerText="#{lab.L_montant}" />
                                            <p:column headerText="#{lab.LRH_PRS_retenue}" />
                                            <p:column headerText="#{lab.LRH_PRS_retenue}(%)" />
                                            <p:column headerText="#{lab.LRH_PRS_retenue}" />
                                        </p:row>
                                    </p:columnGroup>
                                    <p:subTable value="#{rubr.elementsBulletin}" var="bul_">
                                        <p:column headerText="#{lab.LRH_PB_designation_element}"  styleClass="lineFooter_#{bul_.lineRecap}">
                                            #{bul_.element.nom}
                                        </p:column>                               
                                        <p:column headerText="#{lab.L_quantite}" styleClass="lineFooter_#{bul_.lineRecap}">                                            
                                            <h:outputText value="#{bul_.quantite}" converter="DNS" />                                
                                        </p:column> 
                                        <p:column headerText="#{lab.LRH_PB_base}" styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.base}" converter="DN"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_taux}(%)" styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.tauxSalarial}" />
                                        </p:column> 
                                        <p:column styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.montantPayer}" converter="DN"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LRH_PB_retenue}" styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.retenuSalariale}" converter="DN" />
                                        </p:column>
                                        <p:column headerText="#{lab.L_taux} (%)" styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.tauxPatronal}" />
                                        </p:column> 
                                        <p:column headerText="#{lab.LRH_PB_retenue}" styleClass="lineFooter_#{bul_.lineRecap}">
                                            <h:outputText value="#{bul_.montantEmployeur}" converter="DN" />
                                        </p:column> 
                                    </p:subTable>
                                    <f:facet name="footer">
                                        <div align="right">
                                            #{lab.LRH_PB_net_payer} :<h:outputText style="font-weight: bold" value="#{managedSalaire.currentBulletin.netApayer}" converter="DN" />
                                        </div>
                                    </f:facet>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="DÃ©tails bulletins">
                                <p:dataTable value="#{managedSalaire.currentBulletin.listDetails}" var="bul"  
                                             id="bulletins" rowKey="#{bul.id}" sortBy="#{bul.element.retenue}"
                                             rowIndexVar="lineBul_">    
                                    <p:columnGroup type="header">                                                               
                                        <p:row>
                                            <p:column rowspan="2" headerText="#{lab.LRH_PB_designation_element}"  width="300"/>
                                            <p:column rowspan="2" headerText="#{lab.L_quantite}" />
                                            <p:column rowspan="2" headerText="#{lab.LRH_PB_base}" />
                                            <p:column colspan="3" headerText="#{lab.LRH_PB_salariales}" />
                                            <p:column colspan="2" headerText="#{lab.LRH_PB_patronales}" />                               
                                            <p:column rowspan="2" headerText=" " />                               
                                        </p:row>
                                        <p:row>
                                            <p:column headerText="#{lab.L_taux}(%)" />
                                            <p:column headerText="#{lab.L_montant}" />
                                            <p:column headerText="#{lab.LRH_PB_retenue}" />
                                            <p:column headerText="#{lab.L_taux}(%)" />
                                            <p:column headerText="#{lab.LRH_PB_retenue}" />
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column headerText="#{lab.LRH_PB_designation_element}"  >
                                        #{bul.element.nom}
                                    </p:column>                               
                                    <p:column headerText="#{lab.L_quantite}" >
                                        <h:outputText value="#{bul.quantite}" converter="DN" />                                
                                    </p:column> 
                                    <p:column headerText="#{lab.LRH_PB_base}" >
                                        <h:outputText value="#{bul.base}" converter="DN"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_taux}(%)" >
                                        <h:outputText value="#{bul.tauxSalarial}" converter="DN" />
                                    </p:column> 
                                    <p:column headerText="#{lab.L_montant}" >
                                        <h:outputText value="#{bul.montantPayer}" converter="DN" />
                                    </p:column>
                                    <p:column headerText="#{lab.LRH_PB_retenue}" >
                                        <h:outputText value="#{bul.base*bul.element.poucentageSalarial*0.001}" converter="DN" />
                                    </p:column>
                                    <p:column headerText="#{lab.L_taux} (%)" >
                                        <h:outputText value="#{(bul.element.poucentagePatronale==0)?'':bul.element.poucentagePatronale}" />
                                    </p:column> 
                                    <p:column headerText="#{lab.LRH_PB_retenue}" >
                                        <h:outputText value="#{bul.base* bul.element.poucentagePatronale*0.001}" converter="DN" />
                                    </p:column>                     
                                    <p:column headerText="#{lab.L_visibleEnSynthese}" width="20"> 
                                        <p:selectBooleanCheckbox value="#{bul.element.visibleBulletin}" disabled="true" />
                                    </p:column>                     
                                    <p:column headerText=" " width="20"> 
                                        <p:selectBooleanCheckbox value="#{bul.nowVisible}" valueChangeListener="#{managedSalaire.updateDetailBulletin(bul,!bul.nowVisible)}">
                                            <p:ajax event="valueChange" />
                                        </p:selectBooleanCheckbox>
                                    </p:column>                     
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="RÃ¨gles non trouvÃ©" rendered="#{managedSalaire.reglesabsentes.size() gt 0}">
                                <p:dataTable value="#{managedSalaire.reglesabsentes}" var="iregA"  
                                             rowKey="#{iregA.id}"   rowIndexVar="lineBul_" id="table_regle_abs">
                                    <p:column headerText="Code formule">
                                        <span>#{iregA.codeFormule}</span>
                                    </p:column>
                                    <p:column headerText="" style="text-align: center">
                                        <p:commandButton icon="ui-icon-gear" styleClass="button_gear" type="button" id="btn-opt-regA"/>
                                        <p:contextMenu for="btn-opt-regA" event="left click">
                                            <p:menuitem value="Supprimer" actionListener="#{managedSalaire.deleteOneElt(iregA)}" 
                                                        icon="ui-icon-circle-close" update=":body_bulletin:tabV-salaire:table_regle_abs"/>
                                        </p:contextMenu>
                                    </p:column>
                                </p:dataTable>    
                            </p:tab>
                        </p:tabView> 
                    </h:panelGrid>                        
                </div>
                <div class="yvs_list_bulletin">                    
                    <p:dataTable value="#{managedSalaire.listBulletins}" var="itemB" rowKey="#{itemB.id}" style="font-size: 0.9em"
                                 selectionMode="single" id="table_buletin_calcule" rowIndexVar="lineB" selection="#{managedSalaire.selectedBulletin}">
                        <p:ajax event="rowSelect" listener="#{managedSalaire.loadOnView}" 
                                oncomplete="collapseForm('bulletin')"
                                update=":body_bulletin:tabV-salaire:bulletins :body_bulletin:input_hide_bulletin :body_bulletin:input_employe_bulletin :body_bulletin:tabV-salaire:bulletins_App" process="@this"/>
                        <p:column headerText="NÂ°" width="25" styleClass="statutMiss_#{itemB.statut}">                            
                            <f:facet name="header">
                                <p:contextMenu event="left click" for="chmp_tab_bull_id" styleClass="context_menu">
                                    <p:menuitem value="#{lab.LRH_PE_afficher_cahcer}" icon="ui-icon-transfer-e-w" 
                                                actionListener="#{managedSalaire.displayIdTab()}" global="false" update="table_buletin_calcule"/>
                                </p:contextMenu>
                                <h:outputText value="NÂ°" id="chmp_tab_bull_id" style="cursor: pointer"/>                                
                            </f:facet>#{lineB+1}
                            <h:outputText value="[#{itemB.id}]" rendered="#{managedSalaire.toogleDisplayId}"/>
                        </p:column>
                        <p:column headerText="#{lab.LRH_PM_employe}" width="200" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.contrat.employe.nom} #{itemB.contrat.employe.prenom}" styleClass="bulletin_#{itemB.statut}"/>
                        </p:column> 
                        <p:column headerText="#{lab.LDB_PD_matricule}" width="80" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.contrat.employe.matricule}" styleClass="bulletin_#{itemB.statut}"/>
                            <h:panelGroup style="float: right">
                                <h:outputText title="#{lab.LCF_POD_comptabiliser}" value="C" rendered="#{itemB.comptabilise}" styleClass="style_statut"/>
                            </h:panelGroup>
                        </p:column> 
                        <p:column headerText="#{lab.LDB_PCB_poste} " width="200" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.contrat.employe.posteActif.intitule}" styleClass="bulletin_#{itemB.statut}"/>
                        </p:column> 
                        <p:column headerText="#{lab.LRH_PPT_contrat}" width="100" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.contrat.referenceContrat}" styleClass="bulletin_#{itemB.statut}"/>
                        </p:column> 
                        <p:column headerText="#{lab.L_debut}" width="70" style="text-align: center" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.entete.debutMois}" converter="DATE" styleClass="bulletin_#{itemB.statut}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_fin}" width="70" style="text-align: center" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.entete.finMois}" converter="DATE" styleClass="bulletin_#{itemB.statut}"/>
                        </p:column>
                        <p:column headerText="#{lab.LRH_PRS_periode}" width="90" styleClass="statutMiss_#{itemB.statut}">
                            <h:outputText value="#{itemB.entete.reference}" styleClass="bulletin_#{itemB.statut}"/>
                            <h:graphicImage library="img" name="vu.png" width="12" height="12" rendered="#{itemB.statut=='P'}" style="float: right"/>
                        </p:column>
                        <p:column headerText=""  width="25" styleClass="statutMiss_#{itemB.statut}" style="font-size: 0.8em; text-align: center">
                            <p:contextMenu for="bulletin_buton_option" event="left click" style="font-size: 0.8em">    
                                <p:menuitem value="#{(itemB.statut==constantes.STATUT_DOC_VALIDE)?lab.L_annuler:lab.LC_PMS_valider}"  
                                            icon="#{(itemB.statut==constantes.STATUT_DOC_VALIDE)?'ui-icon-circle-close':'ui-icon-circle-check'}"  
                                            actionListener="#{managedSalaire.confirmValidOneBulletin(itemB)}"
                                            oncomplete="collapseForm('bulletin')" update=":body_bulletin:tabV-salaire:bulletins :body_bulletin:input_employe_bulletin :body_bulletin:tabV-salaire:bulletins_App"/>
                                <p:menuitem  rendered="#{itemB.statut==constantes.STATUT_DOC_VALIDE}" value="#{lab.LCF_POD_payer} "  icon="ui-icon-circle-check"  actionListener="#{managedSalaire.confirmPayeOneBulletin(itemB)}"
                                             oncomplete="collapseForm('bulletin')" update=":body_bulletin:tabV-salaire:bulletins :body_bulletin:input_employe_bulletin :body_bulletin:tabV-salaire:bulletins_App"/>
                                <p:menuitem icon="ui-icon-suitcase"  value="#{lab.LRH_PB_retenues_mois}" actionListener="#{managedSalaire.openListeRetenuesBulletin(itemB)}" />
                                <p:menuitem value="#{lab.L_supprimer}" actionListener="#{managedSalaire.deleteOneBulletin(itemB, false)}" icon="ui-icon-trash"
                                            update=":body_bulletin:table_buletin_calcule :body_bulletin:input_hide_bulletin" />
                                <p:menuitem icon="ui-icon-document"  value="#{lab.L_telecharger}" actionListener="#{managedSalaire.exporteOneBulletin(itemB)}" ajax="false" />
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="bulletin_buton_option" type="button"/>                            
                            <f:facet name="header">
                                <p:contextMenu for="bulletin_buton_option_all" event="left click" style="font-size: 0.8em" styleClass="context_menu">   
                                    <p:menuitem icon="ui-icon-link" value="Etat comptabilisÃ©" global="false" onclick="dglEtatComptabilised.show()"/>  
                                    <p:menuitem value="Invalider Tout"  icon="ui-icon-circle-close" onclick="dlgConfirmInvalidAll.show()" />
                                    <p:menuitem value="#{lab.LRH_PB_valider_tout}"  icon="ui-icon-circle-check" onclick="dlgConfirmValidAll.show()" />
                                    <p:menuitem value="#{lab.LRH_PB_payer_tout}"  icon="ui-icon-circle-check" onclick="dlgConfirmPayeAll.show()" />
                                    <p:menuitem value="#{lab.L_supprimer_tout}" global="false" icon="ui-icon-trash" onclick="dlgConfirmDelAll.show()"/>
                                    <p:separator />
                                    <p:menuitem icon="ui-icon-document"  value="#{lab.LRH_PB_telecharger_tout}" actionListener="#{managedSalaire.exporteListBulletin()}" ajax="false" />
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="bulletin_buton_option_all" type="button"/> 
                            </f:facet>
                        </p:column>
                        <p:column width="25" style="text-align: center  ">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox value="false" class="chek_all_line_bulletin" onclick="selectionAllLineTab(#{managedSalaire.listBulletins.size()}, 'bulletin')"/>
                            </f:facet>
                            <h:selectBooleanCheckbox value="false" class="chek_line_bulletin" onclick="selectionLineTab(#{lineB}, 'bulletin')"/>
                        </p:column>
                    </p:dataTable>
                    <p:outputPanel style="float: right" layout="block" autoUpdate="true">
                        <span class="nbSelectemploye" style="font-size: .8em; font-style: italic; color: #828c95"></span>
                        <p:commandButton actionListener="#{managedSalaire.pagineResult(false)}" update=":body_bulletin:table_buletin_calcule" icon="ui-icon-circle-triangle-w" disabled="#{managedSalaire.paginator.disPrev}"/>
                        <p:outputPanel >
                            <p:inplace label="#{managedSalaire.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                <pe:inputNumber value="#{managedSalaire.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                    <p:ajax event="blur" listener="#{managedSalaire.gotoPagePaginator()}" update=":body_bulletin:table_buletin_calcule"/>
                                </pe:inputNumber>
                            </p:inplace><p:outputLabel value="/#{managedSalaire.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                        </p:outputPanel>
                        <p:commandButton actionListener="#{managedSalaire.pagineResult(true)}" update=":body_bulletin:table_buletin_calcule" icon="ui-icon-circle-triangle-e" disabled="#{managedSalaire.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedSalaire.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedSalaire.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedSalaire.paginations}"/>
                            <p:ajax event="valueChange" update=":body_bulletin:table_buletin_calcule"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div>
            </div>             
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" >
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>                                
            <p:contextMenu  styleClass="context_menu" for="bulletin_more_opt_filter" event="left click">
                <p:menuitem icon="ui-icon-circle-arrow-e" actionListener="#{managedSalaire.loadEmployesNotCompiled()}" 
                            value="#{lab.LRH_PB_nom_compiles}" />    
                <p:menuitem value="#{lab.LRH_PB_compiles_double}"  icon="ui-icon-circle-arrow-e" actionListener="#{managedSalaire.loadDuplicateBulletin()}" />
            </p:contextMenu>
            <div class="zone_find" >  
                <div class="yvs_form_bulletin display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedSalaire.selectBull.dateSave}" styleClass="valeur"  converter="LD" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedSalaire.selectBull.dateUpdate}"  styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedSalaire.selectBull.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <h:panelGrid columns="2" style="width: 100%;font-size: 0.8em;" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="6" style="font-size: 1.0em;" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LDB_PA_agences}" />
                        <h:outputText value="#{lab.LCF_PBP_employe}" />
                        <h:outputText value="#{lab.LRH_PP_exercice}" /> 
                        <h:outputText value="#{lab.LRH_PRS_periode}" /> 
                        <h:outputText value="#{lab.L_statut}" />
                        <h:outputText value="" />
                        <h:selectOneMenu value="#{managedSalaire.idAgence}" valueChangeListener="#{managedSalaire.filterBulletinByAgence}">
                            <f:selectItem itemValue="0" itemLabel="" />
                            <f:selectItems value="#{managedRetenue.currentScte.agences}" var="ag_"
                                           itemLabel="#{ag_.designation}" itemValue="#{ag_.id }" /> 
                            <p:ajax event="valueChange" update=":body_bulletin:table_buletin_calcule" oncomplete="collapseList('bulletin');" />
                        </h:selectOneMenu>
                        <h:inputText value="#{managedSalaire.matriculeF}" >
                            <p:ajax event="blur" listener="#{managedSalaire.filterBulletinByEmploye(managedSalaire.matriculeF)}" update=":body_bulletin:table_buletin_calcule" oncomplete="collapseList('bulletin');"/>
                        </h:inputText>
                        <h:selectOneMenu value="#{managedSalaire.idExo}"  title="#{lab.LRH_PB_evaluer_par_rapport_exercice}">                                
                            <f:selectItems value="#{managedSalaire.exercices}" var="iexo_"
                                           itemLabel="#{iexo_.reference}" itemValue="#{iexo_.id }" />
                            <p:ajax event="valueChange" listener="#{managedSalaire.filterBulletinByExercice()}" update=":body_bulletin:table_buletin_calcule select_periode_salaire" oncomplete="collapseList('bulletin');"/>                                    
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedSalaire.idSearchBulletin}" valueChangeListener="#{managedSalaire.filterBulletinByPeriode}" id="select_periode_salaire">
                            <f:selectItem itemValue="0" itemLabel="" />
                            <f:selectItems value="#{managedSalaire.listPlanification}" var="head_f" itemValue="#{head_f.id}" itemLabel="#{head_f.reference}" />
                            <f:selectItem itemValue="0" itemLabel="----------------" />                                
                            <f:selectItem itemValue="-1" itemLabel="#{lab.LCF_PR_tous}" />
                            <f:selectItem itemValue="0" itemLabel="----------------" />                                
                            <f:selectItem itemValue="-2" itemLabel="#{lab.LRH_PB_afficher_ordres_calculs}" />  
                            <p:ajax event="valueChange" update=":body_bulletin:table_buletin_calcule" oncomplete="collapseList('bulletin');" />
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedMission.statutF}" valueChangeListener="#{managedSalaire.filterBulletinByStatut}" >
                            <f:selectItem itemValue="#{'E'}" itemLabel="#{lab.LP_PSO_en_cours}" /> 
                            <f:selectItem itemValue="#{'V'}" itemLabel="#{lab.LCF_PPC_valider}" /> 
                            <f:selectItem itemValue="#{'P'}" itemLabel="#{lab.LCF_PPC_payer}" /> 
                            <f:selectItem itemValue="#{'S'}" itemLabel="#{lab.LRH_PM_suspendu}" /> 
                            <f:selectItem itemValue="#{null}" itemLabel="" /> 
                            <f:selectItem itemValue="#{null}" itemLabel="#{lab.L_tout}" /> 
                            <p:ajax event="valueChange" update=":body_bulletin:table_buletin_calcule" oncomplete="collapseList('bulletin');" />
                        </h:selectOneMenu>   
                        <p:commandButton icon="ui-icon-gear" title="#{lab.LRH_PB_options_filtrage}" style="width: 23px; height: 23px" id="bulletin_more_opt_filter"
                                         type="button"/>
                    </h:panelGrid>
                    <p:commandLink global="false" onclick="dlgOrdreCalcul.show()" style="float: right;margin-right: 40%">
                        <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                            #{lab.LRH_PB_plannification}
                        </span> 
                    </p:commandLink>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>

</ui:composition>
