<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">   
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Suivi des chèques','modCompta', 'smenSuiviRegVente', true)}
    </ui:define>        
    <ui:define name="contents">
        #{managedVirement.doNothing()}
        #{managedSaisiePiece.doNothing()}
        #{managedFactureVente.doNothing()}
        #{managedFactureAchat.doNothing()}
        #{managedDocDivers.doNothing()}
        #{managedReglementAchat.doNothing()}
        #{managedOperationClient.doNothing()}
        #{managedOperationFournisseur.doNothing()}
        #{managedCaisses.loadAllActif()}    
        #{managedAgence.loadAllUsable()}
        #{managedReglementVente.initView()}
        #{managedReglementVente.addParamStatutCheque(constantes.STATUT_DOC_ENCOUR, true)}  
        <script type="text/javascript">
            $(function() {
                collapseForm('suivi_cheque');
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 135);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
        </script>

        <!-->
        *****************************************************************************
        Boite de dialogue plus options
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOptions" resizable="false"> 
                <h:panelGrid id="blog_plus_option_cheque" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">    
                    <h:panelGroup>
                        <h:outputText value="#{lab.LCF_PSRV_date_valide}"/>
                        <h:selectBooleanCheckbox value="#{managedReglementVente.dateValidePhase}" style="float: right">
                            <p:ajax event="valueChange" update="zone_option_search_cheque_date :main_reg_pv:data_list_piece_cheque" listener="#{managedReglementVente.addParamDateValidePhase()}" />
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="zone_option_search_cheque_date">
                        <p:calendar value="#{managedReglementVente.dateDebutPhaseSearch}" pattern="dd-MM-yyyy" navigator="true" disabled="#{!managedReglementVente.dateValidePhase}" size="8">
                            <p:ajax event="dateSelect" listener="#{managedReglementVente.addParamDateValidePhase}" update=":main_reg_pv:data_list_piece_cheque"  />
                        </p:calendar>
                        <p:calendar value="#{managedReglementVente.dateFinPhaseSearch}" pattern="dd-MM-yyyy" navigator="true" disabled="#{!managedReglementVente.dateValidePhase}" size="8">
                            <p:ajax event="dateSelect" listener="#{managedReglementVente.addParamDateValidePhase}" update=":main_reg_pv:data_list_piece_cheque"  />
                        </p:calendar>
                    </h:panelGroup>                            
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_ppte_valid_phase">
            <p:dialog header="#{lab.LC_PA_propriete_validation}" widgetVar="dlgppteValid" width="60%">
                <p:outputPanel id="table_ppte_valid_phase" autoUpdate="true">
                    <!-->Doc divers<-->
                    <p:dataTable id="table_ppte_valid_phase_od" value="#{managedDocDivers.pieceCD.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_DIVERS}">
                        <p:column headerText="#{lab.LC_PFA_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PFA_valider_par}" rendered="#{iValid.statut ne constantes.STATUT_DOC_ANNULE}"
                                  styleClass="etat_#{iValid.statutPiece}">
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_extourner_par}" rendered="#{iValid.statut eq constantes.STATUT_DOC_ANNULE}"
                                  styleClass="etat_#{iValid.statutPiece}">
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques}" style="text-align: center"
                                  styleClass="etat_#{iValid.statutPiece}">
                            <h:outputText value="#{iValid.caisse.intitule}" />
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center"
                                  styleClass="etat_#{iValid.statutPiece}">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" />
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedDocDivers.comptabiliserPhaseCaisseDivers(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_prd table_ppte_valid_phase_od" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseDivers(iValid, true, true)}" 
                                             update=":main_reg_pv:head_form_suivi_prd table_ppte_valid_phase_od" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Pièces ventes<-->
                    <p:dataTable id="table_ppte_valid_phase_fv" value="#{managedReglementVente.pieceReglement.phases}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_VENTE}">
                        <p:column headerText="#{lab.LC_PCC_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementVente.comptabiliserPhaseCaisseVente(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_prv table_ppte_valid_phase_fv" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseVente(iValid, true, true)}" 
                                             update=":main_reg_pv:head_form_suivi_prv table_ppte_valid_phase_fv" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Pièce achats<-->
                    <p:dataTable id="table_ppte_valid_phase_fa" value="#{managedReglementAchat.pieceAvance.phasesAchat}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACHAT}">
                        <p:column headerText="#{lab.LC_PCC_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementAchat.comptabiliserPhaseCaisseAchat(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_pra table_ppte_valid_phase_fa" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseAchat(iValid, true, true)}" 
                                             update=":main_reg_pv:head_form_suivi_pra table_ppte_valid_phase_fa" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Avances clients<-->
                    <p:dataTable id="table_ppte_valid_phase_av" value="#{managedReglementVente.selectAcompte.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_VENTE}">
                        <p:column headerText="#{lab.LC_PCC_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementVente.comptabiliserPhaseAcompteVente(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_pav table_ppte_valid_phase_av" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseAcompteVente(iValid, true)}" 
                                             update=":main_reg_pv:head_form_suivi_pav table_ppte_valid_phase_av" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Acompte fournisseus<-->
                    <p:dataTable id="table_ppte_valid_phase_aa" value="#{managedReglementAchat.selectAcompte.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_ACHAT}">
                        <p:column headerText="#{lab.L_LC_PA_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementAchat.comptabiliserPhaseAcompteAchat(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_paa table_ppte_valid_phase_aa" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseAcompteAchat(iValid, true)}" 
                                             update=":main_reg_pv:head_form_suivi_paa table_ppte_valid_phase_aa" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Crédit clients<-->
                    <p:dataTable id="table_ppte_valid_phase_cv" value="#{managedReglementVente.selectCredit.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_VENTE}">
                        <p:column headerText="#{lab.L_LC_PA_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementVente.comptabiliserPhaseCreditVente(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_pcv table_ppte_valid_phase_cv" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseCreditVente(iValid, true)}" 
                                             update=":main_reg_pv:head_form_suivi_pcv table_ppte_valid_phase_cv" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Crédits fournisseurs<-->
                    <p:dataTable id="table_ppte_valid_phase_ca" value="#{managedReglementAchat.selectCredit.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_ACHAT}">
                        <p:column headerText="#{lab.L_LC_PA_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedReglementAchat.comptabiliserPhaseCreditAchat(iValid, true)}"
                                             update=":main_reg_pv:head_form_suivi_pca table_ppte_valid_phase_ca" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseCreditAchat(iValid, true)}" 
                                             update=":main_reg_pv:head_form_suivi_pca table_ppte_valid_phase_ca" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                    <!-->Virement<-->
                    <p:dataTable id="table_ppte_valid_phase_vi" value="#{managedVirement.entity.phasesReglement}" var="iValid" rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_VIREMENT}">
                        <p:column headerText="#{lab.L_LC_PA_etapes}" >
                            #{iValid.phaseReg.phase}
                        </p:column>
                        <p:column headerText="#{lab.LC_PA_valide_par}" >
                            <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.phaseOk}" />
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSRV_caisses_banques} " style="text-align: center">
                            <h:outputText value="#{iValid.caisse.intitule}" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_dates} " style="text-align: center">
                            <h:outputText value="#{iValid.dateValider}" converter="DATE" rendered="#{iValid.phaseOk}"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:commandButton icon="ui-icon-arrowthickstop-1-s" title="#{lab.LC_PFV_comptabiliser}" actionListener="#{managedVirement.comptabiliserPhaseVirement(iValid, true)}"
                                             update=":main_reg_pv:corps_form_suivi_pvir table_ppte_valid_phase_vi" disabled="#{!iValid.phaseOk}"
                                             rendered="#{!iValid.comptabilise}" style="width: 22px;height: 22px"/>
                            <p:commandButton icon="ui-icon-arrowthickstop-1-n" title="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.unComptabiliserPhaseCaisseVirement(iValid, true)}" 
                                             update=":main_reg_pv:corps_form_suivi_pvir table_ppte_valid_phase_vi" disabled="#{!iValid.phaseOk}"
                                             rendered="#{iValid.comptabilise}" style="width: 22px;height: 22px"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSRV_recomptabiliser_phase}" width="40%" widgetVar="dlgrecomptabilise" closeOnEscape="true"
                             message="#{lab.LCF_PSRV_text}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.validEtapesVente(managedReglementVente.selectPhaseVente)}" 
                                 oncomplete="dlgrecomptabilise.hide()" 
                                 update=":main_reg_pv:data_list_piece_cheque :main_reg_pv:blog_reglement_cheque_pv"/>
                <p:commandButton value="#{lab.L_non}" type="button" icon="ui-icon-circle-close" onclick="dlgrecomptabilise.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSRV_initialise_phases_cheques}" width="40%" widgetVar="dlgInitPhase" closeOnEscape="true"
                             message="#{lab.LCF_PSRV_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.generePhaseReglement()}" oncomplete="dlgInitPhase.hide()" 
                                 update=":main_reg_pv:data_list_piece_cheque :main_reg_pv:blog_reglement_cheque_pv"/>
                <p:commandButton value="#{lab.L_non}" type="button" icon="ui-icon-circle-close" onclick="dlgInitPhase.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSRV_extourne_cheque}" width="40%" widgetVar="dlgRetourPhase" closeOnEscape="true"
                             message="#{lab.LCF_PSRV_text2}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.cancelByExtournEtape()}"
                                 oncomplete="dlgRetourPhase.hide()" 
                                 update=":main_reg_pv:data_list_piece_cheque"/>
                <p:commandButton value="#{lab.L_non}" type="button" icon="ui-icon-circle-close" onclick="dlgRetourPhase.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSRV_annuler_extourne_cheque}" width="40%" widgetVar="dlgCancelExtourne" closeOnEscape="true"
                             message="#{lab.LCF_PSRV_text3}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.cancelExtourne()}"
                                 oncomplete="dlgCancelExtourne.hide()" 
                                 update=":main_reg_pv:data_list_piece_cheque"/>
                <p:commandButton value="#{lab.L_non}" type="button" icon="ui-icon-circle-close" onclick="dlgCancelExtourne.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_confirmation}" width="40%" widgetVar="dlgConfirmCancel" closeOnEscape="true"
                             message="#{lab.LCF_PSRV_text4}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.annulePaiement()}" oncomplete="dlgConfirmCancel.hide()"
                                 update=":main_reg_pv:data_list_piece_cheque"/>
                <p:commandButton value="#{lab.L_non}" type="button" icon="ui-icon-circle-close" onclick="dlgConfirmCancel.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabilisePhaseByForce" message="#{lab.LCF_PSRV_text5}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.comptabiliserPhase()}" oncomplete="dlgComptabilisePhaseByForce.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabilisePhaseByForce.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabilisePhase" message="#{lab.LCF_PSRV_text6}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.comptabiliserPhase()}" oncomplete="dlgComptabilisePhase.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabilisePhase.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePhase" message="#{lab.LCF_PSRV_text7}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReglementVente.unComptabiliserPhase()}" oncomplete="dlgUnComptabilisePhase.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePhase.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="main_reg_pv">
            <div class="part_fix" style="height: 28px">
                <p:outputPanel id="header_reglement_cheque_pv" autoUpdate="true">
                    <!-->Reglement divers<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_DIVERS}">
                        <p:outputPanel id="head_form_suivi_prd" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">   
                                <ui:repeat value="#{managedDocDivers.pieceCD.phasesReglement}" var="ph_d">
                                    <p:contextMenu for="btn_option_cancel_chq_divers" style="font-size: 0.8em; width: 200px; color: #790000">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PFA_proprietes}" title="#{lab.LC_PFA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_d)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesDivers(ph_d, false)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_d.phaseOk}" />
                                        <p:menuitem value="#{lab.LCF_PSRV_extourner_phase}" icon="ui-icon-arrowreturnthick-1-w" style="color: #790000" actionListener="#{managedDocDivers.setSelectPhaseDivers(ph_d)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_d.phaseOk}" oncomplete="dlgRetourPhase.show()"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedDocDivers.comptabiliserPhaseCaisseDivers(ph_d, false)}" disabled="#{!ph_d.phaseOk and ph_d.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_d.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedDocDivers.setSelectPhaseDivers(ph_d)}" 
                                                    rendered="#{ph_d.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedDocDivers.printPhase(ph_d)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_d.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_chq_divers" actionListener="#{managedReglementVente.validEtapesDivers(ph_d)}"
                                                   styleClass="#{(ph_d.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_d.etapeActive and !ph_d.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"
                                                   title="#{lab.LCF_PSRV_suivi_dans_caisse} '#{ph_d.caisse.intitule}'"/>
                                    <h:outputText value=" E " rendered="#{!ph_d.phaseOk and ph_d.statut eq 'A'}" title="#{lab.LCF_PSRV_phase_extournee}" style="position: relative;left: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_caisse_divers" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedDocDivers.setSelectPhaseDivers(null)}"
                                            rendered="#{!managedDocDivers.pieceCD.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedDocDivers.setSelectPhaseDivers(null)}" 
                                            rendered="#{managedDocDivers.pieceCD.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesDivers()}" update="head_form_suivi_prv :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedDocDivers.pieceCD.statutPiece == constantes.STATUT_DOC_PAYER)?'VALID&Eacute;':lab.L_valider}" rendered="#{managedDocDivers.pieceCD.phasesReglement.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_caisse_divers" disabled="#{(managedDocDivers.pieceCD.statutPiece == constantes.STATUT_DOC_PAYER)}"
                                           styleClass="#{(managedDocDivers.pieceCD.statutPiece == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideDivers()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Règlement Vente<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_VENTE}">
                        <p:outputPanel id="head_form_suivi_prv" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">   
                                <ui:repeat value="#{managedReglementVente.pieceReglement.phases}" var="ph_">
                                    <p:contextMenu for="btn_option_cancel" style="font-size: 0.8em; width: 200px; color: #790000">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesVente(ph_, false)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_.phaseOk}" />
                                        <p:menuitem value="#{lab.LCF_PSRV_extourner_phase}" icon="ui-icon-arrowreturnthick-1-w" style="color: #790000" actionListener="#{managedReglementVente.setSelectPhaseVente(ph_)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_.comptabilise}" oncomplete="dlgRetourPhase.show()"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_extourne}" icon="ui-icon-arrowreturnthick-1-w" style="color: #790000" actionListener="#{managedReglementVente.setSelectPhaseVente(ph_)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_.comptabilise}" oncomplete="dlgCancelExtourne.show()"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.comptabiliserPhaseCaisseVente(ph_, false)}" 
                                                    disabled="#{!ph_.phaseOk and ph_.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseVente(ph_)}" 
                                                    rendered="#{ph_.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementVente.printPhase(ph_)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel" actionListener="#{managedReglementVente.validePhaseVente(ph_)}"
                                                   styleClass="#{(ph_.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_.etapeActive and !ph_.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"
                                                   title="#{lab.LCF_PSRV_suivi_dans_caisse} '#{ph_.caisse.intitule}'"/>
                                    <h:outputText value=" E " rendered="#{!ph_.phaseOk and ph_.statut eq 'A'}" title="#{lab.LCF_PSRV_phase_extournee}" style="position: relative;left: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_caisse_vente" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseVente(null)}"
                                            rendered="#{!managedReglementVente.pieceReglement.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseVente(null)}" 
                                            rendered="#{managedReglementVente.pieceReglement.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesVente()}" update="head_form_suivi_prv :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementVente.pieceReglement.statutPiece == constantes.STATUT_DOC_PAYER)?'VALIDE':'VALIDER'}" rendered="#{managedReglementVente.pieceReglement.phases.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_caisse_vente" disabled="#{(managedReglementVente.pieceReglement.statutPiece == constantes.STATUT_DOC_PAYER)}"
                                           styleClass="#{(managedReglementVente.pieceReglement.statutPiece == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideVente()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Règlement Achat<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACHAT}">
                        <p:outputPanel id="head_form_suivi_pra" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">                         
                                <ui:repeat value="#{managedReglementAchat.pieceAvance.phasesAchat}" var="ph_a">
                                    <p:contextMenu for="btn_option_cancel_chq_achat" style="font-size: 0.8em; color: #790000" styleClass="context_menu">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_a)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesAchat(ph_a, false)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_a.phaseOk}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_extourner_phase}" icon="ui-icon-arrowreturnthick-1-w" actionListener="#{managedReglementAchat.setSelectPhaseAchat(ph_a)}"
                                                    rendered="#{ph_a.phaseOk}" oncomplete="dlgRetourPhase.show()"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.comptabiliserPhaseCaisseAchat(ph_a, false)}" disabled="#{!ph_a.phaseOk and ph_.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_a.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAchat(ph_a)}" 
                                                    rendered="#{ph_a.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementAchat.printPhase(ph_a)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_a.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_chq_achat" actionListener="#{managedReglementVente.validEtapesAchat(ph_a)}"
                                                   styleClass="#{(ph_a.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_a.etapeActive and !ph_a.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"
                                                   title="#{lab.LCF_PSRV_suivi_dans_caisse} '#{ph_a.caisse.intitule}'"/>
                                    <h:outputText value=" E " rendered="#{!ph_a.phaseOk and ph_a.statut eq 'A'}" title="#{lab.LCF_PSRV_phase_extournee}" style="position: relative;left: -10px; right: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_caisse_achat" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAchat(null)}"
                                            rendered="#{!managedReglementAchat.pieceAvance.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAchat(null)}" 
                                            rendered="#{managedReglementAchat.pieceAvance.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesAchat()}" update="head_form_suivi_pra :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_PAYER)?'VALIDE':'VALIDER'}" rendered="#{managedReglementAchat.pieceAvance.phasesAchat.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_caisse_achat" disabled="#{(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_PAYER)}"
                                           styleClass="#{(managedReglementAchat.pieceAvance.statutPiece == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideAchat()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Accompte vente<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_VENTE}">
                        <p:outputPanel id="head_form_suivi_pav" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">                                                
                                <ui:repeat value="#{managedReglementVente.selectAcompte.phasesReglement}" var="ph_c">
                                    <p:contextMenu for="btn_option_cancel_acompte" style="font-size: 0.8em; width: 150px; color: #790000">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_c)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesAcompteVente(ph_c)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_c.phaseOk}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_extourner_phase}" icon="ui-icon-arrowreturnthick-1-w" style="color: #790000" actionListener="#{managedReglementVente.setSelectPhaseAcompteVente(ph_c)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_c.phaseOk}" oncomplete="dlgRetourPhase.show()"/>                                        
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.comptabiliserPhaseAcompteVente(ph_c, false)}" disabled="#{!ph_c.phaseOk and ph_c.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_c.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseAcompteVente(ph_c)}" 
                                                    rendered="#{ph_c.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementVente.printPhaseAcompte(ph_c)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_c.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_acompte" actionListener="#{managedReglementVente.validEtapesAcompteVente(ph_c)}"
                                                   styleClass="#{(ph_c.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_c.etapeActive and !ph_c.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"
                                                   title="#{lab.LCF_PSRV_suivi_dans_caisse} '#{ph_c.caisse.intitule}'"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_acompte_vente" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseAcompteVente(null)}"
                                            rendered="#{!managedReglementVente.selectAcompte.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseAcompteVente(null)}" 
                                            rendered="#{managedReglementVente.selectAcompte.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesAcompteVente()}" update="head_form_suivi_pav :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementVente.selectAcompte.statut == constantes.STATUT_DOC_PAYER)?lab.L_execute:lab.L_executer}" rendered="#{managedReglementVente.selectAcompte.phasesReglement.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_acompte_vente" disabled="#{!(managedReglementVente.selectAcompte.statut == constantes.STATUT_DOC_ATTENTE)}"
                                           styleClass="#{(managedReglementVente.selectAcompte.statut == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideAcompteVente()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Accompte achat<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_ACHAT}">
                        <p:outputPanel id="head_form_suivi_paa" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">                         
                                <ui:repeat value="#{managedReglementAchat.selectAcompte.phasesReglement}" var="ph_ac">
                                    <p:contextMenu for="btn_option_cancel_chq_acompte" style="font-size: 0.8em; width: 150px; color: #790000" styleClass="context_menu">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_ac)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesAcompteAchat(ph_ac, false)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_ac.phaseOk}"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.comptabiliserPhaseAcompteAchat(ph_ac, false)}" disabled="#{!ph_ac.phaseOk and ph_ac.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_ac.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAcompteAchat(ph_ac)}" 
                                                    rendered="#{ph_ac.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementAchat.printPhaseAcompte(ph_ac)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_ac.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_chq_acompte" actionListener="#{managedReglementVente.validEtapesAcompteAchat(ph_ac)}"
                                                   styleClass="#{(ph_ac.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_ac.etapeActive and !ph_ac.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"
                                                   title="#{lab.LCF_PSRV_suivi_dans_caisse} '#{ph_ac.caisse.intitule}'"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_acompte_achat" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAcompteAchat(null)}"
                                            rendered="#{!managedReglementAchat.selectAcompte.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseAcompteAchat(null)}" 
                                            rendered="#{managedReglementAchat.selectAcompte.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesAcompteAchat()}" update="head_form_suivi_paa :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementAchat.selectAcompte.statut == constantes.STATUT_DOC_PAYER)?lab.L_execute:lab.L_executer}" rendered="#{managedReglementAchat.selectAcompte.phasesReglement.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_acompte_achat" disabled="#{!(managedReglementAchat.selectAcompte.statut == constantes.STATUT_DOC_ATTENTE)}"
                                           styleClass="#{(managedReglementAchat.selectAcompte.statut == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideAcompteAchat()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Crédit client<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_VENTE}">
                        <p:outputPanel id="head_form_suivi_pcv" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">                                                
                                <ui:repeat value="#{managedReglementVente.selectCredit.phasesReglement}" var="ph_cr">
                                    <p:contextMenu for="btn_option_cancel_credit" style="font-size: 0.8em; color: #790000" styleClass="context_menu">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_cr)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesCreditVente(ph_cr)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_cr.phaseOk}"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.comptabiliserPhaseCreditVente(ph_cr, false)}" disabled="#{!ph_cr.phaseOk and ph_cr.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!managedOperationClient.isComptabilisePhaseCaisseCredit(ph_cr)}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseCreditVente(ph_cr)}" 
                                                    rendered="#{ph_cr.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementVente.printPhaseCredit(ph_cr)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_cr.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_credit" actionListener="#{managedReglementVente.validEtapesCreditVente(ph_cr)}"
                                                   styleClass="#{(ph_cr.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_cr.etapeActive and !ph_cr.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_credit_vente" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseCreditVente(null)}"
                                            rendered="#{!managedOperationClient.isComptabiliseCaisseCredit(managedReglementVente.selectCredit)}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementVente.setSelectPhaseCreditVente(null)}" 
                                            rendered="#{managedReglementVente.selectCredit.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesCreditVente()}" update="head_form_suivi_pcv :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementVente.selectCredit.statut == constantes.STATUT_DOC_PAYER)?lab.L_valide:lab.L_valider}" rendered="#{managedReglementVente.selectCredit.phasesReglement.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_credit_vente" disabled="#{!(managedReglementVente.selectCredit.statut == constantes.STATUT_DOC_EDITABLE)}"
                                           styleClass="#{(managedReglementVente.selectCredit.statut == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideCreditVente()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Credit fournisseurs<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_ACHAT}">
                        <p:outputPanel id="head_form_suivi_pca" style="font-size: 1.1em">
                            <div style="margin-left: 0.5%;margin-top: 5px;display: inline;width: 80%;float: left">                         
                                <ui:repeat value="#{managedReglementAchat.selectCredit.phasesReglement}" var="ph_cc">
                                    <p:contextMenu for="btn_option_cancel_chq_credit" style="font-size: 0.8em; color: #790000" styleClass="context_menu">
                                        <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()"
                                                    update=":form_ppte_valid_phase:table_ppte_valid_phase" actionListener="#{managedReglementVente.setCurrentPhase(ph_cc)}"/>
                                        <p:menuitem value="#{lab.LCF_PSRV_annuler_phase}" icon="ui-icon-cancel" style="color: #790000" actionListener="#{managedReglementVente.cancelValidEtapesCreditAchat(ph_cc, false)}"
                                                    update=":main_reg_pv:data_list_piece_cheque" rendered="#{ph_cc.phaseOk}"/>
                                        <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.comptabiliserPhaseCreditAchat(ph_cc, false)}" disabled="#{!ph_cc.phaseOk and ph_cc.statut != constantes.STATUT_DOC_ANNULE}"
                                                    rendered="#{!ph_cc.comptabilise}"/>
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseCreditAchat(ph_cc)}" 
                                                    rendered="#{ph_cc.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-circle-arrow-s" global="false"  actionListener="#{managedReglementVente.printPhaseCredit(ph_cc)}" ajax="false"/>
                                    </p:contextMenu>
                                    <p:commandLink value="#{ph_cc.phaseReg.phase}" style="margin-left: 0.1%; color: #FFF" id="btn_option_cancel_chq_credit" actionListener="#{managedReglementVente.validEtapesCreditAchat(ph_cc)}"
                                                   styleClass="#{(ph_cc.phaseOk)?'statut_valide':'etat_formation_true'}" disabled="#{!ph_cc.etapeActive and !ph_cc.phaseOk}" update=":main_reg_pv:data_list_piece_cheque"/>
                                </ui:repeat>
                            </div>
                            <p:contextMenu for="btn_valide_suivi_credit_achat" style="font-size: 0.8em; width: 200px; color: #790000">
                                <p:menuitem value="#{lab.LC_PFV_comptabiliser}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseCreditAchat(null)}"
                                            rendered="#{!managedReglementAchat.selectCredit.comptabilise}" oncomplete="dlgComptabilisePhase.show()"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedReglementAchat.setSelectPhaseCreditAchat(null)}" 
                                            rendered="#{managedReglementAchat.selectCredit.comptabilise}" oncomplete="dlgUnComptabilisePhase.show()"/>
                            </p:contextMenu>
                            <p:commandLink value="#{lab.L_annuler.toUpperCase()}" style="float: right" styleClass="etat_formation_true" actionListener="#{managedReglementVente.cancelAllEtapesCreditAchat()}" update="head_form_suivi_pca :main_reg_pv:data_list_piece_cheque"/>
                            <p:commandLink value="#{(managedReglementAchat.selectCredit.statut == constantes.STATUT_DOC_PAYER)?lab.L_valide:lab.L_valider}" rendered="#{managedReglementAchat.selectCredit.phasesReglement.size() lt 1}" process="@this" style="float: right"  
                                           id="btn_valide_suivi_credit_achat" disabled="#{!(managedReglementAchat.selectCredit.statut == constantes.STATUT_DOC_EDITABLE)}"
                                           styleClass="#{(managedReglementAchat.selectCredit.statut == constantes.STATUT_DOC_PAYER)?'statut_valide':'etat_formation_true'}"                                                           
                                           actionListener="#{managedReglementVente.valideCreditAchat()}" update=":main_reg_pv:data_list_piece_cheque"/>
                        </p:outputPanel>
                    </p:outputPanel>
                </p:outputPanel>
            </div>
            <div class="part_scroll">
                <p:outputPanel id="blog_reglement_cheque_pv">
                    <!-->Doc divers<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_DIVERS}">
                        <p:outputPanel id="corps_form_suivi_prd">
                            <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" style="width: 75%;float: left">
                                <f:facet name="header">
                                    <h:panelGroup id="head_corp_form_suivi_prd">
                                        <h:panelGroup style="float: left">                                        
                                            <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                            <h:selectOneMenu value="#{managedDocDivers.currentPhaseDivers.caisse.id}" disabled="#{managedDocDivers.currentPhaseDivers.id lt 1}">
                                                <f:selectItem itemLabel=" " itemValue="0" />                                            
                                                <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                                <p:ajax event="valueChange" global="false" listener="#{managedDocDivers.chooseCaissePhaseDivers()}"/>
                                            </h:selectOneMenu>                                   
                                            <span style="margin-left: 10px"> #{lab.L_date} </span>
                                            <p:calendar value="#{managedDocDivers.currentPhaseDivers.dateValider}" pattern="dd-MM-yyyy" size="10">
                                                <p:ajax event="dateSelect" global="false"/>
                                            </p:calendar>                                   
                                        </h:panelGroup> 
                                        <h:panelGroup style="float: right;margin-top: 5px">
                                            <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                          rendered="#{managedDocDivers.isComptabiliseCaisse(managedDocDivers.pieceCD)}"/> 
                                            <h:outputText value="#{managedDocDivers.pieceCD.id}" styleClass="style_identifiant"/> 
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </f:facet>
                                <span>#{lab.L_reference} </span>
                                <h:outputText class="style_reference" value="#{managedDocDivers.pieceCD.numPiece}" style="font-weight: bold" />
                                <span>#{lab.LC_PES_document} </span>
                                <h:outputText value="#{managedDocDivers.pieceCD.docDivers.numPiece}" style="font-weight: bold" />
                                <span>#{lab.LCF_PSRV_tiers}</span>
                                <h:outputText value="#{managedDocDivers.nameTiers(managedDocDivers.pieceCD.docDivers.idTiers, managedDocDivers.pieceCD.docDivers.tableTiers, 'N')}" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_encaissement}</span>
                                <h:outputText value="#{managedDocDivers.pieceCD.dateValider}" converter="DATE" style="font-weight: bold"/>
                                <f:facet name="footer">
                                    <h:panelGroup>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                            <span>#{lab.LCF_PSRV_reference_externe}: </span>
                                            <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                        </h:panelGrid>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                            <span>#{lab.L_montant} : </span>
                                            <h:outputText value="#{managedDocDivers.pieceCD.montant}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                        
                                        </h:panelGrid>
                                    </h:panelGroup>
                                </f:facet>
                            </h:panelGrid>
                            <p:outputPanel id="data_extourne_caisse_divers">
                                <h:panelGroup style="width: 24%;float: right" rendered="#{managedDocDivers.pieceCD.sousDivers.size() gt 0}">
                                    <p:contextMenu for="list_extourne_caisse_divers">
                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedDocDivers.deleteBeanExtourne()}"/>
                                    </p:contextMenu>
                                    <p:dataTable id="list_extourne_caisse_divers" value="#{managedDocDivers.pieceCD.sousDivers}" var="sdd" rowKey="#{sdd.id}"
                                                 selection="#{managedDocDivers.selectExtourne}" selectionMode="single" scrollable="true" scrollHeight="105">
                                        <f:facet name="header">
                                            #{lab.LCF_PSRV_frais_extourne}
                                        </f:facet>
                                        <p:column headerText="#{lab.LCF_PSRV_banque}">
                                            <h:outputText value="#{sdd.caisse.intitule}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_montant}" style="text-align: right">
                                            <h:outputText value="#{sdd.montant}" converter="DN"/>
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGroup>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Piece vente<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_VENTE}">
                        <p:outputPanel id="corps_form_suivi_prv">
                            <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" style="width: 75%;float: left">
                                <f:facet name="header">
                                    <h:panelGroup id="head_corp_form_suivi_prv">
                                        <h:panelGroup style="float: left">                                        
                                            <span>#{lab.LCF_PSRV_caisses_banques}: </span>
                                            <h:selectOneMenu value="#{managedReglementVente.currentPhaseVente.caisse.id}" disabled="#{managedReglementVente.currentPhaseVente.id lt 1}">
                                                <f:selectItem itemLabel=" " itemValue="0" />                                            
                                                <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                                <p:ajax event="valueChange" global="false" listener="#{managedReglementVente.chooseCaissePhaseVente()}"/>
                                            </h:selectOneMenu>                                   
                                            <span style="margin-left: 10px"> #{lab.L_date} </span>
                                            <p:calendar value="#{managedReglementVente.currentPhaseVente.dateValider}" pattern="dd-MM-yyyy" size="10">
                                                <p:ajax event="dateSelect" global="false"/>
                                            </p:calendar>                                      
                                        </h:panelGroup> 
                                        <h:panelGroup style="float: right;margin-top: 5px">
                                            <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                          rendered="#{managedReglementVente.pieceReglement.comptabilise}"/> 
                                            <h:outputText value="#{managedReglementVente.pieceReglement.id}" styleClass="style_identifiant"/> 
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </f:facet>
                                <span>#{lab.L_reference} </span>
                                <h:outputText class="style_reference" value="#{managedReglementVente.pieceReglement.numPiece}" style="font-weight: bold" />
                                <span>#{lab.LCF_PSRV_facture} </span>
                                <h:outputText value="#{managedReglementVente.pieceReglement.docVente.numDoc}" style="font-weight: bold" />
                                <span>#{lab.LCF_PSRV_client}</span>
                                <h:outputText value="#{managedReglementVente.pieceReglement.docVente.client.nom_prenom}" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_edition}</span>
                                <h:outputText value="#{managedReglementVente.pieceReglement.datePiece}"  converter="DATE" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_encaissement}</span>
                                <h:outputText value="#{managedReglementVente.pieceReglement.datePaiement}" converter="DATE" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                                <h:outputText value="#{managedReglementVente.pieceReglement.datePaiementPrevu}" converter="DATE" style="font-weight: bold"/>
                                <f:facet name="footer">
                                    <h:panelGroup>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle"  style="float: left">   
                                            <span>#{lab.LCF_PSRV_reference_externe} </span>
                                            <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                        </h:panelGrid>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle"  style="float: right">
                                            <span>#{lab.L_montant} : </span>
                                            <h:outputText value="#{managedReglementVente.pieceReglement.montant}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                        
                                        </h:panelGrid>
                                    </h:panelGroup>
                                </f:facet>
                            </h:panelGrid>
                            <p:outputPanel id="data_extourne_caisse_vente">
                                <h:panelGroup style="width: 24%;float: right" rendered="#{managedReglementVente.pieceReglement.sousVentes.size() gt 0}">
                                    <p:contextMenu for="list_extourne_caisse_vente">
                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementVente.deleteBeanExtourne()}"/>
                                    </p:contextMenu>
                                    <p:dataTable id="list_extourne_caisse_vente" value="#{managedReglementVente.pieceReglement.sousVentes}" var="svd" rowKey="#{svd.id}"
                                                 selection="#{managedReglementVente.selectExtourne}" selectionMode="single" scrollable="true" scrollHeight="105">
                                        <f:facet name="header">
                                            #{lab.LCF_PSRV_frais_extourne}
                                        </f:facet>
                                        <p:column headerText="Banque">
                                            <h:outputText value="#{svd.caisse.intitule}"/>
                                        </p:column>
                                        <p:column headerText="Montant" style="text-align: right">
                                            <h:outputText value="#{svd.montant}" converter="DN"/>
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGroup>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                    <!-->Piece achat<-->
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACHAT}">
                        <p:outputPanel id="corps_form_suivi_pra">
                            <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" style="width: 75%;float: left">
                                <f:facet name="header">
                                    <h:panelGroup id="head_corp_form_suivi_pra">
                                        <h:panelGroup style="float: left">                                        
                                            <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                            <h:selectOneMenu value="#{managedReglementAchat.currentPhaseAchat.caisse.id}" disabled="#{managedReglementAchat.currentPhaseAchat.id lt 1}">
                                                <f:selectItem itemLabel=" " itemValue="0" />                                            
                                                <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                                <p:ajax event="valueChange" global="false" listener="#{managedReglementAchat.chooseCaissePhaseAchat()}"/>
                                            </h:selectOneMenu>                                   
                                            <span style="margin-left: 10px"> #{lab.L_date} </span>
                                            <p:calendar value="#{managedReglementAchat.currentPhaseAchat.dateValider}" pattern="dd-MM-yyyy" size="10">
                                                <p:ajax event="dateSelect" global="false"/>
                                            </p:calendar>                                      
                                        </h:panelGroup> 
                                        <h:panelGroup style="float: right;margin-top: 5px">
                                            <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                          rendered="#{managedReglementAchat.isComptabiliseBean(managedReglementAchat.pieceAvance)}"/> 
                                            <h:outputText value="#{managedReglementAchat.pieceAvance.id}" styleClass="style_identifiant"/> 
                                        </h:panelGroup>
                                    </h:panelGroup>                
                                </f:facet>
                                <span>#{lab.L_reference} </span>
                                <h:outputText class="style_reference" value="#{managedReglementAchat.pieceAvance.numPiece}" style="font-weight: bold" />
                                <span>#{lab.LCF_PSRV_facture} </span>
                                <h:outputText value="#{managedReglementAchat.pieceAvance.docAchat.numDoc}" style="font-weight: bold"/>
                                <span>#{lab.L_fournisseur}</span>
                                <h:outputText value="#{managedReglementAchat.pieceAvance.docAchat.fournisseur.nom_prenom}" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_edition}</span>
                                <h:outputText value="#{managedReglementAchat.pieceAvance.datePiece}"  converter="DATE" style="font-weight: bold"/>
                                <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                                <h:outputText value="#{managedReglementAchat.pieceAvance.datePaiementPrevu}" converter="DATE" style="font-weight: bold"/>
                                <f:facet name="footer">
                                    <h:panelGroup>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                            <span>#{lab.LCF_PSRV_reference_externe} </span>
                                            <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                        </h:panelGrid>
                                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                            <span>#{lab.L_montant} : </span>
                                            <h:outputText value="#{managedReglementAchat.pieceAvance.montant}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                        
                                        </h:panelGrid>
                                    </h:panelGroup>
                                </f:facet>
                            </h:panelGrid>
                            <p:outputPanel id="data_extourne_caisse_achat">
                                <h:panelGroup style="width: 24%;float: right" rendered="#{managedReglementAchat.pieceAvance.sousAchats.size() gt 0}">
                                    <p:contextMenu for="list_extourne_caisse_achat">
                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedReglementAchat.deleteBeanExtourne()}"/>
                                    </p:contextMenu>
                                    <p:dataTable id="list_extourne_caisse_achat" value="#{managedReglementAchat.pieceAvance.sousAchats}" var="sad" rowKey="#{sad.id}"
                                                 selection="#{managedReglementAchat.selectExtourne}" selectionMode="single" scrollable="true" scrollHeight="105">
                                        <f:facet name="header">
                                            #{lab.LCF_PSRV_frais_extourne}
                                        </f:facet>
                                        <p:column headerText="#{lab.LCF_PSRV_banque}">
                                            <h:outputText value="#{sad.caisse.intitule}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_montant}" style="text-align: right">
                                            <h:outputText value="#{sad.montant}" converter="DN"/>
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGroup>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_ACHAT}">
                        <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="blog_form_suiviphaseAcompte" style="width: 75%">
                            <f:facet name="header">
                                <h:panelGroup id="head_corp_form_suivi_paa">
                                    <h:panelGroup style="float: left">                                        
                                        <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                        <h:selectOneMenu value="#{managedOperationFournisseur.currentPhaseAcompteAchat.caisse.id}" disabled="#{managedOperationFournisseur.currentPhaseAcompteAchat.id lt 1}">
                                            <f:selectItem itemLabel=" " itemValue="0" />                                            
                                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                            <p:ajax event="valueChange" global="false" listener="#{managedOperationFournisseur.chooseCaissePhaseAcompte()}"/>
                                        </h:selectOneMenu>                                   
                                        <span style="margin-left: 10px"> #{lab.L_date} </span>
                                        <p:calendar value="#{managedOperationFournisseur.currentPhaseAcompteAchat.dateValider}" pattern="dd-MM-yyyy" size="10">
                                            <p:ajax event="dateSelect" global="false"/>
                                            <p:ajax event="blur" global="false"/>
                                        </p:calendar>                                   
                                    </h:panelGroup> 
                                    <h:panelGroup style="float: right;margin-top: 5px">
                                        <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                      rendered="#{managedOperationFournisseur.isComptabiliseAcompte(managedReglementAchat.selectAcompte)}"/> 
                                        <h:outputText value="#{managedReglementAchat.selectAcompte.id}" styleClass="style_identifiant"/>
                                    </h:panelGroup>
                                </h:panelGroup>                                
                            </f:facet>
                            <h:outputText value="#{lab.L_reference}" />
                            <span class="style_reference">#{managedReglementAchat.selectAcompte.numRefrence}</span>                            
                            <h:outputText value="#{lab.LCF_PSRV_caisses_banques}" />                            
                            <h:outputText value="#{managedReglementAchat.selectAcompte.caisse.intitule}" style="font-weight: bold"/>
                            <span>#{lab.L_fournisseur}</span>
                            <h:outputText value="#{managedReglementAchat.selectAcompte.fournisseur.nom_prenom}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_edition}</span>
                            <h:outputText value="#{managedReglementAchat.selectAcompte.dateAcompte}"  converter="DATE" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                            <h:outputText value="#{managedReglementAchat.selectAcompte.dateUpdate}" converter="DATE" style="font-weight: bold"/>
                            <f:facet name="footer">
                                <h:panelGroup>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                        <span>#{lab.LCF_PSRV_reference_externe} </span>
                                        <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                        <span>#{lab.L_montant} : </span>
                                        <h:outputText value="#{managedReglementAchat.selectAcompte.montant}" converter="#{managedReglementAchat.converter}" style="font-weight: bold; color: #006666"/>                                       
                                    </h:panelGrid>
                                </h:panelGroup>
                            </f:facet>
                        </h:panelGrid>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_ACOMPTE_VENTE}">
                        <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="corps_form_suivi_pav" style="width: 75%">
                            <f:facet name="header">
                                <h:panelGroup id="head_corp_form_suivi_pav">
                                    <h:panelGroup style="float: left">                                        
                                        <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                        <h:selectOneMenu value="#{managedOperationClient.currentPhaseAcompteVente.caisse.id}" disabled="#{managedOperationClient.currentPhaseAcompteVente.id lt 1}">
                                            <f:selectItem itemLabel=" " itemValue="0" />                                            
                                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                            <p:ajax event="valueChange" global="false" listener="#{managedOperationClient.chooseCaissePhaseAcompte()}"/>
                                        </h:selectOneMenu>                                   
                                        <span style="margin-left: 10px"> #{lab.L_date} </span>
                                        <p:calendar value="#{managedOperationClient.currentPhaseAcompteVente.dateValider}" pattern="dd-MM-yyyy" size="10">
                                            <p:ajax event="dateSelect" global="false"/>
                                            <p:ajax event="blur" global="false"/>
                                        </p:calendar>                                   
                                    </h:panelGroup> 
                                    <h:panelGroup style="float: right;margin-top: 5px">
                                        <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                      rendered="#{managedOperationClient.isComptabiliseAcompte(managedReglementVente.selectAcompte)}"/> 
                                        <h:outputText value="#{managedReglementVente.selectAcompte.id}" styleClass="style_identifiant"/>
                                    </h:panelGroup>
                                </h:panelGroup>                                 
                            </f:facet>
                            <span>#{lab.L_reference}</span>
                            <h:outputText value="#{managedReglementVente.selectAcompte.numRefrence}" styleClass="style_reference"/>
                            <span>Caisses/Banques</span>
                            <h:outputText value="#{managedReglementVente.selectAcompte.caisse.intitule}" style="font-weight: bold"/>
                            <span>Client</span>
                            <h:outputText value="#{managedReglementVente.selectAcompte.client.nom_prenom}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_edition}</span>
                            <h:outputText value="#{managedReglementVente.selectAcompte.dateAcompte}"  converter="DATE" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                            <h:outputText value="#{managedReglementVente.selectAcompte.dateUpdate}" converter="DATE" style="font-weight: bold"/>                            
                            <f:facet name="footer">
                                <h:panelGroup>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                        <span>#{lab.LCF_PSRV_reference_externe} </span>
                                        <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                        <span>#{lab.L_montant} : </span>
                                        <h:outputText value="#{managedReglementVente.selectAcompte.montant}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                       
                                    </h:panelGrid>
                                </h:panelGroup>
                            </f:facet>
                        </h:panelGrid>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_VENTE}">
                        <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="corps_form_suivi_pcv" style="width: 75%">
                            <f:facet name="header">
                                <h:panelGroup id="head_corp_form_suivi_pcv">
                                    <h:panelGroup style="float: left">                                        
                                        <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                        <h:selectOneMenu value="#{managedOperationClient.currentPhaseCreditVente.caisse.id}" disabled="#{managedOperationClient.currentPhaseCreditVente.id lt 1}">
                                            <f:selectItem itemLabel=" " itemValue="0" />                                            
                                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                            <p:ajax event="valueChange" global="false" listener="#{managedOperationClient.chooseCaissePhaseCredit()}"/>
                                        </h:selectOneMenu>                                   
                                        <span style="margin-left: 10px"> #{lab.L_date} </span>
                                        <p:calendar value="#{managedOperationClient.currentPhaseCreditVente.dateValider}" pattern="dd-MM-yyyy" size="10">
                                            <p:ajax event="dateSelect" global="false"/>
                                            <p:ajax event="blur" global="false"/>
                                        </p:calendar>                                   
                                    </h:panelGroup> 
                                    <h:panelGroup style="float: right;margin-top: 5px">
                                        <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                      rendered="#{managedOperationClient.isComptabiliseCaisseCredit(managedReglementVente.selectCredit)}"/> 
                                        <h:outputText value="#{managedReglementVente.selectCredit.id}" styleClass="style_identifiant"/>
                                    </h:panelGroup>
                                </h:panelGroup>                    
                            </f:facet>
                            <span>#{lab.L_numero}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.numero}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_caisses_banques}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.caisse.intitule}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_client}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.credit.client.nom_prenom}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_edition}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.dateReg}"  converter="DATE" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.dateUpdate}" converter="DATE" style="font-weight: bold"/>
                            <f:facet name="footer">
                                <h:panelGroup>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                        <span>#{lab.LCF_PSRV_reference_externe} </span>
                                        <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                        <span>#{lab.L_montant} : </span>
                                        <h:outputText value="#{managedReglementVente.selectCredit.valeur}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                       
                                    </h:panelGrid>
                                </h:panelGroup>
                            </f:facet>
                        </h:panelGrid>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_CREDIT_ACHAT}">
                        <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="corps_form_suivi_pca" style="width: 75%">
                            <f:facet name="header">
                                <h:panelGroup id="head_corp_form_suivi_pca">
                                    <h:panelGroup style="float: left">                                        
                                        <span>#{lab.LCF_PSRV_caisses_banques} : </span>
                                        <h:selectOneMenu value="#{managedOperationFournisseur.currentPhaseCreditAchat.caisse.id}" disabled="#{managedOperationFournisseur.currentPhaseCreditAchat.id lt 1}">
                                            <f:selectItem itemLabel=" " itemValue="0" />                                            
                                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                            <p:ajax event="valueChange" global="false" listener="#{managedOperationFournisseur.chooseCaissePhaseCredit()}"/>
                                        </h:selectOneMenu>                                   
                                        <span style="margin-left: 10px"> #{lab.L_date} </span>
                                        <p:calendar value="#{managedOperationFournisseur.currentPhaseCreditAchat.dateValider}" pattern="dd-MM-yyyy" size="10">
                                            <p:ajax event="dateSelect" global="false"/>
                                            <p:ajax event="blur" global="false"/>
                                        </p:calendar>                                   
                                    </h:panelGroup> 
                                    <h:panelGroup style="float: right;margin-top: 5px">
                                        <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                      rendered="#{managedOperationFournisseur.isComptabiliseCaisseCredit(managedReglementAchat.selectCredit)}"/> 
                                        <h:outputText value="#{managedReglementAchat.selectCredit.id}" styleClass="style_identifiant"/>
                                    </h:panelGroup>
                                </h:panelGroup>                    
                            </f:facet>
                            <span>#{lab.L_numero}</span>
                            <h:outputText value="#{managedReglementVente.selectCredit.numero}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_caisses_banques}</span>
                            <h:outputText value="#{managedReglementAchat.selectCredit.caisse.intitule}" style="font-weight: bold"/>
                            <span>#{lab.L_fournisseur}</span>
                            <h:outputText value="#{managedReglementAchat.selectCredit.credit.fournisseur.nom_prenom}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_edition}</span>
                            <h:outputText value="#{managedReglementAchat.selectCredit.dateReg}"  converter="DATE" style="font-weight: bold"/>
                            <span>Date d'encaissement prévu</span>
                            <h:outputText value="#{managedReglementAchat.selectCredit.dateUpdate}" converter="DATE" style="font-weight: bold"/>
                            <f:facet name="footer">
                                <h:panelGroup>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left">   
                                        <span>#{lab.LCF_PSRV_reference_externe} </span>
                                        <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: right">
                                        <span>#{lab.L_montant} : </span>
                                        <h:outputText value="#{managedReglementAchat.selectCredit.valeur}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                       
                                    </h:panelGrid>
                                </h:panelGroup>
                            </f:facet>
                        </h:panelGrid>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedReglementVente.selectPiece.tableExterne==constantes.SCR_VIREMENT}">
                        <h:panelGrid columns="4" styleClass="yvs_table" cellpadding="0" cellspacing="0" id="corps_form_suivi_pvir" style="width: 75%">
                            <f:facet name="header">
                                <h:panelGroup id="head_corp_form_suivi_virement">
                                    <h:panelGroup style="float: left">                                        
                                        <span>#{lab.LCF_PVC_cible} : </span>
                                        <h:selectOneMenu value="#{managedVirement.currentPhaseVirement.caisse.id}" disabled="#{managedVirement.currentPhaseVirement.id lt 1}">
                                            <f:selectItem itemLabel=" " itemValue="0" />                                            
                                            <f:selectItems value="#{managedCaisses.caisses}" var="icaiss" itemLabel="#{icaiss.intitule}" itemValue="#{icaiss.id}" />
                                            <p:ajax event="valueChange" global="false" listener="#{managedVirement.chooseCaissePhaseVirement()}"/>
                                        </h:selectOneMenu>                                   
                                        <span style="margin-left: 10px"> #{lab.L_date} </span>
                                        <p:calendar value="#{managedVirement.currentPhaseVirement.dateValider}" pattern="dd-MM-yyyy" size="10">
                                            <p:ajax event="dateSelect" global="false"/>
                                        </p:calendar>                                       
                                    </h:panelGroup> 
                                    <h:panelGroup style="float: right;margin-top: 5px">
                                        <h:outputText value="C" styleClass="style_statut" title="#{lab.LC_PFA_comptabiliser}"
                                                      rendered="#{managedVirement.isComptabilise(managedVirement.entity)}"/> 
                                        <h:outputText value="#{managedVirement.entity.id}" styleClass="style_identifiant"/> 
                                    </h:panelGroup>
                                </h:panelGroup>                    
                            </f:facet>
                            <span>#{lab.L_reference} </span>
                            <h:outputText class="style_reference" value="#{managedVirement.entity.numeroPiece}" style="font-weight: bold" />
                            <span>#{lab.LCF_PVC_source}</span>
                            <h:outputText value="#{managedVirement.entity.source.intitule}" style="font-weight: bold"/>
                            <span>#{lab.L_designation}</span>
                            <h:outputText value="#{managedVirement.entity.cible.intitule}" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_edition}</span>
                            <h:outputText value="#{managedVirement.entity.datePiece}"  converter="DATE" style="font-weight: bold"/>
                            <span>#{lab.LCF_PSRV_date_encaissement_prevu}</span>
                            <h:outputText value="#{managedVirement.entity.datePaimentPrevu}" converter="DATE" style="font-weight: bold"/>
                            <f:facet name="footer">
                                <h:panelGroup>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle"  style="float: left">   
                                        <span>#{lab.LCF_PSRV_reference_externe} </span>
                                        <h:inputText value="#{managedReglementVente.reference}" style="font-weight: bold" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle"  style="float: right">
                                        <span>#{lab.L_montant} : </span>
                                        <h:outputText value="#{managedVirement.entity.montant}" converter="#{managedReglementVente.converter}" style="font-weight: bold; color: #006666"/>                                        
                                    </h:panelGrid>
                                </h:panelGroup>
                            </f:facet>
                        </h:panelGrid>
                    </p:outputPanel>
                </p:outputPanel>
                <p:dataTable value="#{managedReglementVente.mouvements}" var="mouv"  rowIndexVar="line_" id="data_list_piece_cheque" rowKey="#{mouv.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedReglementVente.loadOnViewMouvement}" 
                            update=":main_reg_pv:blog_reglement_cheque_pv :main_reg_pv:header_reglement_cheque_pv"/>
                    <p:column headerText="N°" width="15" styleClass="etat_#{mouv.statutPiece}">
                        <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{mouv.id eq managedReglementVente.selectPiece.id}"/>
                        #{line_+1}
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_numero_piece}" width="100" styleClass="etat_#{mouv.statutPiece}">
                        #{mouv.numero}
                        <h:panelGroup style="float: right">
                            <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{managedPieceCaisse.isComptabilised(mouv)}" styleClass="style_statut"/>
                        </h:panelGroup>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}" width="100" styleClass="etat_#{mouv.statutPiece}">
                        #{mouv.referenceExterne}
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_ref_externe}" width="100" styleClass="etat_#{mouv.statutPiece}">
                        #{mouv.numeroExterne}
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_date_piece}" width="100" styleClass="etat_#{mouv.statutPiece}" style="text-align: center">
                        <h:outputText value="#{mouv.dateMvt}" converter="DATE" title="#{lab.LCF_PSRV_date_edition_cheque}"/>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_date_paiement}" width="100" styleClass="etat_#{mouv.statutPiece}" style="text-align: center">
                        <h:outputText value="#{mouv.datePaye}" converter="DATE" title="#{lab.LCF_PSRV_date_paiement_piece_tresorerie}"/>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_moyen}" width="100" styleClass="etat_#{mouv.statutPiece}" style="text-align: center">
                        <h:outputText value="#{mouv.model.designation}" />
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_tiers}" width="100" styleClass="etat_#{mouv.statutPiece}">
                        #{mouv.tiersExterne.nom_prenom}
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_caisses_banques}" width="100" styleClass="etat_#{mouv.statutPiece}">
                        #{mouv.caisse.intitule}
                    </p:column>
                    <p:column headerText="#{lab.L_valeur}" width="100" styleClass="etat_#{mouv.statutPiece}" style="text-align: right">
                        <h:outputText value="#{mouv.montant}" converter="DN" />
                    </p:column>
                    <p:column headerText="#{lab.L_statut}" width="20" styleClass="etat_#{mouv.statutPiece}" style="text-align: center">                        
                        <span style="display: #{(mouv.statutPiece==constantes.STATUT_DOC_ATTENTE)?'inline-block':'none'}; width: 10px; height: 10px; background: #444;" title="En attente de paiement"></span>
                        <span style="display: #{(mouv.statutPiece==constantes.STATUT_DOC_ENCOUR)?'inline-block':'none'}; width: 10px; height: 10px; background: #f6a828" title="En cours de paiement"></span>
                        <span style="display: #{(mouv.statutPiece==constantes.STATUT_DOC_PAYER)?'inline-block':'none'}; width: 10px; height: 10px; background: #006666" title="Pièce réglé"></span>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSRV_phases}" width="20" style="text-align: center">
                        <span>#{mouv.etapeValide}/#{mouv.etapeTotal}</span>
                    </p:column>
                    <p:column width="20" style="text-align: center" styleClass="etat_#{mvtPl.statutPiece}">
                        <p:commandLink global="false" actionListener="#{managedPieceCaisse.print(mouv)}" style="margin-top: 5px" ajax="false">
                            <h:graphicImage title="#{lab.L_telecharger}" library="img" name="pdf.png" width="15" height="15"/>                                        
                        </p:commandLink>
                    </p:column>
                    <p:column headerText="" width="15">
                        <p:contextMenu for="btn_action_prv" event="left click" styleClass="context_menu">
                            <p:menuitem value="#{lab.LP_PSO_mettre_en_attente}" icon="ui-icon-shuffle" style="color: #790000" 
                                        rendered="#{mouv.statutPiece eq constantes.STATUT_DOC_ANNULE}"/>
                            <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" style="color: #790000" 
                                        actionListener="#{managedReglementVente.onSelectedDistantFacture(mouv)}"/>
                            <p:menuitem value="#{lab.LCF_PPC_initialise_etapes}" icon="ui-icon-shuffle" style="color: #790000" 
                                        actionListener="#{managedReglementVente.openToGenerePhaseReglement(mouv)}"/>
                        </p:contextMenu>
                        <p:commandButton icon="ui-icon-gear" type="button" style="width: 22px; height: 22px" id="btn_action_prv" />
                    </p:column>
                </p:dataTable>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block" >
                    <p:commandButton actionListener="#{managedReglementVente.paginer(false)}" update="data_list_piece_cheque" icon="ui-icon-circle-triangle-w" disabled="#{managedReglementVente.paginatorData.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedReglementVente.paginatorData.currentPage}/#{managedReglementVente.paginatorData.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton action="#{managedReglementVente.paginer(true)}" update="data_list_piece_cheque" icon="ui-icon-circle-triangle-e" disabled="#{managedReglementVente.paginatorData.disNext}"/>
                    <p:selectOneMenu value="#{managedReglementVente.imax}" label="#{lab.L_nombre_max_resultat}" style="float: right; font-size: 0.9em;" valueChangeListener="#{managedReglementVente.choosePaginators}">
                        <f:selectItems value="#{managedReglementVente.paginations}" />
                        <p:ajax event="valueChange" update="data_list_piece_cheque"/>
                    </p:selectOneMenu>
                </p:outputPanel>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" >
            <div class="zone_find" style="font-size: 0.8em"> 
                <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px;display: none" width="20" height="20"
                                styleClass="img_slide" title="#{lab.L_cacher}"/>                    
                <h:panelGrid columns="2" style="font-size: 0.9em" cellpadding="0" cellspacing="0">
                    <h:panelGrid id="zone_search_cheque" columns="9" style="font-size: 1.0em" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LCF_PPC_date_payer}" />
                        <h:outputText value="Agence" />
                        <h:panelGroup>
                            <h:outputText value="#{lab.L_statut}" style="float: left;margin-top: 3px"/>
                            <h:selectOneMenu value="#{managedReglementVente.operateurStatut}" valueChangeListener="#{managedReglementVente.changeOperateurStatut}" style="float: right">
                                <f:selectItem itemValue="=" itemLabel="#{lab.L_egale}" />
                                <f:selectItem itemValue="!=" itemLabel="#{lab.L_different}" />
                                <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque" />
                            </h:selectOneMenu>
                        </h:panelGroup>
                        <h:outputText value="#{lab.LCF_PSRV_statut_cheques}" />
                        <h:outputText value="#{lab.L_type}" />
                        <h:outputText value="#{lab.LCF_PSRV_tiers}" />
                        <h:outputText value="#{lab.LCF_PSRV_caisses_banques}" />
                        <h:outputText value="#{lab.L_reference}" />
                        <h:outputText value="" />
                        <h:panelGroup id="zone_search_cheque_date">
                            <h:selectBooleanCheckbox value="#{managedReglementVente.dateSearch}">
                                <p:ajax event="valueChange" update="zone_search_cheque_date :main_reg_pv:data_list_piece_cheque" listener="#{managedReglementVente.addParamDateOnMouvement()}" />
                            </h:selectBooleanCheckbox>
                            <p:calendar value="#{managedReglementVente.dateDebutSearch}" pattern="dd-MM-yyyy" navigator="true" disabled="#{!managedReglementVente.dateSearch}" size="8">
                                <p:ajax event="dateSelect" listener="#{managedReglementVente.addParamDateOnMouvement}" update=":main_reg_pv:data_list_piece_cheque"  />
                            </p:calendar>
                            <p:calendar value="#{managedReglementVente.dateFinSearch}" pattern="dd-MM-yyyy" navigator="true" disabled="#{!managedReglementVente.dateSearch}" size="8">
                                <p:ajax event="dateSelect" listener="#{managedReglementVente.addParamDateOnMouvement}" update=":main_reg_pv:data_list_piece_cheque"  />
                            </p:calendar>
                        </h:panelGroup>
                        <h:selectOneMenu value="#{managedReglementVente.agenceFind}" valueChangeListener="#{managedReglementVente.addParamAgenceCheque}">
                            <f:selectItem itemValue="#{null}" itemLabel=" " />
                            <f:selectItems value="#{managedAgence.listAgence}" var="iag"
                                       itemLabel="#{iag.designation}" itemValue="#{iag.id}"/>
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque" />
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedReglementVente.statutF}" valueChangeListener="#{managedReglementVente.addParamStatutMouvement}">
                            <f:selectItem itemValue="#{null}" itemLabel=" " />
                            <f:selectItem itemValue="#{constantes.STATUT_DOC_ATTENTE}" itemLabel="#{lab.L_en_attente}" />
                            <f:selectItem itemValue="#{constantes.STATUT_DOC_ENCOUR}" itemLabel="#{lab.L_en_cours}" />
                            <f:selectItem itemValue="#{constantes.STATUT_DOC_PAYER}" itemLabel="#{lab.LC_PEV_regles}" />
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque" />
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedReglementVente.statutFC}" valueChangeListener="#{managedReglementVente.addStatutCheque}">
                            <f:selectItem itemValue="#{null}" itemLabel=" " />
                            <f:selectItem itemValue="#{constantes.STATUT_DOC_ENCOUR}" itemLabel="#{lab.L_en_cours}" />
                            <f:selectItem itemValue="#{constantes.STATUT_DOC_TERMINE}" itemLabel="#{lab.L_termine}" />
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque" />
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedReglementVente.typeSearch}">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_acomptes_achat}" itemValue="#{constantes.SCR_ACOMPTE_ACHAT}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_acomptes_vente}" itemValue="#{constantes.SCR_ACOMPTE_VENTE}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_piece_achat}" itemValue="#{constantes.SCR_ACHAT}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_piece_od}" itemValue="#{constantes.SCR_DIVERS}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_piece_ventes} " itemValue="#{constantes.SCR_VENTE}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_reglement_credit_achat}" itemValue="#{constantes.SCR_CREDIT_ACHAT}" />
                            <f:selectItem itemLabel="#{lab.LCF_PPC_reglement_credit_vente}" itemValue="#{constantes.SCR_CREDIT_VENTE}" />
                            <f:selectItem itemLabel="#{lab.LDB_PCB_virements.toUpperCase()}" itemValue="#{constantes.SCR_VIREMENT}" />
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque"  listener="#{managedReglementVente.addParamSourceOnMouvement()}" />
                        </h:selectOneMenu>
                        <h:inputText value="#{managedReglementVente.clientF}">
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque"  listener="#{managedReglementVente.addParamClientOnMouvement()}"/>
                        </h:inputText>
                        <h:selectOneMenu value="#{managedReglementVente.caisseF}">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="0" />
                            <f:selectItems value="#{managedCaisses.caisses}" var="itemCaiss" itemLabel="#{itemCaiss.intitule}" itemValue="#{itemCaiss.id}" />
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque"  listener="#{managedReglementVente.addParamCaisseOnMouvement()}" />
                        </h:selectOneMenu>
                        <h:inputText value="#{managedReglementVente.numPieceF}">
                            <p:ajax event="valueChange" update=":main_reg_pv:data_list_piece_cheque"  listener="#{managedReglementVente.addParamCodeOnMouvement()}"/>
                        </h:inputText>
                        <p:commandLink global="false" onclick="dlgPlusOptions.show()" style="border: 2px solid #666; border-radius: 5px;padding: 2px"
                                       value="#{lab.L_avancees}"/>
                    </h:panelGrid>
                    <h:panelGroup style="float: right">

                    </h:panelGroup>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>