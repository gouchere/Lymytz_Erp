<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"> 
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Mise à jour comptable','modCompta', 'smenMajComptable', true)}
    </ui:define>    
    <ui:define name="contents">
        #{managedCaisses.loadAllCaisses()}
        #{managedAgence.loadAgence()}

        #{managedJournaux.doNothing()}
        #{managedSalaire.doNothing()}
        #{managedSalaire.doNothing()}
        #{managedVente.doNothing()} 
        #{managedFactureVenteV2.doNothing()}
        #{managedFactureAchat.doNothing()}
        #{managedDocDivers.doNothing()}
        #{managedReglementMission.doNothing()}
        #{managedReglementAchat.doNothing()}
        #{managedReglementVente.doNothing()}
        #{managedVirement.doNothing()}
        #{managedOperationClient.doNothing()}   
        #{managedOperationFournisseur.doNothing()}   
        #{managedRetenue.doNothing()} 
        #{managedSaisiePiece.setOperation('M')} 
        #{managedSaisiePiece.doNothing()} 
        <script type="text/javascript">
            $(function() {
                collapseList('maj_compta');
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 175);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
        </script>
        <h:form prependId="false" id="form_pptes_compta">
            <p:dialog  width="60%" widgetVar="dlgPpteCompta" closeOnEscape="true" header="Pièces comptable">
                <ui:include src="../../finance_compta/compta_general/yvs_schema_compta.xhtml" />
                <f:facet name="footer">
                    &copy;Lymytz 2014
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgComptabilisedSalaire" header="#{lab.LCF_PMC_comptabiliser_salaires}" closeOnEscape="true">                    
                <h:panelGrid columns="1">
                    <span>#{lab.LCF_PMC_choisir_caisse} </span>
                    <h:selectOneMenu value="#{managedSaisiePiece.caisseUpgrade}">
                        <f:selectItem itemLabel="---" itemValue="#{0}"/>
                        <f:selectItems value="#{managedCaisses.allCaisses}" var="aCais" itemLabel="#{aCais.intitule}" itemValue="#{aCais.id}"/>
                    </h:selectOneMenu>
                </h:panelGrid>
                <f:facet name="footer">                    
                    <p:commandButton value="Lancer" actionListener="#{managedSaisiePiece.comptabilisedSalaire()}" oncomplete="dlgComptabilisedSalaire.hide()"
                                     update=":form_maj_pc_comptable:data_doc_piece_caisse_vente"
                                     style="border: 2px solid black; border-radius: 5px;padding: 2px;float: right;margin-top: 5px;font-size: 0.8em"/>
                </f:facet>
            </p:dialog>
            <p:dialog widgetVar="dlgComptabilised" header="#{lab.LCF_PMC_comptabiliser_periode}" closeOnEscape="true">                    
                <h:panelGrid columns="2">
                    <span>#{lab.L_date_debut} : </span>
                    <p:calendar value="#{managedSaisiePiece.dateDebut}" navigator="true" pattern="dd-MM-yyyy"/>
                    <span>#{lab.L_date_fin} : </span>
                    <p:calendar value="#{managedSaisiePiece.dateFin}" navigator="true" pattern="dd-MM-yyyy"/>
                </h:panelGrid>
                <f:facet name="footer">                    
                    <p:commandButton value="#{lab.LC_PFV_lancer}" actionListener="#{managedSaisiePiece.comptabiliseByDate()}"
                                     style="border: 2px solid black; border-radius: 5px;padding: 2px;float: right;margin-top: 5px;font-size: 0.8em"/>
                </f:facet>
            </p:dialog>
            <p:dialog widgetVar="dlgCorrectPeriodeVirement" header="Correction comptabilité d'une période" closeOnEscape="true">                    
                <h:panelGrid columns="2">
                    <span>#{lab.L_date_debut} : </span>
                    <p:calendar value="#{managedSaisiePiece.dateDebut}" navigator="true" pattern="dd-MM-yyyy"/>
                    <span>#{lab.L_date_fin} : </span>
                    <p:calendar value="#{managedSaisiePiece.dateFin}" navigator="true" pattern="dd-MM-yyyy"/>
                </h:panelGrid>
                <f:facet name="footer">                    
                    <p:commandButton value="#{lab.LC_PFV_lancer}" actionListener="#{managedSaisiePiece.correctionComptabiliseByDate()}"
                                     style="border: 2px solid black; border-radius: 5px;padding: 2px;float: right;margin-top: 5px;font-size: 0.8em"/>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog  modal="true" widgetVar="dlgUpdatePieceComptable" header="Modifier la piece comptable" closeOnEscape="true">                    
                <h:panelGrid columns="2" id="form-update_piece_comptable">
                    <h:outputText value="Date pièce : "/>
                    <p:calendar value="#{managedSaisiePiece.datePiece}" navigator="true" pattern="dd-MM-yyyy" style="width: 100%;text-align: center"/>
                    <h:outputText value="#{managedSaisiePiece.naturePiece eq constantes.SCR_VIREMENT? 'Journal source':'Journal pièce'} : "/>
                    <h:selectOneMenu value="#{managedSaisiePiece.journalPiece}" style="width: 100%">
                        <f:selectItem itemLabel="--" itemValue="#{0}"/>
                        <f:selectItems value="#{managedJournaux.journaux}" var="jrn" itemLabel="#{jrn.codeJournal}" itemValue="#{jrn.id}"/>
                    </h:selectOneMenu>
                    <h:outputText value="Journal cible : " rendered="#{managedSaisiePiece.naturePiece eq constantes.SCR_VIREMENT}"/>
                    <h:selectOneMenu value="#{managedSaisiePiece.journalPiece2}" style="width: 100%" rendered="#{managedSaisiePiece.naturePiece eq constantes.SCR_VIREMENT}">
                        <f:selectItem itemLabel="--" itemValue="#{0}"/>
                        <f:selectItems value="#{managedJournaux.journaux}" var="jrn" itemLabel="#{jrn.codeJournal}" itemValue="#{jrn.id}"/>
                    </h:selectOneMenu>
                    <f:facet name="footer">
                        <div align="right">                            
                            <p:commandButton icon="ui-icon-disk" value="#{lab.L_enregistrer}" style="float: right"
                                             oncomplete="dlgUpdatePieceComptable.hide()" actionListener="#{managedSaisiePiece.updateNew()}"/>
                        </div>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog  modal="true" showHeader="false" widgetVar="dlgChooseAgence" header="#{lab.LCF_PMC_selectionner_agences}" width="40%" closeOnEscape="true">                    
                <p:dataTable id="data_agence_maj_comptable" value="#{managedAgence.listAgence}" var="ag" rowKey="#{ag.id}" rowIndexVar="y"
                             selection="#{managedSaisiePiece.agencesSelect}">
                    <p:column style="width: 10%">
                        <span>#{y+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}">
                        <span>#{ag.designation}</span>
                    </p:column>
                    <p:column selectionMode="multiple" style="width:16px;text-align:center"/>
                </p:dataTable>
                <f:facet name="footer">
                    <h:panelGroup>
                        <h:outputText value="#{lab.LCF_PMC_action}"/>
                        <h:selectOneMenu value="#{managedSaisiePiece.actionAgence}">
                            <f:selectItem itemLabel="#{lab.LCF_PMC_inclure}" itemValue="#{true}"/>
                            <f:selectItem itemLabel="#{lab.LCF_PMC_exclure}" itemValue="#{false}"/>
                        </h:selectOneMenu>
                        <p:commandButton icon="ui-icon-seek-next" value="#{lab.L_continuer}" style="float: right" onclick="dlgChooseAgence.hide()"
                                         update=":form_maj_pc_comptable:zone-agence_maj_comptable"/>
                    </h:panelGroup>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_export_compta_maj">
            <p:dialog header="Model d'exportation" width="40%" closeOnEscape="true" widgetVar="dlgListExport">
                <p:dataTable id="data_model_export_compta_maj" value="#{managedSaisiePiece.exports}" var="exp" rowIndexVar="Idx" rowKey="#{exp.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnExport}" global="false" update=":main_export_compta_maj:btn_export_compta_maj"/>
                    <p:ajax event="rowUnselect" listener="#{managedSaisiePiece.unLoadOnExport}" global="false" update=":main_export_compta_maj:btn_export_compta_maj"/>
                    <p:column headerText="N°">
                        #{Idx+1}
                    </p:column>
                    <p:column headerText="#{lab.L_reference}">
                        #{exp.reference}
                    </p:column>
                    <p:column headerText="#{lab.L_intitule}">
                        #{exp.libelle}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_extension}">
                        #{exp.format}
                    </p:column>
                </p:dataTable>
                <f:facet name="footer">
                    <p:commandButton style="float: right;margin-top: -3px" value="#{lab.L_exporter}" ajax="false" id="btn_export_compta_maj"
                                     actionListener="#{managedSaisiePiece.export(true)}" disabled="#{managedSaisiePiece.model == null}"/>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgAffectation" width="70%" closeOnEscape="true" footer="&copy; Lymytz">
                <f:facet name="header">
                    <span>Affectation analytique pour '<h:outputText id="title_affectation_maj" value="#{managedSaisiePiece.selectContent.libelle}" style="font-weight: bold;font-size: 0.9em"/>'</span>
                </f:facet>
                <p:dataTable id="data_affectation_maj" value="#{managedSaisiePiece.selectContent.analytiques}" var="aff" rowIndexVar="xAff" rowKey="#{aff.id}">
                    <p:column headerText="N°" width="30">
                        <span>#{xAff+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PSL_date_saisie}" style="text-align: center;width: 20%">
                        <h:outputText value="#{aff.dateSaisie}" converter="DATE"/>
                    </p:column>
                    <p:column headerText="#{lab.LCF_PVC_centre}">
                        <h:outputText value="#{aff.centre.designation}"/>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PTA_coef}." style="text-align: right;width: 20%">
                        <h:outputText value="#{aff.coefficient}" converter="DNS"/>
                    </p:column>
                    <p:column headerText="#{lab.L_valeur}" style="text-align: right;width: 20%">
                        <h:outputText value="#{aff.debit}" converter="DNS" rendered="#{aff.debit != 0}"/>
                        <h:outputText value="#{aff.credit}" converter="DNS" rendered="#{aff.credit != 0}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form> 
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.LCF_PSL_reprendre_formulaire}" message="#{lab.LCF_PMC_text}"
                             widgetVar="dlgConfirmReset" closeOnEscape="true" >
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.resetFiche()}" oncomplete="dlgConfirmReset.hide()"
                                 update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmReset.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseAll" message="Voulez-vous annuler la comptabilisation de ces documents?">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliseAll()}" oncomplete="dlgUnComptabiliseAll.hide()"
                                 update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta" />
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseAll.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseRetenue" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserRetenue(managedSaisiePiece.selectRetenue, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_retenue" oncomplete="dlgUnComptabiliseRetenue.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseRetenue.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseSalaire" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserSalaire(managedSaisiePiece.selectSalaire, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_salaire" oncomplete="dlgUnComptabiliseSalaire.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseSalaire.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePieceMission" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseMission(managedSaisiePiece.selectCaisseMission, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_mission" oncomplete="dlgUnComptabilisePieceMission.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePieceMission.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseHeader" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserHeaderVente(managedSaisiePiece.selectHeadVente, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_head_vente" oncomplete="dlgUnComptabiliseHeader.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseHeader.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseVente" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserVente(managedSaisiePiece.selectVente, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_vente" oncomplete="dlgUnComptabiliseVente.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseVente.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseAchat" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserAchat(managedSaisiePiece.selectAchat, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_achat" oncomplete="dlgUnComptabiliseAchat.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseAchat.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseDivers" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserDivers(managedSaisiePiece.selectDivers, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_divers" oncomplete="dlgUnComptabiliseDivers.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseDivers.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseCaisseDivers" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseDivers(managedSaisiePiece.selectCaisseDivers, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_caisse_divers" oncomplete="dlgUnComptabiliseCaisseDivers.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseCaisseDivers.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseCaisseAchat" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseAchat(managedSaisiePiece.selectCaisseAchat, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_caisse_achat" oncomplete="dlgUnComptabiliseCaisseAchat.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseCaisseAchat.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseAcompteVente" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseVente(managedSaisiePiece.selectCaisseVente, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_caisse_vente" oncomplete="dlgUnComptabiliseCaisseVente.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseCaisseVente.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseAcompteVente" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserAcompteClient(managedSaisiePiece.selectAcompteVente, true)}"
                                 update=":form_maj_pc_comptable:data_doc_acompte_client" oncomplete="dlgUnComptabiliseAcompteVente.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseAcompteVente.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseAcompteAchat" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserAcompteFournisseur(managedSaisiePiece.selectAcompteAchat, true)}"
                                 update=":form_maj_pc_comptable:data_doc_acompte_fournisseur" oncomplete="dlgUnComptabiliseAcompteAchat.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseAcompteAchat.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseCreditVente" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCreditClient(managedSaisiePiece.selectCreditVente, true)}"
                                 update=":form_maj_pc_comptable:data_doc_credit_client" oncomplete="dlgUnComptabiliseCreditVente.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseCreditVente.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseCreditAchat" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCreditFournisseur(managedSaisiePiece.selectCreditAchat, true)}"
                                 update=":form_maj_pc_comptable:data_doc_credit_fournisseur" oncomplete="dlgUnComptabiliseCreditAchat.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseCreditAchat.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabilisePieceVirement" message="#{lab.LCF_PMC_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserCaisseVirement(managedSaisiePiece.selectCaisseVirement, true)}"
                                 update=":form_maj_pc_comptable:data_doc_piece_virement" oncomplete="dlgUnComptabilisePieceVirement.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabilisePieceVirement.hide()" />
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_maj_pc_comptable">  
            <div class="part_fix">
                <h:panelGroup id="form_btn_maj_compta" style="float: left">                    
                    <p:splitButton icon="ui-icon-disk" value="#{lab.L_enregistrer}"  id="save_maj_compta" actionListener="#{managedSaisiePiece.saveNew()}"
                                   disabled="#{(managedSaisiePiece.giveSoePiece(piecesCompta)!=0 or piecesCompta.contentsPieces.size() lt 1)}">
                        <p:menuitem icon="ui-icon-clipboard" value="#{lab.L_nouveau}" disabled="#{0 >= piecesCompta.contentsPieces.size()}"
                                    global="false" onclick="dlgConfirmReset.show()" id="cancel_maj_compta"/>
                        <p:menuitem value="Modifier" actionListener="#{managedSaisiePiece.updatePiece()}" 
                                    oncomplete="dlgUpdatePieceComptable.show()" icon="ui-icon-pencil"/> 
                    </p:splitButton>
                </h:panelGroup>   
                <h:panelGrid id="search_maj_compta" columns="5" styleClass="yvs_nostyle" style="float: left">
                    <span>#{lab.L_type}</span>
                    <h:selectOneMenu value="#{managedSaisiePiece.typePiece}">
                        <f:selectItem itemLabel="#{constantes.SCR_AUTRES}" itemValue="#{constantes.SCR_AUTRES}"/>
                        <f:selectItem itemLabel="#{constantes.SCR_TRESORERIE}" itemValue="#{constantes.SCR_TRESORERIE}"/>
                        <p:ajax event="valueChange" listener="#{managedSaisiePiece.chooseTypePiece()}" oncomplete="collapseList('maj_compta')" 
                                update=":main-footer-maj:footer_doc_piece item_nature_piece header_doc_piece zone-agence_maj_comptable"/>
                    </h:selectOneMenu>
                    <span>#{lab.LCF_PMC_nature}</span>
                    <h:selectOneMenu id="item_nature_piece" value="#{managedSaisiePiece.naturePiece}">
                        <f:selectItem itemLabel=" " itemValue="#{null}"/>
                        <f:selectItems value="#{managedSaisiePiece.naturesPieces}" var="nature"
                                       itemLabel="#{nature.libelle}" itemValue="#{nature.valeur}"/>
                        <p:ajax event="valueChange" listener="#{managedSaisiePiece.chooseNaturePiece()}" oncomplete="collapseList('maj_compta')"
                                update=":main-footer-maj:footer_doc_piece header_doc_piece zone-agence_maj_comptable"/>
                    </h:selectOneMenu>
                    <h:panelGroup id="zone-agence_maj_comptable">
                        <h:panelGroup rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_SALAIRE}">
                            <div onclick="dlgChooseAgence.show()" style="cursor: pointer;border: 1px solid black; border-radius: 3px;padding: 1px;background: #CCC" title="#{lab.LCF_PMC_selectionner_agences}">
                                <ui:repeat value="#{managedSaisiePiece.agencesSelect}" var="iAg" rendered="#{managedSaisiePiece.agencesSelect.size() gt 0}" varStatus="idx">
                                    <h:outputText value="#{iAg.designation}" style="font-weight: bold; font-size: 0.7em"/>
                                    <h:outputText value=" - " rendered="#{managedSaisiePiece.agencesSelect.size() gt (idx.index + 1)}"/>
                                </ui:repeat>
                                <h:outputText value="#{lab.LCF_PMC_selectionner_agence}" rendered="#{managedSaisiePiece.agencesSelect.size() le 0}" style="font-weight: bold; font-size: 0.7em"/>
                            </div>
                        </h:panelGroup>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid columns="3" style="float: right" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">                            
                    <p:splitButton type="button" value="#{lab.L_options}" id="delete_maj_compta" style="font-size: 0.8em">
                        <p:menuitem value="Comptabiliser" icon="ui-icon-extlink" actionListener="#{managedSaisiePiece.loadOnViewMore()}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                    </p:splitButton>                      
                    <h:panelGroup id="header_doc_piece" style="float: right">
                        <!-->Retenue<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_RETENUE}">
                            <p:commandButton actionListener="#{managedRetenue.pagineResult(false)}"   icon="ui-icon-circle-triangle-w"  disabled="#{managedRetenue.paginator.disPrev}" update="table_content__piece_comptable"/>
                            <p:outputLabel value="#{managedRetenue.paginator.currentPage}/#{managedRetenue.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton action="#{managedRetenue.pagineResult(true)}"   icon="ui-icon-circle-triangle-e"  disabled="#{managedRetenue.paginator.disNext}" update="table_content__piece_comptable"/>
                            <p:selectOneMenu value="#{managedRetenue.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedRetenue.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{managedRetenue.paginations}" />
                                <p:ajax event="valueChange" update="table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  

                        <!-->Salaire<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_SALAIRE}">
                            <p:commandButton actionListener="#{managedSalaire.loadHeadBulletin(false, false)}"   icon="ui-icon-circle-triangle-w"  disabled="#{managedSalaire.p_entete.disPrev}" update="table_content__piece_comptable"/>
                            <p:outputLabel value="#{managedSalaire.p_entete.currentPage}/#{managedSalaire.p_entete.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton action="#{managedSalaire.loadHeadBulletin(true, false)}"   icon="ui-icon-circle-triangle-e"  disabled="#{managedSalaire.p_entete.disNext}" update="table_content__piece_comptable"/>
                            <p:selectOneMenu value="#{managedSalaire.ifin}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedSalaire.choosePaginatorHead}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{managedSalaire.paginations}" />
                                <p:ajax event="valueChange" update="table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  

                        <!-->Mission<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_FRAIS_MISSIONS}">
                            <p:commandButton actionListener="#{managedReglementMission.loadAllPiece(false, false)}" update="data_doc_piece_mission table_content__piece_comptable" icon="ui-icon-circle-triangle-w"  disabled="#{managedReglementMission.paginator.disPrev}"/>
                            <p:outputLabel value="#{managedReglementMission.paginator.currentPage}/#{managedReglementMission.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton action="#{managedReglementMission.loadAllPiece(true, false)}" update="data_doc_piece_mission table_content__piece_comptable" icon="ui-icon-circle-triangle-e"  disabled="#{managedReglementMission.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedReglementMission.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReglementMission.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{managedReglementMission.paginations}" />
                                <p:ajax event="valueChange" update="data_doc_piece_mission table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  

                        <!-->Journal de vente<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_HEAD_VENTE}">
                            <p:commandButton actionListener="#{managedVente.init(false)}" global="false" update=":form_maj_pc_comptable:data_doc_piece_head_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedVente.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedVente.paginator.currentPage}/#{managedVente.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedVente.init(true)}" global="false" update=":form_maj_pc_comptable:data_doc_piece_head_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedVente.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedVente.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedVente.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedVente.paginations}"/>
                                <p:ajax event="valueChange" global="false" update=":form_maj_pc_comptable:data_doc_piece_head_vente table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Facture de vente<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VENTE}">
                            <p:commandButton actionListener="#{managedFactureVenteV2.init(false)}" global="false" update=":form_maj_pc_comptable:data_doc_piece_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureVenteV2.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedFactureVenteV2.paginator.currentPage}/#{managedFactureVenteV2.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedFactureVenteV2.init(true)}" global="false" update=":form_maj_pc_comptable:data_doc_piece_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureVenteV2.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFactureVenteV2.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureVenteV2.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFactureVenteV2.paginations}"/>
                                <p:ajax event="valueChange"  update=":form_maj_pc_comptable:data_doc_piece_vente table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Facture Achat<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACHAT}">
                            <p:commandButton actionListener="#{managedFactureAchat.init(false)}" global="false" update="data_doc_piece_achat table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureAchat.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedFactureAchat.paginator.currentPage}/#{managedFactureAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedFactureAchat.init(true)}" global="false" update="data_doc_piece_achat table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureAchat.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFactureAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFactureAchat.paginations}"/>
                                <p:ajax event="valueChange"  update="data_doc_piece_achat table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 

                        <!-->Doc divers<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_DIVERS}">
                            <p:commandButton actionListener="#{managedDocDivers.init(false)}" global="false" update="data_doc_piece_divers table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedDocDivers.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedDocDivers.paginator.currentPage}/#{managedDocDivers.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedDocDivers.init(true)}" global="false" update="data_doc_piece_divers table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedDocDivers.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedDocDivers.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedDocDivers.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedDocDivers.paginations}"/>
                                <p:ajax event="valueChange"  update="data_doc_piece_divers table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 

                        <!-->Reg doc divers<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_DIVERS}">
                            <p:commandButton actionListener="#{managedDocDivers.loadAllPiece(false, false)}" global="false" update="data_doc_piece_caisse_divers table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedDocDivers.p_piece.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedDocDivers.p_piece.currentPage}/#{managedDocDivers.p_piece.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedDocDivers.loadAllPiece(true, false)}" global="false" update="data_doc_piece_caisse_divers table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedDocDivers.p_piece.disNext}"/>
                            <p:selectOneMenu value="#{managedDocDivers.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedDocDivers.choosePaginatorPiece}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedDocDivers.paginations}"/>
                                <p:ajax event="valueChange"  update="data_doc_piece_caisse_divers table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 

                        <!-->Reg Achat<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_ACHAT}">
                            <p:commandButton actionListener="#{managedReglementAchat.loadAllPiece(false, false)}" global="false" update="data_doc_piece_caisse_achat table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedReglementAchat.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedReglementAchat.paginator.currentPage}/#{managedReglementAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedReglementAchat.loadAllPiece(true, false)}" global="false" update="data_doc_piece_caisse_achat table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedReglementAchat.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedReglementAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReglementAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedReglementAchat.paginations}"/>
                                <p:ajax event="valueChange"  update="data_doc_piece_caisse_achat table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 

                        <!-->Reg Vente<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_VENTE}">
                            <p:commandButton actionListener="#{managedReglementVente.loadAllPiece(false, false)}" global="false" update="data_doc_piece_caisse_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedReglementVente.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedReglementVente.paginator.currentPage}/#{managedReglementVente.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedReglementVente.loadAllPiece(true, false)}" global="false" update="data_doc_piece_caisse_vente table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedReglementVente.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedReglementVente.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReglementVente.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedReglementVente.paginations}"/>
                                <p:ajax event="valueChange"  update="data_doc_piece_caisse_vente table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Acompte client<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_VENTE}">
                            <p:commandButton actionListener="#{managedOperationClient.paginer(false)}" global="false" update="data_doc_acompte_client table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationClient.paginator.disPrev}"/>
                            <p:outputLabel value="#{managedOperationClient.paginator.currentPage}/#{managedOperationClient.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton actionListener="#{managedOperationClient.paginer(true)}" global="false" update="data_doc_acompte_client table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationClient.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedOperationClient.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedOperationClient.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedOperationClient.paginations}"/>
                                <p:ajax event="valueChange" update="data_doc_acompte_client table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 

                        <!-->Acompte achat<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_ACHAT}">
                            <p:commandButton actionListener="#{managedOperationFournisseur.paginer(false)}" global="false" update="data_doc_acompte_fournisseur table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationFournisseur.paginator.disPrev}"/>
                            <p:outputLabel value="#{managedOperationFournisseur.paginator.currentPage}/#{managedOperationFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton actionListener="#{managedOperationFournisseur.paginer(true)}" global="false" update="data_doc_acompte_fournisseur table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationFournisseur.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedOperationFournisseur.imax}" label="Nombre max Résultat" valueChangeListener="#{managedOperationFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedOperationFournisseur.paginations}"/>
                                <p:ajax event="valueChange" update="data_doc_acompte_fournisseur table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Credit vente<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_VENTE}">
                            <p:commandButton actionListener="#{managedOperationClient.paginer(false)}" global="false" update="data_doc_credit_client table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationClient.paginators.disPrev}"/>
                            <p:outputLabel value="#{managedOperationClient.paginators.currentPage}/#{managedOperationClient.paginators.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton actionListener="#{managedOperationClient.paginer(true)}" global="false" update="data_doc_credit_client table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationClient.paginators.disNext}"/>
                            <p:selectOneMenu value="#{managedOperationClient.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedOperationClient.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedOperationClient.paginations}"/>
                                <p:ajax event="valueChange" update="data_doc_credit_client table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Crédit achat<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_ACHAT}">
                            <p:commandButton actionListener="#{managedOperationFournisseur.paginer(false)}" global="false" update="data_doc_credit_fournisseur table_content__piece_comptable" icon="ui-icon-circle-triangle-w" disabled="#{managedOperationFournisseur.paginators.disPrev}"/>
                            <p:outputLabel value="#{managedOperationFournisseur.paginators.currentPage}/#{managedOperationFournisseur.paginators.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            <p:commandButton actionListener="#{managedOperationFournisseur.paginer(true)}" global="false" update="data_doc_credit_fournisseur table_content__piece_comptable" icon="ui-icon-circle-triangle-e" disabled="#{managedOperationFournisseur.paginators.disNext}"/>
                            <p:selectOneMenu value="#{managedOperationFournisseur.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedOperationFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedOperationFournisseur.paginations}"/>
                                <p:ajax event="valueChange" update="data_doc_credit_fournisseur table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>

                        <!-->Virement<-->
                        <p:outputPanel autoUpdate="true" layout="block" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VIREMENT}">
                            <p:commandButton actionListener="#{managedVirement.paginer(false)}"   icon="ui-icon-circle-triangle-w" disabled="#{managedVirement.paginator.disPrev}" update="table_content__piece_comptable"/>
                            <p:outputPanel ><p:outputLabel value="#{managedVirement.paginator.currentPage}/#{managedVirement.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton action="#{managedVirement.paginer(true)}"   icon="ui-icon-circle-triangle-e" disabled="#{managedVirement.paginator.disNext}" update="table_content__piece_comptable"/>
                            <p:selectOneMenu value="#{managedVirement.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedVirement.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedVirement.paginations}" />
                                <p:ajax event="valueChange" update="table_content__piece_comptable"/>
                            </p:selectOneMenu>
                        </p:outputPanel>
                    </h:panelGroup>
                    <h:panelGroup>
                        <h:link title="#{lab.L_mode_formulaire}" onclick="collapseForm('maj_compta');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('maj_compta');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link> 
                    </h:panelGroup>
                </h:panelGrid>
            </div>
            <div class="part_scroll">                
                <div class="yvs_form_maj_compta">
                    <p:dataTable id="table_content__piece_comptable" value="#{piecesCompta.contentsPieces}" var="icontent"
                                 selectionMode="single" rowIndexVar="line_c" rowKey="#{icontent.id}" style="overflow-y: auto;max-height: 79.5%">   
                        <p:ajax event="rowUnselect" global="false" listener="#{managedSaisiePiece.unLoadOnViewContent}"  />
                        <p:column headerText="N°" width="30" style="text-align: center">
                            <span title="#{icontent.libelle}" style="float: left">#{line_c+1}</span>   
                            <h:panelGroup style="float: right;margin-right: 5px">
                                <p:commandLink value="#{icontent.analytiques.size() gt 0 ? icontent.analytiques.size():'A'}" title="#{lab.LCF_PMC_saisir_affectations}" actionListener="#{managedSaisiePiece.loadContentJournal(icontent)}"
                                               oncomplete="dlgAffectation.show()" rendered="#{icontent.compteGeneral.saisieAnalytique}"
                                               style="font-weight: bold;border: 1px solid #666; border-radius: 4px;padding: 2px;background: #0099ff;color: white;font-size: 0.8em"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="Id " width="15" style="text-align: center">
                            <span title="#{icontent.id}">#{icontent.numero}</span>   
                        </p:column>
                        <p:column headerText="#{lab.L_jour}" width="15" style="text-align: center">
                            <span title="#{icontent.numRef}">#{icontent.jour}</span>   
                        </p:column>
                        <p:column headerText="#{lab.L_libelle}" width="100">
                            <span title="#{icontent.numRef}">#{icontent.libelle}</span>                                
                        </p:column>                        
                        <p:column headerText="#{lab.LCF_PSS_compte_g}" width="80" style="text-align: center">
                            <span title="#{icontent.compteGeneral.intitule}">#{icontent.compteGeneral.numCompte}</span>                                
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSS_compte_t}" width="80" style="text-align: center">
                            <span title="#{managedSaisiePiece.nameTiers(icontent.compteTiers, icontent.tableTiers, 'N')}">#{managedSaisiePiece.nameTiers(icontent.compteTiers, icontent.tableTiers, 'R')}</span>                                
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSS_debit}" width="100" style="text-align: right">
                            <h:outputText value="#{icontent.debit}" converter="DNS"  title="#{icontent.numRef}"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSS_credit}" width="100" style="text-align: right">
                            <h:outputText value="#{icontent.credit}" converter="DNS"  title="#{icontent.numRef}"/>
                        </p:column>
                        <p:column headerText="#{lab.LCF_PSS_echeance}" width="80" style="text-align: center">
                            <h:outputText value="#{icontent.echeance}" converter="DATE"  title="#{icontent.numRef}"/>
                        </p:column>
                        <p:column headerText=" " width="10" style="text-align: center">
                            <p:contextMenu for="btn_option_content_saisie_journal" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-" global="false" />
                                <p:separator />
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedSaisiePiece.setSelectContent(icontent)}" oncomplete="dlgConfirmDeleteContent.show()"/>
                            </p:contextMenu>   
                            <p:commandButton icon="ui-icon-gear" style="width: 19px; height: 19px" id="btn_option_content_saisie_journal" global="false"/>
                        </p:column>
                        <p:columnGroup type="footer">
                            <p:row>
                                <p:column/>
                                <p:column/>
                                <p:column/>
                                <p:column/>
                                <p:column/>
                                <p:column/>
                                <p:column style="text-align: right;font-weight: bold">
                                    <f:facet name="footer">
                                        <h:outputText value="#{piecesCompta.debits}" converter="DNS"/>
                                    </f:facet>
                                </p:column>
                                <p:column style="text-align: right;font-weight: bold">
                                    <f:facet name="footer">
                                        <h:outputText value="#{piecesCompta.credits}" converter="DNS"/>
                                    </f:facet>
                                </p:column>
                                <p:column/>
                                <p:column/>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>
                </div>
                <div class="yvs_list_maj_compta">
                    <p:outputPanel id="blog-data_maj_compta" autoUpdate="true" style="width: 100%">      
                        <h:inputText id="input_hide_maj_compta" value="#{managedSaisiePiece.docIds}"/>
                        <!-->Retenues<-->
                        <p:dataTable value="#{managedRetenue.listRetenues}" var="cont" rowKey="#{cont.id}" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_RETENUE}"
                                     selectionMode="single"  rowIndexVar="line_" id="data_doc_piece_retenue"> 
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewRetenue}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column width="20" styleClass="statutMesn_#{cont.statut}" style="text-align: center">                            
                                #{line_+1}
                                <p:graphicImage library="icones" name="warn.png" rendered="#{cont.montantPlanifie!=cont.montantElement}"  height="15" style="float: right"/>
                            </p:column>                           
                            <p:column headerText="#{lab.LRH_PRS_date_retenu}" width="100" styleClass="statutMesn_#{cont.statut}" style="text-align: center"> 
                                <h:outputText value="#{cont.dateElement}" converter="DATE"/>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PFA_comptabiliser}" value="C" rendered="#{managedRetenue.isComptabilise(cont)}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>  
                            <p:column headerText="#{lab.LRH_PB_employe} " width="250" styleClass="statutMesn_#{cont.statut}"> 
                                <h:outputText value="#{cont.contrat.employe.nom} #{cont.contrat.employe.prenom}" />
                            </p:column>   
                            <p:column headerText="#{lab.LRH_PRS_type_retenu}"  styleClass="statutMesn_#{cont.statut}"
                                      width="150"> 
                                <h:outputText value="#{cont.typeElement.libelle}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}"  width="100" styleClass="statutMesn_#{cont.statut}" style="text-align: right"> 
                                <h:outputText value="#{cont.montantElement}" converter="DN"/>
                            </p:column>
                            <p:column headerText="#{lab.LRH_PRS_planifier}" width="50" style="text-align: center" styleClass="statutMesn_#{cont.statut}">
                                <h:graphicImage library="img" name="#{(cont.planifier)?'vu.png':'erase-128.png'}" width="15" height="15"/>
                            </p:column>
                            <p:column headerText="#{lab.L_statut}" width="60" style="text-align: center" styleClass="statutMesn_#{cont.statut}">
                                #{(cont.statut==constantes.STATUT_DOC_PAYER)?lab.LC_PFV_regler:(cont.statut==constantes.STATUT_DOC_SUSPENDU)?lab.LCF_PVC_suspendu:lab.LP_PSO_en_cours}
                            </p:column>   
                            <p:column style="text-align: center;width: 5%" styleClass="statutMesn_#{cont.statut}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_h_retenue_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_retenue_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_h_retenue" event="left click" style="font-size: 0.8em" styleClass="context_menu">      
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(cont.id, constantes.SCR_RETENUE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                       
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectRetenue(cont)}" 
                                                oncomplete="dlgUnComptabiliseRetenue.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{cont.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantRetenue(cont)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_retenue" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedRetenue.listRetenues.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="false" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{line_}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>                        
                        </p:dataTable> 

                        <!-->Salaire<-->
                        <p:dataTable value="#{managedSalaire.listPlanification}" var="plan_" rowIndexVar="linePl_"  id="data_doc_piece_salaire"
                                     selectionMode="single" rowKey="#{plan_.id}" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_SALAIRE}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewSalaire}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" width="35">
                                <span class="cloture_#{plan_.cloture}"> #{linePl_+1}</span>
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{plan_.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="Comptabilisé" value="C" rendered="#{plan_.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}">
                                <h:outputText value="#{plan_.reference}" styleClass="cloture_#{plan_.cloture}"/>
                            </p:column> 
                            <p:column headerText="#{lab.LCF_PMC_periode}">
                                <h:outputText value="#{plan_.debutMois}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>&nbsp;&brvbar;&nbsp;
                                <h:outputText value="#{plan_.finMois}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>
                                <h:graphicImage library="icones" name="lock.png" width="12" height="12" rendered="#{plan_.cloture}" style="float: right"/>
                            </p:column>                          
                            <p:column headerText="#{lab.LCF_PMC_traitement}">
                                <h:outputText value="#{plan_.dateDebutTraitement}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>&nbsp;&brvbar;&nbsp;
                                <h:outputText value="#{plan_.dateFinTraitement}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>
                            </p:column>                          
                            <p:column headerText="#{lab.LCF_PMC_date_exceution}">
                                <h:outputText value="#{plan_.dateExecution}" converter="DATE" styleClass="cloture_#{plan_.cloture}"/>&nbsp;
                                <h:outputText value="#{plan_.heureExecution}" converter="TIME" styleClass="cloture_#{plan_.cloture}"/>
                                <h:outputText styleClass="num_" value="(#{plan_.contrats.size})" rendered="#{plan_.contrats.size()!=0}"/>
                            </p:column>    
                            <p:column style="text-align: center;width: 5%" styleClass="cloture_#{plan_.cloture}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_h_bulletin_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_bulletin_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_h_bulletin" event="left click" style="font-size: 0.8em" styleClass="context_menu">      
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(plan_.id, constantes.SCR_SALAIRE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                       
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectSalaire(plan_)}" 
                                                oncomplete="dlgUnComptabiliseSalaire.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{plan_.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantSalaire(plan_)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_bulletin" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedSalaire.listPlanification.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{plan_.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{linePl_}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>                       
                        </p:dataTable>

                        <!-->Mission<-->
                        <p:dataTable value="#{managedReglementMission.avances}" rowIndexVar="line_regMission" var="iregV"  id="data_doc_piece_mission"  style="font-size: 0.8em"
                                     selectionMode="single" rowKey="#{iregV.id}" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_FRAIS_MISSIONS}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewMission}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta" />
                            <p:column headerText="N°" width="35">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iregV.new_}"/>
                                #{line_regMission+1}
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{iregV.errorComptabilise}" width="23" height="23" title="L'ecriture comptable de ce document n'est pas equilibrée"/>
                                    <h:outputText title="#{labLC_PJV_comptabilise}" value="C" rendered="#{iregV.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_mission_de}" styleClass="etat_#{iregV.statutPiece}" width="100" >
                                <h:outputText value="#{iregV.mission.employe.nom_prenom}" />
                            </p:column>
                            <p:column headerText="#{lab.LC_PPV_lieu}" styleClass="etat_#{iregV.statutPiece}" width="100">
                                <h:outputText value="#{iregV.mission.lieu.libele}" />
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.numeroPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{iregV.statutPiece=='P'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.datePaiement}" converter="DATE"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_objet_mission}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.mission.objetMission.titre}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PPC_caisse}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.caisse.intitule}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="etat_#{iregV.statutPiece}" style="text-align: right">
                                <h:outputText value="#{iregV.montant}" converter="DNS"/>
                            </p:column>  
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_piece_mission_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_mission_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_piece_mission" event="left click" style="font-size: 0.8em" styleClass="context_menu">       
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(iregV.id, constantes.SCR_FRAIS_MISSIONS)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                   
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCaisseMission(iregV)}" 
                                                oncomplete="dlgUnComptabilisePieceMission.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{iregV.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantPieceMission(iregV)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_mission" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedReglementMission.avances.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{iregV.selectActif}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{line_regMission}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>     
                        </p:dataTable>

                        <!-->Journal de vente<-->
                        <p:dataTable value="#{managedVente.documents}" var="bon" rowIndexVar="bonIdx" id="data_doc_piece_head_vente"
                                     rowKey="#{bon.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_HEAD_VENTE}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewHeadVente}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta" />
                            <p:column width="35" headerText="N°" styleClass="statut_#{bon.etat}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>  
                                <span>#{bonIdx+1}</span>
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{bon.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{bon.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column width="35" headerText="Id" styleClass="statut_#{bon.etat}">
                                #{bon.id}
                            </p:column>
                            <p:column headerText="#{lab.LDB_PU_vendeur}" styleClass="statut_#{bon.etat}">
                                [<span style="font-weight: bold">#{bon.creneau.users.codeUsers}</span>]
                                <span>#{bon.creneau.users.nomUsers}</span>
                                <h:outputText value="vide" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=bon.documents.size()}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_point_vente}" styleClass="statut_#{bon.etat}">
                                [<span style="font-weight: bold">#{bon.creneau.creneauPoint.point.code}</span>]
                                <span>#{bon.creneau.creneauPoint.point.libelle}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" style="text-align: center;width: 12%" styleClass="statut_#{bon.etat}">
                                <h:outputText value="#{bon.dateEntete}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.L_tranche}" style="text-align: center;width: 12%" styleClass="statut_#{bon.etat}">
                                <h:outputText value="#{bon.creneau.creneauPoint.tranche.heureDebut}" converter="TIME"/>
                                -
                                <h:outputText value="#{bon.creneau.creneauPoint.tranche.heureFin}" converter="TIME"/>
                            </p:column> 
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_h_vente_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_vente_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_h_vente" event="left click" style="font-size: 0.8em" styleClass="context_menu">      
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(bon.id, constantes.SCR_HEAD_VENTE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                                     
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectHeadVente(bon)}" 
                                                oncomplete="dlgUnComptabiliseHeader.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{bon.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantVente(bon)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_h_vente" type="button"/>
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedVente.documents.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{bon.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{bonIdx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>  
                        </p:dataTable> 

                        <!-->Facture de vente<-->
                        <p:dataTable value="#{managedFactureVenteV2.documents}" var="bonV" rowIndexVar="bonVIdx" id="data_doc_piece_vente"
                                     rowKey="#{bonV.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VENTE}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewVente}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column width="35" headerText="N°" styleClass="statut_#{bonV.statut}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bonV.cloturer}"/>  
                                <span>#{bonVIdx+1}</span>
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{bonV.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{bonV.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{bonV.statut}">
                                <span>#{bonV.numDoc}</span>
                                <h:outputText value="vide" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=bonV.contenus.size()}"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PU_date_facture}" style="text-align: center" styleClass="statut_#{bonV.statut}">
                                <h:outputText value="#{bonV.enteteDoc.dateEntete}" converter="DDMMYYYY"/>
                                <span> #{lab.L_a} </span>
                                <h:outputText value="#{bonV.heureDoc}" converter="TIME"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PT_client}" styleClass="statut_#{bonV.statut}">
                                <h:outputText value="T" rendered="#{bonV.tiers.id gt 0}" style="padding: 2px; background: #000; color: #FFF; font-size: 0.8em"/>
                                <span>#{bonV.nom_client}</span>                                
                            </p:column>
                            <p:column headerText="#{lab.L_point_vente}" styleClass="statut_#{bonV.statut}">
                                <span>#{bonV.enteteDoc.creneau.creneauPoint.point.libelle}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTB_vendeur}" styleClass="statut_#{bonV.statut}">
                                <span>#{bonV.enteteDoc.creneau.users.nomUsers}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_etapes}"  width="60" styleClass="statut_#{bonV.statut}" style="font-size: 0.8em">
                                <h:outputText value="#{bonV.libEtapes}" />
                            </p:column>
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_vente_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_vente_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_vente" event="left click" style="font-size: 0.8em" styleClass="context_menu">       
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(bonV.id, constantes.SCR_VENTE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                         
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectVente(bonV)}" 
                                                oncomplete="dlgUnComptabiliseVente.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{bonV.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantFactureVente(bonV)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_vente" type="button"/>
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedFactureVenteV2.documents.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{bonV.selectActif}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{bonVIdx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>  
                        </p:dataTable> 

                        <!-->Facture d'achat<-->
                        <p:dataTable value="#{managedFactureAchat.documents}" var="bon" rowIndexVar="bonIdx" id="data_doc_piece_achat"
                                     rowKey="#{bon.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACHAT}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewAchat}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column width="35" headerText="N°" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>     
                                <span>#{bonIdx+1}</span>
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{bon.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{bon.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numDoc}</span>
                                <h:outputText value="#{lab.LC_PFA_vide}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=bon.contenus.size()}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PBRA_date_facture}" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PBRA_fournisseur}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.fournisseur.tiers.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PCV_mode_reglement}" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.modelReglement.reference}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFV_piece_externe}" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numPiece}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PCC_etapes}"  width="60" styleClass="statut_#{bon.statut}" style="font-size: 0.8em">
                                <h:outputText value="#{bon.libEtapes}" />
                            </p:column>
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_achat_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_achat_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_achat" event="left click" style="font-size: 0.8em" styleClass="context_menu">       
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(bon.id, constantes.SCR_ACHAT)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                             
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectAchat(bon)}" 
                                                oncomplete="dlgUnComptabiliseAchat.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{bon.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantFactureAchat(bon)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_achat" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedFactureAchat.documents.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{bon.selectActif}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{bonIdx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>  
                        </p:dataTable>   

                        <!-->Doc divers<-->
                        <p:dataTable value="#{managedDocDivers.documents}" var="doc" rowIndexVar="bonIdx" id="data_doc_piece_divers"
                                     rowKey="#{doc.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_DIVERS}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewDivers}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column width="35" headerText="N°" styleClass="statut_#{doc.statutDoc}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="false"/>     
                                <span>#{bonIdx+1}</span>
                                <h:panelGroup style="float: right">
                                    <h:graphicImage library="img" name="danger.png" rendered="#{doc.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{doc.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" width="100" styleClass="statut_#{doc.statutDoc}">
                                <span>#{doc.numPiece}</span>
                                <h:outputText value="#{lab.LDB_PPC_plan.toLowerCase()}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{doc.abonnements.size() gt 0}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_date_ordre}" style="text-align: center;width: 12%" styleClass="statut_#{doc.statutDoc}">
                                <h:outputText value="#{doc.dateDoc}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PPC_tiers}" styleClass="statut_#{doc.statutDoc}">
                                <h:outputText value="#{managedSaisiePiece.nameTiers(doc.idTiers, doc.tableTiers, 'R')}" title="#{managedSaisiePiece.nameTiers(doc.idTiers, doc.tableTiers, 'N')}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_compte}" styleClass="statut_#{doc.statutDoc}">
                                <h:outputText value="#{doc.compteGeneral.numCompte}" title="#{doc.compteGeneral.intitule}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PFA_piece_externe}" width="90" styleClass="statut_#{doc.statutDoc}">
                                <span title="#{doc.referenceExterne}">#{(doc.referenceExterne.length() gt 50)?doc.referenceExterne.subSequence(0, 49).concat('...'):doc.referenceExterne}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_description}" width="200" styleClass="statut_#{doc.statutDoc}">
                                <span title="#{doc.description}">#{(doc.description.length() gt 50)?doc.description.subSequence(0, 49).concat('...'):doc.description}</span>
                            </p:column>
                            <p:column style="text-align: center;width: 5%" styleClass="statut_#{doc.statutDoc}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_divers_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_divers_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_divers" event="left click" style="font-size: 0.8em" styleClass="context_menu">    
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(doc.id, constantes.SCR_DIVERS)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                           
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectDivers(doc)}" 
                                                oncomplete="dlgUnComptabiliseDivers.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{doc.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantDivers(doc)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_divers" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedDocDivers.documents.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="false" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{bonIdx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column>  
                        </p:dataTable>   

                        <!-->Piece doc divers<-->
                        <p:dataTable value="#{managedDocDivers.pieces}" var="pc_d" rowIndexVar="mensIdx" id="data_doc_piece_caisse_divers"
                                     rowKey="#{pc_d.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_DIVERS}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewCaisseDivers}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column  width="35" styleClass="statut_#{pc_d.statutPiece}">
                                <span>#{mensIdx+1}</span>
                                <h:panelGroup style="float: right"> 
                                    <h:graphicImage library="img" name="danger.png" rendered="#{pc_d.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{pc_d.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.docDivers.numPiece}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PC_tiers}" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{managedSaisiePiece.nameTiers(pc_d.docDivers.idTiers, pc_d.docDivers.tableTiers, 'R')}" title="#{managedSaisiePiece.nameTiers(pc_d.docDivers.idTiers, pc_d.docDivers.tableTiers, 'N')}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_numero}"  styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.numPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{pc_d.statutPiece=='P'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_a_payer_le}" style="text-align: center;width: 18%" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.datePiece}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_mode_paiement}" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.modePaiement.designation}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_caisse}" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.caisse.intitule}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" style="text-align: right;width: 20%" styleClass="statut_#{pc_d.statutPiece}">
                                <h:outputText value="#{pc_d.montant}" converter="DNS"/>
                            </p:column>
                            <p:column style="text-align: center;width: 5%" styleClass="statut_#{pc_d.statutPiece}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_piece_divers_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_divers_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_piece_divers" event="left click" style="font-size: 0.8em" styleClass="context_menu">     
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(pc_d.id, constantes.SCR_CAISSE_DIVERS)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                    
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCaisseDivers(pc_d)}" 
                                                oncomplete="dlgUnComptabiliseCaisseDivers.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{pc_d.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantPieceDivers(pc_d)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_divers" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedDocDivers.pieces.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{pc_d.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{mensIdx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>

                        <!-->Pieces reglement achat<-->
                        <p:dataTable value="#{managedReglementAchat.piecesCaisses}" var="iregV" rowIndexVar="line_regFA" id="data_doc_piece_caisse_achat"  
                                     rowKey="#{iregV.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_ACHAT}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewCaisseAchat}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" width="35">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iregV.new_}"/>
                                #{line_regFA+1}
                                <h:panelGroup style="float: right">     
                                    <h:graphicImage library="img" name="danger.png" rendered="#{iregV.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{iregV.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_a_payer_le}" styleClass="etat_#{iregV.statutPiece}" width="100" style="text-align: center">
                                <h:outputText value="#{iregV.datePaimentPrevu}" converter="DATE"/>
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.numeroPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{iregV.statutPiece=='P'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_fournisseur}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.achat.fournisseur.nom_prenom}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_mode_paiement}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.model.designation}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_caisse}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.caisse.intitule}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="etat_#{iregV.statutPiece}" style="text-align: right">
                                <h:outputText value="#{iregV.montant}" converter="DNS"/>
                            </p:column> 
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_piece_achat_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_achat_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_piece_achat" event="left click" style="font-size: 0.8em" styleClass="context_menu">     
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(iregV.id, constantes.SCR_CAISSE_ACHAT)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                      
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCaisseAchat(iregV)}" 
                                                oncomplete="dlgUnComptabiliseCaisseAchat.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{iregV.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantPieceAchat(iregV)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_achat" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedReglementAchat.piecesCaisses.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{iregV.selectActif}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{line_regFA}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>

                        <!-->Pieces reglement vente<-->
                        <p:dataTable value="#{managedReglementVente.reglements}" var="iregV" rowIndexVar="line_regFV" id="data_doc_piece_caisse_vente"   
                                     rowKey="#{iregV.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_VENTE}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewCaisseVente}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" width="35">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{iregV.new_}"/>
                                #{line_regFV+1}
                                <h:panelGroup style="float: right">         
                                    <h:graphicImage library="img" name="danger.png" rendered="#{iregV.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{iregV.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_a_payer_le}" styleClass="etat_#{iregV.statutPiece}" width="100" style="text-align: center">
                                <h:outputText value="#{iregV.datePaimentPrevu}" converter="DATE"/>
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.numeroPiece}" />
                                <h:graphicImage library="img" name="P.png" width="12" height="12" rendered="#{iregV.statutPiece=='P'}" style="float: right"/>                                
                            </p:column>
                            <p:column headerText="#{lab.LCF_PSRV_client}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.vente.client.nom_prenom}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_mode_paiement}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.model.designation}" />
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_caisse}" styleClass="etat_#{iregV.statutPiece}">
                                <h:outputText value="#{iregV.caisse.intitule}" />
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" styleClass="etat_#{iregV.statutPiece}" style="text-align: right">
                                <h:outputText value="#{iregV.montant}" converter="DNS"/>
                            </p:column>
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_piece_vente_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_vente_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_piece_vente" event="left click" style="font-size: 0.8em" styleClass="context_menu">     
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(iregV.id, constantes.SCR_CAISSE_VENTE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                               
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCaisseVente(iregV)}" 
                                                oncomplete="dlgUnComptabiliseCaisseVente.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{iregV.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantPieceVente(iregV)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_piece_vente" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedReglementVente.reglements.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{iregV.selectActif}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{line_regFV}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>

                        <!-->Acomptes client<-->
                        <p:dataTable value="#{managedOperationClient.acomptes}" var="rec" rowKey="#{rec.id}" rowIndexVar="Idx" selectionMode="single"
                                     id="data_doc_acompte_client" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_VENTE}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewAcompteVente}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" width="15" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}" style="text-align: center">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{rec.new_}"/>
                                <span>#{Idx+1}</span>
                                <h:panelGroup style="float: right">            
                                    <h:graphicImage library="img" name="danger.png" rendered="#{rec.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{rec.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PSRV_client}" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.client.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.montant}" converter="DNS"/>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.numRefrence}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_date_acomptes}" sortBy="#{rec.dateAcompte}" style="text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.dateAcompte}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_caisse}" style="text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.caisse.intitule}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_etapes}" style="text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.libphases}"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(rec.statut)}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_doc_acompte_client_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_acompte_client_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_doc_acompte_client" event="left click" style="font-size: 0.8em">    
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(rec.id, constantes.SCR_ACOMPTE_VENTE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                                 
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectAcompteVente(rec)}" 
                                                oncomplete="dlgUnComptabiliseAcompteVente.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{rec.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantAcompteVente(rec)}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_acompte_client" type="button"/>
                            </p:column>  
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedOperationClient.acomptes.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{rec.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{Idx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable> 

                        <!-->Acomptes achat<-->
                        <p:dataTable id="data_doc_acompte_fournisseur" value="#{managedOperationFournisseur.acomptes}" var="rec" rowKey="#{rec.id}" 
                                     rowIndexVar="Idx" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_ACHAT}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewAcompteAchat}"   oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" style="width: 7%" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{rec.new_}"/>
                                <span>#{Idx+1}</span>
                                <h:panelGroup style="float: right">               
                                    <h:graphicImage library="img" name="danger.png" rendered="#{rec.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{rec.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.numRefrence}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_date_acomptes}" sortBy="#{rec.dateAcompte}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.dateAcompte}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_fournisseur}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.fournisseur.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_caisse}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.caisse.intitule}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.montant}" converter="DNS"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_etapes}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <h:outputText value="#{rec.libphases}"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_doc_acompte_fournisseur_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_acompte_fournisseur_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_doc_acompte_fournisseur" event="left click" style="font-size: 0.8em">    
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(rec.id, constantes.SCR_ACOMPTE_ACHAT)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                   
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectAcompteAchat(rec)}" 
                                                oncomplete="dlgUnComptabiliseAcompteAchat.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{rec.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantAcompteAchat(rec)}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_acompte_fournisseur" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedOperationFournisseur.acomptes.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{rec.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{Idx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>
                        <!-->Credits client<-->
                        <p:dataTable value="#{managedOperationClient.credits}" var="dep" rowKey="#{dep.id}" rowIndexVar="Idx" selectionMode="single" 
                                     id="data_doc_credit_client" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_VENTE}">
                            <p:ajax event="rowSelect" global="false" listener="#{managedSaisiePiece.loadOnViewCreditVente}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" style="width: 7%" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{dep.new_}"/>
                                <span>#{Idx+1}</span>
                                <h:panelGroup style="float: right">                    
                                    <h:graphicImage library="img" name="danger.png" rendered="#{dep.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{dep.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.numReference}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_date_credit}" sortBy="#{rec.dateAcompte}" style="text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.dateCredit}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PSRV_client}" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.client.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_type_credit}" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.typeCredit.libelle}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.montant}" converter="DNS"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PC_reste}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.reste}" converter="DNS"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_doc_credit_client_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_credit_client_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_doc_credit_client" event="left click" style="font-size: 0.8em">    
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(dep.id, constantes.SCR_CREDIT_VENTE)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                   
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCreditVente(dep)}" 
                                                oncomplete="dlgUnComptabiliseCreditVente.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{dep.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantCreditVente(dep)}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_credit_client" type="button"/>
                            </p:column>  
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedOperationClient.credits.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{dep.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{Idx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>

                        <!-->Credits achat<-->
                        <p:dataTable id="data_doc_credit_fournisseur" value="#{managedOperationFournisseur.credits}" var="dep" rowKey="#{dep.id}" 
                                     rowIndexVar="Idx" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_ACHAT}">
                            <p:ajax event="rowSelect" global="false" listener="#{managedSaisiePiece.loadOnViewCreditAchat}"  oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" style="width: 7%" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{dep.new_}"/>
                                <span>#{Idx+1}</span>
                                <h:panelGroup style="float: right">                        
                                    <h:graphicImage library="img" name="danger.png" rendered="#{dep.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{dep.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.numReference}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_date_credit}" sortBy="#{rec.dateAcompte}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.dateCredit}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="#{lab.L_fournisseur}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.fournisseur.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PMC_type_credit}" styleClass="statut_#{managedOperationClient.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.typeCredit.libelle}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.montant}" converter="DNS"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_reste}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <h:outputText value="#{dep.reste}" converter="DNS"/>
                            </p:column>
                            <p:column style="width: 5%;text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(dep.statut)}">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_doc_credit_fournisseur_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_credit_fournisseur_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_doc_credit_fournisseur" event="left click" style="font-size: 0.8em">   
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(dep.id, constantes.SCR_CREDIT_ACHAT)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>                 
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCreditAchat(dep)}" 
                                                oncomplete="dlgUnComptabiliseCreditAchat.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{dep.comptabilise}"/> 
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantCreditAchat(dep)}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_doc_credit_fournisseur" type="button"/>
                            </p:column>  
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedOperationFournisseur.credits.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{dep.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{Idx}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>

                        <!-->Pieces virement<-->
                        <p:dataTable value="#{managedVirement.listAllVirement}" var="mvtVir" rowIndexVar="line_M" id="data_doc_piece_virement"
                                     rowKey="#{mvtVir.id}" selectionMode="single" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VIREMENT}">
                            <p:ajax event="rowSelect" listener="#{managedSaisiePiece.loadOnViewVirement}" oncomplete="collapseForm('maj_compta')"
                                    update=":form_maj_pc_comptable:table_content__piece_comptable :form_maj_pc_comptable:form_btn_maj_compta"/>
                            <p:column headerText="N°" width="35" style="text-align: center" styleClass="etat_#{mvtVir.statutPiece}">
                                <f:facet name="header" >
                                    <p:contextMenu for="btn_gen_pc_vir" event="left click">
                                        <p:menuitem value="#{lab.LCF_PMC_generer}" actionListener="#{managedSaisiePiece.loadMoreViewVirement()}"
                                                    />
                                    </p:contextMenu>
                                    N°
                                    <p:commandButton type="button" title="#{lab.LCF_PMC_generer_selection}" id="btn_gen_pc_vir"
                                                     icon="ui-icon-gear" style="width: 22px; height: 22px" />
                                </f:facet>
                                #{line_M+1}
                                <h:panelGroup style="float: right">                               
                                    <h:graphicImage library="img" name="danger.png" rendered="#{mvtVir.errorComptabilise}" width="23" height="23" title="#{lab.LCF_PMC_text2}"/>
                                    <h:outputText title="#{lab.LCF_PMC_comptabiliser}" value="C" rendered="#{mvtVir.comptabilise}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LCF_PRV_a_payer_le}" width="100" styleClass="etat_#{mvtVir.statutPiece}" style="text-align: center">
                                <h:outputText value="#{mvtVir.datePaimentPrevu}" converter="DATE" />
                            </p:column>
                            <p:column headerText="#{lab.L_numero}" styleClass="etat_#{mvtVir.statutPiece}">
                                #{mvtVir.numeroPiece}
                            </p:column>                           
                            <p:column headerText="#{lab.LCF_PVC_source}" styleClass="etat_#{mvtVir.statutPiece}">
                                #{mvtVir.source.intitule}
                            </p:column>
                            <p:column headerText="#{lab.LCF_PVC_cible}" styleClass="etat_#{mvtVir.statutPiece}" >
                                #{mvtVir.cible.intitule}
                            </p:column>
                            <p:column headerText="#{lab.L_montant}" width="100" styleClass="etat_#{mvtVir.statutPiece}" style="text-align: right">
                                <h:outputText value="#{mvtVir.montant}" converter="DN" />
                            </p:column>  
                            <p:column style="text-align: center;width: 5%">
                                <f:facet name="header">                                    
                                    <p:contextMenu for="btn_option_maj_virement_head" event="left click" style="font-size: 0.8em">                              
                                        <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" global="false" onclick="dlgUnComptabiliseAll.show()" icon="ui-icon-arrowthick-2-e-w"/> 
                                    </p:contextMenu>                           
                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_virement_head" type="button"/>
                                </f:facet>
                                <p:contextMenu for="btn_option_maj_virement" event="left click" style="font-size: 0.8em" styleClass="context_menu">   
                                    <p:menuitem icon="ui-icon-eject" value="#{lab.LC_PFA_proprietes}" actionListener="#{managedSaisiePiece.displayPieceComptable(mvtVir.id, constantes.SCR_VIREMENT)}" 
                                                update=":form_pptes_compta:table_pptes_compta" oncomplete="dlgPpteCompta.show()"/>           
                                    <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" actionListener="#{managedSaisiePiece.setSelectCaisseVirement(mvtVir)}" 
                                                oncomplete="dlgUnComptabilisePieceVirement.show()" icon="ui-icon-arrowthick-2-e-w"  rendered="#{mvtVir.comptabilise}"/>  
                                    <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedSaisiePiece.onSelectDistantVirement(mvtVir)}"/>          
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_maj_virement" type="button"/>
                            </p:column> 
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_maj_compta" value="false" onclick="selectionAllLineTab(#{managedVirement.listAllVirement.size()}, 'maj_compta')"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{mvtVir.select}" styleClass="chek_line_maj_compta" onclick="selectionLineTab(#{line_M}, 'maj_compta')">
                                </h:selectBooleanCheckbox>
                            </p:column> 
                        </p:dataTable>
                        <span class="nbSelectmaj_compta" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                    </p:outputPanel>
                </div>

            </div>

        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" id="main-footer-maj" style="background: #CCC">              
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find"> 
                <p:outputPanel id="footer_doc_piece">
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_RETENUE}">
                        <ui:include src="../../grh/salaire/retenu/search_maj.xhtml"/>
                    </p:outputPanel>                    
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_SALAIRE}">
                        <ui:include src="../../grh/salaire/header/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_FRAIS_MISSIONS}">
                        <ui:include src="../../grh/personnel/mission/search_maj.xhtml"/>
                    </p:outputPanel>


                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0" rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_HEAD_VENTE}">
                        <h:panelGrid columns="5" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <h:outputText value="#{lab.L_date}" />
                            <h:outputText value="#{lab.LC_PCP_point}" />
                            <h:outputText value="#{lab.LC_PTB_vendeur}" />
                            <h:outputText value="#{lab.L_statut}" />
                            <h:outputText value="#{lab.LC_PFA_comptabiliser}" />
                            <h:panelGrid columns="2">
                                <h:selectBooleanCheckbox value="#{managedVente.date_}">
                                    <p:ajax event="valueChange" listener="#{managedVente.addParamDate()}" update="blog_date_search_doc_piece_entete_vente :form_maj_pc_comptable:data_doc_piece_head_vente"/>
                                </h:selectBooleanCheckbox>
                                <h:panelGroup id="blog_date_search_doc_piece_entete_vente">
                                    <p:calendar value="#{managedVente.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedVente.date_}" size="8" style="font-size: 0.8em">
                                        <p:ajax event="dateSelect" listener="#{managedVente.addParamDate()}" update=":form_maj_pc_comptable:data_doc_piece_head_vente"/>
                                    </p:calendar>
                                    <p:spacer width="5px" style="background: black"/>
                                    <p:calendar value="#{managedVente.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedVente.date_}" size="8" style="font-size: 0.8em">
                                        <p:ajax event="dateSelect" listener="#{managedVente.addParamDate()}" update=":form_maj_pc_comptable:data_doc_piece_head_vente"/>
                                    </p:calendar>
                                </h:panelGroup>
                            </h:panelGrid> 
                            <h:selectOneMenu value="#{managedVente.point_}" style="min-width: 120px" valueChangeListener="#{managedVente.choosePoint_}">
                                <f:selectItem itemLabel="--#{lab.LDB_PPC_precedent}--" itemValue="-1"/>
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedPointVente.pointsvente}" var="poin" itemLabel="#{poin.libelle}" itemValue="#{poin.id}" />  
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItem itemLabel="--#{lab.LDB_PPC_suivant}--" itemValue="-2"/>                                      
                                <p:ajax event="valueChange" update=":form_maj_pc_comptable:data_doc_piece_head_vente @this"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedVente.codeVendeur_}">
                                <p:ajax event="valueChange" listener="#{managedVente.addParamVendeur()}" update=":form_maj_pc_comptable:data_doc_piece_head_vente"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedVente.statut_}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/> 
                                <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{lab.L_annulers}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <p:ajax event="valueChange" listener="#{managedVente.addParamStatut()}" update=":form_maj_pc_comptable:data_doc_piece_head_vente"/>
                            </h:selectOneMenu>
                            <h:panelGroup id="bloc-search_compta_head_fv">
                                <h:selectOneMenu value="#{managedVente.comptaSearch}" style="min-width: 120px">
                                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                    <f:selectItem itemLabel="#{lab.L_non.toUpperCase()}" itemValue="#{false}"/>
                                    <f:selectItem itemLabel="#{lab.L_oui.toUpperCase()}" itemValue="#{true}"/>
                                    <p:ajax event="valueChange" listener="#{managedVente.addParamComptabilised()}" update=":form_maj_pc_comptable:data_doc_piece_head_vente bloc-search_compta_head_fv"/>
                                </h:selectOneMenu> 
                                <h:outputText value="#{managedVente.nbrComptaSearch} élèment(s)" rendered="#{managedVente.comptaSearch ne null}" title="#{lab.LCF_PMC_document_valides}"/>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">
                            <p:commandLink value="#{lab.LCF_PMC_comptabiliser_selection}" onclick="dlgComptabilised.show()" global="false"
                                           style="border: 2px solid black; border-radius: 5px;padding: 2px;float: right;margin-top: 5px;font-size: 0.8em"/>
                        </h:panelGroup>
                    </h:panelGrid>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VENTE}">
                        <ui:include src="../../gescom/vente/facture/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACHAT}">
                        <ui:include src="../../gescom/achat/facture/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_DIVERS}">
                        <ui:include src="../caisses/divers/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_VIREMENT}">
                        <ui:include src="../caisses/virement/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_DIVERS}">
                        <ui:include src="../caisses/piece/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_ACHAT}">
                        <ui:include src="../caisses/achat/search_maj.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CAISSE_VENTE}">
                        <ui:include src="../caisses/vente/search_maj.xhtml"/>
                    </p:outputPanel>  
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_VENTE}">
                        <ui:include src="../caisses/a_client/search_maj.xhtml"/>
                    </p:outputPanel>    
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_ACOMPTE_ACHAT}">
                        <ui:include src="../caisses/a_fournisseur/search_maj.xhtml"/>
                    </p:outputPanel>   
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_VENTE}">
                        <ui:include src="../caisses/c_client/search_maj.xhtml"/>
                    </p:outputPanel>    
                    <p:outputPanel rendered="#{managedSaisiePiece.naturePiece == constantes.SCR_CREDIT_ACHAT}">
                        <ui:include src="../caisses/c_fournisseur/search_maj.xhtml"/>
                    </p:outputPanel>                     
                </p:outputPanel>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
