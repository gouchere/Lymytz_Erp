<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">    
    <div>          
        <p:dataTable value="#{managedWarning.employes}" var="emp" rowKey="#{emp.id}" rowIndexVar="lineEmp"  selectionMode="single"
                     paginator="true" rows="50" paginatorAlwaysVisible="false">
            <f:facet name="header">
                <div align="left" style="font-weight: bold">
                    #{managedWarning.warning.description}
                </div>
            </f:facet>
            <p:ajax event="rowSelect"  listener="#{managedWarning.loadOnView}"/>                                
            <p:column  width="15" headerText="NÂ°">
                #{lineEmp+1}
            </p:column>
            <p:column headerText="" width="20">
                <span style="font-weight: bold">#{emp.civilite}</span>
            </p:column>                                        
            <p:column headerText="#{lab.L_nom_prenom}" width="200">
                <h:outputText value="#{emp.nom} #{emp.prenom}" />
            </p:column>                                        
            <p:column headerText="#{lab.LRH_PE_matricule}" width="80" style="text-align: center">
                <h:outputText value="#{emp.matricule}" />
            </p:column>
            <p:column headerText="#{lab.LRH_PPT_poste}" width="160">
                <h:outputText value="#{emp.posteActif.intitule}" />
            </p:column>                                                      
            <p:column headerText="#{lab.L_telephone}" width="80">
                <h:outputText value="#{emp.telephone1}" />
            </p:column>                            
            <p:column headerText="#{lab.LRH_PE_embaucher_le}" width="80">
                <h:outputText value="#{emp.dateEmbauche}" converter="DATE"/>
            </p:column>     
            <p:column headerText="#{lab.L_agence}" width="100" style="text-align: center">
                <span>#{emp.agence.designation}</span>
            </p:column>
            <p:column headerText="#{lab.L_adress}" width="100" style="text-align: center">
                <span>#{emp.adresse1} / #{emp.adresse2}</span>
            </p:column>
            <p:column headerText="#{lab.LRH_PE_profil}" width="100" style="text-align: center">
                <span>#{emp.profil.giveStatutProfil()}</span>
            </p:column>
            <p:column headerText="#{lab.LRH_PE_numero_securite}" width="100" style="text-align: center">
                <span>#{emp.matriculeCnps}</span>
                <span style="font-size: 0.9em; padding: 3px; color: #a90329; float: right" title="#{(emp.contrat.id gt 0)?emp.contrat.referenceContrat:''}">#{(emp.contrat.id gt 0)?'C':''}</span>
            </p:column>
            <p:column headerText="#{lab.L_actif}" style="text-align: center" width="20">
                <h:graphicImage  library="img" name="#{(emp.actif)?'yes.png':'no.png'}"  style="width: 10px; height: 10px" />
            </p:column>
        </p:dataTable>   
    </div>
</ui:composition>

