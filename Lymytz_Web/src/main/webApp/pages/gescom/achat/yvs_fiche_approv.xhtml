<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Approvissionnements','modGescom', 'smenFicheAppro', true,managedFicheAppro)}
    </ui:define> 
    <ui:define name="contents"> 
        #{managedFactureAchat.load(null)}
        #{managedTransfertStock.load(null)}
        #{managedStockArticle.load(false)}
        #{managedFournisseur.doNothing()}
        #{managedFicheAppro.loadAll()}
        #{managedDepot.loadAllDepot()}
        #{managedTypeCreneau.loadAllTranche()}
        <script type="text/javascript">
            $(function() {
                collapseForm('fournisseur_article');
                collapseForm('fiche_approv');
                collapseForm('article_fiche');
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
        </script>
        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedFicheAppro.updateBean()}"/>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_mission" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0"> 
                    <h:outputText value="#{lab.L_terminer}" style="float:left;margin-top: 2px"/>
                    <h:panelGroup>
                        <h:selectOneMenu value="#{managedFicheAppro.egaliteStatut}">
                            <f:selectItem itemLabel="#{lab.LC_PA_egale}" itemValue="="/>
                            <f:selectItem itemLabel="#{lab.LC_PA_different}" itemValue="!="/>
                            <p:ajax event="valueChange" listener="#{managedFicheAppro.chooseTerminer(true)}" oncomplete="collapseList('fiche_approv')"/>
                        </h:selectOneMenu>  
                        <h:selectOneMenu value="#{managedFicheAppro.terminerSearch}" valueChangeListener="#{managedFicheAppro.addParamTerminer}" style="width: 75%">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.LC_PA_attente}" itemValue="#{constantes.ETAT_ATTENTE}"/>
                            <f:selectItem itemLabel="#{lab.LC_PA_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                            <f:selectItem itemLabel="#{lab.LC_PA_terminer}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                            <p:ajax event="valueChange" oncomplete="collapseList('fiche_approv')"/>
                        </h:selectOneMenu>  
                    </h:panelGroup>                
                    <h:outputText value="#{lab.LC_PA_cloturer}" />
                    <h:selectOneMenu value="#{managedFicheAppro.cloturer_}" valueChangeListener="#{managedFicheAppro.chooseCloturer}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                        <p:ajax event="valueChange" oncomplete="collapseList('fiche_approv')"/>
                    </h:selectOneMenu> 
                    
                      <h:panelGroup>
                          <h:outputText value="#{lab.LDB_PC_dates}"  />
                          <h:selectBooleanCheckbox value="#{managedFicheAppro.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client" listener="#{managedFicheAppro.addParamDate()}"/>
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedFicheAppro.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedFicheAppro.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedFicheAppro.addParamDate}" update=":main_fiche_approv:data_fiche_approv"  oncomplete="collapseList('fiche_approv')" />
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedFicheAppro.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedFicheAppro.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedFicheAppro.addParamDate}" update=":main_fiche_approv:data_fiche_approv" oncomplete="collapseList('fiche_approv')" />
                        </p:calendar>
                    </h:panelGroup>
                    
                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedMission.idsSearch}" style="width: 100%" title="#{lab.LC_PA_entrer_identifiant_separer_virgules}">
                        <p:ajax event="valueChange" listener="#{managedMission.addParamIds()}" oncomplete="collapseList('fiche_approv')"/>
                    </h:inputText>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_ppte_valid_appro">
            <p:dialog header="#{lab.LC_PA_propriete_validation}" widgetVar="dlgppteValid" width="60%" >
                <p:dataTable value="#{ficheApprovisionnement.etapesValidations}" var="iValid" id="table_ppte_valid_appro">
                    <p:column headerText="#{lab.LC_PA_etapes}" >#{iValid.etape.labelStatut}</p:column>
                    <p:column headerText="#{lab.LC_PA_valide_par}" >
                        <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.etapeValid or iValid.motif != null}" />
                    </p:column>
                    <p:column headerText="#{lab.L_dates} " style="text-align: center">
                        <h:outputText value="#{iValid.dateUpdate}" converter="DATETIME" rendered="#{iValid.etapeValid}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_motif} " >
                        <h:outputText value="#{managedFicheAppro.resumeText(iValid.motif)}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-motif_etape_approv">
            <p:dialog hideEffect="explode" widgetVar="dglMotifCancelEtape" closeOnEscape="true" header="#{lab.LC_PA_motif_annulation_etape}" width="35%">
                <h:panelGrid id="value_motif_etape_approv" columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                    <h:inputTextarea value="#{managedFicheAppro.motifEtape}" style="width: 100%" rows="4"/>                
                    <f:facet name="footer">
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFicheAppro.annulEtapeFacture()}" oncomplete="dglMotifCancelEtape.hide();" style="float: right" rendered="#{!managedFicheAppro.lastEtape}"
                                         update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PA_liste_article}" widgetVar="dlgListArticle" modal="true" width="50%"  closeOnEscape="true" visible="false"> 
                <p:dataTable id="data_articles_fiche_approv" value="#{managedStockArticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false" >
                    <p:ajax event="rowSelect" global="false" listener="#{managedFicheAppro.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"/>
                    <p:column filterBy="#{art.article.refArt}" style="width: 2%">
                        <span title="#{art.article.designation}">#{art.article.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}" style="width: 6%">
                        <span title="#{art.article.designation}">#{art.article.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" style="width: 4%">
                        <span title="#{art.article.designation}">#{art.article.categorie}</span>
                    </p:column>
                </p:dataTable>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(false, false)}" global="false" update="data_articles_fiche_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedStockArticle.pa.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedStockArticle.pa.currentPage}/#{managedStockArticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(true, false)}" global="false" update="data_articles_fiche_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedStockArticle.pa.disNext}"/>
                    <p:selectOneMenu value="#{managedStockArticle.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedStockArticle.choosePaginatorAchat}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                        <f:selectItems value="#{managedStockArticle.paginations}"/>
                        <p:ajax event="valueChange" global="false" update="data_articles_fiche_approv"/>
                    </p:selectOneMenu>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="Status" widgetVar="dlgMoreStatuts" modal="true" closeOnEscape="true">                 
                <p:selectManyMenu value="#{managedFicheAppro.statuts}" showCheckbox="true" style="min-width: 120px;size: 20px">
                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_attente}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                    <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_terminer}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                    <p:ajax event="valueChange" oncomplete="collapseList('fiche_approv')" listener="#{managedFicheAppro.chooseStatuts()}"/>
                </p:selectManyMenu>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des fournisseurs
        *****************************************************************************
        <-->  

        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PA_quantite_livrer}" widgetVar="dlgByQteLivreeByFsseur" modal="true" width="25%" closeOnEscape="true"> 
                <h:panelGroup id="txt_quantite_livre_by_fsseur" style="margin: auto">
                    <h:inputText value="#{managedFicheAppro.quantitee}" style="text-align: right;width: 45%"/>
                    <span> / </span>
                    <h:inputText value="#{managedFicheAppro.reste}" converter="#{managedFicheAppro.converterStock}" readonly="true" style="text-align: right;width: 45%"/>
                </h:panelGroup>
                <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFicheAppro.createBonAchat()}" style="margin: auto;width: 95%"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    <span style="font-size: 0.7em">&copy; Lymytz 2014</span>
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PA_quantite_livrer}" widgetVar="dlgQteLivreeByDepot" modal="true" width="25%" closeOnEscape="true"> 
                <h:panelGroup id="txt_quantite_livre_by_depot" style="margin: auto">
                    <h:inputText value="#{managedFicheAppro.quantitee}" style="text-align: right;width: 45%"/>
                    <span> / </span>
                    <h:inputText value="#{managedFicheAppro.reste}" converter="#{managedFicheAppro.converterStock}" readonly="true" style="text-align: right;width: 45%"/>
                </h:panelGroup>
                <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFicheAppro.createTransfert()}" style="margin: auto;width: 95%"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PA_quantite_livrer}" widgetVar="dlgQteLivreeByBon" modal="true" width="25%" closeOnEscape="true"> 
                <h:panelGroup id="txt_quantite_livre_by_bon" style="margin: auto">
                    <h:inputText value="#{managedFicheAppro.quantitee}" style="text-align: right;width: 45%"/>
                    <span> / </span>
                    <h:inputText value="#{managedFicheAppro.reste}" converter="#{managedFicheAppro.converterStock}" readonly="true" style="text-align: right;width: 45%"/>
                </h:panelGroup>
                <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFicheAppro.insertOnBonAchat()}" style="margin: auto;width: 95%"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PA_quantite_livrer}" widgetVar="dlgQteLivreeByOrdre"  modal="true" width="25%" closeOnEscape="true"> 
                <h:panelGroup id="txt_quantite_livre_by_ordre" style="margin: auto">
                    <h:inputText value="#{managedFicheAppro.quantitee}" style="text-align: right;width: 45%"/>
                    <span> / </span>
                    <h:inputText value="#{managedFicheAppro.reste}" converter="#{managedFicheAppro.converterStock}" readonly="true" style="text-align: right;width: 45%"/>
                </h:panelGroup>
                <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedFicheAppro.insertOnOrdre()}" style="margin: auto;width: 95%"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>


        <!-->
        *****************************************************************************
        Boite de dialogue des articles depots
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog  header="#{lab.LC_PA_liste_depots}" widgetVar="dlgListDepot" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable id="data_depot_article" value="#{managedStockArticle.articles_depot}" var="artD" rowKey="#{artD.id}" 
                             rowIndexVar="artDIdx">
                    <f:facet name="header">
                        Informations articles
                    </f:facet>
                    <p:column headerText="N°" width="30" style="text-align: center">
                        <span>#{artDIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_depot}">
                        <span>#{artD.depot.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_stock}" style="width: 15%;text-align: right">
                        <h:outputText value="#{artD.quantiteStock}" converter="#{managedFicheAppro.converterStock}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_stock_min}" style="width: 15%;text-align: right">
                        <h:outputText value="#{artD.stockMin}" converter="#{managedFicheAppro.converterStock}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_stock_max}" style="width: 15%;text-align: right">
                        <h:outputText value="#{artD.stockMax}" converter="#{managedFicheAppro.converterStock}"/>
                    </p:column>
                    <p:column style="width: 8%;text-align: center">
                        <p:commandButton icon="ui-icon-circle-check" style="width: 90%;height: 90%" global="false"
                                         actionListener="#{managedFicheAppro.cloneArticleInDepot(artD)}" oncomplete="dlgQteLivreeByDepot.show()"/>
                    </p:column>
                </p:dataTable>                    
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des articles fournisseurs
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog id="data_art_fsseur_fich_approv"  header="#{lab.LC_PA_liste_fournisseurs}" widgetVar="dlgListFournisseur" modal="true" width="80%"  closeOnEscape="true"> 
                <script type="text/javascript">
                    $(function() {
                        collapseForm('fournisseur_article');
                    });
                </script>
                <div class="part_fix" style="float: right;margin-bottom: -25px">
                    <div style="float: right;background: white">
                        <h:link title="#{lab.LC_PA_données_principales}" onclick="collapseForm('fournisseur_article');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="20" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.LC_PA_données_retour_demande}" onclick="collapseList('fournisseur_article');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="20" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>   
                    </div>
                </div>
                <div>
                    <div class="yvs_form_fournisseur_article">
                        <p:dataTable value="#{managedFournisseur.articles}" var="four" rowKey="#{four.id}" selection="#{managedFicheAppro.selectArticleF}" 
                                     rowIndexVar="fourIdx" selectionMode="single" editMode="cell" editable="true" id="table_article_fseur" style="font-size: 0.9em; max-height: 450px">
                            <f:facet name="header">
                                Informations principales des articles
                            </f:facet>
                            <p:column headerText="N°" width="30" styleClass="#{four.id gt 0?'':'line_disable'}">
                                <span>#{fourIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_code_fsseur}" width="120" styleClass="#{four.id gt 0?'':'line_disable'}">
                                <span>#{four.fournisseur.codeFsseur}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_fournisseur}" width="200" styleClass="#{four.id gt 0?'':'line_disable'}">
                                <span>#{four.fournisseur.nom_prenom}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_pua}" width="150" style="text-align: right" styleClass="#{four.id gt 0?'':'line_disable'}">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{four.puv}" converter="#{managedFicheAppro.converter}"/></f:facet>
                                    <f:facet name="input">
                                        <h:inputText value="#{four.puv}" style="width: 120px;"/>
                                    </f:facet>
                                </p:cellEditor>                                
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_remise}" style="width: 10%;text-align: right" styleClass="#{four.id gt 0?'':'line_disable'}">
                                <h:outputText value="#{four.remise}" converter="#{managedFicheAppro.converter}"/>
                                <span> %</span>
                            </p:column>                            
                            <p:column style="width: 8%;text-align: center">
                                <p:commandButton icon="ui-icon-circle-check" style="width: 90%;height: 90%" global="false"
                                                 actionListener="#{managedFicheAppro.cloneArticleInFsseur(four)}" rendered="#{four.id gt 0}"
                                                 oncomplete="dlgByQteLivreeByFsseur.show()" update="table_article_fseur"/>
                                <p:commandButton icon="ui-icon-circle-plus" style="width: 22px ;height: 22px" global="false" title="#{lab.LC_PA_ajout_article_fournisseur}"
                                                 actionListener="#{managedFournisseur.saveNewArticleFournisseur(four)}" rendered="#{four.id le 0}"
                                                 update="table_article_fseur"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                    <div class="yvs_list_fournisseur_article">
                        <p:dataTable value="#{managedFicheAppro.articles}" var="four_" rowKey="#{four_.id}" rowIndexVar="fourIdx_">
                            <f:facet name="header">
                                #{lab.LC_PA_infos_retour_demande_articles}
                            </f:facet>
                            <p:column headerText="N°" width="30">
                                <span>#{fourIdx_+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_fournisseur}">
                                <span>#{four_.fournisseur.nom_prenom}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_pua}" style="width: 12%;text-align: right">
                                <h:outputText value="#{four_.pua}" converter="#{managedFicheAppro.converter}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_remise}" style="width: 10%;text-align: right">
                                <h:outputText value="#{four_.remise}" converter="#{managedFicheAppro.converter}"/>
                                <span> %</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_quantite}" style="width: 15%;text-align: right">
                                <h:outputText value="#{four_.quantite}" converter="#{managedFicheAppro.converterStock}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_date_livraison}" style="width: 20%;text-align: center">
                                <h:outputText value="#{four_.dateLivraison}" converter="DATE"/>
                            </p:column>
                            <p:column style="width: 8%;text-align: center">
                                <p:commandButton icon="ui-icon-circle-check" style="width: 90%;height: 90%" global="false"
                                                 actionListener="#{managedFicheAppro.cloneArticleInBackFsseur(four_)}" oncomplete="dlgByQteLivreeByFsseur.show()"/>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>                        
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog  header="#{lab.LC_PA_liste_ordre_transfert}" widgetVar="dlgListOrdres" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable id="data_ordre_fiche_approv" value="#{managedTransfertStock.documents}" var="ordre" rowKey="#{ordre.id}" 
                             rowIndexVar="ordreIdx" selectionMode="single" selection="#{managedFicheAppro.selectOrdre}">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFicheAppro.loadOnViewOrdre}" oncomplete="dlgQteLivreeByOrdre.show()"/>
                    <p:column headerText="N°" width="30" style="text-align: center">
                        <span>#{ordreIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}">
                        <span>#{ordre.numDoc}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_source}">
                        <h:outputText value="#{ordre.source.designation}"/>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}">
                        <h:outputText value="#{ordre.destination.designation}"/>                                
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_date_ordre}" style="text-align: center">
                        <h:outputText value="#{ordre.dateDoc}" converter="DATE"/>
                    </p:column>
                </p:dataTable>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedTransfertStock.loadEditableTransfert(false, false)}" global="false" update="data_ordre_fiche_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedTransfertStock.paginator.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedTransfertStock.paginator.currentPage}/#{managedTransfertStock.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedTransfertStock.loadEditableTransfert(true, false)}" global="false" update="data_ordre_fiche_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedTransfertStock.paginator.disNext}"/>
                    <p:selectOneMenu value="#{managedTransfertStock.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTransfertStock.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedTransfertStock.paginations}"/>
                        <p:ajax event="valueChange" global="false" update="data_ordre_fiche_approv"/>
                    </p:selectOneMenu>
                </p:outputPanel>  
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des articles achats
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog  header="#{lab.LC_PA_liste_bons_commande}" widgetVar="dlgListBons" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable id="data_bon_fiche_approv" value="#{managedFactureAchat.documents}" var="bons" rowKey="#{bons.id}" 
                             rowIndexVar="bonsIdx" selectionMode="single" selection="#{managedFicheAppro.selectBon}">
                    <p:ajax event="rowSelect" global="false" listener="#{managedFicheAppro.loadOnViewBon}" oncomplete="dlgQteLivreeByBon.show()"/>
                    <p:column headerText="N°" width="30">
                        <span>#{bonsIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_reference}">
                        <span>#{bons.numDoc}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_fournisseur}">
                        <h:outputText value="#{bons.fournisseur.nom_prenom}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_date_bon}" style="text-align: center">
                        <h:outputText value="#{bons.dateDoc}" converter="DATE"/>
                    </p:column>
                </p:dataTable>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedFactureAchat.init(false)}" global="false" update="data_bon_fiche_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedFactureAchat.paginator.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedFactureAchat.paginator.currentPage}/#{managedFactureAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedFactureAchat.init(true)}" global="false" update="data_bon_fiche_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedFactureAchat.paginator.disNext}"/>
                    <p:selectOneMenu value="#{managedFactureAchat.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFactureAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedFactureAchat.paginations}"/>
                        <p:ajax event="valueChange"  update="data_bon_fiche_approv"/>
                    </p:selectOneMenu>
                </p:outputPanel>  
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCancelV" closeOnEscape="true"
                             message="#{lab.LC_PA_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.cancelEtapeFacture(false, false, false)}" oncomplete="dlgCancelV.hide();" 
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCancelV.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnulerForcer" closeOnEscape="true"
                             message="#{lab.LC_PA_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.annulerOrder(true, false)}" oncomplete="dlgConfirmAnnulerForcer.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmAnnulerForcer.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="#{lab.LC_PA_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.annulerOrder(false, false)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFicheAppro.annulerOrder(false, true)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuserForcer" closeOnEscape="true"
                             message="#{lab.LC_PA_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.refuserOrder(true, false)}" oncomplete="dlgConfirmRefuserForcer.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmRefuserForcer.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuser" closeOnEscape="true"
                             message="#{lab.LC_PA_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.refuserOrder(false, false)}" oncomplete="dlgConfirmRefuser.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
                <p:commandButton value="#{lab.L_non}" actionListener="#{managedFicheAppro.refuserOrder(false, true)}" oncomplete="dlgConfirmRefuser.hide();collapseForm('fiche_approv')"
                                 update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.deleteBean()}" oncomplete="dlgConfirmDelete.hide();collapseForm('article_fiche')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="#{lab.LC_PA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide();collapseForm('article_fiche')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog id="id_confirm_close_fia" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir #{managedFicheAppro.selectFiche.cloturer?'dévérrouiller':'vérrouiller'}?" header="Confirmation">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.cloturer()}" oncomplete="dlgConfirmClose.hide()" update=":main_fiche_approv:data_fiche_approv"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="#{lab.LC_PA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.deleteBeanArticle()}" oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('article_fiche')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="#{lab.LC_PA_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedFicheAppro.deleteBeanArticle_()}" oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('article_fiche')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des articles ordre
        *****************************************************************************
        <-->  
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_fiche_approv">    
            <div class="part_fix">
                <p:splitButton value="#{lab.L_enregistrer}" id="save_fiche_approv" actionListener="#{managedFicheAppro.saveNew()}" update="entete_form_fiche_approv" icon="ui-icon-disk">
                    <p:menuitem value="#{lab.L_nouveau}" id="cancel_fiche_approv"  icon="ui-icon-document" global="false" actionListener="#{managedFicheAppro.resetFiche()}" update="blog_form_fiche_approv" oncomplete="collapseForm('article_fiche');"/>
                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" onclick="dlgConfirmDelete.show()"/>
                </p:splitButton>
                <p:commandButton value="#{lab.L_supprimer}" id="delete_fiche_approv" global="false"  icon="ui-icon-trash" onclick="dlgConfirmDelete.show()"/>
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedFicheAppro.parcoursInAllResult(false)}" update="txt_parc_linear_fiche_approv" global="false"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('fiche_approv')"/>
                    <h:inputText value="#{managedFicheAppro.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_fiche_approv"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedFicheAppro.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedFicheAppro.parcoursInAllResult(true)}" update="txt_parc_linear_fiche_approv" global="false" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('fiche_approv')"/>
                </h:panelGroup>  
                <div style="float: right">
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('fiche_approv');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('fiche_approv');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>             
                    <p:spacer />        
                    <h:link title="#{lab.LC_PA_mode_creation}" onclick="collapseGrid('fiche_approv');
                            return false">
                        <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>  
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_fiche_approv">
                    <p:outputPanel id="blog_form_fiche_approv" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid id="entete_form_fiche_approv" columns="3" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -10px;margin-top: -10px" cellpadding="0" cellspacing="0">
                            <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white" rendered="#{ficheApprovisionnement.update}">                                            
                                <span style="font-size: initial">#{lab.LC_PA_n_piece}: </span>
                                <h:outputText id="txt_reference_document_fich_approv" value="#{ficheApprovisionnement.reference}"/>
                            </h:panelGrid>                                                              
                            <p:outputPanel styleClass="yvs_form_of" id="grp_btn_etat_fiche_approv" rendered="#{ficheApprovisionnement.update}">
                                <p:commandLink value="Traitement #{(ficheApprovisionnement.statutTerminer == constantes.ETAT_SOUMIS)?'Terminé':(ficheApprovisionnement.statutTerminer == constantes.ETAT_ENCOURS)?'En cours':'En attente'}"
                                               styleClass="button-stateOF #{(true)?'button-stateOF_actif':''}" disabled="true"/>
                            </p:outputPanel>
                            <h:panelGroup style="padding: 2px;float: right; position: relative;font-size: 0.9em" rendered="#{ficheApprovisionnement.update}">
                                <p:outputPanel id="etapes_valide_approvisionnement" styleClass="yvs_form_of"> 
                                    <ui:repeat value="#{ficheApprovisionnement.etapesValidations}" var="etapeM" >
                                        <p:contextMenu for="etape_valide_approvisionnement" style="font-size: 0.7em" rendered="#{etapeM.etapeValid or etapeM.motif != null}">
                                            <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()" rendered="#{etapeM.etapeValid}"
                                                        update=":form_ppte_valid_appro:table_ppte_valid_appro"/>
                                            <p:menuitem icon="ui-icon-clipboard" value="#{lab.LC_PA_motif_annulation}" title="#{lab.LC_PA_voir_motif_annulation}" oncomplete="dglMotifCancelEtape.show()" rendered="#{etapeM.motif != null}"
                                                        update=":main-motif_etape_approv:value_motif_etape_approv" actionListener="#{managedFicheAppro.motifEtapeFacture(etapeM.motif, true)}"/>
                                            <p:separator rendered="#{etapeM.etapeValid}"/>
                                            <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.L_annuler}" oncomplete="dglMotifCancelEtape.show()" rendered="#{etapeM.etapeValid}"
                                                        update=":main-motif_etape_approv:value_motif_etape_approv" actionListener="#{managedFicheAppro.annulEtapeFacture(etapeM, false)}"/>
                                        </p:contextMenu>
                                        <p:commandLink id="etape_valide_approvisionnement" value="#{etapeM.etape.labelStatut}" disabled="#{(!etapeM.etapeActive or etapeM.etapeValid)}" title="#{etapeM.etape.titreEtape}" 
                                                       update=":main_fiche_approv:grp_btn_etat_fiche_approv :main_fiche_approv:etapes_valide_approvisionnement :main_fiche_approv:data_fiche_approv"
                                                       styleClass="#{(etapeM.etapeValid)?'statut_valide':'etat_formation_true'}" actionListener="#{managedFicheAppro.validEtapeFacture(etapeM, false)}"/>                        
                                        <h:outputText value=" A " rendered="#{!etapeM.etapeValid and etapeM.motif ne null}" title="#{lab.LC_PA_annuler_pour} : #{etapeM.motif}" style="position: relative;left: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                                    </ui:repeat>
                                    <h:panelGroup style="float: right">
                                        <p:commandLink value="#{(ficheApprovisionnement.etat == constantes.ETAT_VALIDE)?'VALIDE':'VALIDER'}" rendered="#{ficheApprovisionnement.etapesValidations.size() lt 1}" process="@this"  
                                                       disabled="#{!(ficheApprovisionnement.etat == constantes.ETAT_EDITABLE)}" styleClass="#{(ficheApprovisionnement.etat == constantes.ETAT_VALIDE)?'statut_valide':'etat_formation_true'}"                                                           
                                                       actionListener="#{managedFicheAppro.changeStatut(constantes.ETAT_VALIDE)}" update="grp_btn_etat_fiche_approv etapes_valide_approvisionnement"/>
                                        <p:commandLink value="#{managedFicheAppro.writeEtape(((ficheApprovisionnement.etat == constantes.ETAT_EDITABLE)?'EN EDITION':'EDITABLE'), ficheApprovisionnement.firstEtape)}" onclick="dlgCancelV.show()" type="button"
                                                       disabled="#{(ficheApprovisionnement.etat == constantes.ETAT_EDITABLE)}" process="@this" styleClass="#{(ficheApprovisionnement.etat == constantes.ETAT_EDITABLE)?'statut_valide':'etat_formation_true'}"/>
                                    </h:panelGroup>
                                </p:outputPanel>                   
                            </h:panelGroup>   
                        </h:panelGrid>
                        <div style="clear: both" />
                        <p:outputPanel >
                            <h:panelGrid columns="8" styleClass="yvs_nostyle" style="width: 100%; background: #AFAFAF;margin-top: 25px" cellpadding="0" cellspacing="0"> 
                                <span>#{lab.LC_PA_depot} </span>
                                <h:selectOneMenu value="#{ficheApprovisionnement.depot.id}" disabled="#{ficheApprovisionnement.update}" id="select_depot"
                                                 valueChangeListener="#{managedFicheAppro.chooseDepot}">
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedDepot.depots_all}" var="dep" 
                                                   itemLabel="#{dep.designation}" itemValue="#{dep.id}" />                    
                                    <p:ajax event="valueChange" global="false" oncomplete="collapseForm('article_fiche')"/>
                                </h:selectOneMenu> 
                                <span>#{lab.LC_PA_creneau}</span>
                                <h:selectOneMenu id="select_creneau_fiche_approv" value="#{ficheApprovisionnement.creneau.id}" style="min-width: 120px"
                                                 disabled="#{managedFicheAppro.ficheApprovisionnement.etat != constantes.ETAT_EDITABLE}">
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedFicheAppro.creneaux}" var="crenD" 
                                                   itemLabel="#{crenD.semiReference}" itemValue="#{crenD.id}" />                                      
                                    <p:ajax event="valueChange" global="false" listener="#{managedFicheAppro.chooseCreneau()}" oncomplete="collapseForm('article_fiche')"/>
                                </h:selectOneMenu> 
                                <span>#{lab.L_date} </span>
                                <h:panelGroup>
                                    <p:calendar value="#{ficheApprovisionnement.dateApprovisionnement}" navigator="true" pattern="dd-MM-yyyy" size="10"
                                                disabled="#{managedFicheAppro.ficheApprovisionnement.etat != constantes.ETAT_EDITABLE}">
                                        <p:ajax event="dateSelect" global="false" listener="#{managedFicheAppro.chooseDate()}" oncomplete="collapseForm('article_fiche')"/>
                                    </p:calendar>
                                    <span> #{lab.L_a} </span>
                                    <pe:timePicker value="#{ficheApprovisionnement.heureApprovisionnement}" style="width: 80px"
                                                   disabled="#{managedFicheAppro.ficheApprovisionnement.etat != constantes.ETAT_EDITABLE}"/>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:outputPanel>
                        <br/>
                        <h:panelGrid class="headline_data" columns="2" styleClass="yvs_nostyle" style="width: 100%; font-size: 0.8em;cursor: pointer" onclick="slideZone()">
                            <b><span> #{lab.LC_PA_contenus}</span></b>
                            <p:commandButton icon="ui-icon-circle-arrow-s" style="float: right;width: 20px;height: 20px;color: white;background:#FFF !important"
                                             title="#{lab.LC_PA_ajouter_contenu}" onclick="slideZone()" type="button" rendered="false"/>
                        </h:panelGrid> 
                        <p:outputPanel id="blog_form_contenu_fiche_approv">
                            <h:panelGrid id="form_contenu_fiche_approv" styleClass="yvs_nostyle" columns="9" style="background: white;border: 2px solid #045491!important; border-radius: 5px;width: 100%" cellpadding="0" cellspacing="0">
                                <span>#{lab.L_article} </span>       
                                <h:panelGroup>
                                    <h:inputText value="#{managedFicheAppro.contenu.article.article.refArt}" style="color: #{managedFicheAppro.contenu.article.error?'red':''}" tabindex="10">
                                        <p:ajax event="valueChange" global="false" listener="#{managedFicheAppro.searchArticle()}" update="@this desc_artcile_fiche_approv chp_cond_art"/>
                                    </h:inputText>    
                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="#{lab.LC_PA_liste_article}" global="false"
                                                     actionListener="#{managedFicheAppro.initArticles()}" oncomplete="dlgListArticle.show()"/>
                                </h:panelGroup>
                                <span>#{lab.LC_PA_conditionnement}</span>
                                <h:selectOneMenu value="#{managedFicheAppro.contenu.conditionnement.id}" style="min-width: 120px" title="#{lab.LC_PA_selectionner_conditionnement}" tabindex="15" id="chp_cond_art"
                                                 rendered="#{composantsVisible.fv_conditionnement}" required="#{composantsObligatoire.fv_conditionnement}" disabled="#{!composantsEditable.fv_conditionnement}">
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedFicheAppro.contenu.article.article.conditionnements}" var="un_" 
                                                   itemLabel="#{un_.unite.reference}" itemValue="#{un_.id}"/>
                                    <p:ajax event="valueChange" global="false" />
                                </h:selectOneMenu>
                                <span>#{lab.LC_PA_qte}. </span>
                                <h:inputText id="txt_qte_achat" value="#{managedFicheAppro.contenu.quantite}" style="width: 100px" tabindex="20"/>    
                                <span>#{lab.LC_PA_livrer_le} </span>
                                <p:calendar value="#{managedFicheAppro.contenu.dateLivraison}" navigator="true" pattern="dd-MM-yyyy" size="8" tabindex="25"/>   
                                <p:commandButton id="save_article_fiche" icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right" oncomplete="collapseForm('article_fiche')"
                                                 update="blog_form_contenu_fiche_approv" actionListener="#{managedFicheAppro.saveNewArticle()}" tabindex="30"/>
                            </h:panelGrid>
                            <p:outputPanel id="desc_artcile_fiche_approv" style="position: relative; bottom: 0px;padding-top: -2px;padding-bottom: -3px">
                                <h:panelGrid columns="2" style="font-size: 0.8em;width: 100%;background: #bcbcbf" rendered="#{managedFicheAppro.selectArt}">
                                    <h:panelGroup style="float: left">
                                        <span style="font-weight: bold;color: #009999">#{managedFicheAppro.contenu.article.article.designation}</span>
                                        <span> #{lab.LC_PA_vendu_a} </span>
                                        <h:outputText value="#{managedFicheAppro.contenu.article.pr}" converter="#{managedFicheAppro.converter}" style="font-weight: bold;color: #009999"/>
                                        <span>Fcfa  </span>
                                    </h:panelGroup>
                                    <h:panelGroup style="float: right">
                                        <h:outputText value="#{managedFicheAppro.contenu.stock}" converter="#{managedFicheAppro.converterStock}" style="font-weight: bold;color: #009999"/>
                                        <h:outputText value=" #{(managedFicheAppro.contenu.article.article.uniteVente.libelle!=null)
                                                                ?managedFicheAppro.contenu.article.article.uniteVente.libelle:''}"/>
                                        <span> #{lab.LC_PA_en_stock}</span>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </p:outputPanel>
                            <p:outputPanel>
                                <h:inputHidden id="input_hide_article_fiche" value="#{managedFicheAppro.tabIds_article}"/>
                                <p:dataTable id="data_contenu_fiche_approv" value="#{managedFicheAppro.contenus}" var="artf" rowKey="#{artf.id}" style="font-size: 0.8em"
                                             rowIndexVar="artfIdx" selectionMode="single" selection="#{managedFicheAppro.selectContenu}">
                                    <p:ajax event="rowSelect" global="false" listener="#{managedFicheAppro.loadOnViewContenu}"/>
                                    <p:ajax event="rowUnselect" global="false" listener="#{managedFicheAppro.unLoadOnViewContenu}"/>
                                    <p:column headerText="N°" width="15" style="text-align: center">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                        <span>#{artfIdx+1}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_article}" width="200">
                                        [<span style="font-weight: bold">#{artf.article.article.refArt}</span>]
                                        <span>#{artf.article.article.designation}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_qte_demd}" width="100" style="text-align: center">
                                        <h:outputText value="#{artf.quantite}" converter="#{managedFicheAppro.converterStock}"/>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_qte_cmd}" width="100" style="text-align: center">
                                        <h:outputText value="#{artf.qteWaitFacture}" converter="#{managedFicheAppro.converterStock}"/>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_qte_ord}" width="100" style="text-align: center">
                                        <h:outputText title="#{lab.LC_PA_qte_transferer}" value="#{artf.qteWaitTransfert}" converter="#{managedFicheAppro.converterStock}"/>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_qte_rest}" width="100" style="text-align: center">
                                        <h:outputText value="#{artf.quantiteRest}" converter="#{managedFicheAppro.converterStock}"/>
                                        <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_stock}" width="100" style="text-align: right">
                                        <h:panelGroup rendered="#{artf.critere == 'SM'}">
                                            <span style="float: left;color: blue;font-style: italic" title="#{lab.LC_PA_stock_minimal}">#{lab.LC_PA_sm}</span>
                                            <h:outputText value="#{artf.article.stockMin}" converter="#{managedFicheAppro.converterStock}" title="#{lab.LC_PA_stock_minimal}"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{artf.critere != 'SM'}">
                                            <span style="float: left;color: blue;font-style: italic" title="#{lab.LC_PA_stock_alert}">#{lab.LC_PA_sa}</span>
                                            <h:outputText value="#{artf.article.stockAlert}" converter="#{managedFicheAppro.converterStock}" title="#{lab.LC_PA_stock_alert}"/>
                                        </h:panelGroup>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PA_a_livrer_le}" width="100" style="text-align: center">
                                        <h:outputText value="#{artf.dateLivraison}" converter="DATE"/>
                                    </p:column>
                                    <p:column style="text-align: center;width: 5%">
                                        <p:contextMenu for="btn_option_article_fiche" event="left click" style="font-size: 0.8em;width: 250px">
                                            <p:menuitem icon="ui-icon-cart" value="#{lab.LC_PA_creer_commande}" actionListener="#{managedFicheAppro.initGenerationBon(artf)}" rendered="#{artf.onAchat}"/>
                                            <p:menuitem icon="ui-icon-transferthick-e-w" value="#{lab.LC_PA_creer_transfert}" actionListener="#{managedFicheAppro.initGenerationOrdre(artf)}" rendered="#{artf.onTransfert}"/>
                                            <p:separator style="width: 98%;margin: auto"/>
                                            <p:menuitem icon="ui-icon-cart" value="#{lab.LC_PA_envoyer_commande}" actionListener="#{managedFicheAppro.initTransfertInBon(artf)}" rendered="#{artf.onAchat}"/>
                                            <p:menuitem icon="ui-icon-transferthick-e-w" value="#{lab.LC_PA_envoyer_transfert}" actionListener="#{managedFicheAppro.initTransfertInOrdre(artf)}" rendered="#{artf.onTransfert}"/>
                                            <p:separator style="width: 98%;margin: auto"/>
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFicheAppro.deleteBeanArticle_(artf)}" oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_fiche" type="button"/>
                                    </p:column> 
                                    <p:column style="text-align: center;width: 5%">
                                        <f:facet name="header">
                                            <h:selectBooleanCheckbox styleClass="chek_all_line_article_fiche" value="false"
                                                                     onclick="selectionAllLineTab(#{managedFicheAppro.contenus.size()}, 'article_fiche')">
                                            </h:selectBooleanCheckbox>
                                        </f:facet>
                                        <h:selectBooleanCheckbox  value="#{artf.selectActif}" styleClass="chek_line_article_fiche" 
                                                                  onclick="selectionLineTab(#{artf.id}, 'article_fiche')">
                                        </h:selectBooleanCheckbox>
                                    </p:column>
                                </p:dataTable>  
                                <span class="nbSelectarticle_fiche" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                                    <p:commandButton actionListener="#{managedFicheAppro.loadContenu(false, false)}" global="false" update="data_contenu_fiche_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedFicheAppro.pa.disPrev}"/>
                                    <p:outputPanel ><p:outputLabel value="#{managedFicheAppro.pa.currentPage}/#{managedFicheAppro.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                    <p:commandButton actionListener="#{managedFicheAppro.loadContenu(true, false)}" global="false" update="data_contenu_fiche_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedFicheAppro.pa.disNext}"/>
                                    <p:selectOneMenu value="#{managedFicheAppro.max}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFicheAppro._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                        <f:selectItems value="#{managedFicheAppro.paginations}"/>
                                        <p:ajax event="valueChange"  update="data_contenu_fiche_approv"/>
                                    </p:selectOneMenu>
                                </p:outputPanel>
                                <p:commandButton id="delete_article_fiche" value="Supprimer" style="float: left"
                                                 onclick="dlgConfirmDeleteArticle.show()"/>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div  class="part_list">
                    <div class="yvs_list_fiche_approv" style="width: 99%; margin: auto; background: white">
                        <h:inputHidden id="input_hide_fiche_approv" value="#{managedFicheAppro.tabIds}"/>
                        <p:dataTable id="data_fiche_approv" value="#{managedFicheAppro.documents}" var="fich" rowKey="#{fich.id}" rowIndexVar="fichIdx"
                                     selectionMode="single">
                            <p:ajax event="rowSelect" global="false" listener="#{managedFicheAppro.loadOnView}" update=":main_fiche_approv:input_hide_fiche_approv"
                                    oncomplete="collapseForm('fiche_approv');collapseForm('article_fiche')"/>
                            <p:column headerText="N°" width="30" style="text-align: center"  styleClass="statut_#{fich.etat}">
                                <h:graphicImage title="#{lab.LC_PA_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{fich.cloturer}"/>     
                                <h:outputText value="#{fichIdx+1}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{fich.etat}">
                                <h:outputText value="#{fich.reference}"/>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PA_encours_traitement}" value="E" rendered="#{fich.statutTerminer == constantes.ETAT_ENCOURS}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                    <p:spacer width="2" rendered="#{fich.statutTerminer == constantes.ETAT_SOUMIS}"/>
                                    <h:outputText title="#{lab.LC_PA_traitement_termine}" value="T" rendered="#{fich.statutTerminer == constantes.ETAT_SOUMIS}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_depot}" styleClass="statut_#{fich.etat}">
                                <h:outputText value="#{fich.depot.designation}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_creneau}" styleClass="statut_#{fich.etat}">
                                <h:outputText value="#{fich.creneau.semiReference}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_date}" styleClass="statut_#{fich.etat}">
                                <h:outputText value="#{fich.dateApprovisionnement}" converter="DATE"/>
                                <span> #{lab.L_a} </span>
                                <h:outputText value="#{fich.heureApprovisionnement}" converter="TIME"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_etapes}"  width="60" styleClass="statut_#{fich.etat}" style="font-size: 0.8em;text-align: center">
                                <h:outputText value="#{fich.libEtapes}" />
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="etat_#{fich.etat}">
                                <p:contextMenu for="btn_option_fiche_approv" event="left click" style="font-size: 0.8em">
                                    <p:menuitem icon="ui-icon-carat-2-e-w" value="#{lab.LC_PA_equilibrer_statut}" actionListener="#{managedFicheAppro.equilibre(fich)}" global="false" update=":main_fiche_approv:data_fiche_approv"/>
                                    <p:separator style="width: 98%;margin: auto" rendered="false"/>
                                    <p:menuitem icon="ui-icon-cart" value="#{lab.LC_PA_creer_commande}" actionListener="#{managedFicheAppro.initGenerationBons(fich)}" rendered="#{false}"/>
                                    <p:menuitem icon="ui-icon-transferthick-e-w" value="#{lab.LC_PA_creer_transfert}" actionListener="#{managedFicheAppro.initGenerationOrdres(fich)}" rendered="#{false}"/>
                                    <p:menuitem icon="ui-icon-cart" value="#{lab.LC_PA_ajouter_commande}" actionListener="#{managedFicheAppro.initTransfertInBons(fich)}" rendered="#{false}"/>
                                    <p:menuitem icon="ui-icon-transferthick-e-w" value="#{lab.LC_PA_ajouter_transfert}" actionListener="#{managedFicheAppro.initTransfertInOrdres(fich)}" rendered="#{false}"/>
                                    <p:separator style="width: 98%;margin: auto"/>
                                    <p:menuitem value="#{fich.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{fich.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                                global="false" actionListener="#{managedFicheAppro.cloturer(fich)}" oncomplete="dlgConfirmClose.show()"/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFicheAppro.deleteBean_(fich)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_fiche_approv" type="button"/>
                            </p:column> 
                            <p:column width="25" style="text-align: center" styleClass="statut_#{fich.etat}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_fiche_approv" value="false"
                                                             onclick="selectionAllLineTab(#{managedFicheAppro.documents.size()}, 'fiche_approv')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{fich.selectActif }" styleClass="chek_line_fiche_approv" 
                                                          onclick="selectionLineTab(#{fichIdx}, 'fiche_approv')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                        </p:dataTable>      
                        <span class="nbSelectfiche_approv" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFicheAppro.init(false)}" global="false" update="data_fiche_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedFicheAppro.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedFicheAppro.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedFicheAppro.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedFicheAppro.gotoPagePaginator()}" update="data_fiche_approv"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedFicheAppro.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedFicheAppro.init(true)}" global="false" update="data_fiche_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedFicheAppro.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFicheAppro.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFicheAppro.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFicheAppro.paginations}"/>
                                <p:ajax event="valueChange"  update="data_fiche_approv"/>
                            </p:selectOneMenu>
                        </p:outputPanel>                
                    </div>
                    <!-->
                     *****************************************************************************
                     Vue Grid
                     *****************************************************************************
                    <-->
                    <div class="yvs_grid_fiche_approv">
                        <p:dataTable id="data_contenu_approv" value="#{managedFicheAppro.all_contenus}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx" selectionMode="single">
                            <p:ajax event="rowSelect"  listener="#{managedFicheAppro.loadOnViewContent}" oncomplete="collapseForm('fiche_approv');collapseForm('article_fiche')"/>                                
                            <p:column headerText="N°" width="15" styleClass="statut_#{artf.fiche.etat}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                <span>#{artfIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_reference} " width="100" styleClass="statut_#{artf.fiche.etat}">
                                <span style="font-weight: bold">#{artf.article.article.refArt}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_article}" width="130" styleClass="statut_#{artf.fiche.etat}">
                                <span title="#{artf.article.article.designation}">#{artf.article.article.designation}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_qte}" width="70"  style="text-align: center" styleClass="statut_#{artf.fiche.etat}">
                                <h:outputText value="#{artf.quantite}" converter="#{managedFicheAppro.converterStock}"/>
                                <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>                               
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_fiche}" width="160" styleClass="statut_#{artf.fiche.etat}">
                                <span title="#{artf.fiche.reference}" style="float: left">#{artf.fiche.reference}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="#{lab.LC_PA_fiche_traite}" value="T" rendered="#{artf.fiche.statutTerminer == constantes.ETAT_SOUMIS}" styleClass="style_statut"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="#{lab.LC_PA_depot}" width="100" styleClass="statut_#{artf.fiche.etat}">
                                <h:outputText value="#{artf.fiche.depot.designation}"/>
                            </p:column>
                        </p:dataTable>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFicheAppro.loadContenus(false, false)}" global="false" update="data_contenu_approv" icon="ui-icon-circle-triangle-w" disabled="#{managedFicheAppro.p_contenu.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedFicheAppro.p_contenu.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedFicheAppro.p_contenu.page}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedFicheAppro.gotoPagePaginatorContenu()}" update="data_contenu_approv"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedFicheAppro.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedFicheAppro.loadContenus(true, false)}" global="false" update="data_contenu_approv" icon="ui-icon-circle-triangle-e" disabled="#{managedFicheAppro.p_contenu.disNext}"/>
                            <p:selectOneMenu value="#{managedFicheAppro.p_contenu.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFicheAppro.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFicheAppro.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_contenu_approv"/>
                            </p:selectOneMenu>
                        </p:outputPanel>  
                    </div>  
                </div> 
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <div class="yvs_form_fiche_approv display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le}<h:outputText value="#{managedFicheAppro.selectFiche.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedFicheAppro.selectFiche.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedFicheAppro.selectFiche.author.users.nomUsers}" styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <div id="zone_search_fiche_approv">
                    <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="8" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0" id="approv_zone_search">
                            <span>&nbsp;</span>
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFicheAppro.date_}">
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.chooseDateSearch()}" update="blog_date_search_fiche_approv" oncomplete="collapseList('fiche_approv')"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.LC_PA_depot}" />
                            <h:outputText value="#{lab.LC_PA_creneau}" />
                            <h:outputText value="#{lab.LC_PA_statut}"/>
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="#{lab.LC_PA_a_faire}" />
                            <h:outputText value="" />
                            <p:commandButton icon="ui-icon-bullet" update="approv_zone_search" style="width: 22px; height: 22px" actionListener="#{managedFicheAppro.clearParams()}"/>
                            <h:panelGroup id="blog_date_search_fiche_approv">
                                <p:calendar value="#{managedFicheAppro.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFicheAppro.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFicheAppro.chooseDateSearch()}" oncomplete="collapseList('fiche_approv')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedFicheAppro.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFicheAppro.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFicheAppro.chooseDateSearch()}" oncomplete="collapseList('fiche_approv')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedFicheAppro.depotSearch}" style="min-width: 120px">
                                <f:selectItem itemLabel="" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="de"
                                               itemLabel="#{de.designation}" itemValue="#{de.id}"/>
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamDepot()}" oncomplete="collapseList('fiche_approv')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedFicheAppro.creneauSearch}" style="min-width: 120px">
                                <f:selectItem itemLabel="" itemValue="0"/>
                                <f:selectItems value="#{managedTypeCreneau.tranches}" var="trh"
                                               itemLabel="#{trh.titre}" itemValue="#{trh.id}"/>
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParmCreneau()}" oncomplete="collapseList('fiche_approv')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedFicheAppro.statut_}" valueChangeListener="#{managedFicheAppro.addParamStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.LC_PA_attente}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{lab.LC_PA_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="#{lab.LC_PA_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{lab.LC_PA_terminer}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                                <f:selectItem itemLabel="" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.LC_PA_avance}..." itemValue="Z"/>
                                <p:ajax event="valueChange" oncomplete="collapseList('fiche_approv')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedFicheAppro.numSearch_}">
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.searchByNum()}" oncomplete="collapseList('fiche_approv')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedFicheAppro.toValideLoad}" style="min-width: 80px">
                                <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                                <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamToValide()}" oncomplete="collapseList('fiche_approv')"/>
                            </h:selectOneMenu> 
                            <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                           onclick="dlgPlusOption.show()" global="false" value="#{lab.L_plus_option}"/>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>
                </div>
                <div id="zone_find_fiche_approv">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="7" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0"> 
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFicheAppro.dateContenu}" style="float: left;margin-bottom: -5px">
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.findByDateContenu()}" oncomplete="collapseGrid('fiche_approv')"
                                            update="blog_date_search_fiche_approv_"/>
                                </h:selectBooleanCheckbox>                                
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.LC_PA_depot}" />
                            <h:outputText value="#{lab.L_article}" />
                            <h:outputText value="#{lab.LC_PA_statut}" />
                            <h:outputText value="#{lab.L_reference}" />
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedFicheAppro.addPrix}" style="float: left;margin-bottom: -5px">
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamQuantiteContenu()}" oncomplete="collapseGrid('fiche_approv')"
                                            update="blog_prix_search_fiche_approv_"/>
                                </h:selectBooleanCheckbox>                                
                                <h:outputText value="#{lab.LC_PA_prix} " />
                            </h:panelGroup>
                            <span>&nbsp;</span>
                            <h:panelGroup id="blog_date_search_fiche_approv_">
                                <p:calendar value="#{managedFicheAppro.dateDebutContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFicheAppro.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFicheAppro.addParamDateContenu}" oncomplete="collapseGrid('fiche_approv')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedFicheAppro.dateFinContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedFicheAppro.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedFicheAppro.addParamDateContenu}" oncomplete="collapseGrid('fiche_approv')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:inputText value="#{managedFicheAppro.depot}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamDepotContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                            </h:inputText>
                            <h:inputText value="#{managedFicheAppro.article}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamArticleContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedFicheAppro.statutContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedFicheAppro.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedFicheAppro.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedFicheAppro.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamStatutContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedFicheAppro.reference}">
                                <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamReferenceContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                            </h:inputText>
                            <h:panelGroup id="blog_prix_search_fiche_approv_">
                                <h:selectOneMenu value="#{managedFicheAppro.comparer}" disabled="#{!managedFicheAppro.addPrix}">
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_INF_EGALE}" itemValue="#{constantes.SYMBOLE_INF_EGALE}"/>
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_SUP_EGALE}" itemValue="#{constantes.SYMBOLE_SUP_EGALE}"/> 
                                    <f:selectItem itemLabel="#{constantes.SYMBOLE_BETWEEN}" itemValue="BETWEEN"/>
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamPrixContenu()}" oncomplete="collapseGrid('fiche_approv')"
                                            update="blog_prix_search_fiche_approv_"/>
                                </h:selectOneMenu>
                                <h:inputText value="#{managedFicheAppro.prixSearch}" style="width: 50px" disabled="#{!managedFicheAppro.addPrix}" rendered="#{!(managedFicheAppro.comparer eq constantes.SYMBOLE_INF_EGALE)}">
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamQuantiteContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                                </h:inputText>
                                <h:inputText value="#{managedFicheAppro.prix2Search}" style="width: 50px" disabled="#{!managedFicheAppro.addPrix}" rendered="#{!(managedFicheAppro.comparer eq constantes.SYMBOLE_SUP_EGALE)}">
                                    <p:ajax event="valueChange" listener="#{managedFicheAppro.addParamQuantiteContenu()}" oncomplete="collapseGrid('fiche_approv')"/>
                                </h:inputText>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>