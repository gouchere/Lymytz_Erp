<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"        
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"     
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">       
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Tableau Bord Fournisseur','modGescom', 'smenDashBoardFsseur', true,managedBordStatistique)}
    </ui:define>     
    <ui:define name="contents">     
        <script type="text/javascript">
            var list = false;
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - 180);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('tb_fsseur');
                slideAll();
            });
            function collapse(byGrid) {
                if (byGrid) {
                    collapseGrid('tb_fsseur');
                    list = true;
                } else {
                    if (list) {
                        collapseForm('tb_fsseur');
                    } else {
                        collapseList('tb_fsseur');
                    }
                    list = !list;
                }
            }
            function slideAll() {
                slideShow('zone_acomptes_fournisseur', 350);
                slideShow('zone_autres_fournisseur', 350);
                slideShow('zone_progress_fournisseur', 350);
            }
        </script>           
        #{managedFactureAchat.doNothing()}
        #{managedOperationFournisseur.doNothing()}
        #{managedFactureAchat.doNothing()}
        #{managedCatCompt.doNothing()}

        #{managedAgence.loadAgence()}
        #{managedCategorieFsseur.loadAll()}
        #{managedExercice.loadAllExrecice()} 
        #{Mdico.loadPays()}
        #{managedBordStatistique.loadInfos(true, 'F')}   


        <h:form prependId="false" id="main_tb_fsseur">
            <div class="part_fix">
                <div style="width: 100%; font-size: 0.8em">
                    <p:commandLink style="float: left" actionListener="#{managedBordStatistique.navigateInViewFsseur(false)}" update=":main_tb_fsseur:data_fournisseur_tb" oncomplete="collapseForm('tb_fsseur'); slideAll()">
                        <h:graphicImage library="img" name="slide_l.png" width="16" height="16"
                                        style="border: 2px solid black; border-radius: 5px;padding: 3px;"/>
                    </p:commandLink>  
                    <div style="margin-left: 45%;float: left;margin-top: -4px">    
                        <h:panelGrid columns="2">
                            <p:outputPanel autoUpdate="true" style="width: 5%;border: 2px solid black; border-radius: 5px;padding: 3px;text-align: center">
                                <p:inplace label="#{managedBordStatistique.indexFsseur+1}" style="margin-top: 15px; font-weight: bold">
                                    <pe:inputNumber value="#{managedBordStatistique.indexFsseur}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedBordStatistique.gotoPageFsseur()}"/>
                                    </pe:inputNumber>
                                </p:inplace>
                                <span> / #{managedFournisseur.ids_fournisseurs.size()}</span>
                            </p:outputPanel>   
                            <h:panelGroup>
                                <h:link title="#{lab.LC_PTBC_change_vue}" onclick="collapse(false);
                                        return false">
                                    <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                                </h:link>            
                                <p:spacer />
                                <h:link title="#{lab.L_mode_liste}" onclick="collapse(true);
                                        return false" >
                                    <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                                </h:link>    
                            </h:panelGroup>
                        </h:panelGrid>
                    </div>
                    <p:commandLink style="float: right" actionListener="#{managedBordStatistique.navigateInViewFsseur(true)}" update=":main_tb_fsseur:data_fournisseur_tb" oncomplete="collapseForm('tb_fsseur'); slideAll()">
                        <h:graphicImage library="img" name="slide_r.png" width="16" height="16"
                                        style="border: 2px solid black; border-radius: 5px;padding: 3px;"/>
                    </p:commandLink>   
                </div>
            </div>
            <div class="part_scroll">
                <div class="yvs_form_tb_fsseur">
                    <p:outputPanel id="form_tb_fsseur" autoUpdate="true">
                        <div class="block_slide" style="width: 99.25%; height: 180px;">
                            <span class="block_slide_title">
                                #{lab.LC_PTBC_generale}
                                <h:panelGroup id="txt_solde_fsseur_dash" style="float: right">
                                    <span style="margin-right: 100px"> 
                                        #{lab.LC_PTBC_solde_au} <h:outputText value="#{managedBordStatistique.syntheseF.dateDebut}" converter="DATE" style="font-style: italic"/> (<h:outputText value="#{managedBordStatistique.syntheseF.soldeInitial}" converter="DN" style="font-style: normal;font-weight: bold"/>)
                                    </span>
                                    <h:panelGroup style="margin-right: 5px;font-style: italic">
                                        <span>
                                            #{lab.LC_PTBC_total}(<h:outputText value="#{managedBordStatistique.syntheseF.soldeImpayes}" converter="DN" style="font-style: normal;font-weight: bold"/>)
                                        </span>
                                        -
                                        <span> 
                                            #{lab.LC_PTBC_reglements}(<h:outputText value="#{managedBordStatistique.syntheseF.soldeAvance}" converter="DN" style="font-style: normal;font-weight: bold"/>)
                                        </span>
                                        -
                                        <span>
                                            #{lab.LC_PTBC_acomptes} (<h:outputText value="#{managedBordStatistique.syntheseF.soldeAcompte}" converter="DN" style="font-style: normal;font-weight: bold"/>)
                                        </span>
                                        +
                                        <p:commandLink actionListener="#{managedBordStatistique.gotoCreditFournisseur()}" style="color: black" title="Aller à la page des crédits fournisseur">
                                            #{lab.LC_PTBC_autres} (<h:outputText value="#{managedBordStatistique.syntheseF.soldeCredit}" converter="DN" style="font-style: normal;font-weight: bold"/>)
                                        </p:commandLink>
                                        =
                                        <h:outputText value="#{managedBordStatistique.syntheseF.soldeInitial + managedBordStatistique.syntheseF.soldeImpayes - managedBordStatistique.syntheseF.soldeAvance - managedBordStatistique.syntheseF.soldeAcompte + managedBordStatistique.syntheseF.soldeCredit}" converter="DN" style="font-style: normal;font-weight: bold"/>
                                    </h:panelGroup>
                                </h:panelGroup>
                            </span>
                            <div class="zone_slide" style="width: 99.5%; height: 160px;">
                                <h:panelGrid columns="1" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <h:panelGroup>
                                        <div style="float: left; width: 10%; border: 1px solid #000">
                                            <h:graphicImage library="photos" name="user1.jpg" width="100" height="100" />
                                        </div>
                                        <h:panelGrid columns="4" style="width: 89%; margin-left: 11%; font-size: 0.8em;">
                                            <span>#{lab.LC_PTBC_code_fsseur}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.codeFsseur}" style="font-weight: bold"/>
                                            <span>#{lab.LC_PTBC_nom_prenom}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.nom_prenom}" style="font-weight: bold"/>
                                            <span>#{lab.L_enregistrer_le}</span>
                                            <h:outputText value="" style="font-weight: bold"/>
                                            <span>#{lab.LC_PTBC_telephone}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.telephone}" style="font-weight: bold"/>
                                            <span>#{lab.LC_PTBC_email}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.email}" style="font-weight: bold"/>
                                            <span>#{lab.L_categorie}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.categorie.libelle}" style="font-weight: bold"/>
                                            <f:facet name="footer">
                                                <div align="right">
                                                    <h:panelGroup>
                                                        <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.id}" style="font-weight: bold;margin-right:5px" styleClass="style_identifiant_white"/>
                                                        <p:contextMenu for="btn-download_recap_fsseur" event="left click" styleClass="context_menu" style="width: 210px">
                                                            <p:menuitem value="#{lab.LC_PTBC_recapitulatif_detaille}" icon="ui-icon-print" global="false" actionListener="#{managedBordStatistique.printDashBoardFsseur('', true)}" ajax="false"/>
                                                            <p:menuitem value="#{lab.LC_PTBC_recapitulatif_general}" icon="ui-icon-print" global="false" actionListener="#{managedBordStatistique.printDashBoardFsseur('', false)}" ajax="false"/>                                    
                                                        </p:contextMenu>
                                                        <p:commandButton id="btn-download_recap_fsseur" title="#{lab.L_telecharger}" icon="ui-icon-print" style="width: 23px; height: 23px;margin-top: -5px;float: right" type="button"/>
                                                    </h:panelGroup>
                                                </div>
                                            </f:facet>
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup>
                                        <p:panelGrid columns="6" style="width: 100%;font-size: 0.8em;">
                                            <span>#{lab.LC_PTBC_nationalite} : </span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.pays.libelle}" style="font-weight: bold"/>
                                            <span>#{lab.L_ville} : </span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.ville.libelle}" style="font-weight: bold"/>
                                            <span>#{lab.LC_PTBC_zone}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.secteur.libelle}" style="font-weight: bold"/>
                                            <span>#{lab.LC_PTBC_compte_tiers} : </span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.tiers.codeTiers}" style="font-weight: bold"/>                                       
                                            <span>#{lab.LC_PTBC_compte_collectif} : </span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.compteCollectif.numCompte}" style="font-weight: bold"/> 
                                            <span>#{lab.LC_PTBC_code_comptable}</span>
                                            <h:outputText value="#{managedBordStatistique.syntheseF.fournisseur.categorieComptable.designation}" style="font-weight: bold"/>                                      
                                        </p:panelGrid> 
                                    </h:panelGroup>
                                </h:panelGrid>
                            </div>
                        </div>
                        <div style="clear: left; height: 10px"/>
                        <div id="zone_impayes_fournisseur" class="block_slide" style="float: left;width: 49.25%;height: 350px">
                            <span class="block_slide_title" onclick="slideShow('zone_impayes_fournisseur', 350)">
                                <span class="button_slide">[-]</span>
                                #{lab.LC_PTBC_impayes}
                                <div style="float: right; font-weight: bold">
                                    #{lab.LC_PTBC_solde} : <h:outputText id="txt_solde_impaye_fsseur_dash" value="#{managedBordStatistique.syntheseF.soldeImpaye}" converter="DN"/>
                                </div>
                            </span>
                            <div class="zone_slide" style="height: 300px">
                                <p:dataTable value="#{managedBordStatistique.syntheseF.factures}" var="ach" id="table_fsseur_imp_dash" rowKey="#{ach.id}">
                                    <p:column headerText="N°" styleClass="statut_#{ach.statut}">
                                        <h:outputText value="#{ach.numDoc}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_date}" style="text-align: center" styleClass="statut_#{ach.statut}">
                                        <h:outputText value="#{ach.dateDoc}" converter="DATE"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_montant}" style="text-align: right" styleClass="statut_#{ach.statut}">
                                        <h:outputText value="#{ach.montantTotal}" converter="DN"/>                                            
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_avance}" style="text-align: right" styleClass="statut_#{ach.statut}">
                                        <h:outputText value="#{ach.montantAvance}" converter="DN"/>                                         
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_reste}" style="text-align: right" styleClass="statut_#{ach.statut}">
                                        <h:outputText value="#{ach.montantNetApayer}" converter="DN"/>                                           
                                    </p:column>
                                    <p:column style="width: 5%;text-align: center">
                                        <p:contextMenu for="btn_option_fsseur_imp_dash" event="left click" style="font-size: 0.8em" styleClass="context_menu">
                                            <p:menuitem value="#{lab.L_aller_a}" icon="ui-icon-arrowthick-1-e" global="false" actionListener="#{managedBordStatistique.gotoFactureAchat(ach)}"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_fsseur_imp_dash" type="button"/>
                                    </p:column> 
                                </p:dataTable> 
                            </div>
                            <div class="zone_bottom">
                                <p:contextMenu for="btn_fsseur_imp_dash" event="left click" styleClass="context_menu" style="width: 210px">
                                    <p:menuitem value="#{lab.L_charger}" icon="ui-icon-refresh" actionListener="#{managedBordStatistique.loadDataImpayesFsseur()}" update="table_fsseur_imp_dash txt_solde_impaye_fsseur_dash txt_solde_fsseur_dash"/>
                                    <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-print" global="false" actionListener="#{managedBordStatistique.printDashBoardFsseur('F', false)}" ajax="false"/>                                    
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px;float: left" id="btn_fsseur_imp_dash" type="button"/>
                            </div>
                        </div>
                        <div id="zone_creances_fournisseur" class="block_slide" style="float: right;width: 49.25%;height: 350px">
                            <span class="block_slide_title" onclick="slideShow('zone_creances_fournisseur', 350)">
                                <span class="button_slide">[-]</span>
                                #{lab.LC_PTBC_suivi_mentualites}
                            </span> 
                            <div class="zone_slide" style="height: 300px">
                                <p:dataTable value="#{managedBordStatistique.syntheseF.mensualites}" var="mens" id="table_fsseur_ret_dash" rowKey="#{mens.id}">
                                    <p:column headerText="#{lab.L_date}" style="text-align: center" styleClass="statut_#{mens.etat}">
                                        <h:outputText value="#{mens.dateMensualite}" converter="DATE"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_montant}" style="text-align: right" styleClass="statut_#{mens.etat}">
                                        <h:outputText value="#{mens.montant}" converter="DN"/>                                            
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_avance}" style="text-align: right" styleClass="statut_#{mens.etat}">
                                        <h:outputText value="#{mens.avance}" converter="DN"/>                                         
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_reste}" style="text-align: right" styleClass="statut_#{mens.etat}">
                                        <h:outputText value="#{mens.montantRest}" converter="DN"/>                                           
                                    </p:column>
                                </p:dataTable> 
                            </div>
                            <div class="zone_bottom">
                                <p:contextMenu for="btn_fsseur_ret_dash" event="left click" styleClass="context_menu" style="width: 210px">
                                    <p:menuitem value="#{lab.L_charger}" icon="ui-icon-refresh" actionListener="#{managedBordStatistique.loadDataEcheancierFsseur()}" update="table_fsseur_ret_dash"/>
                                    <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-print" global="false" actionListener="#{managedBordStatistique.printDashBoardFsseur('F', false)}" ajax="false"/>                                    
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px;float: left" id="btn_fsseur_ret_dash" type="button"/>
                            </div>  
                        </div>  
                        <div style="clear: both; height: 10px; width: 100%"></div>
                        <div id="zone_acomptes_fournisseur" class="block_slide" style="float: left;width: 49.25%;height: 350px">
                            <span class="block_slide_title" onclick="slideShow('zone_acomptes_fournisseur', 350)">
                                <span class="button_slide">[-]</span>
                                #{lab.LC_PTBC_acomptes}
                                <div style="float: right; font-weight: bold">
                                    Solde : <h:outputText id="txt_solde_acompte_fsseur_dash" value="#{managedBordStatistique.syntheseF.soldeAcompte}" converter="DN"/>
                                </div>
                            </span>
                            <div class="zone_slide" style="height: 300px">
                                <p:dataTable value="#{managedBordStatistique.syntheseF.acomptes}" var="rec" rowKey="#{rec.id}" id="table_fsseur_acomp_dash">
                                    <p:column headerText="N°" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                        <h:outputText value="#{rec.numRefrence}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_date_acomptes}" sortBy="#{rec.dateAcompte}" style="text-align: center" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                        <h:outputText value="#{rec.dateAcompte}" converter="DDMMYYYY"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_caisse}" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                        <h:outputText value="#{rec.caisse.intitule}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_montant}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                        <h:outputText value="#{rec.montant}" converter="DN"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTBC_reste}" style="width: 17%;text-align: right" styleClass="statut_#{managedOperationFournisseur.giveStringStatut(rec.statut)}">
                                        <h:outputText value="#{rec.reste}" converter="DN"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                            <div class="zone_bottom">
                                <p:contextMenu for="btn_fsseur_acomp_dash" event="left click" styleClass="context_menu" style="width: 210px">
                                    <p:menuitem value="#{lab.L_charger}" icon="ui-icon-refresh" actionListener="#{managedBordStatistique.loadDataAcompteFsseur()}" update="table_fsseur_acomp_dash txt_solde_acompte_fsseur_dash txt_solde_fsseur_dash"/>
                                    <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-print" global="false" actionListener="#{managedBordStatistique.printDashBoardFsseur('A', false)}" ajax="false"/>                                    
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px;float: left" id="btn_fsseur_acomp_dash" type="button"/>
                            </div>
                        </div>
                        <div id="zone_autres_fournisseur" class="block_slide" style="float: right;width: 49.25%;height: 350px">
                            <span class="block_slide_title" onclick="slideShow('zone_autres_fournisseur', 350)">
                                <span class="button_slide">[-]</span>
                                #{lab.LC_PTBC_autres}
                            </span> 
                            <div class="zone_slide" style="height: 300px">

                            </div>
                            <div class="zone_bottom">

                            </div>  
                        </div>                         
                        <div style="clear: both; height: 10px; width: 100%"></div>
                        <div id="zone_progress_fournisseur" class="block_slide" style="height: 350px;width: 99.5%;">                     
                            <span class="block_slide_title" onclick="slideShow('zone_progress_fournisseur', 350)">
                                <span class="button_slide">[-]</span>
                                #{lab.LC_PTBC_progression}
                            </span>   
                            <div class="zone_slide" style="height: 300px;width: 99.25%;">

                            </div>  
                            <div class="zone_bottom">

                            </div> 
                        </div>    
                    </p:outputPanel>
                </div>
                <div class="yvs_list_tb_fsseur" style="width: 100%; margin: auto">
                    <div  class="part_list">
                        <div class="block_slide" style="height: 350px">                     
                            <span class="block_slide_title">
                                #{lab.LC_PTBC_comparatif_fournisseur}
                            </span>   
                            <div  class="zone_slide" style="height: 300px">

                            </div>  
                            <div class="zone_bottom">

                            </div> 
                        </div> 
                    </div>
                </div>
                <div class="yvs_grid_tb_fsseur" style="width: 100%; margin: auto">
                    <div  class="part_list">
                        <p:dataTable id="data_fournisseur_tb" value="#{managedFournisseur.fournisseurs}" var="fsseur" 
                                     rowKey="#{fsseur.id}" rowIndexVar="fsseurIdx" selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{managedBordStatistique.loadOnViewFournisseur}" update=":main_tb_fsseur:data_fournisseur_tb" oncomplete="collapseForm('tb_fsseur'); slideAll()"/>
                            <p:column headerText="Solde" style="display: none">
                                <h:outputText value="#{managedFournisseur.creanceByAgence(managedBordStatistique.agence, fsseur, managedBordStatistique.dateDebut, managedBordStatistique.dateFin)}" converter="DN"/>
                            </p:column>
                            <p:column headerText="N°" style="width: 5%">
                                <span>#{fsseurIdx+1}</span>
                                <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{fsseur.id eq managedBordStatistique.idFsseur}"/> 
                                <h:graphicImage library="img"  name="#{(fsseur.actif)?'vu.png':'vu_non.png'}" width="15" height="15" title="#{(fsseur.actif)?'Activé':'Désactivé'}" style="float: right"/>
                            </p:column>
                            <p:column headerText="#{lab.L_code}" style="width: 10%">
                                <span>#{fsseur.codeFsseur}</span>
                                <h:outputText value="#{lab.L_defaut}" rendered="#{fsseur.defaut}" style="float: right;font-weight: bold;font-size: 0.8em;font-style: italic;color: blue"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_tiers}" style="width: 10%;">
                                <span>#{fsseur.tiers.codeTiers}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_nom_prenom}" style="width: 20%">
                                <span>#{fsseur.nom_prenom}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_region}" style="width: 15%">
                                <span>#{fsseur.tiers.region}</span>
                            </p:column>
                            <p:column headerText="S.I" style="text-align: right;width: 10%">
                                <h:outputText value="#{fsseur.soldeInitial}" converter="DN"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_credit}" style="text-align: right;color: blue;width: 10%">
                                <h:outputText value="#{fsseur.acompte + fsseur.credit}" converter="DN"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_debit}" style="text-align: right;width: 10%">
                                <h:outputText value="#{fsseur.creance + fsseur.debit}" converter="DN"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTBC_solde}" style="text-align: right;width: 10%">
                                <h:outputText value="#{-(fsseur.solde)}" converter="DN" style="color: #{fsseur.solde lt 0?'#990000':'black'}"/>
                            </p:column>
                        </p:dataTable>   
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(false, false)}" update="data_fournisseur_tb" 
                                             icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedFournisseur.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedFournisseur.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedFournisseur.gotoPagePaginator()}" update="data_fournisseur_tb"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(true, false)}" update="data_fournisseur_tb"
                                             icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFournisseur.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFournisseur.choosePaginator}" 
                                             style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedFournisseur.paginations}"/>
                                <p:ajax event="valueChange" update="data_fournisseur_tb"/>
                            </p:selectOneMenu>
                        </p:outputPanel>    
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" id="main_search_tb_fsseur">
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>                    
            <div class="zone_find" style="height: 60px">
                <h:panelGrid columns="2" style="width: 100%">
                    <h:panelGrid id="blog_fsseur_dash" columns="6" style="font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LC_PTBC_fournisseur} " />
                        <h:outputText value="#{lab.LC_PTBC_groupe}" />
                        <h:outputText value="#{lab.LC_PTBC_compte}" />
                        <h:outputText value="#{lab.L_pays}" />
                        <h:outputText value="#{lab.L_ville}" />
                        <h:outputText value="" />
                        <h:inputText value="#{managedBordStatistique.codeFsseur}" style="color: #{(managedBordStatistique.syntheseF.fournisseur.error)?'true':'inherit'}">
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.findOneFsseur(managedBordStatistique.codeFsseur)}" 
                                    update="@this blog_fsseur_dash :main_tb_fsseur:data_fournisseur_tb"/>
                        </h:inputText>      
                        <h:selectOneMenu value="#{managedFournisseur.groupeSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedCategorieFsseur.categories}" var="cats" 
                                           itemLabel="#{cats.libelle}" itemValue="#{cats.id}" />
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.addParamGroupeFsseur()}" 
                                    update="blog_fsseur_dash :main_tb_fsseur:data_fournisseur_tb" oncomplete="slideAll()"/>                              
                        </h:selectOneMenu>      
                        <h:inputText value="#{managedFournisseur.compteSearch}" style="width: 140px">
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.addParamCompteFsseur()}" 
                                    update="blog_fsseur_dash :main_tb_fsseur:data_fournisseur_tb" oncomplete="slideAll()"/>
                        </h:inputText>
                        <h:selectOneMenu value="#{managedFournisseur.paysSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{Mdico.pays}" var="pyss" 
                                           itemLabel="#{pyss.libele}" itemValue="#{pyss.id}" />                                    
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.addParamPaysFsseur()}" 
                                    update="ville_tb_fsseur_search blog_fsseur_dash :main_tb_fsseur:data_fournisseur_tb" oncomplete="slideAll()"/>
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{managedFournisseur.villeSearch}" id="ville_tb_fsseur_search" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{Mdico.villes}" var="dics" 
                                           itemLabel="#{dics.libele}" itemValue="#{dics.id}" />                               
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.addParamVilleFsseur()}" 
                                    update="blog_fsseur_dash :main_tb_fsseur:data_fournisseur_tb" oncomplete="slideAll()"/>
                        </h:selectOneMenu> 
                    </h:panelGrid>  
                    <h:panelGrid id="blog_search_2nd_dash_fsseur" columns="5" style="font-size: 0.8em;float: right" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LDB_PD_agence}" />
                        <h:outputText value="#{lab.LC_PTBC_exercice}" />
                        <h:outputText value="#{lab.LC_PTBC_periodicite}" />
                        <h:outputText value="#{lab.L_dates}" />
                        <h:outputText value="" />
                        <h:selectOneMenu value="#{managedBordStatistique.agence}">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedAgence.listAgence}" var="ag" itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                            <p:ajax event="valueChange" global="false" oncomplete="slideAll()"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedBordStatistique.exercice}">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedExercice.exercices}" var="ox" itemLabel="#{ox.reference}" itemValue="#{ox.id}"/>
                            <p:ajax event="valueChange" listener="#{managedBordStatistique.chooseExercice()}" oncomplete="slideAll()"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedBordStatistique.periode}">
                            <f:selectItem itemLabel="#{lab.LC_PTBS_annuel}" itemValue="A" />
                            <f:selectItem itemLabel="#{lab.LC_PTBS_trimestriel}" itemValue="T" />
                            <f:selectItem itemLabel="#{lab.LC_PTBS_mensuel}" itemValue="M" />
                            <f:selectItem itemLabel="#{lab.LC_PTBS_journalier}" itemValue="J" />
                            <p:ajax event="valueChange" global="false" oncomplete="slideAll()"/>
                        </h:selectOneMenu>
                        <h:panelGroup id="table_table_client_db">
                            <p:calendar value="#{managedBordStatistique.dateDebut}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                            <p:calendar value="#{managedBordStatistique.dateFin}" pattern="dd-MM-yyyy" navigator="true" size="10"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:commandButton icon="ui-icon-refresh" title="Charger" actionListener="#{managedBordStatistique.loadDataFsseur()}" 
                                             update=":main_tb_fsseur:form_tb_fsseur"  oncomplete="slideAll()" id="other_tb_fsseur"/>
                            <p:commandButton icon="ui-icon-refresh" title="Actualiser" actionListener="#{managedFournisseur.loadAllFournisseur(true, true)}" 
                                             update=":main_tb_fsseur:data_fournisseur_tb" oncomplete="slideAll()" id="must_option_tb_fsseur"/>
                        </h:panelGroup>
                    </h:panelGrid>
                </h:panelGrid> 
            </div>
        </h:form>
    </ui:define>
</ui:composition>