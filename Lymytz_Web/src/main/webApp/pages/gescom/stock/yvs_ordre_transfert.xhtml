<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="contents"> 
        #{managedOrdreTransfert.loadAll()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 140);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('ordre_transfert');
                collapseForm('contenu_ordre_transfert');
                collapseForm('cout_ordre_transfert');
                collapseList('transfert_stock_');
            });
        </script>

        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedOrdreTransfert.updateBean()}"/>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="Commentaire" widgetVar="dlgAddCommentaire" modal="true" width="26%"  closeOnEscape="true"> 
                <h:inputTextarea value="#{managedOrdreTransfert.commentaire}" style="width: 99%" rows="5" id="txt_commentaire_contenu_ordre_transfer"/>
                <p:commandButton actionListener="#{managedOrdreTransfert.addCommentaireContenu()}" style="width: 99%"
                                 oncomplete="dlgAddCommentaire.hide()" value="Enregistrer"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="Liste des articles" widgetVar="dlgListArticle" modal="true" width="50%"  closeOnEscape="true"> 
                <p:dataTable id="data_articles_ordre_stock" value="#{managedOrdreTransfert.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false" >
                    <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"/>
                    <p:column filterBy="#{art.refArt}" style="width: 2%">
                        <span title="#{art.designation}">#{art.refArt}</span>
                    </p:column>
                    <p:column headerText="Designation" style="width: 6%">
                        <span title="#{art.designation}">#{art.designation}</span>
                    </p:column>
                    <p:column headerText="Categorie" style="width: 4%">
                        <span title="#{art.designation}">#{art.categorie}</span>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgAddCategorieComp_2">
            <p:dialog id="dlgAddCategorieComp_2" header="Création Catégorie Comptable" widgetVar="dlgAddCategorieComp" 
                      modal="true" width="25%"  closeOnEscape="true"> 
                <p:panelGrid columns="2" style="width: 98%;margin: auto" id="form_categorie_taxe2">
                    <span>Code Appel</span>
                    <h:inputText value="#{managedOrdreTransfert.categorie.codeAppel}"/>
                    <span>Code Categorie</span>
                    <h:inputText value="#{managedOrdreTransfert.categorie.codeCategorie}"/>
                    <span>Nature</span>
                    <h:inputText value="#{managedOrdreTransfert.categorie.nature}"/>
                </p:panelGrid>
                <p:commandButton actionListener="#{managedOrdreTransfert.saveNewCategorie()}" style="width: 100%"
                                 update="form_categorie_taxe2" oncomplete="dlgAddCategorieComp.hide()"
                                 value="Enregistrer"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des depots
        *****************************************************************************
        <-->  

        <h:form prependId="false" id="form_dlgListDepots_0">                    
            <p:dialog id="dlgListDepots_0" header="Liste des depots" widgetVar="dlgListDepots" 
                      closeOnEscape="true" width="60%" height="500" modal="true" dynamic="true">                                  
                <p:dataTable id="data_depot_0"  value="#{managedOrdreTransfert.depotsReception}" var="dep_" rowKey="#{dep_.id}"
                             selectionMode="single" rowIndexVar="depIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewDepot}" oncomplete="dlgListDepots.hide()"/>
                    <p:column headerText="N°" style="width: 5%;text-align: center">
                        <span>#{depIdx+1}</span>
                    </p:column>
                    <p:column headerText="Code">
                        <span>#{dep_.code}</span>
                    </p:column>
                    <p:column headerText="Designation">
                        <span>#{dep_.designation}</span>
                    </p:column>
                </p:dataTable>   
                <f:facet name="footer">
                    <h:panelGrid columns="4" style="float: right" id="nav_depot0">
                        <p:commandLink disabled="#{managedOrdreTransfert.disablePrev}"  actionListener="#{managedOrdreTransfert.loadAllDepots(true,false)}"
                                       update="nav_depot0 data_depot_0">
                            <h:graphicImage style="border:none; margin-left: 1em; cursor: pointer;"  alt="img" library="img"  name="dnavigation.png" width="30" height="25"/>                        
                        </p:commandLink>
                        <span >Page #{managedOrdreTransfert.currentPage} / #{managedOrdreTransfert.totalPage}</span>
                        <p:commandLink  disabled="#{managedOrdreTransfert.disableNext}" actionListener="#{managedOrdreTransfert.loadAllDepots(true,false)}"
                                        update="nav_depot0 data_depot_0">
                            <h:graphicImage style="border:none; margin-left: 1em; cursor: pointer;"  alt="img" library="img"  name="gnavigation.png" width="30" height="25"/>                                                        
                        </p:commandLink>                                                        
                        <span>(#{managedOrdreTransfert.nbMax} Lignes par page) </span>
                    </h:panelGrid> 
                </f:facet>
            </p:dialog>
        </h:form>

        <h:form prependId="false">                    
            <p:dialog header="Liste des depots" widgetVar="dlgListDepots_"  closeOnEscape="true" width="60%" height="500" modal="true" dynamic="true">                                  
                <p:dataTable id="data_depot_order_transfert"  value="#{managedOrdreTransfert.depotsSource}" var="dep_" rowKey="#{dep_.id}"
                             selectionMode="single" rowIndexVar="depIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewDepot_}" oncomplete="dlgListDepots_.hide()"/>
                    <p:column headerText="N°" style="width: 5%;text-align: center">
                        <span>#{depIdx+1}</span>
                    </p:column>
                    <p:column headerText="Code">
                        <span>#{dep_.code}</span>
                    </p:column>
                    <p:column headerText="Designation">
                        <span>#{dep_.designation}</span>
                    </p:column>
                </p:dataTable>  
            </p:dialog>
        </h:form>


        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanContenu()}" oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('contenu_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanContenu_()}" oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('contenu_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticleO" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanContenuO()}" oncomplete="dlgConfirmDeleteArticleO.hide();collapseForm('contenu_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticleO.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticleO_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanContenuO_()}" oncomplete="dlgConfirmDeleteArticleO_.hide();collapseForm('contenu_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticleO_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanCout()}" oncomplete="dlgConfirmDeleteCout.hide();collapseForm('cout_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteCout.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBeanCout_()}" oncomplete="dlgConfirmDeleteCout_.hide();collapseForm('cout_ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteCout_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBean()}" oncomplete="dlgConfirmDelete.hide()"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide()"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="Cet ordre a des transferts inactifs...l'annulation va les supprimer. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.annulerOrder_()}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmAnnuler.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuser" closeOnEscape="true"
                             message="Cet ordre a des transferts inactifs...l'annulation va les supprimer. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.refuserOrder_()}" oncomplete="dlgConfirmRefuser.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmRefuser.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmSoumis" closeOnEscape="true"
                             message="La transmission de cet ordre va generer une fiche de transfert. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.transmisOrder()}" oncomplete="dlgConfirmSoumis.hide();collapseForm('ordre_transfert')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmSoumis.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanStock" closeOnEscape="true"
                             message="Cette action supprimera toutes les documents sans contenus... Elle est irreversible!" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedOrdreTransfert.cleanStock()}" oncomplete="dlgCleanStock.hide()"/>
                <p:commandButton type="button"  value="Non" onclick="dlgCleanStock.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_ordre_transfert">    
            <div class="part_fix">
                <h:panelGroup id="save_transfert_stock_">
                    <p:commandButton value="Enregistrer" actionListener="#{managedOrdreTransfert.saveNew_()}"/>
                    <p:commandButton value="Enregistrer Tout" actionListener="#{managedOrdreTransfert.saveAll()}"/>
                </h:panelGroup>
                <p:commandButton value="Enregistrer" id="save_ordre_transfert" actionListener="#{managedOrdreTransfert.saveNew()}" update="form_entete_order_transfert infos_document_order_transfert"/>
                <p:commandButton value="Nouveau" id="cancel_ordre_transfert" global="false" actionListener="#{managedOrdreTransfert.resetFiche()}" update="blog_form_ordre_transfert" oncomplete="collapseForm('ordre_transfert');collapseForm('contenu_ordre_transfert')"/>
                <p:commandButton value="Modifier" rendered="false" id="update_ordre_transfert" actionListener="#{managedOrdreTransfert.updateBean()}" oncomplete="collapseForm('ordre_transfert');return false"/>
                <p:commandButton value="Supprimer" id="delete_ordre_transfert" onclick="dlgConfirmDelete.show()" global="false"/>
                <div style="float: right">
                    <h:link title="mode création" onclick="collapseForm('ordre_transfert');
                            collapseList('transfert_stock_');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="vue liste" onclick="collapseList('ordre_transfert');
                            collapseList('transfert_stock_');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>   
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_ordre_transfert">
                    <p:outputPanel id="blog_form_ordre_transfert" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="1" style="width: 100%">
                            <h:panelGrid id="form_entete_order_transfert" columns="2" styleClass="yvs_nostyle" style="width: 100%">
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white" rendered="#{managedOrdreTransfert.docStock.update}">                                            
                                    <span style="font-size: initial">Numéro : </span>
                                    <h:outputText id="txt_reference_document8" value="#{managedOrdreTransfert.docStock.numDoc}"
                                                  style="font-size: large"/>
                                </h:panelGrid>
                                <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: 1%" rendered="#{managedOrdreTransfert.docStock.update}">
                                    <p:outputPanel id="grp_btn_etat_order_transfert" styleClass="yvs_form_of">                                    
                                        <p:commandLink value="Editable" styleClass="button-stateOF #{(managedOrdreTransfert.docStock.statut == constantes.ETAT_EDITABLE)?'button-stateOF_actif':''}" 
                                                       disabled="#{!(managedOrdreTransfert.docStock.statut == constantes.ETAT_VALIDE
                                                                   or managedOrdreTransfert.docStock.statut == constantes.ETAT_ANNULE
                                                                   or managedOrdreTransfert.docStock.statut == constantes.ETAT_SOUMIS)}"
                                                       actionListener="#{managedOrdreTransfert.annulerOrder()}"
                                                       process="@this" update="grp_btn_etat_order_transfert infos_document_order_transfert" global="false"/>
                                        <p:commandLink value="Valider" styleClass="button-stateOF #{(managedOrdreTransfert.docStock.statut==constantes.ETAT_VALIDE)?'button-stateOF_actif':''}" 
                                                       disabled="#{(managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE)}" 
                                                       actionListener="#{managedOrdreTransfert.validerOrder()}"
                                                       process="@this" update="grp_btn_etat_order_transfert infos_document_order_transfert" global="false"/>
                                        <p:commandLink value="Annuler" styleClass="button-stateOF #{(managedOrdreTransfert.docStock.statut==constantes.ETAT_ANNULE)?'button-stateOF_actif':''}" 
                                                       disabled="#{(managedOrdreTransfert.docStock.statut != constantes.ETAT_VALIDE)}" 
                                                       actionListener="#{managedOrdreTransfert.refuserOrder()}"
                                                       process="@this" update="grp_btn_etat_order_transfert infos_document_order_transfert" global="false"/>
                                        <p:commandLink value="Transmis" styleClass="button-stateOF #{(managedOrdreTransfert.docStock.statut==constantes.ETAT_SOUMIS)?'button-stateOF_actif':''}" 
                                                       disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_VALIDE}" 
                                                       onclick="dlgConfirmSoumis.show()"
                                                       process="@this" update="grp_btn_etat_order_transfert infos_document_order_transfert" global="false"/>
                                        <p:commandLink value="#{(managedOrdreTransfert.docStock.cloturer)?'Ouvrir':'Cloturer'}" styleClass="button-stateOF" 
                                                       actionListener="#{managedOrdreTransfert.cloturer()}"
                                                       process="@this" update="grp_btn_etat_order_transfert infos_document_order_transfert" global="false"/>
                                    </p:outputPanel>                                                
                                </h:panelGroup>                                     
                            </h:panelGrid> 
                            <p:outputPanel style="width: 100%">
                                <div style="width: 40%;float: left">
                                    <h:panelGrid id="infos_document_order_transfert" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                        <span>Depot.Rec </span>  
                                        <h:selectOneMenu value="#{managedOrdreTransfert.docStock.destination.id}" id="select_destinataire_ordre_transfert"
                                                         disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}" title="Dépôt de reception">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedOrdreTransfert.depotsReception}" var="depD" 
                                                           itemLabel="#{depD.designation}" itemValue="#{depD.id}" />                                    
                                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseDepotDestinataire()}"
                                                    update="select_source_ordre_transfert select_creneau_destination"/>
                                        </h:selectOneMenu> 
                                        <span>Créneau.Rec </span>  
                                        <h:selectOneMenu id="select_creneau_destination" value="#{managedOrdreTransfert.docStock.creneauDestinataire.id}"
                                                         disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}" title="créneau du dépôt de reception">
                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{managedOrdreTransfert.creneauxDestination}" var="crenD" 
                                                           itemLabel="#{crenD.semiReference}" itemValue="#{crenD.id}" />                                      
                                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseCreneauDestinataire()}"/>
                                        </h:selectOneMenu> 
                                        <span>Depot.Source </span>  
                                        <h:selectOneMenu value="#{managedOrdreTransfert.idDepot}" id="select_source_ordre_transfert"
                                                         disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}" title="Dépôt source">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedOrdreTransfert.depotsSource}" var="depS" 
                                                           itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                             
                                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseDepotSource()}"
                                                    update="select_creneau_source"/>
                                        </h:selectOneMenu> 
                                        <span>Créneau.Src </span>  
                                        <h:selectOneMenu id="select_creneau_source" value="#{managedOrdreTransfert.idCreneau}"
                                                         disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}" title="créneau du dépôt source">
                                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                            <f:selectItems value="#{managedOrdreTransfert.creneauxSource}" var="crenS" 
                                                           itemLabel="#{crenS.semiReference}" itemValue="#{crenS.id}" />                                      
                                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseCreneauSource()}"/>
                                        </h:selectOneMenu> 
                                        <span>Date </span>
                                        <p:calendar value="#{managedOrdreTransfert.docStock.dateDoc}" navigator="true" pattern="dd-MM-yyyy"
                                                    disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}" size="10">
                                            <p:ajax event="dateSelect" global="false" listener="#{managedOrdreTransfert.chooseDateDoc()}"
                                                    update="select_creneau_destination"/>                                                    
                                        </p:calendar>
                                        <span title="Numero de piece externe">Reference</span>
                                        <h:inputText value="#{managedOrdreTransfert.docStock.numPiece}" disabled="#{managedOrdreTransfert.docStock.statut != constantes.ETAT_EDITABLE}"
                                                     title="Numero de piece externe" style="width: 98%"/>
                                    </h:panelGrid>
                                </div>                                        
                                <div style="width: 59%;margin-left: 41%">
                                    <p:outputPanel>
                                        <div style="width: 100%;background: black;padding-bottom: 10px;margin: auto;color: white">
                                            <span style="margin-left: 10%;font-size: 1.2em;font-weight: bold">Dernièrs ordres en cours</span>
                                        </div>
                                        <p:dataTable id="data_ordre_transfert_hist" value="#{managedOrdreTransfert.transfertsHist}" var="bonH" rowKey="#{bonH.id}" 
                                                     rowIndexVar="bonHIdx" selectionMode="single" scrollable="true" scrollHeight="85">
                                            <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnView_}"  oncomplete="collapseForm('ordre_transfert');collapseForm('contenu_ordre_transfert');collapseForm('cout_ordre_transfert')"/>
                                            <p:ajax event="rowUnselect" global="false" listener="#{managedOrdreTransfert.unLoadOnView_}"  oncomplete="collapseForm('ordre_transfert');collapseForm('contenu_ordre_transfert')"/>
                                            <p:column headerText="N°" style="width: 7%" styleClass="statut_#{bonH.statut}">
                                                <h:graphicImage title="Cloturer" library="img" name="blocked.png" width="15" height="15" rendered="#{bonH.cloturer}"/>     
                                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{bonH.new_}"/>
                                                <span>#{bonHIdx+1}</span>
                                            </p:column>
                                            <p:column headerText="Reference" style="width: 25%" styleClass="statut_#{bonH.statut}">
                                                <span>#{bonH.numDoc}</span>
                                                <h:graphicImage library="img" name="piece_jointe_00.png" width="15" height="15" rendered="#{bonH.liee}" title="Rattacher à des transferts" style="float: right"/>     
                                            </p:column>
                                            <p:column headerText="Depot Reception" styleClass="statut_#{bonH.statut}">
                                                <span>#{bonH.destination.designation}</span>
                                            </p:column>
                                            <p:column headerText="Depot Source" styleClass="statut_#{bonH.statut}">
                                                <span>#{bonH.source.designation}</span>
                                            </p:column>
                                            <p:column style="width: 5%;text-align: center" styleClass="statut_#{bonH.statut}">
                                                <p:commandLink global="false">
                                                    <h:graphicImage title="Imprimer" library="img" name="pdf.png" width="15" height="15"/>                                        
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable> 
                                    </p:outputPanel>
                                </div>
                            </p:outputPanel>
                            <h:panelGrid columns="1" style="width: 100%" styleClass="yvs_table">
                                <f:facet name="header">
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%">
                                        <b><span> Contenus</span></b>
                                        <p:commandButton icon="ui-icon-plusthick" style="float: right;width: 20px;height: 20px"
                                                         title="Ajouter contenu" id="btnAddContenuOrdre" type="button"/>
                                    </h:panelGrid>
                                </f:facet>
                                <p:outputPanel id="blog_form_contenu_ordre_transfert">
                                    <p:overlayPanel for="btnAddContenuOrdre" hideEffect="fade" style="width: 40%">
                                        <h:panelGrid id="form_contenu_ordre_transfert" columns="2" styleClass="yvs_table" style="width: 100%"> 
                                            <f:facet name="header">
                                                <h:panelGroup>
                                                    <span>Ref.Article : </span>       
                                                    <h:panelGroup>
                                                        <h:inputText value="#{managedOrdreTransfert.contenu.article.refArt}" style="color: #{managedOrdreTransfert.contenu.article.error?'red':''}">
                                                            <p:ajax event="blur" global="false" listener="#{managedOrdreTransfert.searchArticle()}" update="form_contenu_ordre_transfert"/>
                                                        </h:inputText>    
                                                        <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px" title="Liste Articles" global="false"
                                                                         actionListener="#{managedOrdreTransfert.initArticles()}" oncomplete="dlgListArticle.show()"/>
                                                    </h:panelGroup>                                                    
                                                </h:panelGroup>
                                            </f:facet>
                                            <span>Article </span> 
                                            <h:inputText value="#{managedOrdreTransfert.contenu.article.designation}" readonly="true" style="width: 98%"/>
                                            <span>Stock </span> 
                                            <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                                                <h:panelGroup>
                                                    <span>Source </span>
                                                    <h:inputText value="#{managedOrdreTransfert.contenu.article.stock}" readonly="true" style="width: 40%;text-align:right" title="Stock du dépôt source" converter="DN"/>
                                                </h:panelGroup>
                                                <h:panelGroup style="float: right">
                                                    <span>Destination </span> 
                                                    <h:inputText value="#{managedOrdreTransfert.contenu.article.stock_}" readonly="true" style="width: 40%;text-align:right" title="Stock du dépôt destinataire" converter="DN"/>
                                                </h:panelGroup>
                                            </h:panelGrid>                                            
                                            <span>Quantite </span>
                                            <pe:inputNumber value="#{managedOrdreTransfert.contenu.quantite}"/>
                                            <span>Prix </span>
                                            <pe:inputNumber value="#{managedOrdreTransfert.contenu.prix}" symbol=" Fcfa" symbolPosition="suffixe"/>
                                        </h:panelGrid>
                                        <div style="width: 100%;margin-top: 5px">
                                            <p:commandButton id="cancel_contenu_ordre_transfert" value="Nouveau" style="float: left" oncomplete="collapseForm('contenu_ordre_transfert')"
                                                             update="blog_form_contenu_ordre_transfert" actionListener="#{managedOrdreTransfert.resetFicheContenu()}" global="false"/>
                                            <p:commandButton id="save_contenu_ordre_transfert" value="Enregistrer" style="float: right" oncomplete="collapseForm('contenu_ordre_transfert')"
                                                             update="blog_form_contenu_ordre_transfert" actionListener="#{managedOrdreTransfert.saveNewContenu()}"/>
                                        </div>
                                    </p:overlayPanel>
                                    <h:inputHidden id="input_hide_contenu_ordre_transfert" value="#{managedOrdreTransfert.tabIds_contenu}"/>
                                    <p:dataTable id="data_contenu_ordre_transfert" value="#{managedOrdreTransfert.docStock.contenus}" var="artf" rowKey="#{artf.id}" 
                                                 rowIndexVar="artfIdx" selectionMode="single">
                                        <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewContenu}"/>
                                        <p:ajax event="rowUnselect" global="false" listener="#{managedOrdreTransfert.unLoadOnViewContenu}"/>
                                        <p:column headerText="N°" style="width: 7%">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                            <span title="#{artf.dateSave.toString()}">#{artfIdx+1}</span>
                                        </p:column>
                                        <p:column filterBy="#{artf.article.refArt}" style="width: 15%">
                                            <span title="#{artf.dateSave.toString()}">#{artf.article.refArt}</span>
                                            <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" style="float: right" title="a été commenté"/>
                                        </p:column>
                                        <p:column headerText="Article">
                                            <span title="#{artf.dateSave.toString()}">#{artf.article.designation}</span>
                                        </p:column>
                                        <p:column headerText="Quantité" style="text-align: right;width: 10%">
                                            <h:outputText value="#{artf.quantite}" converter="DN" title="#{artf.dateSave.toString()}"/>
                                        </p:column>
                                        <p:column headerText="Prix" style="text-align: right;width: 12%">
                                            <h:outputText value="#{artf.prix}" converter="DN" title="#{artf.dateSave.toString()}"/>
                                        </p:column>
                                        <p:column headerText="Montant Total" style="text-align: right;width: 15%">
                                            <h:outputText value="#{artf.prixTotal}" converter="DN" title="#{artf.dateSave.toString()}"/>
                                        </p:column>
                                        <p:column style="width: 5%;text-align: center">
                                            <p:contextMenu for="btn_option_contenu_ordre_transfert" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="Ajouter Note" icon="ui-icon-comment" global="false" actionListener="#{managedOrdreTransfert.addCommentaireContenu(artf)}" oncomplete="dlgAddCommentaire.show()"/>
                                                <p:menuitem value="Supprimer" icon="ui-icon-trash" global="false" actionListener="#{managedOrdreTransfert.deleteBeanContenu_(artf)}" oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_ordre_transfert" type="button"/>
                                        </p:column> 
                                        <p:column style="width: 5%;text-align: center">
                                            <f:facet name="header">
                                                <h:selectBooleanCheckbox styleClass="chek_all_line_contenu_ordre_transfert" value="false"
                                                                         onclick="selectionAllLineTab(#{managedOrdreTransfert.docStock.contenus.size()}, 'contenu_ordre_transfert')">
                                                </h:selectBooleanCheckbox>
                                            </f:facet>
                                            <h:selectBooleanCheckbox value="#{artf.selectActif}" styleClass="chek_line_contenu_ordre_transfert" title="#{artf.dateSave.toString()}" 
                                                                     onclick="selectionLineTab(#{artf.id}, 'contenu_ordre_transfert')">
                                            </h:selectBooleanCheckbox>
                                        </p:column>
                                    </p:dataTable>
                                    <p:commandButton id="delete_contenu_ordre_transfert" value="Supprimer" style="float: right"
                                                     onclick="dlgConfirmDeleteArticle.show()" global="false"/>
                                </p:outputPanel>
                            </h:panelGrid>
                            <h:panelGrid columns="2" rendered="#{managedOrdreTransfert.docStock.update}" styleClass="yvs_nostyle"
                                         style="float: right;font-style: italic;margin-top: 5px">
                                <span>Date Edition : </span>
                                <h:outputText value="#{managedOrdreTransfert.docStock.dateSave}" converter="DATETIME"/>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_ordre_transfert" style="width: 100%; margin: auto">
                    <div  class="part_list">
                        <h:inputHidden id="input_hide_ordre_transfert" value="#{managedOrdreTransfert.tabIds}"/>
                        <p:contextMenu for="data_ordre_transfert">
                            <p:menuitem icon="ui-icon-document" value="Fiche Transfert" actionListener="#{managedOrdreTransfert.initTransfertStock()}" rendered="false"
                                        oncomplete="collapseGrid('ordre_transfert');collapseForm('transfert_stock_');collapseForm('contenu_order_stock')" global="false"/>
                            <p:menuitem icon="ui-icon-grip-solid-horizontal" value="Supprimer Doublons" actionListener="#{managedOrdreTransfert.removeDoublon()}" global="false"/>
                        </p:contextMenu>
                        <p:dataTable id="data_ordre_transfert" value="#{managedOrdreTransfert.transferts}" var="bon" rowKey="#{bon.id}" 
                                     rowIndexVar="bonIdx" selectionMode="single" selection="#{managedOrdreTransfert.selectDoc_}"
                                     paginator="true" rows="100" paginatorAlwaysVisible="false">
                            <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnView}"  oncomplete="collapseForm('ordre_transfert');collapseForm('contenu_ordre_transfert');collapseForm('cout_ordre_transfert')"/>
                            <p:column width="30" headerText="N°" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="Cloturer" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>     
                                <span title="#{bon.dateSave.toString()}">#{bonIdx+1}</span>
                            </p:column>
                            <p:column headerText="Reference" style="width: 15%" styleClass="statut_#{bon.statut}">
                                <span title="#{bon.dateSave.toString()}">#{bon.numDoc}</span>
                                <h:graphicImage library="img" name="piece_jointe_00.png" width="15" height="15" rendered="#{bon.liee}" title="Rattacher à des transferts" style="float: right"/>     
                            </p:column>
                            <p:column headerText="Date Ordre" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY" title="#{bon.dateSave.toString()}"/>
                            </p:column>
                            <p:column headerText="Depot Reception" style="width: 17%" styleClass="statut_#{bon.statut}">
                                <span title="#{bon.dateSave.toString()}">#{bon.destination.designation}</span>
                            </p:column>
                            <p:column headerText="Creneau Reception" styleClass="statut_#{bon.statut}">
                                <span title="#{bon.dateSave.toString()}">#{bon.creneauDestinataire.semiReference}</span>
                            </p:column>
                            <p:column headerText="Depot Source" style="width: 17%" styleClass="statut_#{bon.statut}">
                                <span title="#{bon.dateSave.toString()}">#{bon.source.designation}</span>
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <p:commandLink global="false">
                                    <h:graphicImage title="Imprimer" library="img" name="pdf.png" width="15" height="15"/>                                        
                                </p:commandLink>
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <p:contextMenu for="btn_option_ordre_transfert" event="left click" style="font-size: 0.8em">
                                    <p:menuitem icon="ui-icon-document" value="Fiche Transfert" actionListener="#{managedOrdreTransfert.initTransfertStock(bon)}" rendered="false"
                                                oncomplete="collapseGrid('ordre_transfert');collapseForm('transfert_stock_');collapseForm('contenu_order_stock')" global="false"/>
                                    <p:menuitem value="Supprimer Doublons" icon="ui-icon-grip-solid-horizontal" actionListener="#{managedOrdreTransfert.removeDoublon(bon)}" global="false"
                                                title="Suppression des articles en doublons dans la fiche"/>
                                    <p:menuitem value="Supprimer" icon="ui-icon-trash" global="false" actionListener="#{managedOrdreTransfert.deleteBean_(bon)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_ordre_transfert" type="button"/>
                            </p:column> 
                            <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_ordre_transfert" value="false"
                                                             onclick="selectionAllLineTab(#{managedOrdreTransfert.transferts.size()}, 'ordre_transfert')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{bon.selectActif}" styleClass="chek_line_ordre_transfert" title="#{bon.dateSave.toString()}" 
                                                          onclick="selectionLineTab(#{bon.id}, 'ordre_transfert')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                        </p:dataTable> 
                        <span class="nbSelectordre_transfert" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedOrdreTransfert.init(false)}" global="false" update="data_ordre_transfert" icon="ui-icon-circle-triangle-w" disabled="#{managedOrdreTransfert.disablePrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedOrdreTransfert.currentPage}/#{managedOrdreTransfert.totalPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedOrdreTransfert.init(true)}" global="false" update="data_ordre_transfert" icon="ui-icon-circle-triangle-e" disabled="#{managedOrdreTransfert.disableNext}"/>
                            <p:selectOneMenu value="#{managedOrdreTransfert.nbMax}" label="Nombre max Résultat" valueChangeListener="#{managedOrdreTransfert.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedOrdreTransfert.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_ordre_transfert"/>
                            </p:selectOneMenu>
                        </p:outputPanel>        
                    </div>                              
                </div> 
                <!-->
                 *****************************************************************************
                 Vue Grid
                 *****************************************************************************
                <-->
                <div class="yvs_grid_ordre_transfert">
                    <p:outputPanel id="blog_form_transfert_stock_" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="1" style="width: 100%">
                            <p:outputPanel style="width: 100%">
                                <div style="width: 35%;float: left">
                                    <fieldset class="header-panel">
                                        <legend>
                                            Informations Fiche Transfert
                                        </legend>
                                        <h:panelGrid columns="2" style="width: 100%;margin: auto;" styleClass="yvs_table">
                                            <span>Date </span>  
                                            <p:calendar value="#{managedOrdreTransfert.docSelect.dateDoc}" pattern="dd-MM-yyyy">
                                                <p:ajax event="dateSelect" global="false" listener="#{managedOrdreTransfert.chooseDateDoc_()}"
                                                        update="select_creneau_source_"/>
                                            </p:calendar>
                                            <span>Reception </span>  
                                            <h:selectOneMenu value="#{managedOrdreTransfert.docSelect.destination.id}" disabled="true">
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{managedOrdreTransfert.depotsReception}" var="depD_" 
                                                               itemLabel="#{depD_.designation}" itemValue="#{depD_.id}" />                                 
                                                <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseDepotDestinataire_()}"
                                                        update="select_creneau_destination_ select_source_ordre_transfert_"/>
                                            </h:selectOneMenu> 
                                            <span title="Créneau Reception">C.Reception </span>  
                                            <h:selectOneMenu value="#{managedOrdreTransfert.docSelect.creneauDestinataire.id}" id="select_creneau_destination_"
                                                             disabled="#{managedOrdreTransfert.docSelect.creneauDestinataire.id>0}">
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{managedOrdreTransfert.creneauxDestination}" var="crenD_" 
                                                               itemLabel="#{crenD_.semiReference}" itemValue="#{crenD_.id}" />                                      
                                                <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseCreneauDestinataire_()}"/>
                                            </h:selectOneMenu> 
                                            <span>Source </span>  
                                            <h:selectOneMenu value="#{managedOrdreTransfert.docSelect.source.id}" id="select_source_ordre_transfert_"
                                                             disabled="#{managedOrdreTransfert.docSelect.source.id>0}">
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{managedOrdreTransfert.depotsSource}" var="depS_" 
                                                               itemLabel="#{depS_.designation}" itemValue="#{depS_.id}" />                                 
                                                <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseDepotSource_()}"
                                                        update="select_creneau_source_"/>
                                            </h:selectOneMenu> 
                                            <span title="Créneau Source">C.Source </span>  
                                            <h:selectOneMenu value="#{managedOrdreTransfert.docSelect.creneauSource.id}" id="select_creneau_source_">
                                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                                <f:selectItems value="#{managedOrdreTransfert.creneauxSource}" var="crenS_" 
                                                               itemLabel="#{crenS_.semiReference}" itemValue="#{crenS_.id}" />                                 
                                                <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseCreneauSource_()}"/>
                                            </h:selectOneMenu> 
                                        </h:panelGrid>
                                    </fieldset>
                                </div>
                                <div style="width: 64%;margin-left: 36%">
                                    <fieldset class="header-panel">
                                        <legend>
                                            Contenu Ordre Transfert
                                        </legend>
                                        <p:dataTable id="data_contenu_order_stock_" value="#{managedOrdreTransfert.contenus}" var="artf_0" rowKey="#{artf_0.id}" 
                                                     rowIndexVar="artfIdx_0" selectionMode="single">
                                            <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewContenu_}"/>
                                            <p:ajax event="rowUnselect" global="false" listener="#{managedOrdreTransfert.unLoadOnViewContenu_}"/>
                                            <p:column filterBy="#{artf_0.article.refArt}" style="width: 20%">
                                                <span>#{artf_0.article.refArt}</span>
                                            </p:column>
                                            <p:column headerText="Article">
                                                <span>#{artf_0.article.designation}</span>
                                            </p:column>
                                            <p:column headerText="Qté.Dmdée" style="text-align: right;width: 12%">
                                                <h:outputText value="#{artf_0.quantite}" converter="DN"/>
                                            </p:column>
                                            <p:column headerText="Qté.Attent" style="text-align: right;width: 12%">
                                                <h:outputText value="#{artf_0.qteAttente}" converter="DN"/>
                                            </p:column>
                                            <p:column headerText="Qté.Rest" style="text-align: right;width: 12%">
                                                <h:outputText value="#{artf_0.qteRestant}" converter="DN"/>
                                            </p:column>
                                            <p:column headerText="Prix" style="text-align: right;width: 12%">
                                                <h:outputText value="#{artf_0.prix}" converter="DN"/>
                                            </p:column>
                                        </p:dataTable>
                                    </fieldset>
                                </div>
                            </p:outputPanel>
                            <br/>
                            <p:outputPanel>
                                <fieldset class="header-panel">
                                    <legend>
                                        Contenu Fiche
                                    </legend>
                                    <p:panelGrid columns="1" style="width: 100%">
                                        <p:outputPanel id="blog_form_contenu_order_stock">
                                            <div style="width: 35%;float: left">
                                                <h:panelGrid columns="1" style="width: 100%;margin: auto">
                                                    <h:panelGrid id="form_contenu_order_stock" columns="2" styleClass="yvs_table" style="width: 100%">  
                                                        <p:outputLabel value="Article "/>
                                                        <h:inputText value="#{managedOrdreTransfert.contenu_.article.designation}" readonly="true"/>
                                                        <span>Quantite </span>
                                                        <pe:inputNumber value="#{managedOrdreTransfert.contenu_.quantite}"/>
                                                        <span>Prix </span>
                                                        <pe:inputNumber value="#{managedOrdreTransfert.contenu_.prix}" symbol=" Fcfa" symbolPosition="suffixe"/>
                                                    </h:panelGrid>
                                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%;margin: auto">
                                                        <p:commandButton id="cancel_contenu_order_stock" value="Nouveau" style="float: left" oncomplete="collapseForm('contenu_order_stock')"
                                                                         update="blog_form_contenu_order_stock" actionListener="#{managedOrdreTransfert.resetFicheContenu_()}" global="false"/>
                                                        <p:commandButton id="save_contenu_order_stock" value="Enregistrer" style="float: right" oncomplete="collapseForm('contenu_order_stock')"
                                                                         update="blog_form_contenu_order_stock" actionListener="#{managedOrdreTransfert.saveNewContenu_()}"/>
                                                    </h:panelGrid>
                                                </h:panelGrid>
                                            </div>
                                            <div style="width: 64%;margin-left: 36%">
                                                <h:inputHidden id="input_hide_contenu_order_stock" value="#{managedOrdreTransfert.tabIds_contenu_}"/>
                                                <p:dataTable id="data_contenu_order_stock" value="#{managedOrdreTransfert.contenus_}" var="artf_" rowKey="#{artf_.id}" 
                                                             rowIndexVar="artfIdx_" selectionMode="single">
                                                    <p:ajax event="rowSelect" global="false" listener="#{managedOrdreTransfert.loadOnViewContenu_}"/>
                                                    <p:ajax event="rowUnselect" global="false" listener="#{managedOrdreTransfert.unLoadOnViewContenu_}"/>
                                                    <p:column headerText="N°" style="width: 10%;text-align: center">
                                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                                        <span>#{artfIdx_+1}</span>
                                                    </p:column>
                                                    <p:column headerText="Article">
                                                        <span>#{artf_.article.designation}</span>
                                                    </p:column>
                                                    <p:column headerText="Qté" style="text-align: right;width: 12%">
                                                        <h:outputText value="#{artf_.quantite}" converter="DN"/>
                                                    </p:column>
                                                    <p:column headerText="Prix" style="text-align: right;width: 12%">
                                                        <h:outputText value="#{artf_.prix}" converter="DN"/>
                                                    </p:column>
                                                    <p:column headerText="Total" style="text-align: right;width: 15%">
                                                        <h:outputText value="#{artf_.prixTotal}" converter="DN"/>
                                                    </p:column>
                                                    <p:column width="20" style="text-align: center">
                                                        <p:commandLink global="false" actionListener="#{managedOrdreTransfert.deleteBeanContenuO_(artf_)}" oncomplete="dlgConfirmDeleteArticleO_.show()">
                                                            <h:graphicImage library="img" name="del.png" width="20" height="20" title="Supprimer"/>      
                                                        </p:commandLink>
                                                    </p:column> 
                                                    <p:column width="25" style="text-align: center">
                                                        <f:facet name="header">
                                                            <h:selectBooleanCheckbox styleClass="chek_all_line_contenu_order_stock" value="false"
                                                                                     onclick="selectionAllLineTab(#{managedOrdreTransfert.contenus_.size()}, 'contenu_order_stock')">
                                                            </h:selectBooleanCheckbox>
                                                        </f:facet>
                                                        <h:selectBooleanCheckbox value="#{artf_.selectActif}" styleClass="chek_line_contenu_order_stock" 
                                                                                 onclick="selectionLineTab(#{artf_.id}, 'contenu_order_stock')">
                                                        </h:selectBooleanCheckbox>
                                                    </p:column>
                                                </p:dataTable>
                                                <p:commandButton id="delete_contenu_order_stock" value="Supprimer" style="float: right"
                                                                 onclick="dlgConfirmDeleteArticleO.show()" global="false"/>
                                            </div>
                                        </p:outputPanel>
                                    </p:panelGrid>
                                </fieldset>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <h:panelGrid columns="2" style="width: 100%">
                    <h:panelGrid columns="7" style="float: left; font-size: 0.8em">
                        <h:outputText value="Date" />
                        <h:outputText value="Destinataire" />
                        <h:outputText value="Source" />
                        <h:outputText value="Statut" />
                        <h:outputText value="Cloturer" />
                        <h:outputText value="Reference" />
                        <span>&nbsp;</span>
                        <h:panelGrid columns="2">
                            <h:selectBooleanCheckbox value="#{managedOrdreTransfert.date_}">
                                <p:ajax event="valueChange" listener="#{managedOrdreTransfert.chooseDateSearch()}" global="false" update="blog_date_search_ordre_transfert :main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                            </h:selectBooleanCheckbox>
                            <h:panelGroup id="blog_date_search_ordre_transfert">
                                <p:calendar value="#{managedOrdreTransfert.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedOrdreTransfert.date_}" size="10">
                                    <p:ajax event="dateSelect" listener="#{managedOrdreTransfert.chooseDateSearch()}" global="false" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedOrdreTransfert.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedOrdreTransfert.date_}" size="10">
                                    <p:ajax event="dateSelect" listener="#{managedOrdreTransfert.chooseDateSearch()}" global="false" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                                </p:calendar>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:selectOneMenu value="#{managedOrdreTransfert.destSearch}">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedOrdreTransfert.depotsReception}" var="drep" itemLabel="#{drep.designation}" itemValue="#{drep.id}"/>
                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseDestSearch()}" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedOrdreTransfert.sourceSearch}">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedOrdreTransfert.depotsReception}" var="dsrc" itemLabel="#{dsrc.designation}" itemValue="#{dsrc.id}"/>
                            <p:ajax event="valueChange" global="false" listener="#{managedOrdreTransfert.chooseSourceSearch()}" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedOrdreTransfert.statut_}"  valueChangeListener="#{managedOrdreTransfert.chooseStatut}">
                            <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                            <f:selectItems value="#{constantes.ETATS_ES}"/>
                            <p:ajax event="valueChange" global="false" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedOrdreTransfert.cloturer_}" valueChangeListener="#{managedOrdreTransfert.chooseCloturer}">
                            <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                            <f:selectItem itemLabel="OUI" itemValue="#{true}"/>
                            <f:selectItem itemLabel="NON" itemValue="#{false}"/>
                            <p:ajax event="valueChange" global="false" update=":main_ordre_transfert:data_ordre_transfert" oncomplete="collapseList('ordre_transfert')"/>
                        </h:selectOneMenu>
                        <h:inputText value="#{managedOrdreTransfert.numSearch_}">
                            <p:ajax event="keyup" global="false" listener="#{managedOrdreTransfert.searchTranferts()}" oncomplete="collapseList('ordre_transfert')"/>
                        </h:inputText>
                    </h:panelGrid>
                    <p:commandLink onclick="dlgCleanStock.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;" title="Nettoyage Stock">
                        <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                    </p:commandLink>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>