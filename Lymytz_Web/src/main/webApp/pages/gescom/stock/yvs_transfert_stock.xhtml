<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Transferts Stock','modGescom', 'smenTransfert', true,managedTransfertStock)}
    </ui:define> 
    <ui:define name="contents">    
        <style type="text/css">
            .part_fix{
                height: 70px !important;
            }
        </style>     
        #{Marticle.doNothing()}
        #{managedLotReception.doNothing()}

        #{managedAgence.loadAllUsable()}
        #{managedDepot.loadDepotsByAgence()}
        #{managedStockArticle.load(null)}
        #{managedTransfertStock.loadAll()}
        <script type="text/javascript">
            $(function() {
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('transfert_stock');
                collapseForm('contenu_transfert_stock');
                collapseForm('cout_transfert_stock');
            });
        </script>

        <h:form prependId="false" id="main-agence">
            <p:dialog widgetVar="dlgAgenceForDepot" header="Selectionner une agence" width="50%" closeOnEscape="true"> 
                <p:dataTable value="#{managedAgence.agences}" var="ag" rowKey="#{ag.id}" selectionMode="single" id="table_agence" rowIndexVar="line_ag">
                    <p:ajax event="rowSelect" listener="#{managedDepot.onSelectAgenceForAction}" update=":main_transfert_stock:select_source_transfert_stock" oncomplete="dlgAgenceForDepot.hide()"/>
                    <p:column headerText="#{lab.L_code}" width="200">
                        <h:outputText value="#{ag.codeagence}"/>
                    </p:column>                                
                    <p:column headerText="#{lab.L_designation}">
                        <h:outputText value="#{ag.designation}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedTransfertStock.updateBean()}"/>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Liste lot de reception" widgetVar="dlgListLotReception" modal="true" closeOnEscape="true" width="60%"> 
                <p:dataTable value="#{managedTransfertStock.contenu.lots}" var="aRL" rowKey="#{aRL.id}"
                             id="data-contenu_ft_require_lot" editable="true">
                    <p:ajax event="rowEdit" listener="#{managedTransfertStock.onRowLotEdit}"/>
                    <f:facet name="header">
                        <div align="right">
                            <p:commandButton  icon="ui-icon-disk" value="Terminer" actionListener="#{managedTransfertStock.saveAllContenuLot()}" oncomplete="dlgListLotReception.hide()"
                                              update=":main_transfert_stock:form_contenu_transfert_stock :main_transfert_stock:desc_article_transfert_stock :main_transfert_stock:data_contenu_transfert_stock :main_transfert_stock:fcs_article_transfert_stock"/>
                        </div>
                    </f:facet>
                    <p:column headerText="Numero" style="text-align: left">
                        #{aRL.numero}
                    </p:column>
                    <p:column headerText="Date de fabrication" style="text-align: center">
                        <h:outputText value="#{aRL.dateFabrication}" converter="DATE" rendered="#{aRL.id gt 0}"/>
                        <h:outputText value="----" rendered="#{aRL.id lt 1}"/>
                    </p:column>
                    <p:column headerText="Date d'expiration" style="text-align: center">
                        <h:outputText value="#{aRL.dateExpiration}" converter="DATE" rendered="#{aRL.id gt 0}"/>
                        <h:outputText value="----" rendered="#{aRL.id lt 1}"/>
                    </p:column>
                    <p:column headerText="Stock" style="text-align: right">
                        <h:outputText value="#{aRL.stock}" converter="#{managedTransfertStock.converterStock}"/>
                        <span title="#{managedTransfertStock.contenu.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{managedTransfertStock.contenu.conditionnement.unite.reference}</span>
                    </p:column>
                    <p:column headerText="Quantitée" style="text-align: center">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{aRL.quantitee}"/>
                                <span title="#{managedTransfertStock.contenu.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{managedTransfertStock.contenu.conditionnement.unite.reference}</span>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{aRL.quantitee}" style="width:100%;text-align: right"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="text-align: center;width: 5px">
                        <p:rowEditor rendered="#{aRL.id gt 0}"/>
                    </p:column>  
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_transfert" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">                     
                    <h:outputText value="#{lab.L_cloturer}" />
                    <h:selectOneMenu value="#{managedTransfertStock.cloturer_}" valueChangeListener="#{managedTransfertStock.chooseCloturer}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                        <p:ajax event="valueChange" update=":main_transfert_stock:data_transfert_stock"/>
                    </h:selectOneMenu>     
                    <h:panelGroup>
                        <h:outputText value="#{lab.LDB_PC_dates}"  />
                        <h:selectBooleanCheckbox value="#{managedTransfertStock.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client"  listener="#{managedTransfertStock.addParamDates()}" oncomplete="collapseList('sortie_stock')" />
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedTransfertStock.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedTransfertStock.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedTransfertStock.addParamDates}" update=":main_transfert_stock:data_transfert_stock"/>
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedTransfertStock.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedTransfertStock.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedTransfertStock.addParamDates}" update=":main_transfert_stock:data_transfert_stock"/>
                        </p:calendar>
                    </h:panelGroup>                  
                    <h:outputText value="Avec Incoherence" />
                    <h:selectOneMenu value="#{managedTransfertStock.withIncoherence}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                        <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamIncoherence()}" update=":main_transfert_stock:data_transfert_stock"/>
                    </h:selectOneMenu>   
                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedTransfertStock.idsSearch}" style="width: 100%" title="#{lab.LDB_PA_text1}">
                        <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamIds()}" update=":main_transfert_stock:data_transfert_stock"/>
                    </h:inputText>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_proprietes_transfert">
            <p:dialog header="Propriétes" width="40%"  closeOnEscape="true" widgetVar="dlgProprietes" resizable="false"> 
                <h:panelGrid id="blog_proprietes_transfert" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">                     
                    <h:outputText value="Enregistrer le" />
                    <h:inputText value="#{managedTransfertStock.selectDoc.dateSave}" converter="DATE" readonly="true" />                  
                    <h:outputText value="Transmis le" rendered="#{managedTransfertStock.selectDoc.statut eq constantes.ETAT_VALIDE}"/>
                    <h:inputText value="#{managedTransfertStock.selectDoc.dateTransmis}" converter="DATE" readonly="true" />  
                    <h:outputText value="Par" rendered="#{managedTransfertStock.selectDoc.statut eq constantes.ETAT_VALIDE}"/>
                    <h:inputText value="#{managedTransfertStock.selectDoc.authorTransmis.users.nomUsers}" readonly="true" />  
                    <h:outputText value="Modifier le" />
                    <h:inputText value="#{managedTransfertStock.selectDoc.dateUpdate}" converter="DATE" readonly="true" />
                    <h:outputText value="Par" />
                    <h:inputText value="#{managedTransfertStock.selectDoc.author.users.nomUsers}" readonly="true" />
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PTS_commentaire}" widgetVar="dlgAddCommentaire" modal="true" width="26%"  closeOnEscape="true"> 
                <h:selectOneMenu  value="#{managedTransfertStock.commentaire}" style="width: 99%">
                    <f:selectItem itemLabel="" itemValue=""/>
                    <f:selectItem itemLabel="#{lab.LC_PTS_stock_insuffisant}" itemValue="Stock insuffisant"/>
                    <f:selectItem itemLabel="#{lab.LC_PTS_reference_inexistante}" itemValue="Reference inexistante"/>
                    <p:ajax event="valueChange" global="false" update="txt_commentaire_contenu_transfert_stock"/>
                </h:selectOneMenu>
                <h:inputTextarea value="#{managedTransfertStock.commentaire}" style="width: 99%" rows="5" id="txt_commentaire_contenu_transfert_stock"/>
                <p:commandButton actionListener="#{managedTransfertStock.addCommentaireContenu()}" style="width: 99%"
                                 oncomplete="dlgAddCommentaire.hide()" value="#{lab.L_enregistrer}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Ajouter un lot de reception" widgetVar="dlgAddLotReception" modal="true" closeOnEscape="true"> 
                <p:outputPanel id="blog_lot_reception">
                    <ui:include src="../param/lot_reception/form.xhtml" /> 
                    <div>
                        <p:commandButton value="#{lab.L_nouveau}" icon="ui-icon-document" actionListener="#{managedLotReception.resetFiche()}" style="float: left"
                                         update="blog_lot_reception"/>
                        <p:commandButton value="#{lab.L_enregistrer}" icon="ui-icon-disk" actionListener="#{managedTransfertStock.saveLotReception()}" style="float: right"
                                         oncomplete="dlgAddLotReception.hide()"/>
                    </div>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-reception_contenu_doc_stock">
            <p:dialog header="#{lab.LC_PTS_reception}" widgetVar="dlgAddReception" modal="true" width="50%"  closeOnEscape="true">             
                <p:outputPanel id="blog-reception_contenu_doc_stock">
                    <h:panelGrid id="form-reception_contenu_doc_stock" columns="#{managedTransfertStock.reception.article.requiereLot?'4':'3'}" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.LC_PTS_date_reception}"/>
                        <h:outputText value="#{lab.L_quantite}"/>
                        <h:outputText value="#{lab.LC_PRA_lot}" rendered="#{managedTransfertStock.reception.article.requiereLot}"/>
                        <h:outputText value=""/>
                        <p:calendar value="#{managedTransfertStock.reception.dateReception}" pattern="dd-MM-yyyy" navigator="true" size="8"/>
                        <h:panelGroup>
                            <h:inputText value="#{managedTransfertStock.reception.quantite}" style="width: 100px;text-align: center"
                                         disabled="#{!accesRessource.stock_update_qte_recu}"/>
                            <span> / </span>
                            <h:inputText value="#{managedTransfertStock.selectContenu.quantiteEntree}" readonly="true" style="width: 100px;text-align: center"/>
                        </h:panelGroup>
                        <h:inputText id="select_reception_contenu_doc_stock" value="#{managedTransfertStock.reception.lotEntree.numero}" 
                                     style="color: #{managedTransfertStock.reception.lotEntree.id lt 1?'red':''}"
                                     rendered="#{managedTransfertStock.reception.article.requiereLot}">
                            <p:ajax event="valueChange" listener="#{managedTransfertStock.findLotReception(managedTransfertStock.reception)}" update="@this"/>
                        </h:inputText>
                        <p:commandButton icon="ui-icon-disk" actionListener="#{managedTransfertStock.addReceptionContenu()}" 
                                         update="blog-reception_contenu_doc_stock" title="#{lab.L_enregistrer}"/>
                    </h:panelGrid> 
                    <p:dataTable id="data-reception_contenu_doc_stock" value="#{managedTransfertStock.selectContenu.receptions}"
                                 var="recT" rowIndexVar="xRec" rowKey="#{recT.id}" selectionMode="single">
                        <p:ajax event="rowSelect"  listener="#{managedTransfertStock.loadOnViewReception}"/>
                        <p:ajax event="rowUnselect"  listener="#{managedTransfertStock.unLoadOnViewReception}"/>
                        <p:column headerText="N°" width="20">
                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(recT.dateSave) : 'Lot N° '.concat(recT.contenu.lotEntree.numero)}" >
                                <h:outputText value="#{xRec+1}"/>
                            </span>
                        </p:column>
                        <p:column headerText="#{lab.LC_PTS_date_reception}" style="text-align: center">
                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(recT.dateSave) : 'Lot N° '.concat(recT.contenu.lotEntree.numero)}" >
                                <h:outputText value="#{recT.dateReception}" converter="DATE"/>
                            </span>
                        </p:column>
                        <p:column headerText="#{lab.LC_PES_lot}" style="text-align: center;width: 10%" rendered="#{managedTransfertStock.currentParam.useLotReception}">
                            <span title="#{managedTransfertStock.ldf.format(recT.dateSave)}">#{recT.contenu.lotEntree.numero}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_quantite}" style="text-align: right">
                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(recT.dateSave) : 'Lot N° '.concat(recT.contenu.lotEntree.numero)}" >
                                <h:outputText value="#{recT.quantite}" converter="DNA"/>
                            </span>
                            <span title="#{managedTransfertStock.selectContenu.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399">#{managedTransfertStock.selectContenu.conditionnementEntree.unite.reference}</span>
                        </p:column>
                        <p:column width="20" style="text-align: center">
                            <p:contextMenu for="btn_option_reception_transfert_stock" event="left click" style="font-size: 0.8em;width: 200px">
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedTransfertStock.setSelectReception(recT)}" 
                                            oncomplete="dlgConfirmDeleteReception.show()"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_reception_transfert_stock" type="button"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PTS_valider}" widgetVar="dlgValideTrancsfert" modal="true" closeOnEscape="true"
                      > 
                <h:panelGrid columns="2">
                    <p:calendar value="#{managedTransfertStock.docStock.dateReception}" pattern="dd-MM-yyyy" 
                                id="date-valide_transfert_stock" style="text-align: center" navigator="true">
                        <p:ajax event="valueChange" global="false"/>
                    </p:calendar>
                    <p:commandButton icon="ui-icon-check" actionListener="#{managedTransfertStock.valider(true)}" oncomplete="dlgValideTrancsfert.hide()" value="#{lab.LC_PTS_valider}"/>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet>  
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PTS_valider}" widgetVar="dlgValideContenuTransfert" modal="true" closeOnEscape="true"> 
                <h:panelGrid columns="2">
                    <p:calendar value="#{managedTransfertStock.dateReception}" pattern="dd-MM-yyyy" id="date-valide_contenu_transfert_stock" style="text-align: center" navigator="true"/>
                    <p:commandButton icon="ui-icon-check" actionListener="#{managedTransfertStock.valideContenu()}" oncomplete="dlgValideContenuTransfert.hide()" value="#{lab.LC_PTS_valider}"
                                     />
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PTS_modifier_prix_entree}" widgetVar="dlgUpdatePrix" modal="true" width="30%"  closeOnEscape="true"> 
                <h:panelGrid columns="2" id="txt_prix_contenu_stock_tr">
                    <span>#{lab.LC_PTS_prix_sortie}</span>
                    <h:outputText value="#{lab.LC_PTS_prix_entree}" />
                    <h:inputText value="#{managedTransfertStock.selectContenu.prix}" />
                    <h:inputText value="#{managedTransfertStock.selectContenu.prixEntree}" />
                </h:panelGrid>
                <p:commandButton actionListener="#{managedTransfertStock.applyNewPrix()}"
                                 oncomplete="dlgUpdatePrix.hide()" value="#{lab.L_appliquer}" icon="ui-icon-circle-check"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListArticle" modal="true" width="70%"  closeOnEscape="true" 
                      style="max-height: 600px; overflow-y: hidden"> 
                <p:dataTable id="data_articles_transfert_stock" value="#{managedStockArticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" rowIndexVar="line_art"  style="max-height: 500px; overflow-y: auto" scrollHeight="470" scrollable="true">
                    <p:ajax event="rowSelect" listener="#{managedTransfertStock.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"/>
                    <p:column  width="15" headerText="N°">
                        <span title="#{art.article.designation}">#{line_art+1}</span>
                    </p:column>
                    <p:column  width="80" headerText="#{lab.LC_PTS_ref_article}">
                        <span title="#{art.article.designation}">#{art.article.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}" width="150">
                        <span title="#{art.article.designation}">#{art.article.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" width="80">
                        <span title="#{art.article.designation}">#{art.article.categorie}</span>
                    </p:column>
                    <p:column headerText="#{lab.LC_PTS_prix_a}" width="50" style="text-align: right">
                        <h:outputText value="#{art.article.pua}" title="#{art.article.designation}" converter="#{managedTransfertStock.converter}" />
                    </p:column>
                    <p:column headerText="#{lab.LC_PTS_prix_v}" width="50" style="text-align: right">
                        <h:outputText value="#{art.article.puv}" title="#{art.article.designation}" converter="#{managedTransfertStock.converter}" />
                    </p:column>
                </p:dataTable>
                <h:inputText title="#{lab.L_reference_article}" value="#{managedStockArticle.numSearch}" 
                             style="width: 180px;background: #009999;color:white;text-align: center;">
                    <p:ajax event="valueChange" update="data_articles_transfert_stock" listener="#{managedStockArticle.searchArticleByRefArtActif()}"/>
                </h:inputText>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(false,false)}" update="data_articles_transfert_stock" icon="ui-icon-circle-triangle-w" disabled="#{managedStockArticle.pa.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedStockArticle.pa.currentPage}#{managedStockArticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(true,false)}" update="data_articles_transfert_stock" icon="ui-icon-circle-triangle-e" disabled="#{managedStockArticle.pa.disNext}"/>
                    <p:selectOneMenu value="#{managedStockArticle.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedStockArticle.choosePaginatorAchat}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedTransfertStock.paginations}"/>
                        <p:ajax event="valueChange" update="data_articles_transfert_stock"/>
                    </p:selectOneMenu>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListConditionnement" modal="true" width="70%" height="450" closeOnEscape="true"> 
                <p:dataTable id="data_conditionnements_transfert_vente" value="#{managedStockArticle.conditionnements}" var="art" rowIndexVar="artLine"
                             rowKey="#{art.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedTransfertStock.loadOnViewConditionnement}" oncomplete="dlgListConditionnement.hide()"/>
                    <p:column headerText="N°" width="20" style="text-align: center">
                        #{artLine+1}
                    </p:column>                                                        
                    <p:column headerText="#{lab.L_reference}" width="100">
                        <span style="font-weight: bold">#{art.article.refArt}</span>
                    </p:column>
                    <p:column  headerText="#{lab.L_designation}" width="150"> 
                        #{art.article.designation}
                    </p:column>
                    <p:column headerText="#{lab.L_unite}" width="100">
                        #{art.unite.libelle}                                
                        <span style="font-weight: bold">[#{art.unite.reference}]</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" width="100" style="text-align: center">
                        #{art.article.categorie}
                    </p:column>
                    <p:column  headerText="#{lab.LC_PTS_prix_v}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prix}"  converter="DN" />                                                            
                    </p:column>
                    <p:column  headerText="#{lab.LC_PTS_prix_a}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prixAchat}"  converter="DN" />                                                            
                    </p:column>
                </p:dataTable> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="form_dlgAddCategorieComp_4">
            <p:dialog id="dlgAddCategorieComp_4" header="#{lab.LC_PTS_creation_categorie_comptable}" widgetVar="dlgAddCategorieComp" 
                      modal="true" width="25%"  closeOnEscape="true"> 
                <p:panelGrid columns="2" style="width: 98%;margin: auto" id="form_categorie_taxe4">
                    <span>#{lab.LC_PTS_code_appel}</span>
                    <h:inputText value="#{managedTransfertStock.categorie.codeAppel}"/>
                    <span>#{lab.LC_PTS_code_categorie}</span>
                    <h:inputText value="#{managedTransfertStock.categorie.codeCategorie}"/>
                    <span>#{lab.LC_PTS_nature}</span>
                    <h:inputText value="#{managedTransfertStock.categorie.nature}"/>
                </p:panelGrid>
                <p:commandButton actionListener="#{managedTransfertStock.saveNewCategorie()}" style="width: 100%"
                                 update="form_categorie_taxe4" oncomplete="dlgAddCategorieComp.hide()"
                                 value="#{lab.L_enregistrer}"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>


        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByCancel" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PTS_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.annulerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByCancel.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByCancel.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByEdit" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PTS_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.editerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByEdit.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByEdit.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByBack" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PTS_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.backOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByBack.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByBack.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireBySoumis" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PTS_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.transmisOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireBySoumis.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireBySoumis.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByValid" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PTS_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.validerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByValid.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByValid.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanContenu()}" oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('contenu_transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanContenu_()}" oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('contenu_transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticles" closeOnEscape="true"
                             message="#{lab.LC_PLV_text9}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LC_PFV_memoriser_choix_session}</span>
                    <p:selectBooleanCheckbox value="#{managedTransfertStock.memoriserDeleteContenu}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanArticles(true)}" 
                                 oncomplete="dlgConfirmDeleteArticles.hide();collapseForm('contenu_transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticles.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmCancelValid" closeOnEscape="true"
                             message="#{lab.LC_PTS_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.cancelValider()}" oncomplete="dlgConfirmCancelValid.hide();"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmCancelValid.hide()"/>
            </p:confirmDialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteReception" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanReception()}" oncomplete="dlgConfirmDeleteReception.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteReception.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanCout()}" oncomplete="dlgConfirmDeleteCout.hide();collapseForm('cout_transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCout.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteCout_" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBeanCout_()}" oncomplete="dlgConfirmDeleteCout_.hide();collapseForm('cout_transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteCout_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBean()}" oncomplete="dlgConfirmDelete.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="#{lab.LC_PTS_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog id="id_confirm_close_ft" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir #{managedTransfertStock.selectDoc.cloturer?'dévérrouiller':'vérrouiller'}?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.cloturer()}" oncomplete="dlgConfirmClose.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmEditer" closeOnEscape="true" header="#{lab.L_confirmation}"
                             message="Ce transfert est #{managedTransfertStock.selectDoc.statut eq constantes.ETAT_SOUMIS?'transmis':'validé'}... Etes vous sur de vouloir l'annuler?">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.editerOrdre()}" oncomplete="dlgConfirmEditer.hide();collapseForm('transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmEditer.hide()"/>
            </p:confirmDialog>

        </h:form>            
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="Ce transfert est #{managedTransfertStock.selectDoc.statut eq constantes.ETAT_SOUMIS?'transmis':'validé'}... Souhaitez vous vraiment l'annuler?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.annulerOrdre()}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('transfert_stock')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmAnnuler.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanStock" closeOnEscape="true"
                             message="#{lab.LC_PTS_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedTransfertStock.cleanStock()}" oncomplete="dlgCleanStock.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCleanStock.hide()"/>
            </p:confirmDialog>
        </h:form>         
        <h:form prependId="false">
            <p:confirmDialog header="#{lab.L_confirmation}" width="40%" widgetVar="dlgValidDocAll" message="#{lab.LCF_POD_text8}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedTransfertStock.validerOrderAll()}" oncomplete="dlgValidDocAll.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgValidDocAll.hide()" />
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_transfert_stock">   
            <div class="part_fix">
                <div style="float: left;">
                    <p:splitButton value="#{lab.L_enregistrer}" id="save_transfert_stock" actionListener="#{managedTransfertStock.saveNew()}" icon="ui-icon-disk">
                        <p:menuitem value="#{lab.L_nouveau}" id="cancel_transfert_stock" icon="ui-icon-document" actionListener="#{managedTransfertStock.resetFiche()}" update="blog_form_transfert_stock" oncomplete="collapseForm('transfert_stock');collapseForm('contenu_transfert_stock')"/>                    
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" global="false" oncomplete="dlgConfirmDelete.show()" icon="ui-icon-trash" />
                    </p:splitButton>
                    <p:splitButton value="Valider" id="option_transfert_stock" icon="ui-icon-check" onclick="dlgValidDocAll.show()"  global="false" style="font-size: 0.8em">
                        <p:menuitem value="#{lab.LC_PTS_reconstruire_reference}" icon="ui-icon-refresh" actionListener="#{managedTransfertStock.reBuildNumero()}" update=":main_transfert_stock:data_transfert_stock"/>
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" global="false" id="delete_transfert_stock" oncomplete="dlgConfirmDelete.show()" icon="ui-icon-trash" />
                    </p:splitButton>
                </div> 
                <div style="float: right; width: 18%">
                    <div style="float: right">
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('transfert_stock');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link title="#{lab.L_mode_liste}" onclick="collapseList('transfert_stock');
                                return false" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>                  
                        <p:spacer />        
                        <h:link title="#{lab.L_mode_consultation} " onclick="collapseGrid('transfert_stock');
                                return false">
                            <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link> 
                    </div>
                    <h:panelGroup style="float: right">
                        <p:commandButton actionListener="#{managedTransfertStock.parcoursInAllResult(false)}" update="txt_parc_linear_transfert_stock" icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('transfert_stock')"/>
                        <h:inputText value="#{managedTransfertStock.offset}" style="width: 35px; text-align: center;"  
                                     title="#{lab.L_aller_au}" id="txt_parc_linear_transfert_stock"/>
                        <p:outputPanel autoUpdate="true">                        
                            <p:outputLabel value="/#{managedTransfertStock.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTransfertStock.parcoursInAllResult(true)}" update="txt_parc_linear_transfert_stock" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('transfert_stock')"/>
                    </h:panelGroup> 
                </div>                
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_transfert_stock">
                    <p:outputPanel id="blog_form_transfert_stock" style="width: 99%; margin: auto; background: white">  
                        <h:panelGrid columns="1" style="width: 100%; font-size: 0.9em">
                            <p:outputPanel id="form_entete_transfert_stock">
                                <h:panelGrid columns="3" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -5px;margin-top: -5px" cellpadding="0" cellspacing="0" rendered="#{managedTransfertStock.docStock.update}">
                                    <h:panelGrid columns="3" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white">                                             
                                        <span style="font-size: initial">#{lab.L_numero} : </span>
                                        <h:outputText id="txt_reference_document_transfert_stock" value="#{managedTransfertStock.docStock.numDoc}"/>
                                        <h:outputText value="#{managedTransfertStock.docStock.id}" styleClass="style_identifiant" style="text-align: center;margin-top: 5px!important"/>
                                    </h:panelGrid> 
                                    <h:panelGroup style="float: right">                                               
                                        <p:outputPanel id="grp_btn_etat_transfert_stock" styleClass="yvs_form_of" style="font-size: 0.9em !important">                                    
                                            <p:commandLink value="#{lab.L_editable}" styleClass="button-stateOF #{(managedTransfertStock.docStock.statut == constantes.ETAT_EDITABLE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedTransfertStock.docStock.statut == constantes.ETAT_SOUMIS
                                                                       or managedTransfertStock.docStock.statut == constantes.ETAT_ANNULE
                                                                       or managedTransfertStock.docStock.statut == constantes.ETAT_VALIDE
                                                                       or managedTransfertStock.docStock.statut == constantes.ETAT_RENVOYE)}"
                                                           actionListener="#{managedTransfertStock.editer()}" process="@this" update="data_contenu_transfert_stock"/>
                                            <p:commandLink value="#{(managedTransfertStock.docStock.statut==constantes.ETAT_SOUMIS)?'TRANSMIS':'TRANSMETTRE'}" styleClass="button-stateOF #{(managedTransfertStock.docStock.statut==constantes.ETAT_SOUMIS)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedTransfertStock.docStock.statut == constantes.ETAT_EDITABLE)}" 
                                                           actionListener="#{managedTransfertStock.transmis()}" process="@this" update="data_contenu_transfert_stock"/>
                                            <p:commandLink value="#{lab.L_en_cours}" styleClass="button-stateOF button-stateOF_actif" disabled="true" process="@this" rendered="#{managedTransfertStock.docStock.statut==constantes.ETAT_ENCOURS}"/>
                                            <p:commandLink value="#{(managedTransfertStock.docStock.statut==constantes.ETAT_VALIDE)?'VALID&Eacute;':'VALIDER'}" styleClass="button-stateOF #{(managedTransfertStock.docStock.statut==constantes.ETAT_VALIDE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedTransfertStock.docStock.statut == constantes.ETAT_SOUMIS or managedTransfertStock.docStock.statut == constantes.ETAT_ENCOURS)}" 
                                                           actionListener="#{managedTransfertStock.valider(false)}" process="@this" id="btn_valid_transfert_stock"
                                                           />
                                            <p:commandLink value="#{(managedTransfertStock.docStock.statut==constantes.ETAT_RENVOYE)?'RENVOY&Eacute;':'RENVOYER'}" styleClass="button-stateOF #{(managedTransfertStock.docStock.statut==constantes.ETAT_RENVOYE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedTransfertStock.docStock.statut == constantes.ETAT_SOUMIS or managedTransfertStock.docStock.statut == constantes.ETAT_ENCOURS)}" 
                                                           actionListener="#{managedTransfertStock.back()}" process="@this" />
                                            <p:commandLink value="#{(managedTransfertStock.docStock.statut==constantes.ETAT_ANNULE)?'ANNUL&Eacute;':'ANNULER'}" styleClass="button-stateOF #{(managedTransfertStock.docStock.statut==constantes.ETAT_ANNULE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedTransfertStock.docStock.statut == constantes.ETAT_SOUMIS or managedTransfertStock.docStock.statut == constantes.ETAT_ENCOURS
                                                                       or managedTransfertStock.docStock.statut == constantes.ETAT_VALIDE)}" 
                                                           actionListener="#{managedTransfertStock.annuler()}" process="@this" />
                                        </p:outputPanel>   
                                        <p:contextMenu for="btn_valid_transfert_stock" >
                                            <p:menuitem value="#{lab.LC_PTS_annuler_validation}" rendered="#{managedTransfertStock.docStock.statut==constantes.ETAT_VALIDE}" icon="ui-icon-circle-close" onclick="dlgConfirmCancelValid.show()"/>
                                        </p:contextMenu>                                               
                                    </h:panelGroup>                                     
                                </h:panelGrid> 
                            </p:outputPanel>
                            <p:outputPanel style="width: 100%" id="form_transfert_stock">
                                <div style="width: 61%;float: left; ">
                                    <h:panelGrid id="infos_document_transfert_stock" styleClass="yvs_table" columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                                        <h:panelGroup>
                                            <span>#{lab.L_date} </span>
                                            <p:commandLink type="button" id="btnAddCoutTransfert" global="false" style="float: right;border: 2px solid black; border-radius: 5px;padding: 1px;background: white" title="Ajout cout">
                                                <h:graphicImage library="icones" name="ico_facture2.png" width="15" height="15"/>  
                                            </p:commandLink>
                                        </h:panelGroup>
                                        <h:panelGroup id="dates-transfert_stock">
                                            <p:calendar value="#{managedTransfertStock.docStock.dateDoc}" navigator="true" pattern="dd-MM-yyyy" size="10"
                                                        disabled="#{managedTransfertStock.docStock.statut eq constantes.ETAT_VALIDE}">
                                                <p:ajax event="dateSelect" global="false" listener="#{managedTransfertStock.chooseDateDoc()}" update="txt_users_creneau_destination_transfert value-date_reception"/>                                                    
                                            </p:calendar>
                                            <h:panelGroup style="float: right">
                                                <span style="float: left;margin-top: 5px">#{lab.LC_PTS_recu_le} : </span>
                                                <p:calendar value="#{managedTransfertStock.docStock.dateReception}" navigator="true" pattern="dd-MM-yyyy" size="8"
                                                            disabled="#{managedTransfertStock.docStock.statut eq constantes.ETAT_VALIDE}" id="value-date_reception">
                                                    <p:ajax event="dateSelect" global="false" listener="#{managedTransfertStock.chooseDateReception()}" update="txt_users_creneau_destination_transfert"/>                                                    
                                                </p:calendar>
                                            </h:panelGroup>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PTS_source} </span>  
                                        <h:panelGroup>
                                            <h:selectOneMenu value="#{managedTransfertStock.docStock.source.id}" id="select_source_transfert_stock"
                                                             disabled="#{managedTransfertStock.docStock.statut != constantes.ETAT_EDITABLE}"
                                                             style="min-width: #{managedAgence.agences.size() gt 1?'160px':'95%'}; max-width: #{managedAgence.agences.size() gt 1?'300px':'95%'}">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedDepot.depots}" var="depS" 
                                                               itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                 
                                                <p:ajax event="valueChange"  listener="#{managedTransfertStock.chooseDepotSource()}"/>
                                            </h:selectOneMenu> 
                                            <p:commandLink value="Selectionner agence" onclick="dlgAgenceForDepot.show()" global="false" rendered="#{managedAgence.agences.size() gt 1}"/>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PTS_creneau_scr} </span>  
                                        <h:selectOneMenu value="#{managedTransfertStock.docStock.creneauSource.id}" id="select_creneau_source_transfert" style="width: 100%"
                                                         disabled="#{(managedTransfertStock.docStock.statut != constantes.ETAT_EDITABLE)}" title="#{lab.LC_PTS_creneau_depot_source}">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedTransfertStock.creneauxSource}" var="crenS" 
                                                           itemLabel="#{crenS.semiReference}" itemValue="#{crenS.id}" />                                 
                                            <p:ajax event="valueChange" global="false" listener="#{managedTransfertStock.chooseCreneauSource()}"/>
                                        </h:selectOneMenu> 
                                        <span>#{lab.LC_PTS_reception} </span>  
                                        <h:selectOneMenu value="#{managedTransfertStock.docStock.destination.id}" id="select_destinataire_transfert_stock"
                                                         disabled="#{managedTransfertStock.docStock.statut != constantes.ETAT_EDITABLE}" style="width: 100%">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedTransfertStock.depotsDestination}" var="depD" 
                                                           itemLabel="#{depD.designation}" itemValue="#{depD.id}" />                                 
                                            <p:ajax event="valueChange"  listener="#{managedTransfertStock.chooseDepotDestinataire()}"/>
                                        </h:selectOneMenu> 
                                        <span>#{lab.LC_PTS_creneau_dst}</span>  
                                        <h:panelGroup>
                                            <h:selectOneMenu value="#{managedTransfertStock.docStock.creneauDestinataire.id}" id="select_creneau_destination_transfert" style="min-width: 200px"
                                                             disabled="#{managedTransfertStock.docStock.statut eq constantes.ETAT_VALIDE}" title="#{lab.LC_PTS_creneau_depot_reception}">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedTransfertStock.creneauxDestination}" var="crenD" 
                                                               itemLabel="#{crenD.semiReference}" itemValue="#{crenD.id}" />                                      
                                                <p:ajax event="valueChange" global="false" listener="#{managedTransfertStock.chooseCreneauDestinataire()}" update="txt_users_creneau_destination_transfert"/>
                                            </h:selectOneMenu>
                                            <h:outputText id="txt_users_creneau_destination_transfert" value="#{managedTransfertStock.docStock.creneauDestinataire.users.nomUsers}" style="float: right;font-weight: bold"/>
                                        </h:panelGroup>
                                        <span title="#{lab.LC_PTS_numero_piece_externe}">#{lab.L_reference}</span>
                                        <h:inputText value="#{managedTransfertStock.docStock.numPiece}" disabled="#{managedTransfertStock.docStock.statut != constantes.ETAT_EDITABLE}"
                                                     title="#{lab.LC_PTS_numero_piece_externe}" style="width: 100%"/>
                                        <f:facet name="footer">
                                            <span>Description</span>
                                            <h:inputTextarea value="#{managedTransfertStock.docStock.description}" style="width: 100%" rows="3"
                                                             disabled="#{managedTransfertStock.docStock.statut != constantes.ETAT_EDITABLE}"/>
                                        </f:facet>
                                    </h:panelGrid>
                                    <p:overlayPanel for="btnAddCoutTransfert" hideEffect="fade" style="width: 50%">
                                        <p:outputPanel id="blog_form_cout_transfert_stock" style="font-size: 0.9em !important">
                                            <h:panelGrid id="form_cout_transfert_stock" columns="5" styleClass="yvs_nostyle" 
                                                         style="width: 100%; font-size: 0.9em" cellpadding="0" cellspacing="0">  
                                                <span>#{lab.LC_PTS_type_cout}</span>                                                    
                                                <h:selectOneMenu value="#{managedTransfertStock.cout.type.id}" style="min-width: 120px">
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItems value="#{managedTransfertStock.types}" var="typ" itemLabel="#{typ.libelle}" itemValue="#{typ.id}" />                             
                                                </h:selectOneMenu>  
                                                <span>#{lab.L_montant} : </span>
                                                <pe:inputNumber value="#{managedTransfertStock.cout.montant}" decimalPlaces="0" style="width: 50%;text-align: right"/>
                                                <p:commandButton icon="ui-icon-plusthick" style="float: right;width: 20px;height: 20px" oncomplete="collapseForm('cout_transfert_stock')"
                                                                 title="Ajouter cout" id="save_cout_transfert_stock" actionListener="#{managedTransfertStock.saveNewCout()}"
                                                                 update="form_cout_transfert_stock data_cout_transfert_stock"/>
                                            </h:panelGrid>
                                            <h:inputHidden id="input_hide_cout_transfert_stock" value="#{managedTransfertStock.tabIds_cout}"/>
                                            <p:dataTable id="data_cout_transfert_stock" value="#{managedTransfertStock.docStock.couts}" var="cou" rowKey="#{cou.id}" 
                                                         rowIndexVar="couIdx" selectionMode="single" style="min-height: 100px">
                                                <p:ajax event="rowSelect" global="false" listener="#{managedTransfertStock.loadOnViewCout}"/>
                                                <p:ajax event="rowUnselect" global="false" listener="#{managedTransfertStock.unLoadOnViewCout}"/>
                                                <p:column headerText="N°" width="30" style="text-align: center">
                                                    <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{cou.new_}"/>
                                                    <span>#{couIdx+1}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.L_type}">
                                                    <span>#{cou.typeCout.libelle}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.L_montant}" style="text-align: right">
                                                    <h:outputText value="#{cou.montant}" converter="#{managedTransfertStock.converter}"/>
                                                    <span> Fcfa</span>
                                                </p:column>
                                                <p:column width="20" style="text-align: center">
                                                    <p:contextMenu for="btn_option_cout_transfert_stock" event="left click" style="font-size: 0.8em">
                                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedTransfertStock.deleteBeanCout_(cou)}" oncomplete="dlgConfirmDeleteCout_.show()"/>
                                                    </p:contextMenu>                           
                                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_cout_transfert_stock" type="button"/>
                                                </p:column> 
                                                <p:column width="25" style="text-align: center">
                                                    <f:facet name="header">
                                                        <h:selectBooleanCheckbox styleClass="chek_all_line_cout_transfert_stock" value="false"
                                                                                 onclick="selectionAllLineTab(#{managedTransfertStock.docStock.couts.size()}, 'cout_transfert_stock')">
                                                        </h:selectBooleanCheckbox>
                                                    </f:facet>
                                                    <h:selectBooleanCheckbox value="#{cou.selectActif}" styleClass="chek_line_cout_transfert_stock" 
                                                                             onclick="selectionLineTab(#{cou.id}, 'cout_transfert_stock')">
                                                    </h:selectBooleanCheckbox>
                                                </p:column>
                                            </p:dataTable>
                                            <p:commandButton id="delete_cout_transfert_stock" value="#{lab.L_supprimer}" style="float: right"
                                                             onclick="dlgConfirmDeleteCout.show()" global="false" rendered="false"/>
                                        </p:outputPanel>
                                    </p:overlayPanel>
                                </div>
                                <div style="margin-left: 62%" >
                                    <p:outputPanel id="desc_article_transfert_stock" layout="block" style="margin: auto; background: white;">
                                        <h1 style="padding-left: 10px">Détails du produit</h1>
                                        <div style="float: left; width: 59%; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px;
                                             border-bottom: 2px solid #bbb; padding-left: 10px; padding-bottom: 10px; padding-top: 5px">
                                            <span style="font-weight: bold;color: #000">
                                                #{managedTransfertStock.contenu.article.designation}
                                            </span>
                                            <p:outputPanel rendered="#{accesRessource.base_view_article_pua}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                                <h:outputText value="Prix d'achat = " />
                                                <h:outputText value="#{managedTransfertStock.contenu.conditionnement.prixAchat}" converter="#{managedTransfertStock.converter}" style="font-weight: bold;color: #000"/>
                                                <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                            </p:outputPanel>
                                            <p:outputPanel rendered="#{accesRessource.base_view_article_puv}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                                <h:outputText value="Prix de vente = " />
                                                <h:outputText value="#{managedTransfertStock.contenu.conditionnement.prix}" converter="#{managedTransfertStock.converter}" style="font-weight: bold;color: #000"/>
                                                <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                            </p:outputPanel>
                                            <p:outputPanel rendered="#{accesRessource.base_view_article_pr}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                                <h:outputText value="#{lab.LC_PFA_cout_unitaire_stock} = " />
                                                <h:outputText value="#{managedTransfertStock.contenu.article.pr}" converter="#{managedTransfertStock.converter}"  style="font-weight: bold;color: #000"/>
                                                <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                            </p:outputPanel>
                                            <p:outputPanel layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                                <h:outputText value="#{managedTransfertStock.contenu.article.stock}" converter="#{managedTransfertStock.converterStock}" style="font-weight: bold;color: #000"/>
                                                <h:outputText value=" #{managedTransfertStock.contenu.conditionnement.unite.reference} en stock au #{managedTransfertStock.docStock.source.designation}"/>
                                            </p:outputPanel>
                                            <p:outputPanel layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                                <h:outputText value="#{managedTransfertStock.contenu.article.stock_}" converter="#{managedTransfertStock.converterStock}" style="font-weight: bold;color: #000"/>
                                                <h:outputText value=" #{managedTransfertStock.contenu.uniteDestination.unite.reference} en stock au #{managedTransfertStock.docStock.destination.designation}"/>
                                            </p:outputPanel>
                                        </div>
                                        <div style="margin-left: 61%;" align="center">
                                            <h:graphicImage id="img_article" style="max-width: 100%;max-height: 180px" value="data:image/#{Marticle.photoArticle(managedTransfertStock.contenu.article)[1]};base64,#{Marticle.photoArticle(managedTransfertStock.contenu.article)[0]}"/>
                                        </div>                                        
                                    </p:outputPanel>  
                                    <p:outputPanel id="chp_transfert_stock_net_a_payer" layout="block" style="background: #FFF;padding-top:-5px">
                                        <div style="width: 49.5%;float: left">
                                            <h:panelGrid columns="1" style="font-size: 0.9em;width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                                <h:outputText value="#{accesRessource.gescom_entree_view_totaux?'Total sortie :':'---'}"/>
                                                <h:panelGroup>
                                                    <h:outputText value="#{managedTransfertStock.docStock.montantTotal}" converter="#{managedTransfertStock.converter}" style="color: dodgerblue;font-weight: bold"/>       
                                                    <span style="font-size: 0.8em">#{managedTransfertStock.currentScte.devise}</span>
                                                </h:panelGroup>  
                                            </h:panelGrid>                                              
                                        </div>
                                        <div style="width: 49.5%;margin-left: 50.5%">
                                            <h:panelGrid columns="1" style="font-size: 0.9em;width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                                <h:outputText value="#{accesRessource.gescom_entree_view_totaux?'Total entrée :':'---'}"/>
                                                <h:panelGroup>
                                                    <h:outputText value="#{managedTransfertStock.docStock.montantTotalES}" converter="#{managedTransfertStock.converter}" style="color: dodgerblue;font-weight: bold"/>       
                                                    <span style="font-size: 0.8em">#{managedTransfertStock.currentScte.devise}</span>
                                                </h:panelGroup>  
                                            </h:panelGrid>                                              
                                        </div>
                                    </p:outputPanel>
                                </div>                                
                            </p:outputPanel>
                            <h:panelGrid class="headline_data" columns="2" styleClass="yvs_nostyle" style="width: 100%">
                                <b><span> #{lab.LC_PTS_contenus}</span></b>
                                <p:commandButton icon="ui-icon-transferthick-e-w" value="Transferer tout le stock" rendered="#{accesRessource.base_depot_send_all_stock}"
                                                 style="float: right;background: white!important" actionListener="#{managedTransfertStock.sendAllStockToAnotherDepot()}"
                                                 disabled="#{managedTransfertStock.docStock.contenus.size() gt 0}"/>
                            </h:panelGrid>   
                            <h:panelGrid columns="1" style="width: 100%" styleClass="yvs_table">
                                <f:facet name="header">                      
                                    <div style="width: 100%">
                                        <div class="zone_editPC" >
                                            <p:focus id="fcs_article_transfert_stock" for="txt_article_transfert_stock"/>
                                            <h:panelGrid id="form_contenu_transfert_stock" columns="#{managedTransfertStock.contenu.article.requiereLot?'10':'9'}" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0" style="font-size: 0.8em"> 
                                                <h:outputText value="#{lab.L_article}" />
                                                <h:outputText title="#{lab.LC_PTS_conditionnement_sortie}" value="#{lab.LC_PTS_cond_sortie}"/>
                                                <h:outputText value="#{lab.L_quantite}" />                                            
                                                <h:outputText title="#{lab.LC_PTS_conditionnement_entree}" value="#{lab.LC_PTS_cond_entree}"/>
                                                <h:outputText value="#{lab.L_quantite}" />
                                                <h:outputText value="#{lab.L_prix}" title="#{lab.LC_PTS_prix_sortie_depot} (#{managedTransfertStock.docStock.source.designation})"/>
                                                <h:outputText value="#{lab.LC_PTS_prix_entre}" title="#{lab.LC_PTS_prix_entre_depot_cible}(#{managedTransfertStock.docStock.destination.designation})"/>
                                                <h:outputText value="#{lab.LC_PES_lot}" rendered="#{managedTransfertStock.contenu.article.requiereLot}"/>                                        
                                                <h:outputText value="#{lab.L_total}" />
                                                <h:outputText value="" />
                                                <h:panelGroup>                                                
                                                    <h:outputText value="#{managedTransfertStock.contenu.id}" styleClass="style_identifiant"/>
                                                    <h:inputText id="txt_article_transfert_stock" value="#{managedTransfertStock.contenu.article.refArt}" style="color: #{managedTransfertStock.contenu.article.error?'red':''}; width: 120px">
                                                        <p:ajax event="valueChange" listener="#{managedTransfertStock.searchArticle()}" update="form_contenu_transfert_stock desc_article_transfert_stock txt_prix_e_article_transfert_stock"/>
                                                    </h:inputText>    
                                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="#{lab.L_liste_article}" global="false"
                                                                     actionListener="#{managedTransfertStock.initArticles()}" oncomplete="dlgListArticle.show()" />
                                                </h:panelGroup>
                                                <h:selectOneMenu value="#{managedTransfertStock.contenu.conditionnement.id}" style="min-width: 120px" title="#{lab.L_selectionner_conditionnement}" tabindex="15"
                                                                 valueChangeListener="#{managedTransfertStock.chooseConditionnement}">
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItems value="#{managedTransfertStock.contenu.article.conditionnements}" var="un_" 
                                                                   itemLabel="#{un_.unite.reference}" itemValue="#{un_.id}"/>
                                                    <p:ajax event="valueChange" 
                                                            update="desc_article_transfert_stock txt_prix_article_transfert_stock txt_prix_e_article_transfert_stock txt_total_article_transfert_stock "/>
                                                </h:selectOneMenu>
                                                <h:inputText value="#{managedTransfertStock.contenu.quantite}" id="txt_qte_article_transfert_stock" style="width: 100px;text-align: right">
                                                    <p:ajax event="valueChange" listener="#{managedTransfertStock.listenChangeQuantite()}" update="txt_prix_e_article_transfert_stock"/>
                                                </h:inputText>
                                                <h:selectOneMenu value="#{managedTransfertStock.contenu.uniteDestination.id}" style="min-width: 120px" title="#{lab.L_selectionner_conditionnement}" tabindex="17"
                                                                 valueChangeListener="#{managedTransfertStock.chooseConditionnementDest}">
                                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                                    <f:selectItems value="#{managedTransfertStock.contenu.article.conditionnements}" var="un_" 
                                                                   itemLabel="#{un_.unite.reference}" itemValue="#{un_.id}"/>
                                                    <p:ajax event="valueChange" 
                                                            update="desc_article_transfert_stock txt_prix_article_transfert_stock txt_prix_e_article_transfert_stock txt_total_article_transfert_stock"/>
                                                </h:selectOneMenu>
                                                <p:inputText value="#{managedTransfertStock.contenu.resultante}"  style="width: 100px;text-align: right" readonly="true" converter="#{managedTransfertStock.converterStock}"
                                                             id="txt_qte_dest"/>                                                                                         
                                                <p:inputText disabled="true" value="#{managedTransfertStock.contenu.prix}" id="txt_prix_article_transfert_stock" style="width: 100px;text-align: right" converter="#{managedTransfertStock.converter}" title="#{lab.LC_PTS_prix_sortie_depot} (#{managedTransfertStock.docStock.source.designation})"/>
                                                <p:inputText disabled="true" value="#{managedTransfertStock.contenu.prixEntree}" id="txt_prix_e_article_transfert_stock" style="width: 100px;text-align: right" converter="#{managedTransfertStock.converter}" title="#{lab.LC_PTS_prix_entre_depot_cible} (#{managedTransfertStock.docStock.destination.designation})"/>
                                                <h:inputText id="select_lotSortie" value="#{managedTransfertStock.contenu.lotSortie.numero}" ondblclick="dlgListLotReception.show()"
                                                             readonly="true" title="Cliquer deux fois pour ouvrir la liste des lots de reception"
                                                             rendered="#{managedTransfertStock.contenu.article.requiereLot}"/>  
                                                <h:panelGroup>
                                                    <p:inputText disabled="true" value="#{managedTransfertStock.contenu.prixTotal}" id="txt_total_article_transfert_stock" style="width: 150px;text-align: right" converter="#{managedTransfertStock.converter}"/>
                                                    <span>Fcfa</span>
                                                </h:panelGroup>
                                                <p:commandButton id="save_contenu_transfert_stock" icon="ui-icon-circle-plus" value="Ajouter" style="float: right" oncomplete="collapseForm('contenu_transfert_stock')"
                                                                 update="form_contenu_transfert_stock desc_article_transfert_stock data_contenu_transfert_stock fcs_article_transfert_stock" actionListener="#{managedTransfertStock.saveContenu()}"/>
                                            </h:panelGrid>                                            
                                        </div>
                                    </div>
                                </f:facet> 
                                <p:outputPanel> 
                                    <p:contextMenu for="data_contenu_transfert_stock:colomn_qte_tr" styleClass="context_menu" id="option_qte_tr" style="width: 200px;font-size: 0.8em">
                                        <p:menuitem value="#{lab.LC_PTS_afficher_quantite} #{managedTransfertStock.displayQuantieRecu?'attendue':'recue'}" update="option_qte_tr data_contenu_transfert_stock"
                                                    actionListener="#{managedTransfertStock.setDisplayQuantieRecu(!managedTransfertStock.displayQuantieRecu)}"/>
                                    </p:contextMenu>
                                    <h:inputHidden id="input_hide_contenu_transfert_stock" value="#{managedTransfertStock.tabIds_contenu}"/>
                                    <p:dataTable id="data_contenu_transfert_stock" value="#{managedTransfertStock.docStock.contenus}" var="artf" 
                                                 rowKey="#{artf.id}" rowIndexVar="artfIdx" selection="#{managedTransfertStock.selectContenus}" style="font-size: 0.8em">
                                        <p:ajax event="rowSelect"  listener="#{managedTransfertStock.loadOnViewContenu}"/>
                                        <p:ajax event="rowUnselect"  listener="#{managedTransfertStock.unLoadOnViewContenu}"/>
                                        <p:column headerText="N°" width="20" style="text-align: center">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                            <span title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(artf.statut)}">#{artfIdx+1}</span>
                                        </p:column>
                                        <p:column headerText="ID" style="width: 20px">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:outputText value="#{artf.id}" style="width: 5px"/>
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.L_reference}" style="width: 15%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                #{artf.article.refArt}
                                            </span>
                                            <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" style="float: right" title="Commentaire : #{artf.commentaire}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_article}">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                #{artf.article.designation}
                                            </span>                                        
                                            <span style="float: right">
                                                <h:graphicImage rendered="#{managedStockArticle.articleInDepot(artf, artf.docStock.destination)!=null}" title="#{managedStockArticle.articleInDepot(artf, artf.docStock.destination)}" library="icones" name="stop.png"  width="10" height="10"/>
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PES_lot}" style="text-align: center;width: 10%" 
                                                  rendered="#{managedTransfertStock.currentParam.useLotReception}">
                                            <span title="#{managedTransfertStock.ldf.format(artf.dateSave)}">#{artf.lotSortie.numero}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PTS_quantite_s}." style="text-align: right;width: 10%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:outputText value="#{artf.quantite}" converter="#{managedTransfertStock.converterStock}"/>
                                            </span>
                                            <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                                        </p:column>                                    
                                        <p:column headerText="#{lab.LC_PTS_prix_s}." style="text-align: right;width:8%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:outputText value="#{artf.prix}" converter="#{managedTransfertStock.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column id="colomn_qte_tr" headerText="#{lab.L_quantite} #{managedTransfertStock.displayQuantieRecu?'Recue':'E.'}" style="text-align: right;width: 8%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:panelGroup rendered="#{managedTransfertStock.displayQuantieRecu}">
                                                    <h:outputText value="#{artf.quantiteRecu}" converter="#{managedFactureAchat.converterStock}"/>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{!managedTransfertStock.displayQuantieRecu}">
                                                    <h:outputText value="#{artf.quantiteEntree}" converter="#{managedFactureAchat.converterStock}"/>
                                                </h:panelGroup>
                                            </span>
                                            <span title="#{artf.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnementEntree.unite.reference}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PTS_prix_e}." style="text-align: right;width: 8%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:outputText value="#{artf.prixEntree}" converter="#{managedTransfertStock.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column headerText="#{lab.LC_PTS_montant_total}" style="text-align: right;width: 10%">
                                            <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                                <h:outputText value="#{artf.prixTotal}" converter="#{managedTransfertStock.converter}"/>
                                            </span>
                                        </p:column>
                                        <p:column style="text-align: center;width: 30px">
                                            <p:commandLink style="width: 80%" styleClass="contenu contenu_#{artf.statut}" actionListener="#{managedTransfertStock.changeStatutLine(artf)}" disabled="#{managedTransfertStock.docStock.statut eq constantes.ETAT_EDITABLE}"
                                                           value="#{artf.statut}" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(artf.statut)}" update="data_contenu_transfert_stock"/>
                                        </p:column> 
                                        <p:column width="20" style="text-align: center"> 
                                            <f:facet name="header">
                                                <p:contextMenu for="btn_option_head_contenu_transfert_stock" event="left click" style="font-size: 0.8em;width: 220px">
                                                    <p:menuitem id="menu-search_contenu_tr" value="#{lab.L_recherche}" icon="ui-icon-search" global="false"/>
                                                    <p:separator style="width: 98%;margin: auto"/>
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedLivraisonVente.deleteBeanArticles(false)}"/>
                                                </p:contextMenu>
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_head_contenu_transfert_stock" type="button"/>
                                                <p:overlayPanel for="menu-search_contenu_tr" hideEffect="fade" style="width: 200px;background: black;color: white">
                                                    <h:inputText value="#{managedTransfertStock.articleContenu}" style="width:100%">
                                                        <p:ajax event="valueChange" listener="#{managedTransfertStock.findContenusByArticle()}" update="data_contenu_transfert_stock"/>
                                                    </h:inputText>
                                                </p:overlayPanel>
                                            </f:facet>
                                            <p:contextMenu for="btn_option_contenu_transfert_stock" event="left click" style="font-size: 0.8em;width: 200px">
                                                <p:menuitem value="#{lab.LC_PTS_receptions}" icon="ui-icon-arrowstop-1-s" actionListener="#{managedTransfertStock.addReceptionContenu(artf)}" oncomplete="dlgAddReception.show()"/>
                                                <p:menuitem value="#{lab.LC_PTS_ajouter_note}" icon="ui-icon-comment" global="false" actionListener="#{managedTransfertStock.addCommentaireContenu(artf)}" oncomplete="dlgAddCommentaire.show()"/>
                                                <p:menuitem value="#{artf.calculPr?'Désactiver':'Activer'} le calcul du pr" icon="#{artf.calculPr?'ui-icon-pause':'ui-icon-play'}"
                                                            actionListener="#{managedTransfertStock.changeCalculPr(artf)}" update="data_contenu_transfert_stock"/>
                                                <p:menuitem value="#{lab.LC_PTS_modifier_prix}" icon="ui-icon-refresh"  actionListener="#{managedTransfertStock.updatePrix_(artf)}" /> 
                                                <p:separator />
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedTransfertStock.setSelectContenu(artf)}" 
                                                            oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_transfert_stock" type="button"/>
                                        </p:column> 
                                        <p:column selectionMode="multiple" style="width:16px;text-align:center"/>  
                                    </p:dataTable>
                                </p:outputPanel>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_transfert_stock" style="width: 100%; margin: auto">
                    <div  class="part_list">
                        <h:inputHidden id="input_hide_transfert_stock" value="#{managedTransfertStock.tabIds}"/>
                        <p:contextMenu for="data_transfert_stock">
                            <p:menuitem icon="ui-icon-grip-solid-horizontal" value="#{lab.LC_PTS_supprimer_doublons}" actionListener="#{managedTransfertStock.removeDoublon()}" global="false"/>
                        </p:contextMenu>
                        <p:dataTable id="data_transfert_stock" value="#{managedTransfertStock.documents}" var="bon" rowKey="#{bon.id}" 
                                     rowIndexVar="bonIdx" selectionMode="single" paginator="true" rows="100" paginatorAlwaysVisible="false">
                            <p:ajax event="rowSelect" listener="#{managedTransfertStock.loadOnView}" oncomplete="collapseForm('transfert_stock');collapseForm('contenu_transfert_stock');collapseForm('cout_transfert_stock')"
                                    update="@this :main_transfert_stock:input_hide_transfert_stock"/>
                            <p:ajax event="rowToggle" listener="#{managedTransfertStock.displayContent(bon)}" global="false"/>   
                            <p:column width="30" >
                                <p:rowToggler/>
                            </p:column>     
                            <p:column headerText="N°" width="10" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="redo.png" width="15" height="15"
                                                rendered="#{bon.new_}"/>     
                                <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" 
                                                rendered="#{bon.cloturer}"/>     
                                <span title="Statut : #{managedTransfertStock.giveNameStatut(bon.statut)}">#{bonIdx+1}</span> 
                                <h:graphicImage  library="img" name="pointe.png" width="15" height="15"  style="float: right" rendered="#{bon.id eq managedTransfertStock.docStock.id}"/>  
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" width="100" styleClass="statut_#{bon.statut}">
                                <span title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}">#{bon.numDoc}</span>
                                <h:graphicImage title="#{lab.LC_PTS_renvoyer}" library="img" name="rotate.png" width="15" height="15" rendered="#{bon.statut == constantes.ETAT_RENVOYE}" style="float: right"/>     
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_date_transfert}" style="text-align: center" width="80" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY" title="Statut : #{managedTransfertStock.giveNameStatut(bon.statut)}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_depot_source}" width="100" styleClass="statut_#{bon.statut}">
                                <span title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}">#{bon.source.designation}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_tranche_source}" width="70" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.creneauSource.tranche.heureDebut}" converter="TIME" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}"/>
                                -
                                <h:outputText value="#{bon.creneauSource.tranche.heureFin}" converter="TIME" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_depot_reception}"  width="100" styleClass="statut_#{bon.statut}">
                                <span title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}">
                                    #{bon.destination.designation}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_tranche_reception}" width="70" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.creneauDestinataire.tranche.heureDebut}" converter="TIME" 
                                              title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}"/>
                                -
                                <h:outputText value="#{bon.creneauDestinataire.tranche.heureFin}" converter="TIME" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}"/>
                            </p:column>

                            <p:column width="60" headerText="#{lab.LC_PTS_ref_externe}">
                                #{bon.numPiece}
                            </p:column> 
                            <p:column style="text-align: center" styleClass="statut_#{bon.statut}" width="15">
                                <p:contextMenu for="btn_option_transfert_stock" event="left click" style="font-size: 0.8em;width: 220px">
                                    <p:menuitem value="#{bon.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{bon.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                                global="false" actionListener="#{managedTransfertStock.cloturer(bon)}" oncomplete="dlgConfirmClose.show()"/>
                                    <p:menuitem value="#{lab.LC_PTS_supprimer_doublons}" icon="ui-icon-grip-solid-horizontal" actionListener="#{managedTransfertStock.removeDoublon(bon)}" global="false"
                                                title="#{lab.LC_PTS_text5}"/>
                                    <p:menuitem value="Valider" icon="ui-icon-check" actionListener="#{managedTransfertStock.validerOrderOne(bon, true, true)}" /> 
                                    <p:separator />
                                    <p:menuitem value="#{lab.LC_PTS_bon_sortie}" disabled="true" />
                                    <p:menuitem value="#{lab.L_telecharger}"  actionListener="#{managedTransfertStock.print(bon, true, false)}" ajax="false"
                                                title="#{lab.LC_PTS_telecharger_bon_pdf}" icon="ui-icon-arrowthickstop-1-s" />
                                    <p:menuitem value="#{lab.L_telecharger_sans_entete}"  actionListener="#{managedTransfertStock.print(bon, false, false)}" ajax="false"
                                                title="#{lab.LC_PTS_telecharger_bon_pdf}" icon="ui-icon-arrowthickstop-1-s" />
                                    <p:menuitem value="#{lab.LC_PTS_bon_entree}" disabled="true" />
                                    <p:menuitem value="#{lab.L_telecharger}"  actionListener="#{managedTransfertStock.print(bon, true, true)}" ajax="false"
                                                title="#{lab.LC_PTS_telecharger_bon_pdf}" icon="ui-icon-arrowthickstop-1-s" />
                                    <p:menuitem value="#{lab.L_telecharger_sans_entete}"  actionListener="#{managedTransfertStock.print(bon, false, true)}" ajax="false"
                                                title="#{lab.LC_PTS_telecharger_bon_pdf}" icon="ui-icon-arrowthickstop-1-s" />
                                    <p:separator />
                                    <p:menuitem value="Propriétés" icon="ui-icon-note"  actionListener="#{managedTransfertStock.setSelectDoc(bon)}" oncomplete="dlgProprietes.show()" update=":main_proprietes_transfert:blog_proprietes_transfert"/>
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{managedTransfertStock.deleteBean_(bon)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_transfert_stock" type="button"/>
                            </p:column> 
                            <p:column style="text-align: center" styleClass="statut_#{bon.statut}" width="15">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_transfert_stock" value="false"
                                                             onclick="selectionAllLineTab(#{managedTransfertStock.documents.size()}, 'transfert_stock')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{bon.selectActif}" styleClass="chek_line_transfert_stock" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(bon.statut)}" 
                                                          onclick="selectionLineTab(#{bonIdx}, 'transfert_stock')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                            <p:rowExpansion>
                                <p:dataTable id="dt_row_ex_#{bon.id}" value="#{bon.contenus}" var="artfL"  rowKey="#{artfL.id}" rowIndexVar="artfIdx">
                                    <p:column headerText="N°" width="20" style="text-align: center">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artfL.new_}"/>
                                        <span title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(artfL.statut)}">#{artfIdx+1}</span>
                                    </p:column>
                                    <p:column headerText="ID" style="width: 20px">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:outputText value="#{artfL.id}" style="width: 5px"/>
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_reference}" style="width: 15%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            #{artfL.article.refArt}
                                        </span>
                                        <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artfL.onComment}" style="float: right" title="Commentaire : #{artfL.commentaire}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_article}">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            #{artfL.article.designation}
                                        </span>  
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PES_lot}" style="text-align: center;width: 10%" rendered="#{managedTransfertStock.currentParam.useLotReception}">
                                        <span title="#{managedTransfertStock.ldf.format(artfL.dateSave)}">#{artfL.lotSortie.numero}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTS_quantite_s}." style="text-align: right;width: 10%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:outputText value="#{artfL.quantite}" converter="#{managedTransfertStock.converterStock}"/>
                                        </span>
                                        <span title="#{artfL.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artfL.conditionnement.unite.reference}</span>
                                    </p:column>                                    
                                    <p:column headerText="#{lab.LC_PTS_prix_s}." style="text-align: right;width:8%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:outputText value="#{artfL.prix}" converter="#{managedTransfertStock.converter}"/>
                                        </span>
                                    </p:column>
                                    <p:column id="colomn_qte_tr" headerText="#{lab.L_quantite} #{managedTransfertStock.displayQuantieRecu?'Recue':'E.'}" style="text-align: right;width: 8%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:panelGroup rendered="#{managedTransfertStock.displayQuantieRecu}">
                                                <h:outputText value="#{artfL.quantiteRecu}" converter="#{managedFactureAchat.converterStock}"/>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{!managedTransfertStock.displayQuantieRecu}">
                                                <h:outputText value="#{artfL.quantiteEntree}" converter="#{managedFactureAchat.converterStock}"/>
                                            </h:panelGroup>
                                        </span>
                                        <span title="#{artfL.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artfL.conditionnementEntree.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTS_prix_e}." style="text-align: right;width: 8%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:outputText value="#{artfL.prixEntree}" converter="#{managedTransfertStock.converter}"/>
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PTS_montant_total}" style="text-align: right;width: 10%">
                                        <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artfL.dateSave) : 'Lot N° '.concat(artfL.lotSortie.numero)}" >
                                            <h:outputText value="#{artfL.prixTotal}" converter="#{managedTransfertStock.converter}"/>
                                        </span>
                                    </p:column>
                                    <p:column style="text-align: center;width: 30px">
                                        <p:commandLink style="width: 80%" styleClass="contenu contenu_#{artfL.statut}" actionListener="#{managedTransfertStock.changeStatutLine(artf)}" disabled="#{managedTransfertStock.docStock.statut eq constantes.ETAT_EDITABLE}"
                                                       value="#{artfL.statut}" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(artfL.statut)}" update="data_contenu_transfert_stock"/>
                                    </p:column>  
                                </p:dataTable>
                            </p:rowExpansion>
                        </p:dataTable>    
                        <span class="nbSelecttransfert_stock" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedTransfertStock.init(false)}" update="data_transfert_stock" icon="ui-icon-circle-triangle-w" disabled="#{managedTransfertStock.paginator.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedTransfertStock.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedTransfertStock.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="blur" listener="#{managedTransfertStock.gotoPagePaginator()}" update="data_transfert_stock"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedTransfertStock.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedTransfertStock.init(true)}" update="data_transfert_stock" icon="ui-icon-circle-triangle-e" disabled="#{managedTransfertStock.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedTransfertStock.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTransfertStock.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedTransfertStock.paginations}"/>
                                <p:ajax event="valueChange" update="data_transfert_stock"/>
                            </p:selectOneMenu>
                        </p:outputPanel>       
                    </div>                                   
                </div> 
                <div class="yvs_grid_transfert_stock" style="width: 100%; margin: auto">
                    <div class="part_list">
                        <p:dataTable id="data_contenus_transfert_stock" value="#{managedTransfertStock.all_contenus}" var="artf" rowKey="#{artf.id}" 
                                     rowIndexVar="artfIdx" selectionMode="single" style="font-size: 0.9em" editable="true" editMode="cell">
                            <p:ajax event="rowSelect" global="false" listener="#{managedTransfertStock.loadOnViewContent}"  oncomplete="collapseForm('transfert_stock');collapseForm('contenu_transfert_stock');collapseForm('cout_transfert_stock')"/>
                            <p:column headerText="N°" style="width: 30px" styleClass="statut_#{artf.statut}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    #{artfIdx+1}
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.L_article}" styleClass="statut_#{artf.statut}">
                                [<span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}"  style="font-weight: bold">
                                    #{artf.article.refArt}
                                </span>]
                                <span title="#{managedTransfertStock.ldf.format(artf.dateSave)}">#{artf.article.designation}</span>
                                <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" style="float: right" title="#{lab.LC_PTS_a_ete_commente}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PES_lot}" style="text-align: center;width: 10%" rendered="#{managedTransfertStock.currentParam.useLotReception}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    #{artf.lotSortie.numero}
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_quantite_s}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    <h:outputText value="#{artf.quantite}" converter="#{managedTransfertStock.converterStock}"/>
                                </span>
                                <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_quantite_e}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    <h:outputText value="#{artf.quantiteEntree}" converter="#{managedTransfertStock.converterStock}"/>
                                </span>
                                <span title="#{artf.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnementEntree.unite.reference}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_prix_s}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    <h:outputText value="#{artf.prix}" converter="#{managedTransfertStock.converter}"/>
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_prix_e}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    <h:outputText value="#{artf.prixEntree}" converter="#{managedTransfertStock.converter}"/>
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_document}" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    #{artf.docStock.numDoc}
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.L_depot}" styleClass="statut_#{artf.statut}">
                                <span title="#{managedTransfertStock.currentParam.useLotReception ? managedTransfertStock.ldf.format(artf.dateSave) : 'Lot N° '.concat(artf.lotSortie.numero)}" >
                                    #{artf.docStock.destination.designation}
                                </span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PTS_date_reception}" styleClass="statut_#{artf.statut}" style="text-align: center" disabledSelection="true">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{artf.dateReception}" converter="DATE" title="#{managedTransfertStock.ldf.format(artf.dateSave)}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:calendar value="#{artf.dateReception}" pattern="dd-MM-yyyy" disabled="#{artf.statut eq constantes.ETAT_VALIDE}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <p:commandLink style="width: 50%" styleClass="contenu_#{artf.statut}" actionListener="#{managedTransfertStock.changeStatutLine(artf, artf.dateReception, artf.docStock.statut)}" global="false"
                                               value="#{artf.statut}" title="#{lab.L_statut} : #{managedTransfertStock.giveNameStatut(artf.statut)}" update="data_contenus_transfert_stock"/>
                            </p:column> 
                        </p:dataTable>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedTransfertStock.loadContenus(false, false)}"  update="data_contenus_transfert_stock" icon="ui-icon-circle-triangle-w" disabled="#{managedTransfertStock.p_contenu.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedTransfertStock.p_contenu.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedTransfertStock.p_contenu.page}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedTransfertStock.gotoPagePaginatorContenu()}" update="data_contenus_transfert_stock"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedTransfertStock.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedTransfertStock.loadContenus(true, false)}"  update="data_contenus_transfert_stock" icon="ui-icon-circle-triangle-e" disabled="#{managedTransfertStock.p_contenu.disNext}"/>
                            <p:selectOneMenu value="#{managedTransfertStock.p_contenu.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTransfertStock.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedTransfertStock.paginations}"/>
                                <p:ajax event="valueChange" update="data_contenus_transfert_stock" />
                            </p:selectOneMenu>
                        </p:outputPanel> 
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false"   style="overflow-x: hidden">            
            <h:graphicImage library="img"  name="pointe_.png" style="float: left;border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">
                <div class="yvs_form_transfert_stock display_auteur" align="right"  style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedTransfertStock.selectDoc.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedTransfertStock.selectDoc.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedTransfertStock.selectDoc.author.users.nomUsers}" styleClass="valeur" style="font-weight: bold"/></span><br/>
                        <div style="display:#{managedTransfertStock.selectDoc.statut eq constantes.ETAT_VALIDE?'inline':'none'}">
                            <span>Transmis le <h:outputText value="#{managedTransfertStock.selectDoc.dateTransmis}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                            <span>#{lab.L_par} <h:outputText value="#{managedTransfertStock.selectDoc.authorTransmis.users.nomUsers}" styleClass="valeur" style="font-weight: bold"/></span>                            
                        </div>
                    </p:outputPanel>
                </div>
                <div id="zone_search_transfert_stock">
                    <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGrid id="blog_search_tranfert" columns="9" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0">
                            <h:outputText value="" />
                            <h:panelGroup>                            
                                <h:selectBooleanCheckbox value="#{managedTransfertStock.date_}">
                                    <p:ajax event="valueChange" listener="#{managedTransfertStock.chooseDateSearch()}" update="blog_date_search_transfert_stock :main_transfert_stock:data_transfert_stock"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.LC_PTS_source}" />
                            <h:outputText value="#{lab.LC_PTS_destinataire}" />
                            <h:panelGroup>
                                <h:outputText value="#{lab.L_statut}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedTransfertStock.egaliteStatut}" style="float:right;margin-right: 5px;">
                                    <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" update=":main_transfert_stock:data_transfert_stock" listener="#{managedTransfertStock.addParamStatut()}"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="#{lab.LC_PTS_a_faire}" />
                            <h:outputText value="" />
                            <p:commandButton icon="ui-icon-bullet" actionListener="#{managedTransfertStock.clearParams()}" title="#{lab.L_reset_param}" style="width: 20px; height: 22px" 
                                             update="blog_search_tranfert :main_transfert_stock:data_transfert_stock"/>
                            <h:panelGroup id="blog_date_search_transfert_stock">
                                <p:calendar value="#{managedTransfertStock.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedTransfertStock.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedTransfertStock.chooseDateSearch()}" update=":main_transfert_stock:data_transfert_stock"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedTransfertStock.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedTransfertStock.date_}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedTransfertStock.chooseDateSearch()}" update=":main_transfert_stock:data_transfert_stock"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedTransfertStock.agence_}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamAgence()}" oncomplete="collapseList('inventaire')" 
                                        update="search_select_source_transfert search_select_destination_transfert"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedTransfertStock.sourceSearch}" style="min-width: 120px; max-width: 180px" id="search_select_source_transfert">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="dsrc" itemLabel="#{dsrc.designation}" itemValue="#{dsrc.id}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.chooseSourceSearch()}" update=":main_transfert_stock:data_transfert_stock"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedTransfertStock.destSearch}" style="min-width: 120px; max-width: 180px" id="search_select_destination_transfert">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="drep" itemLabel="#{drep.designation}" itemValue="#{drep.id}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.chooseDestSearch()}" update=":main_transfert_stock:data_transfert_stock"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedTransfertStock.statut_}"  valueChangeListener="#{managedTransfertStock.chooseStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{lab.L_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="#{lab.LC_PTS_renvoyers}" itemValue="#{constantes.ETAT_RENVOYE}"/>
                                <f:selectItem itemLabel="#{lab.LC_PTS_transmis}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                                <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                                <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <p:ajax event="valueChange" update=":main_transfert_stock:data_transfert_stock"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedTransfertStock.numSearch_}">
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.searchByNum()}"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedTransfertStock.toValideLoad}" style="min-width: 80px">
                                <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                                <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamToValide()}" update=":main_transfert_stock:data_transfert_stock"/>
                            </h:selectOneMenu> 
                            <p:splitButton value="#{lab.L_rechercher}" actionListener="#{managedTransfertStock.loadAllTransfert(true)}" icon="ui-icon-search">
                                <p:menuitem value="Plus d'options" icon="ui-icon-plus" onclick="dlgPlusOption.show()"  global="false"/>
                                <p:menuitem value="Analyser" icon="ui-icon-search" oncomplete="dlgAnalyseQuery.show()"
                                            actionListener="#{managedTransfertStock.setInstance(managedTransfertStock)}"/>
                            </p:splitButton>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">
                            <p:commandLink onclick="dlgCleanStock.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;" title="#{lab.LC_PTS_nettoyage_stock}">
                                <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                            </p:commandLink>
                        </h:panelGroup>
                    </h:panelGrid>
                </div>
                <div id="zone_find_transfert_stock">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="7" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedTransfertStock.dateContenu}" style="float: left;margin-left: 5px">
                                    <p:ajax event="valueChange" listener="#{managedTransfertStock.findByDateContenu()}" oncomplete="collapseGrid('transfert_stock')"
                                            update="blog_date_search_transfert_stock_"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.LC_PTS_source}" />
                            <h:outputText value="#{lab.LC_PTS_destinataire}" />
                            <h:outputText value="#{lab.L_article}" />
                            <h:outputText value="#{lab.L_statut}" />
                            <h:outputText value="#{lab.L_reference}" />
                            <h:panelGroup id="blog_date_search_transfert_stock_">
                                <p:calendar value="#{managedTransfertStock.dateDebutContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedTransfertStock.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedTransfertStock.addParamDateContenu}" oncomplete="collapseGrid('transfert_stock')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedTransfertStock.dateFinContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedTransfertStock.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedTransfertStock.addParamDateContenu}" oncomplete="collapseGrid('transfert_stock')"/>
                                </p:calendar>
                            </h:panelGroup> 
                            <h:selectOneMenu value="#{managedTransfertStock.agenceContenu}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamAgenceSearch()}" oncomplete="collapseGrid('transfert_stock')"
                                        update="search-select_source_transfert_stock_contenu search-select_dest_transfert_stock_contenu"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedTransfertStock.sourceContenu}" id="search-select_source_transfert_stock_contenu" style="min-width: 120px; max-width: 200px">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="depS" itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                 
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamSourceSearch()}" oncomplete="collapseGrid('transfert_stock')"/>
                            </h:selectOneMenu> 
                            <h:selectOneMenu value="#{managedTransfertStock.destContenu}" id="search-select_dest_transfert_stock_contenu" style="min-width: 120px; max-width: 200px">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="depS" itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                 
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamDestSearch()}" oncomplete="collapseGrid('transfert_stock')"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedTransfertStock.article}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamArticle()}" oncomplete="collapseGrid('transfert_stock')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedTransfertStock.statutContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedTransfertStock.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedTransfertStock.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedTransfertStock.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamStatuts()}" oncomplete="collapseGrid('transfert_stock')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedTransfertStock.reference}">
                                <p:ajax event="valueChange" listener="#{managedTransfertStock.addParamReference()}" oncomplete="collapseGrid('transfert_stock')"/>
                            </h:inputText>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">
                            <p:contextMenu for="btn_option_search_tr_contenu_stock" event="left click" style="font-size: 0.8em;width: 230px">
                                <p:menuitem value="#{lab.LC_PTS_listings_entrees}" icon="ui-icon-print" title="#{lab.LC_PTS_telecharger_listings_entrees}"
                                            actionListener="#{managedTransfertStock.printListing(true)}" ajax="false"/>
                                <p:menuitem value="#{lab.LC_PTS_listings_sorties}" icon="ui-icon-print" title="#{lab.LC_PTS_telecharger_listings_sorties}"
                                            actionListener="#{managedTransfertStock.printListing(false)}" ajax="false"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_search_tr_contenu_stock" type="button"/>
                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>