<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Reconditionnement','modGescom', 'smenReconditionnement', true,managedReconditionnement)}
    </ui:define> 
    <ui:define name="contents"> 
        #{Marticle.doNothing()}
        #{managedLotReception.doNothing()}

        #{managedAgence.loadAllUsable()}
        #{managedDepot.loadDepotsByAgence()}
        #{managedReconditionnement.loadAll()}
        #{managedStockArticle.loadAll()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 140);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('transformation');
            });
        </script>

        <h:form prependId="false" id="main-agence">
            <p:dialog widgetVar="dlgAgenceForDepot" header="Selectionner une agence" width="50%" closeOnEscape="true"> 
                <p:dataTable value="#{managedAgence.agences}" var="ag" rowKey="#{ag.id}" selectionMode="single" id="table_agence" rowIndexVar="line_ag">
                    <p:ajax event="rowSelect" listener="#{managedDepot.onSelectAgenceForAction}" update=":main_transformation:select_depot_reconditionnement" oncomplete="dlgAgenceForDepot.hide()"/>
                    <p:column headerText="#{lab.L_code}" width="200">
                        <h:outputText value="#{ag.codeagence}"/>
                    </p:column>                                
                    <p:column headerText="#{lab.L_designation}">
                        <h:outputText value="#{ag.designation}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form>
            <p:remoteCommand name="updateBeanCaisse_" actionListener="#{managedReconditionnement.updateBean()}"/>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_mission" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:outputText value="#{lab.LDB_PC_dates}"  />
                        <h:selectBooleanCheckbox value="#{managedReconditionnement.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client"  listener="#{managedReconditionnement.addParamDate()}" oncomplete="collapseList('transformation')" />
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedReconditionnement.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedReconditionnement.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedReconditionnement.addParamDate}" update=":main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedReconditionnement.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedReconditionnement.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedReconditionnement.addParamDate}" update=":main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                        </p:calendar>
                    </h:panelGroup>

                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedReconditionnement.idsSearch}" style="width: 100%" title="#{lab.L_entrer_id_separer_virgules}">
                        <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamIds()}" oncomplete="collapseList('transformation')"
                                update=":main_transformation:data_transformation"/>
                    </h:inputText>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListArticle" modal="true" width="50%" closeOnEscape="true"> 
                <h:panelGrid style="width: 100%;margin-top: -5px;margin-bottom: -5px" columns="2" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText title="#{lab.L_reference_article}" value="#{managedStockArticle.numSearch}" 
                                 style="width: 180px;background: #009999;color:white;text-align: center;">
                        <p:ajax event="valueChange" global="false" update="data_articles_reconditionnement" listener="#{managedStockArticle.searchArticleByRefArtActif()}"/>
                    </h:inputText>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(false, false)}" global="false" update="data_articles_reconditionnement" icon="ui-icon-circle-triangle-w" disabled="#{managedStockArticle.pa.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedStockArticle.pa.currentPage}/#{managedStockArticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedStockArticle.loadActifArticleByDepot(true, false)}" global="false" update="data_articles_reconditionnement" icon="ui-icon-circle-triangle-e" disabled="#{managedStockArticle.pa.disNext}"/>
                        <p:selectOneMenu value="#{managedStockArticle.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedStockArticle.choosePaginatorAchat}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{managedStockArticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_articles_reconditionnement"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </h:panelGrid>
                <p:dataTable id="data_articles_reconditionnement" value="#{managedStockArticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" scrollHeight="185" rowIndexVar="yIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedReconditionnement.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"
                            update=":main_transformation:form_reconditionnement :main_transformation:desc_article_reconditionnement"/>
                    <p:column style="width: 2%">
                        <span title="#{art.article.designation}">#{yIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_ref}." style="width: 2%">
                        <span title="#{art.article.designation}">#{art.article.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_designation}" style="width: 6%">
                        <span title="#{art.article.designation}">#{art.article.designation}</span>
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
            <p:dialog header="#{lab.L_liste_article}" widgetVar="dlgListConditionnement" modal="true" width="70%" height="450" closeOnEscape="true"> 
                <p:dataTable id="data_conditionnements_reconditionnement" value="#{managedStockArticle.conditionnements}" var="art" rowIndexVar="artLine"
                             rowKey="#{art.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{managedReconditionnement.loadOnViewConditionnement}" oncomplete="dlgListConditionnement.hide()"
                            update=":main_transformation:form_reconditionnement :main_transformation:desc_article_reconditionnement"/>
                    <p:column headerText="NÂ°" width="20" style="text-align: center">
                        #{artLine+1}
                    </p:column>                                                        
                    <p:column headerText="#{lab.L_reference}" width="100">
                        <span style="font-weight: bold">#{art.article.refArt}</span>
                    </p:column>
                    <p:column  headerText="#{lab.L_designation}" width="150"> 
                        #{art.article.designation}
                    </p:column>
                    <p:column headerText="#{lab.L_unite}" width="100">
                        #{art.unite.libelle}                                
                        <span style="font-weight: bold">[#{art.unite.reference}]</span>
                    </p:column>
                    <p:column headerText="#{lab.L_categorie}" width="100" style="text-align: center">
                        #{art.article.categorie}
                    </p:column>
                    <p:column  headerText="#{lab.L_prix_v}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prix}"  converter="DN" />                                                            
                    </p:column>
                    <p:column  headerText="#{lab.L_prix_a}" width="80"  style="text-align: right">                                                            
                        <h:outputText value="#{art.prixAchat}"  converter="DN" />                                                            
                    </p:column>
                </p:dataTable> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByCancel" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PR_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReconditionnement.annulerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByCancel.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByCancel.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog widgetVar="dlgConfirmChangeInventaireByValid" closeOnEscape="true" header="#{lab.L_attention}"
                             message="#{lab.LC_PR_text1}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedReconditionnement.validerOrderByForce()}"
                                 oncomplete="dlgConfirmChangeInventaireByValid.hide()"/>
                <p:commandButton value="#{lab.L_non}" icon="ui-icon-circle-close" type="button" onclick="dlgConfirmChangeInventaireByValid.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmFinish" closeOnEscape="true"
                             message="#{lab.LC_PR_text2}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReconditionnement.terminer()}" oncomplete="dlgConfirmFinish.hide();collapseForm('transformation')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmFinish.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmEditer" closeOnEscape="true"
                             message="#{lab.LC_PR_text3}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReconditionnement.annulerByForce(false)}" oncomplete="dlgConfirmEditer.hide();collapseForm('transformation')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmEditer.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="#{lab.LC_PR_text4}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReconditionnement.annulerByForce(true)}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('transformation')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmAnnuler.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PR_text5}" header="#{lab.L_confirmation}" width="40%">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedReconditionnement.deleteBean()}" 
                                 oncomplete="dlgConfirmDelete.hide()" update=":main_transformation:data_transformation"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       DÃ©but du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_transformation">    
            <div class="part_fix">
                <p:splitButton value="#{lab.L_enregistrer}" id="save_transformation" actionListener="#{managedReconditionnement.saveNew()}" update="blog_transformation data_transformation"
                               icon="ui-icon-disk">
                    <p:menuitem value="#{lab.L_nouveau}" id="cancel_transformation" global="false" actionListener="#{managedReconditionnement.resetFiche()}" update="blog_transformation" oncomplete="collapseForm('transformation')"
                                icon="ui-icon-document"/>
                </p:splitButton>
                <p:splitButton value="Options" id="delete_transformation" icon="ui-icon-gear" global="false" style="font-size: 0.8em">
                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" onclick="dlgConfirmDelete.show()" global="false"/>
                </p:splitButton>
                <h:panelGroup style="margin-left: 35%">
                    <p:commandButton actionListener="#{managedReconditionnement.parcoursInAllResult(false)}" update="txt_parc_linear_transformation" global="false"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('transformation')"/>
                    <h:inputText value="#{managedReconditionnement.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_transformation"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedReconditionnement.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedReconditionnement.parcoursInAllResult(true)}" update="txt_parc_linear_transformation" global="false" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('transformation')"/>
                </h:panelGroup> 
                <div style="float: right">     
                    <h:link title="#{lab.L_mode_formulaire}" onclick="collapseForm('transformation');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('transformation');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>                    
                    <p:spacer />        
                    <h:link title="#{lab.L_mode_consultation} " onclick="collapseGrid('transformation');
                            return false">
                        <p:graphicImage library="icones" name="ico_arbre.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link> 
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_transformation" style="width: 99%; margin: auto; background: white">
                    <p:outputPanel id="blog_transformation">
                        <h:panelGrid id="form_entete_transformation" columns="2" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -5px;" cellpadding="0" cellspacing="0">
                            <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white;margin-top: -10px" rendered="#{managedReconditionnement.docStock.id gt 0}">                                            
                                <span style="font-size: initial">#{lab.L_numero} : </span>
                                <h:outputText id="txt_reference_document_transformation" value="#{managedReconditionnement.docStock.numDoc}"
                                              style="font-size: large"/>
                            </h:panelGrid>
                            <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: -5px" rendered="#{managedReconditionnement.docStock.id gt 0}">
                                <p:outputPanel id="grp_btn_etat_transformation" styleClass="yvs_form_of">                                    
                                    <p:commandLink value="#{(managedReconditionnement.docStock.statut==constantes.STATUT_DOC_ANNULE)?'EDITABLE':'EN EDITION'}" styleClass="button-stateOF #{(managedReconditionnement.docStock.statut == constantes.STATUT_DOC_EDITABLE)?'button-stateOF_actif':''}" 
                                                   disabled="#{!(managedReconditionnement.docStock.statut == constantes.STATUT_DOC_ANNULE
                                                               or managedReconditionnement.docStock.statut == constantes.STATUT_DOC_RENVOYE)}"
                                                   actionListener="#{managedReconditionnement.annuler(false)}"
                                                   process="@this"/>
                                    <p:commandLink value="#{(managedReconditionnement.docStock.statut==constantes.STATUT_DOC_VALIDE)?'VALID&Eacute;':'VALIDER'}" styleClass="button-stateOF #{(managedReconditionnement.docStock.statut==constantes.STATUT_DOC_VALIDE)?'button-stateOF_actif':''}" 
                                                   disabled="#{!(managedReconditionnement.docStock.statut == constantes.STATUT_DOC_EDITABLE)}" 
                                                   actionListener="#{managedReconditionnement.valider()}"
                                                   process="@this" />
                                    <p:commandLink value="#{(managedReconditionnement.docStock.statut==constantes.STATUT_DOC_ANNULE)?'ANNUL&Eacute;':'ANNULER'}" styleClass="button-stateOF #{(managedReconditionnement.docStock.statut==constantes.STATUT_DOC_ANNULE)?'button-stateOF_actif':''}" 
                                                   disabled="#{!(managedReconditionnement.docStock.statut == constantes.STATUT_DOC_EDITABLE 
                                                               or managedReconditionnement.docStock.statut == constantes.STATUT_DOC_VALIDE)}" 
                                                   actionListener="#{managedReconditionnement.annuler(true)}"
                                                   process="@this" />
                                </p:outputPanel>                                                
                            </h:panelGroup>                                     
                        </h:panelGrid> 
                        <div style="width: 61%;float: left">
                            <h:panelGrid id="form_transformation" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                <span>#{lab.L_depot} </span>
                                <h:panelGroup>
                                    <h:selectOneMenu value="#{managedReconditionnement.docStock.source.id}" style="min-width: 200px" id="select_depot_reconditionnement">
                                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedDepot.depots}" var="dep" 
                                                       itemLabel="#{dep.designation}" itemValue="#{dep.id}" />                          
                                        <p:ajax event="valueChange" listener="#{managedReconditionnement.chooseSource()}" update="select_creneau_reconditionnement"/>
                                    </h:selectOneMenu> 
                                    <p:commandLink value="Selectionner agence" onclick="dlgAgenceForDepot.show()" global="false" rendered="#{managedAgence.agences.size() gt 1}"/>
                                </h:panelGroup>
                                <span>#{lab.LC_PR_creneau} </span>  
                                <h:selectOneMenu value="#{managedReconditionnement.docStock.creneauSource.id}" disabled="#{(managedReconditionnement.docStock.statut != constantes.ETAT_EDITABLE)}"
                                                 id="select_creneau_reconditionnement" style="min-width: 200px">
                                    <f:selectItem itemLabel="--" itemValue="0"/>
                                    <f:selectItems value="#{managedReconditionnement.tranches}" var="cren" 
                                                   itemLabel="#{cren.semiReference}" itemValue="#{cren.id}" />                                 
                                    <p:ajax event="valueChange" listener="#{managedReconditionnement.chooseCreneau()}"/>
                                </h:selectOneMenu> 
                                <span>#{lab.LC_PR_date_fiche} </span>
                                <p:calendar value="#{managedReconditionnement.docStock.dateDoc}" size="10" pattern="dd-MM-yyyy"/>
                                <span>#{lab.L_reference} </span>       
                                <h:inputText value="#{managedReconditionnement.docStock.numPiece}" style="width: 98%"/>
                                <span>#{lab.LC_PR_editeur} </span>       
                                <h:inputText value="#{managedReconditionnement.docStock.editeur.nomUsers}" readonly="true" style="width: 200px"/>
                                <f:facet name="footer">
                                    <span>Commentaire </span>       
                                    <h:inputTextarea value="#{managedReconditionnement.docStock.description}" rows="3" style="width: 100%;margin-bottom: 5px"/>
                                </f:facet>
                            </h:panelGrid>                            
                        </div>
                        <div style="margin-left: 62%">
                            <p:outputPanel id="desc_article_reconditionnement" layout="block" style="margin: auto; background: white;padding-bottom: 10px">
                                <h1 style="padding-left: 10px">DÃ©tails du produit</h1>
                                <div style="float: left; width: 59%; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px;
                                     border-bottom: 2px solid #bbb; padding-left: 10px; padding-bottom: 10px; padding-top: 5px">
                                    <span style="font-weight: bold;color: #000">
                                        #{managedReconditionnement.contenu.article.designation}
                                    </span>
                                    <p:outputPanel rendered="#{accesRessource.base_view_article_pua}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                        <h:outputText value="Prix d'achat = " />
                                        <h:outputText value="#{managedReconditionnement.contenu.conditionnement.prixAchat}" converter="#{managedReconditionnement.converter}" style="font-weight: bold;color: #000"/>
                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                    </p:outputPanel>
                                    <p:outputPanel rendered="#{accesRessource.base_view_article_puv}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                        <h:outputText value="Prix de vente = " />
                                        <h:outputText value="#{managedReconditionnement.contenu.conditionnement.prix}" converter="#{managedReconditionnement.converter}" style="font-weight: bold;color: #000"/>
                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                    </p:outputPanel>
                                    <p:outputPanel rendered="#{accesRessource.base_view_article_pr}" layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                        <h:outputText value="#{lab.LC_PFA_cout_unitaire_stock} = " />
                                        <h:outputText value="#{managedReconditionnement.contenu.article.pr}" converter="#{managedReconditionnement.converter}"  style="font-weight: bold;color: #000"/>
                                        <span style="font-size: 0.8em">#{managedFactureAchat.currentScte.devise}</span>
                                    </p:outputPanel>
                                    <p:outputPanel layout="block" style="padding-top: 10px; padding-bottom: 10px">
                                        <h:outputText value="#{managedReconditionnement.contenu.article.stock}" converter="#{managedReconditionnement.converterStock}" style="font-weight: bold;color: #000"/>
                                        <h:outputText value=" #{managedReconditionnement.contenu.conditionnement.unite.reference} #{lab.LC_PFV_en_stock}"/>
                                    </p:outputPanel>
                                </div>
                                <div style="margin-left: 61%;" align="center">
                                    <h:graphicImage id="img_article" style="max-width: 100%;max-height: 180px" value="data:image/#{Marticle.photoArticle(managedReconditionnement.contenu.article)[1]};base64,#{Marticle.photoArticle(managedReconditionnement.contenu.article)[0]}"/>
                                </div>                                        
                            </p:outputPanel>
                        </div>
                        <h:panelGrid class="headline_data" columns="2" styleClass="yvs_nostyle" style="width: 100%">
                            <b><span> #{lab.LC_PR_contenus}</span></b>
                        </h:panelGrid> 
                        <h:panelGrid id="blog_reconditionnement" columns="1" style="width: 100%; border: none" styleClass="yvs_table">
                            <f:facet name="header">
                                <div class="zone_editPC" >
                                    <h:panelGrid id="form_reconditionnement" columns="#{managedReconditionnement.contenu.article.requiereLot?'7':'6'}" styleClass="yvs_nostyle" style="font-size: 0.9em" cellpadding="0" cellspacing="0"> 
                                        <h:outputText value="#{lab.L_article}"/>
                                        <h:outputText value="#{lab.L_quantite}" />
                                        <h:outputText value="#{lab.LC_PR_unite_sortie}"/>
                                        <h:outputText value="#{lab.LC_PR_unite_entree}"/>
                                        <h:outputText value="#{lab.LC_PR_qte_reconditionnee}"/>
                                        <h:outputText value="#{lab.LC_PES_lot}"  rendered="#{managedReconditionnement.contenu.article.requiereLot}"/>
                                        <h:outputText value=""/>     
                                        <h:panelGroup>
                                            <h:inputText value="#{managedReconditionnement.contenu.article.refArt}" style="color: #{managedReconditionnement.contenu.article.error?'red':''}" tabindex="10">
                                                <p:ajax event="valueChange" listener="#{managedReconditionnement.searchArticle()}" update="form_reconditionnement desc_article_reconditionnement"/>
                                            </h:inputText>    
                                            <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="#{lab.L_liste_article}" global="false"
                                                             actionListener="#{managedReconditionnement.initArticles()}" oncomplete="dlgListArticle.show()"/>
                                        </h:panelGroup>
                                        <pe:inputNumber value="#{managedReconditionnement.contenu.quantite}" tabindex="20" style="text-align: right">
                                            <p:ajax event="valueChange" global="false" listener="#{managedReconditionnement.blurQuantite()}" update="txt_resultante_reconditionnement"/>                                        
                                        </pe:inputNumber>
                                        <h:selectOneMenu value="#{managedReconditionnement.contenu.conditionnement.id}" style="min-width: 120px" title="#{lab.LC_PR_selectionner_unite_entree}" tabindex="15">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedReconditionnement.contenu.article.conditionnements}" var="un" 
                                                           itemLabel="#{un.unite.reference}" itemValue="#{un.id}"/>
                                            <p:ajax event="valueChange" global="false" listener="#{managedReconditionnement.chooseUniteSortie()}" update="desc_article_reconditionnement txt_resultante_reconditionnement"/>
                                        </h:selectOneMenu>
                                        <h:selectOneMenu value="#{managedReconditionnement.contenu.uniteDestination.id}" style="min-width: 120px" title="#{lab.LC_PR_selectionner_unite_sortie}" tabindex="15"
                                                         valueChangeListener="#{managedReconditionnement.chooseUniteEntree}">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedReconditionnement.contenu.article.conditionnements}" var="un" 
                                                           itemLabel="#{un.unite.reference}" itemValue="#{un.id}"/>
                                            <p:ajax event="valueChange" global="false" update="txt_resultante_reconditionnement"/>
                                        </h:selectOneMenu>
                                        <p:inputText id="txt_resultante_reconditionnement" value="#{managedReconditionnement.contenu.resultante}" readonly="true" tabindex="30" style="text-align: right"/>
                                        <h:inputText id="select_lot_reconditionnement" value="#{managedReconditionnement.contenu.lotSortie.numero}" style="color: #{managedReconditionnement.contenu.lotSortie.id lt 1?'red':''}"
                                                     rendered="#{managedReconditionnement.contenu.article.requiereLot}">
                                            <p:ajax event="valueChange" listener="#{managedReconditionnement.findLotReception(managedReconditionnement.contenu)}" update="@this"/>
                                        </h:inputText>
                                        <p:commandButton id="save_reconditionnement" icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right" oncomplete="collapseForm('reconditionnement')"
                                                         update="blog_reconditionnement blog_transformation data_transformation" actionListener="#{managedReconditionnement.saveNewContenu()}" tabindex="25"/>
                                    </h:panelGrid>  
                                </div>
                            </f:facet>
                            <p:outputPanel>
                                <p:dataTable id="data_reconditionnement" value="#{managedReconditionnement.docStock.contenus}" var="y" rowKey="#{y.id}" 
                                             rowIndexVar="yIdx" selectionMode="single" style="font-size: 0.9em">
                                    <p:ajax event="rowSelect" listener="#{managedReconditionnement.loadOnViewContenu}"/>
                                    <p:ajax event="rowUnselect" listener="#{managedReconditionnement.unLoadOnViewContenu}"/>
                                    <p:column headerText="NÂ°" style="width: 30px">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            #{yIdx+1}
                                        </span>
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{y.new_}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_reference}" style="width: 15%">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            #{y.article.refArt}
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_article}">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            #{y.article.designation}
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PES_lot}" style="text-align: center;width: 10%" rendered="#{managedReconditionnement.currentParam.useLotReception}">
                                        <span >#{y.lotSortie.numero}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.L_quantite}" style="text-align: right;width: 10%">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            <h:outputText value="#{y.quantite}" converter="#{managedReconditionnement.converterStock}"/>
                                        </span>
                                        <span title="#{y.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399"> #{y.conditionnement.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PR_resultante}" style="text-align: right;width: 10%">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            <h:outputText value="#{y.quantiteEntree}" converter="#{managedReconditionnement.converterStock}"/>
                                        </span>
                                        <span title="#{y.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399"> #{y.conditionnementEntree.unite.reference}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PR_prix_sortie}" style="text-align: right;width: 10%">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            <h:outputText value="#{y.prix}" converter="#{managedReconditionnement.converterCoutStock}"/>          
                                        </span>
                                    </p:column>
                                    <p:column headerText="#{lab.LC_PR_prix_entree}" style="text-align: right;width: 10%">
                                        <span title="#{managedReconditionnement.currentParam.useLotReception ? managedReconditionnement.ldf.format(y.dateSave) : 'Lot NÂ° '.concat(y.lotSortie.numero)}" >
                                            <h:outputText value="#{y.prixEntree}" converter="#{managedReconditionnement.converterCoutStock}"/>   
                                        </span>
                                    </p:column>
                                    <p:column style="width: 20px;text-align: center">
                                        <p:contextMenu for="btn_option_reconditionnement" event="left click" style="font-size: 0.8em; text-align: center"
                                                       styleClass="context_menu">
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedReconditionnement.deleteBeanContenu(y)}"
                                                        update="data_reconditionnement"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_reconditionnement" type="button"/>
                                    </p:column> 
                                </p:dataTable>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_transformation" style="width: 99%; margin: auto; background: white">
                    <h:inputHidden id="input_hide_transformation" value="#{managedReconditionnement.tabIds}"/>
                    <p:dataTable id="data_transformation" value="#{managedReconditionnement.documents}" var="mouv" 
                                 rowKey="#{mouv.id}" rowIndexVar="mouvIdx" selectionMode="single">
                        <p:ajax event="rowSelect" listener="#{managedReconditionnement.loadOnView}" update=":main_transformation:blog_transformation :main_transformation:input_hide_transformation" 
                                oncomplete="collapseForm('transformation')"/>
                        <p:column headerText="NÂ°" width="15" styleClass="statut_#{mouv.statut}">
                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{mouv.new_}"/>
                            <span>#{mouvIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_reference} " styleClass="statut_#{mouv.statut}">
                            <h:outputText value="#{mouv.numDoc}"/>
                        </p:column>
                        <p:column headerText="#{lab.L_date} " style="width: 12%;text-align: center" styleClass="statut_#{mouv.statut}">
                            <h:outputText value="#{mouv.dateDoc}" converter="DDMMYYYY"/>
                        </p:column>
                        <p:column headerText="#{lab.L_depot}" style="width: 20%;" styleClass="statut_#{mouv.statut}">
                            <span>#{mouv.source.designation}</span>
                        </p:column>
                        <p:column headerText="#{lab.LC_PR_editeur} " styleClass="statut_#{mouv.statut}">
                            <h:outputText value="#{mouv.editeur.nomUsers}"/>
                        </p:column>
                        <p:column headerText="" width="15" styleClass="statut_#{mouv.statut}" style="text-align: center">
                            <p:contextMenu for="btn_option_transformation" event="left click" style="font-size: 0.9em"
                                           styleClass="context_menu">
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedReconditionnement.openTodeleteBean(mouv)}" update="data_transformation"/>
                            </p:contextMenu>
                            <p:commandButton icon="ui-icon-gear" id="btn_option_transformation" style="width: 20px; height: 20px" type="button"/>
                        </p:column>
                        <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                            <f:facet name="header">
                                <h:selectBooleanCheckbox styleClass="chek_all_line_transformation" value="false"
                                                         onclick="selectionAllLineTab(#{managedReconditionnement.documents.size()}, 'transformation')">
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  value="#{mouv.selectActif}" styleClass="chek_line_transformation" title="#{mouv.dateSave.toString()}" 
                                                      onclick="selectionLineTab(#{mouvIdx}, 'transformation')">
                            </h:selectBooleanCheckbox>
                        </p:column>
                    </p:dataTable> 
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedReconditionnement.paginer(false)}" global="false" update="data_transformation" icon="ui-icon-circle-triangle-w" disabled="#{managedReconditionnement.paginator.disPrev}"/>
                        <p:outputPanel >
                            <p:inplace label="#{managedReconditionnement.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                <pe:inputNumber value="#{managedReconditionnement.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                    <p:ajax event="blur" listener="#{managedReconditionnement.gotoPagePaginator()}" update="data_transformation"/>
                                </pe:inputNumber>
                            </p:inplace><p:outputLabel value="/#{managedReconditionnement.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                        </p:outputPanel>
                        <p:commandButton actionListener="#{managedReconditionnement.paginer(true)}" global="false" update="data_transformation" icon="ui-icon-circle-triangle-e" disabled="#{managedReconditionnement.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedReconditionnement.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReconditionnement.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedReconditionnement.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_transformation"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div> 
                <div class="yvs_grid_transformation" style="width: 100%; margin: auto">
                    <div class="part_list">
                        <p:dataTable id="data_contenus_reconditionnement" value="#{managedReconditionnement.all_contenus}" var="artf" rowKey="#{artf.id}" 
                                     rowIndexVar="artfIdx" selectionMode="single" style="font-size: 0.9em">
                            <p:ajax event="rowSelect" global="false" listener="#{managedReconditionnement.loadOnViewContent}"  oncomplete="collapseForm('transformation');collapseForm('contenu_transfert_stock');collapseForm('cout_transfert_stock')"/>
                            <p:column headerText="NÂ°" style="width: 5%" styleClass="statut_#{artf.statut}">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                <span title="#{managedReconditionnement.ldf.format(artf.dateSave)}">#{artfIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_reference}" styleClass="statut_#{artf.statut}">
                                <span title="#{managedReconditionnement.ldf.format(artf.dateSave)}">#{artf.article.refArt}</span>
                                <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" style="float: right" title="#{lab.LC_PTS_a_ete_commente}"/>
                            </p:column>
                            <p:column headerText="#{lab.L_article}" styleClass="statut_#{artf.statut}">
                                <span title="#{managedReconditionnement.ldf.format(artf.dateSave)}">#{artf.article.designation}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PR_quantite_s}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <h:outputText value="#{artf.quantite}" converter="#{managedReconditionnement.converterStock}" title="#{managedReconditionnement.ldf.format(artf.dateSave)}"/>
                                <span title="#{artf.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnement.unite.reference}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PR_quantite_e}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <h:outputText value="#{artf.quantiteEntree}" converter="#{managedReconditionnement.converterStock}" title="#{managedReconditionnement.ldf.format(artf.dateSave)}"/>
                                <span title="#{artf.conditionnementEntree.unite.libelle}" style="font-size: 0.6em;color: #003399">#{artf.conditionnementEntree.unite.reference}</span>
                            </p:column>
                            <p:column headerText="#{lab.LC_PR_prix_s}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <h:outputText value="#{artf.prix}" converter="#{managedReconditionnement.converter}" title="#{managedReconditionnement.ldf.format(artf.dateSave)}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PR_prix_e}" style="text-align: right;width: 10%" styleClass="statut_#{artf.statut}">
                                <h:outputText value="#{artf.prixEntree}" converter="#{managedReconditionnement.converter}" title="#{managedReconditionnement.ldf.format(artf.dateSave)}"/>
                            </p:column>
                            <p:column headerText="#{lab.LC_PR_document}" style="width: 18%;" styleClass="statut_#{artf.statut}">
                                <span title="#{lab.LC_PTS_numero_serie}: #{managedReconditionnement.ldf.format(artf.dateSave)}">#{artf.docStock.numDoc}</span>
                            </p:column>
                            <p:column headerText="#{lab.L_depot}" style="width: 18%;" styleClass="statut_#{artf.statut}">
                                <span title="#{lab.LC_PTS_numero_serie} : #{managedReconditionnement.ldf.format(artf.dateSave)}">#{artf.docStock.source.designation}</span>
                            </p:column>
                        </p:dataTable>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedReconditionnement.loadContenus(false, false)}" global="false" update="data_contenus_reconditionnement" icon="ui-icon-circle-triangle-w" disabled="#{managedReconditionnement.p_contenu.disPrev}"/>
                            <p:outputPanel >
                                <p:inplace label="#{managedReconditionnement.p_contenu.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{managedReconditionnement.p_contenu.page}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="valueChange" listener="#{managedReconditionnement.gotoPagePaginatorContenu()}" update="data_contenus_reconditionnement"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{managedReconditionnement.p_contenu.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{managedReconditionnement.loadContenus(true, false)}" global="false" update="data_contenus_reconditionnement" icon="ui-icon-circle-triangle-e" disabled="#{managedReconditionnement.p_contenu.disNext}"/>
                            <p:selectOneMenu value="#{managedReconditionnement.p_contenu.rows}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedReconditionnement.choosePaginatorContenu}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedReconditionnement.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="data_contenus_reconditionnement" />
                            </p:selectOneMenu>
                        </p:outputPanel> 
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">
                <div class="yvs_form_transformation display_auteur" align="right"  style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le}<h:outputText value="#{managedReconditionnement.selectDoc.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedReconditionnement.selectDoc.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedReconditionnement.selectDoc.author.users.nomUsers}" styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div>
                <div id="zone_search_transformation">
                    <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="6" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0">
                            <h:panelGroup>                            
                                <h:selectBooleanCheckbox value="#{managedReconditionnement.date_}">
                                    <p:ajax event="valueChange" listener="#{managedValorisation.addParamDates()}" update="blog_date_search_transformation :main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.L_depot}" />
                            <h:panelGroup>
                                <h:outputText value="#{lab.L_statut}" style="float:left;margin-top: 2px"/>
                                <h:selectOneMenu value="#{managedReconditionnement.egaliteStatut}" style="float:right;margin-right: 5px;height: 20px">
                                    <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                    <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                    <p:ajax event="valueChange" update=":main_transformation:data_transformation" listener="#{managedReconditionnement.addParamStatut()}" oncomplete="collapseList('transformation')"/>
                                </h:selectOneMenu>  
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_reference}" />
                            <h:outputText value="" />
                            <h:panelGroup id="blog_date_search_transformation">
                                <p:calendar value="#{managedReconditionnement.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReconditionnement.date_}" size="8" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedValorisation.addParamDates()}" update=":main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedReconditionnement.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReconditionnement.date_}" size="8" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedValorisation.addParamDates()}" update=":main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                                </p:calendar>
                            </h:panelGroup>
                            <h:selectOneMenu value="#{managedReconditionnement.agence_}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamAgence()}" oncomplete="collapseList('transformation')" 
                                        update="search_select_depot_transformation :main_transformation:data_transformation"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedReconditionnement.depot_}" style="min-width: 120px" id="search_select_depot_transformation">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="depS" itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                 
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamSource()}" oncomplete="collapseList('transformation')"
                                        update=":main_transformation:data_transformation"/>
                            </h:selectOneMenu> 
                            <h:selectOneMenu value="#{managedReconditionnement.statut_}"  valueChangeListener="#{managedReconditionnement.chooseStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{lab.L_annuler}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <p:ajax event="valueChange" update=":main_transformation:data_transformation" oncomplete="collapseList('transformation')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedReconditionnement.numSearch_}">
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamReference()}" oncomplete="collapseList('transformation')"
                                        update=":main_transformation:data_transformation"/>
                            </h:inputText>
                            <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                           onclick="dlgPlusOption.show()" global="false" value="#{lab.L_plus_option}"/>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>                    
                </div>
                <div id="zone_find_transformation">
                    <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="6" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <h:panelGroup>
                                <h:selectBooleanCheckbox value="#{managedReconditionnement.dateContenu}" style="float: left;margin-left: 5px">
                                    <p:ajax event="valueChange" listener="#{managedReconditionnement.findByDateContenu()}" oncomplete="collapseGrid('transformation')"
                                            update="blog_date_search_transformation_"/>
                                </h:selectBooleanCheckbox>
                                <h:outputText value="#{lab.L_date}" />
                            </h:panelGroup>
                            <h:outputText value="#{lab.L_agence}" />
                            <h:outputText value="#{lab.L_depot}" />
                            <h:outputText value="#{lab.L_article}" />
                            <h:outputText value="#{lab.L_statut}" />
                            <h:outputText value="#{lab.L_reference}" />
                            <h:panelGroup id="blog_date_search_transformation_">
                                <p:calendar value="#{managedReconditionnement.dateDebutContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReconditionnement.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedReconditionnement.addParamDateContenu}" oncomplete="collapseGrid('transformation')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedReconditionnement.dateFinContenu}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedReconditionnement.dateContenu}" size="10" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedReconditionnement.addParamDateContenu}" oncomplete="collapseGrid('transformation')"/>
                                </p:calendar>
                            </h:panelGroup> 
                            <h:selectOneMenu value="#{managedReconditionnement.agenceContenu}" style="min-width: 120px">
                                <f:selectItems value="#{managedAgence.listAgence}" var="ag"
                                               itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamAgenceContenu()}" oncomplete="collapseGrid('transformation')" 
                                        update="search-depot_contenu"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu id="search-depot_contenu" value="#{managedReconditionnement.sourceContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedDepot.depots_all}" var="depS" itemLabel="#{depS.designation}" itemValue="#{depS.id}" />                                 
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamSourceSearch()}" oncomplete="collapseGrid('transformation')"/>
                            </h:selectOneMenu> 
                            <h:inputText value="#{managedReconditionnement.article}" style="min-width: 120px">
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamArticle()}" oncomplete="collapseGrid('transformation')"/>
                            </h:inputText>
                            <h:selectOneMenu value="#{managedReconditionnement.statutContenu}" style="min-width: 120px">
                                <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                                <f:selectItem itemLabel="#{managedReconditionnement.giveNameStatut(constantes.ETAT_VALIDE)}" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <f:selectItem itemLabel="#{managedReconditionnement.giveNameStatut(constantes.ETAT_EDITABLE)}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="#{managedReconditionnement.giveNameStatut(constantes.ETAT_ANNULE)}" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamStatuts()}" oncomplete="collapseGrid('transformation')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedReconditionnement.reference}">
                                <p:ajax event="valueChange" listener="#{managedReconditionnement.addParamNumero()}" oncomplete="collapseGrid('transformation')"/>
                            </h:inputText>
                        </h:panelGrid>
                        <h:panelGroup style="float: right">

                        </h:panelGroup>
                    </h:panelGrid>  
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>