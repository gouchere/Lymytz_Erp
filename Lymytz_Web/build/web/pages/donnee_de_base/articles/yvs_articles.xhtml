<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pretty="http://ocpsoft.com/prettyfaces"
                xmlns:c="http://java.sun.com/jsp/jstl/core">     
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Articles','modDonneBase', 'smenProduit', true,Marticle)}
    </ui:define>               
    <ui:define name="contents">    
        #{managedClient.doNothing()}   
        #{managedPointVente.doNothing()}    
        #{managedCondArticles.doNothing()}   
        #{managedUniteMesure.doNothing()} 
        #{managedLotReception.doNothing()}
        #{managedPointVente.doNothing()}

        #{managedAgence.loadAgence()}
        #{managedFournisseur.loadAllFournisseur_(true, true,false)}
        #{Mdico.loadPaysFromPageArt()}
        #{managedDepot.loadDepotActifByAgence(0)}
        #{managedStockArticle.load(true)}
        #{Marticle.loadAlls_art()}
        #{Marticle.loadAll()} 
        #{managedTemplateArticle.loadAlls()}
        #{managedFamilleArticle.loadFamilleByActif(true)}
        #{managedGroupeArticle.loadGroupeByActif(true)}
        #{managedClasseStat.loadAllClasStat(true,false)}        
        #{managedCategorieClt.loadAll()}
        #{managedCatCompt.loadAll()}
        #{managedCentreAnalytique.loadAllByNamedQuery()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - 210);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('article');
                collapseList('unite_article');
                collapseForm('grille_plan_tarifaire_article');
            });
        </script> 

        <h:form prependId="false">
            <p:dialog widgetVar="dlgUpdatePpte" width="45%" header="Modifier les propriétés"  closeOnEscape="true">
                <h:panelGrid columns="3" styleClass="yvs_table" cellpadding="0" cellspacing="0" >
                    <p:selectBooleanCheckbox value="#{Marticle.changePuvTTc}" />
                    <span>Prix de vente TTC ?</span>
                    <p:selectBooleanCheckbox value="#{Marticle.pptePuvTTC}" />
                    <p:selectBooleanCheckbox value="#{Marticle.changePuaTTc}" />
                    <span>Prix d'achat TTC ?</span>
                    <p:selectBooleanCheckbox value="#{Marticle.pptePuaTTC}" />
                    <p:selectBooleanCheckbox value="#{Marticle.changeSuiviStock}" />
                    <span>Activer le suivi de stocks ?</span>
                    <p:selectBooleanCheckbox value="#{Marticle.ppteSuiviStock}" />
                    <p:selectBooleanCheckbox value="#{Marticle.changeGestionLot}" />
                    <span>Activer la gestion des lots ?</span>
                    <p:selectBooleanCheckbox value="#{Marticle.ppteGestionLot}" />
                    <p:selectBooleanCheckbox value="#{Marticle.changepuvVariable}" />
                    <span>Prix de vente variable ?</span>
                    <p:selectBooleanCheckbox value="#{Marticle.pptePuvVariable}" />
                    <p:selectBooleanCheckbox value="#{Marticle.changeCategorie}" />
                    <span>Catégorie</span>
                    <h:selectOneMenu value="#{Marticle.ppteCategorie}" >
                        <f:selectItems value="#{constantes.CATEGORIES}" var="cat_" itemValue="#{cat_.valeur}" itemLabel="#{cat_.libelle}" /> 
                    </h:selectOneMenu>
                    <p:selectBooleanCheckbox value="#{Marticle.changeFamille}" />
                    <span>Famille</span>
                    <h:selectOneMenu value="#{Marticle.ppteFamille}" >
                        <f:selectItems value="#{managedFamilleArticle.familles}" var="famA"  itemLabel="#{famA.designation}" itemValue="#{famA.id}" />
                    </h:selectOneMenu>
                    <p:selectBooleanCheckbox value="#{Marticle.changeMethodeVal}" />
                    <span>Méthode de valorisation</span>
                    <h:selectOneMenu value="#{Marticle.ppteMethodeVal}" >
                        <f:selectItems value="#{constantes.METHODES_VAL}" var="mval" itemValue="#{mval.valeur}" itemLabel="#{mval.libelle}" itemDisabled="#{mval.valeur ne 'CMPI'}"/>                                          
                    </h:selectOneMenu>
                </h:panelGrid>
                <p:commandButton value="Appliquer" icon="ui-icon-check" actionListener="#{Marticle.applyChangeForArticle()}"
                                 update=":formulaire_mainArticle:tab_article" />
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="Télécharger les étiquettes" widgetVar="dlgPrintEtiquettes" width="650" footer="&copy;Lymytz 2014" closeOnEscape="true">
                <h:panelGrid columns="4" style="width: 100%" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                            <h:outputText value="#{lab.LDB_PA_categorie} " />
                            <h:outputText value="#{lab.LDB_PA_famille} " />
                            <h:outputText value="#{lab.LDB_PA_groupe} " />
                            <h:selectOneMenu value="#{Marticle.categoriePrint}" style="min-width: 120px; max-width: 160px">
                                <f:selectItem itemLabel="--" itemValue="" noSelectionOption="true"/>
                                <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" />                             
                            </h:selectOneMenu> 
                            <h:selectOneMenu value="#{Marticle.famillePrint}" style="min-width: 120px; max-width: 160px">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedFamilleArticle.familles}" var="fam" 
                                               itemLabel="#{fam.designation}" itemValue="#{fam.id}" />                             
                            </h:selectOneMenu> 
                            <h:selectOneMenu value="#{Marticle.groupePrint}" style="min-width: 120px; max-width: 160px">
                                <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedGroupeArticle.parents}" var="grp" 
                                               itemLabel="#{grp.designation}" itemValue="#{grp.id}" />                           
                            </h:selectOneMenu> 
                        </h:panelGrid>
                    </f:facet>
                    <p:commandLink actionListener="#{Marticle.printTicket('etiquette_simple')}" ajax="false">
                        <h:graphicImage library="img" name="etiquette_simple.PNG" width="150" height="150" title="Etiquette simple"/>
                    </p:commandLink>
                    <p:commandLink actionListener="#{Marticle.printTicket('etiquette_simple_slim')}" ajax="false">
                        <h:graphicImage library="img" name="etiquette_simple_slim.PNG" width="150" height="150" title="Etiquette simple Slim"/>
                    </p:commandLink>
                    <p:commandLink actionListener="#{Marticle.printTicket('etiquette_style')}" ajax="false">
                        <h:graphicImage library="img" name="etiquette_style.PNG" width="150" height="150" title="Etiquette stylé"/>
                    </p:commandLink>
                    <p:commandLink actionListener="#{Marticle.printTicket('etiquette_code_barre')}" ajax="false" disabled="true">
                        <h:graphicImage library="img" name="etiquette_code_barre.PNG" width="150" height="150" title="Etiquette avec code barre"/>
                    </p:commandLink>
                    <f:facet name="footer">
                        <h:panelGrid columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                            <span title="Determination du prix de vente">#{lab.LC_PCP_point_vente}</span>
                            <h:panelGroup>
                                <h:selectOneMenu id="txt_point_vente_article" value="#{Marticle.pointPrint}" style="width: 85%" title="Determination du prix de vente">
                                    <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                    <f:selectItems value="#{managedPointVente.pointsvente}" var="pts"  itemLabel="#{pts.libelle}" itemValue="#{pts.id}" />                                
                                </h:selectOneMenu>
                                <p:commandButton icon="ui-icon-refresh" style="width: 22px; height: 22px" title="Actualiser" 
                                                 actionListener="#{managedPointVente.loadAllPointVente()}" update="txt_point_vente_article"/>
                            </h:panelGroup>
                        </h:panelGrid>
                    </f:facet>
                </h:panelGrid>                
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog id="form_update_art_pt" header="#{lab.LDB_PA_points_vente}" widgetVar="dlgPtarticle" width="80%" footer="&copy;Lymytz 2014"  
                      closeOnEscape="true" >
                <f:facet name="header">
                    <span>#{Marticle.entityArticle.designation} en #{Marticle.selectCondit.unite.reference}</span>
                </f:facet>
                <p:dataTable id="data_article_point" value="#{Marticle.pointsVentes}" var="artf" rowKey="#{artf.id}" rowIndexVar="artfIdx" editable="true"
                             paginator="true" rows="15">
                    <p:ajax event="rowEdit" listener="#{Marticle.updateConditionnementPoint}"/>
                    <p:column style="width: 5%" headerText="N°">
                        <span>#{artfIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.L_point_vente}">
                        <span>#{artf.article.point.libelle}</span>
                        <h:graphicImage title="#{lab.LC_PPV_text10}" library="img"  name="bookmark.png" width="15" height="15" rendered="#{artf.article.prioritaire}" style="float: right"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PPV_prix}" style="width: 20%;text-align: right">
                        <p:cellEditor>
                            <f:facet name="output">                                
                                <h:outputText value="#{artf.puv}" converter="DN" style="font-weight: bold"/>
                                <h:graphicImage title="#{lab.LC_PPV_text11}" library="icones"  name="update.png" width="15" height="15" 
                                                rendered="#{artf.article.changePrix}" style="float: left"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{artf.puv}" style="text-align: right;width:100%"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{lab.LC_PPV_prix_min}" style="width: 20%;text-align: right">
                        <p:cellEditor>
                            <f:facet name="output">        
                                <h:outputText value="#{artf.prixMin}" converter="DN" style="font-weight: bold"/>
                                <h:outputText value="%" rendered="#{artf.naturePrixMin == constantes.NATURE_TAUX}"/>  
                            </f:facet>
                            <f:facet name="input">
                                <h:selectOneMenu value="#{artf.naturePrixMin}">
                                    <f:selectItem itemLabel="#{constantes.NATURE_MTANT} " itemValue="#{constantes.NATURE_MTANT}" />
                                    <f:selectItem itemLabel="#{constantes.NATURE_TAUX} " itemValue="#{constantes.NATURE_TAUX}" />
                                </h:selectOneMenu>
                                <h:inputText value="#{artf.prixMin}" style="text-align: right;width: 120px"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{lab.LC_PPV_remise}" style="width: 10%;text-align: right">
                        <p:cellEditor>
                            <f:facet name="output">        
                                <h:outputText value="#{artf.remise}" converter="DN" style="font-weight: bold"/>
                                <h:outputText value="%" rendered="#{artf.natureRemise == constantes.NATURE_TAUX}"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:selectOneMenu value="#{artf.natureRemise}">
                                    <f:selectItem itemLabel="#{constantes.NATURE_MTANT} " itemValue="#{constantes.NATURE_MTANT}" />
                                    <f:selectItem itemLabel="#{constantes.NATURE_TAUX} " itemValue="#{constantes.NATURE_TAUX}" />
                                </h:selectOneMenu>
                                <h:inputText value="#{artf.remise}" style="text-align: right;width: 120px"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{lab.L_actif}" style="width: 8%;text-align: center">
                        <p:commandLink title="#{(artf.actif and artf.article.actif)?lab.L_desactiver:lab.L_activer}" actionListener="#{Marticle.activeConditionnementPoint(artf)}" update="data_article_point" style="margin-top: 5px">
                            <h:graphicImage library="img"  name="#{(artf.actif and artf.article.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                        </p:commandLink>
                    </p:column>
                    <p:column style="width: 30px;text-align:center">
                        <p:commandButton icon="ui-icon-plusthick" style="width:22px; height:22px" rendered="#{artf.id le 0}" title="Ajouter dans le point de vente"
                                         actionListener="#{Marticle.addConditionnementPoint(artf)}" update="data_article_point"/>
                        <p:commandButton icon="ui-icon-minusthick" style="width:22px; height:22px" rendered="#{artf.id gt 0}" title="Retirer du point de vente"
                                         actionListener="#{Marticle.removeConditionnementPoint(artf)}" update="data_article_point"/>
                    </p:column>
                    <p:column style="width:3px;text-align:center">
                        <p:rowEditor rendered="#{artf.id gt 0}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_points_vente}" widgetVar="dlgPtarticles" width="50%" footer="&copy;Lymytz 2014" closeOnEscape="true" >
                <p:outputPanel id="form_update_art_pts">
                    <h:panelGrid columns="4" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                        <f:facet name="header">
                            <div align="left">
                                <span style="font-weight: normal">#{lab.LDB_PA_point_vente}</span>
                                <h:selectOneMenu value="#{managedPointVente.article.point.id}" valueChangeListener="#{managedPointVente.selectedPoint}">
                                    <f:selectItems value="#{managedPointVente.pointsvente}" var="apoint" itemLabel="#{apoint.libelle}"
                                                   itemValue="#{apoint.id}"/>
                                    <p:ajax event="valueChange" />
                                </h:selectOneMenu> 
                                <p:commandButton value="#{lab.LDB_PA_promo}" icon="ui-icon-heart" style="float: right" title="#{lab.LDB_PA_planifier_promotion}"/>
                            </div>
                        </f:facet>
                        <span>#{lab.LDB_PA_articles}</span>
                        <h:inputText value="#{managedPointVente.article.article.designation}" readonly="true" style="font-weight: bold"/>
                        <span>#{lab.LDB_PA_unite}</span>
                        <h:inputText value="#{managedPointVente.article.conditionnement.unite.reference}" readonly="true" style="font-weight: bold"/>
                        <span>#{lab.LDB_PA_prix_u}</span>
                        <h:inputText value="#{managedPointVente.article.puv}" styleClass="w_40"/>
                        <span>#{lab.LDB_PA_remise}</span>
                        <h:inputText value="#{managedPointVente.article.remise}" styleClass="w_40"/>
                        <f:facet name="footer">
                            <span>#{lab.LDB_PA_prioritaire}</span>
                            <h:selectBooleanCheckbox value="#{managedPointVente.article.prioritaire}" />
                            <span title="#{lab.LDB_PA_text1}">#{lab.LDB_PA_prix_variable}</span>
                            <h:selectBooleanCheckbox value="#{managedPointVente.article.changePrix}" />                            
                            <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedPointVente.saveNewArticle(false)}" style="float: right"/>
                        </f:facet>
                    </h:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="bt_niveau">
            <p:dialog header="Liste des niveaux" width="50%" widgetVar="dlgArtByComptes" height="500">
                <ui:repeat value="#{Marticle.niveau}" var="art">
                    <p:commandButton value="#{art} " actionListener="#{Marticle.mettreEnAvant(art)}" oncomplete="dlgArtByComptes.hide()"/>
                    <p:outputLabel value="-"/> 
                </ui:repeat>
                <p:commandButton value="#{Marticle.niveauMax} " actionListener="#{Marticle.mettreEnAvant(Marticle.niveauMax)}"  oncomplete="dlgArtByComptes.hide()"/>
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="form-tag_articles">
            <p:dialog header="Tags" hideEffect="explode" widgetVar="dlgTagsArticles" closeOnEscape="true" width="500">
                <h:panelGrid id="blog-tag_articles" columns="1" style="width: 100%" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:inputText value="#{Marticle.tag}"/>
                        <p:commandButton value="#{lab.L_ajouter}" actionListener="#{Marticle.addTag()}" style="height: 30px"/>
                    </h:panelGroup>
                    <p:separator style="width: 100%"/>
                    <div style="text-align:left;">
                        <ui:repeat value="#{Marticle.tags}" var="tag">
                            <span class="signes_op">
                                <p:commandLink value="X" actionListener="#{Marticle.removeTags(tag)}" />
                                #{tag}
                            </span>                                                
                        </ui:repeat>
                    </div>
                </h:panelGrid>                
            </p:dialog>
        </h:form>
        <h:form id="main-rabais_article_point" prependId="false">
            <p:dialog header="#{lab.LDB_PA_plan_rabais}" widgetVar="dlgRabais" width="50%" closeOnEscape="true" footer="&copy;Lymytz 2014" 
                      modal="true" > 
                <p:outputPanel id="bloc-rabais_article_point">
                    <h:panelGrid id="form_rabais_article_point" columns="2" style="width: 100%" styleClass="yvs_table" 
                                 cellpadding="0" cellspacing="0">                        
                        <f:facet name="header">
                            <h:panelGroup>
                                <div style="float: left">
                                    [<span>#{articles.refArt}</span>]
                                    <span>#{articles.designation}</span>
                                </div>
                                <div style="float: right">
                                    <p:selectBooleanCheckbox value="#{Marticle.rabais.actif}" itemLabel="Actif ?"/>
                                </div>
                            </h:panelGroup>
                        </f:facet>
                        <span>#{lab.LDB_PA_point_vente}</span>    
                        <h:panelGroup>
                            <h:selectOneMenu value="#{Marticle.rabais.point.id}" style="min-width: 120px" 
                                             title="#{lab.LDB_PA_selectionner_conditionnement}">
                                <f:selectItem itemLabel="--" itemValue="0"/>
                                <f:selectItems value="#{managedPointVente.pointsvente}" var="ptv" itemLabel="#{ptv.libelle}" itemValue="#{ptv.id}"/>
                                <p:ajax event="valueChange" global="false" listener="#{Marticle.choosePointVente()}"/>
                            </h:selectOneMenu>
                            <h:panelGroup style="float: right;margin-top: 5px;font-style: italic">
                                <span>#{lab.LDB_PA_vendu_a}</span>
                                <h:outputText value="#{Marticle.selectUnite.prix}" converter="DN" style="font-weight: bold"/>
                                <span style="font-size: 0.9em"> Fcfa</span>
                            </h:panelGroup>
                        </h:panelGroup>
                        <h:panelGroup>
                            <span>#{lab.LDB_PA_dates} </span>
                            <h:selectBooleanCheckbox value="#{Marticle.rabais.permanent}" title="Permanent" style="float: right">
                                <p:ajax event="valueChange" global="false" update="select_dates_rabais_article_point"/>
                            </h:selectBooleanCheckbox>
                        </h:panelGroup>
                        <h:panelGroup id="select_dates_rabais_article_point">
                            <span>#{lab.LDB_PA_du} </span>
                            <p:calendar value="#{Marticle.rabais.dateDebut}" navigator="true" pattern="dd-MM-yyyy" disabled="#{Marticle.rabais.permanent}" size="8"/>
                            <span> #{lab.LDB_PA_au} </span>
                            <p:calendar value="#{Marticle.rabais.dateFin}" navigator="true" pattern="dd-MM-yyyy" disabled="#{Marticle.rabais.permanent}" size="8"/>
                        </h:panelGroup>
                        <span>#{lab.LDB_PA_montant} </span>   
                        <h:panelGroup>
                            <h:inputText value="#{Marticle.rabais.montant}" style="text-align: right; width: 100px"/>
                            <span style="font-size: 0.9em"> Fcfa</span>
                        </h:panelGroup>
                        <f:facet name="footer">
                            <p:commandButton value="#{lab.L_nouveau}" style="float: left" actionListener="#{Marticle.resetFicheRabais()}" 
                                             update="form_rabais_article_point"/>
                            <p:commandButton value="#{lab.L_enregistrer}" style="float: right" actionListener="#{Marticle.saveNewRabais()}" 
                                             update="bloc-rabais_article_point"/>
                        </f:facet>
                    </h:panelGrid>
                    <p:dataTable id="data-rabais_article_point" value="#{managedPointVente.listRabais}" var="rab" rowKey="#{rab.id}"
                                 selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false" >
                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewRabais}"/>
                        <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewRabais}"/>
                        <p:column headerText="Point" style="text-align: center">
                            <span style="font-weight: bold">#{rab.article.article.point.libelle}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_periodes}" style="text-align: center">
                            <h:outputText value="--PERMANENT--" rendered="#{rab.permanent}"/>
                            <h:panelGroup rendered="#{!rab.permanent}">
                                <h:outputText value="#{rab.dateDebut}" converter="DATE"/>
                                <p:spacer width="5" style="background: black"/>
                                <h:outputText value="#{rab.dateFin}" converter="DATE"/>                                
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_rabais}" style="text-align: right">
                            <h:outputText value="#{rab.montant}" converter="DN"/>
                            <span style="font-size: 0.9em"> Fcfa</span>
                        </p:column>
                        <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                            <h:graphicImage title="#{(rab.actif)?'Desactiver':'Activer'}" library="img"  name="#{(rab.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                        </p:column>
                        <p:column style="width: 5%;text-align: center">
                            <p:contextMenu for="btn_option-rabais_article_point" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.LDB_PA_grille}" icon="ui-icon-note" global="false" actionListener="#{managedPointVente.setSelectRabais(rab)}" 
                                            oncomplete="dlgGrilleRabais.show()" update=":main-grille_rabais:blog-grille_rabais" rendered="false"/>
                                <p:separator rendered="false" />
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{Marticle.deleteBeanRabais(rab)}" 
                                            update="data-rabais_article_point"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option-rabais_article_point" type="button"/>
                        </p:column> 
                    </p:dataTable>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form> 
        <h:form id="main-code_barre" prependId="false">
            <p:dialog header="Codes barre" widgetVar="dlgCodeBarre" width="30%" closeOnEscape="true" footer="&copy;Lymytz 2014" 
                      modal="true" > 
                <h:panelGrid id="form_code_barre" columns="1" style="width: 100%" cellpadding="0" cellspacing="0" styleClass="yvs_nostyle">
                    <f:facet name="header">
                        <div align="right">
                            <p:commandButton icon="ui-icon-circle-plus" value="#{lab.L_enregistrer}" actionListener="#{Marticle.addCodeBarre()}"
                                             update="table_codes_barres" />     
                        </div>
                    </f:facet>
                    <span>#{lab.LDB_PCB_code_barre}</span>
                    <h:inputText value="#{Marticle.codeBarre.codeBarre}" style="width: 100%"/>
                    <f:facet name="footer">
                        <p:dataTable  value="#{Marticle.selectCondit.codesBarres}" var="codeB" rowIndexVar="line_" rowKey="#{codeB.id}" id="table_codes_barres">
                            <p:ajax event="rowSelect" global="false" listener="#{Marticle.loadOnViewCodeBarre}" update=":main-code_barre:form_code_barre"/>
                            <p:ajax event="rowUnselect" global="false" listener="#{Marticle.unLoadOnViewCodeBarre}" update=":main-code_barre:form_code_barre"/>
                            <p:column width="15" headerText="N°">
                                #{line_+1}
                            </p:column>
                            <p:column headerText="#{lab.LDB_PCB_code_barre}">
                                #{codeB.codeBarre}
                            </p:column>
                            <p:column width="10" headerText="" style="text-align: center">
                                <p:commandButton icon="ui-icon-circle-close" actionListener="#{Marticle.deleteCodeBarre(codeB)}" process="@this" 
                                                 update="table_codes_barres :main-code_barre:form_code_barre" style="width: 22px; height: 22px"/>
                            </p:column>
                        </p:dataTable>                    
                    </f:facet>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form> 

        <!-->
                *****************************************************************************
                Boite de dialogue des grilles de rabais
                *****************************************************************************
                <-->  
        <h:form prependId="false" id="main-grille_rabais">
            <p:dialog widgetVar="dlgGrilleRabais" header="#{lab.LDB_PA_grilles_rabais}" width="60%" closeOnEscape="true"> 
                <p:outputPanel id="blog-grille_rabais">
                    <h:panelGrid id="form-grille_rabais" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                        <f:facet name="header">
                            <div align="left">
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-weight: bold" cellpadding="0" cellspacing="0">
                                    <span>#{lab.LDB_PA_base} </span>
                                    <h:selectOneRadio value="#{managedPointVente.grille.base}" layout="grid"  styleClass="yvs_nostyle">
                                        <f:selectItem itemLabel="#{constantes.BASE_QTE} " itemValue="#{constantes.BASE_QTE}" />
                                        <f:selectItem itemLabel="#{constantes.BASE_CA} " itemValue="#{constantes.BASE_CA}" />
                                        <p:ajax event="valueChange" global="false"/>
                                    </h:selectOneRadio>
                                </h:panelGrid>
                            </div>
                        </f:facet>
                        <span>#{lab.LDB_PA_interval} </span>
                        <h:panelGrid columns="2" style="width: 100%;margin-left: -10px" styleClass="yvs_nostyle">
                            <h:selectBooleanCheckbox value="#{managedPointVente.grille.unique}" style="float: right">
                                <p:ajax event="valueChange" global="false"  update="txt-intervale_montant_rabais"/>
                            </h:selectBooleanCheckbox>
                            <h:panelGroup id="txt-intervale_montant_rabais">
                                <pe:inputNumber value="#{managedPointVente.grille.montantMinimal}" disabled="#{managedPointVente.grille.unique}" style="text-align: right"/>
                                <p:spacer style="background: #000" width="5"/>
                                <pe:inputNumber value="#{managedPointVente.grille.montantMaximal}" disabled="#{managedPointVente.grille.unique}" style="text-align: right"/>                                                                
                            </h:panelGroup>
                        </h:panelGrid>
                        <span>#{lab.LDB_PA_nature_montant} </span>
                        <h:selectOneRadio value="#{managedPointVente.grille.natureMontant}" layout="grid" styleClass="yvs_nostyle">
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT} " itemValue="#{constantes.NATURE_MTANT}" />
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX} " itemValue="#{constantes.NATURE_TAUX}" />
                        </h:selectOneRadio>
                        <span>#{lab.LDB_PA_valeur}</span>
                        <pe:inputNumber value="#{managedPointVente.grille.montantRabais}" style="text-align: right;width: 120px"/> 
                    </h:panelGrid>
                    <div style="margin-top: 5px">                        
                        <p:commandButton value="#{lab.L_nouveau}" global="false" actionListener="#{managedPointVente.resetFicheGrilleRabais()}"
                                         update="form-grille_rabais" style="float: left"/>
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedPointVente.saveNewGrille()}"
                                         update="blog-grille_rabais" style="float: right"/>
                    </div>
                    <p:outputPanel>
                        <p:dataTable id="data-grille_rabais" value="#{managedPointVente.selectRabais.tranches}" var="gril"
                                     rowKey="#{gril.id}" rowIndexVar="comIdx_" selectionMode="single" >
                            <p:ajax event="rowSelect" global="false" listener="#{managedPointVente.loadOnViewGrilleRabais}"/>
                            <p:ajax event="rowUnselect" global="false" listener="#{managedPointVente.unLoadOnViewGrilleRabais}"/>
                            <p:column headerText="N°" style="width: 0.25%">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{gril.new_}"/>
                                <span>#{comIdx_+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_valeur_min}" style="text-align: right;width: 1%">
                                <h:outputText rendered="#{gril.montantMinimal gt 0}" value="#{gril.montantMinimal}" converter="DN"/>
                                <h:outputText rendered="#{gril.montantMinimal le 0}" value=" Min"/> 
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_valeur_max}" style="text-align: right;width: 1.5%">
                                <h:outputText rendered="#{constantes.MAX_DOUBLE gt gril.montantMaximal}" value="#{gril.montantMaximal}" converter="DN"/>
                                <h:outputText rendered="#{gril.montantMaximal ge constantes.MAX_DOUBLE}" value=" Max"/> 
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_rabais}" style="text-align: right;width: 2%">
                                <h:outputText value="#{gril.montantRistourne}" converter="DN"/>
                                <h:outputText value="#{gril.natureMontant == constantes.NATURE_MTANT?'':'%'}"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_base}" style="text-align: right;width: 1.5%">
                                <h:outputText value="#{gril.base}"/>
                            </p:column>
                            <p:column style="width: 1%;text-align: center">
                                <p:contextMenu for="btn_option-grille_rabais" event="left click" style="font-size: 0.8em">
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedPointVente.deleteBeanGrilleRabais(gril)}"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option-grille_rabais" type="button"/>
                            </p:column> 
                        </p:dataTable>
                    </p:outputPanel>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_article_lier_compte}" width="50%" widgetVar="dlgArtByCompte" height="500">
                <p:dataTable value="#{Marticle.articlesByCompte}" var="iarc" id="table_art_compte" style="max-height: 470px; overflow-y: auto"
                             rowIndexVar="line" rowKey="#{line}">
                    <p:column headerText="N°" >
                        #{line+1}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_reference}" >
                        #{iarc[0]}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_designation}" filterBy="#{iarc[1]}">
                        #{iarc[1]}
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-prix_production">
            <p:dialog header="#{lab.LDB_PA_definir_prix_production}" width="400" widgetVar="dlgPrixProd" resizable="false">
                <h:inputText id="value-prix_production" value="#{Marticle.selectUnite.prixProd}">
                    <p:ajax event="valueChange" global="false"/>
                </h:inputText>
                <p:commandButton icon="ui-icon-circle-plus" style="width: 26px; height: 26px;float: right"
                                 actionListener="#{Marticle.definedPrixProduction()}"
                                 update=":formulaire_mainArticle:tbvArticle:data_conditionnement_article"/>
            </p:dialog>
        </h:form> 

        <h:form prependId="false" id="main-simulation_prix">
            <p:dialog header="#{lab.LDB_PA_simulation_prix_vente}" width="40%" closeOnEscape="true" widgetVar="dlgSimulation" resizable="false"> 
                <h:panelGrid id="form-simulation_prix" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <div align="left" style="margin-top: 7px;margin-left: 5px">
                            <span>#{Marticle.selectUnite.article.designation}</span>
                            <span style="font-weight: normal"> en </span>
                            <span style="font-style: italic">#{Marticle.selectUnite.unite.reference}</span>
                            <h:selectOneMenu value="#{Marticle.typePrix}" style="float: right">
                                <f:selectItem itemValue="V" itemLabel="#{lab.LDB_PA_vente}"/>
                                <f:selectItem itemValue="A" itemLabel="#{lab.LDB_PA_achat}"/>
                                <f:selectItem itemValue="R" itemLabel="#{lab.LDB_PA_revient}"/>
                                <p:ajax event="valueChange" update="form-simulation_prix"/>
                            </h:selectOneMenu>
                        </div>
                    </f:facet>
                    <h:outputText value="#{lab.LDB_PA_date_vente}"/>
                    <p:calendar value="#{Marticle.dateAction}" navigator="true" pattern="dd-MM-yyyy" size="10"/>
                    <h:outputText value="#{Marticle.typePrix eq 'V'?'Client':'Fournisseur'}" rendered="#{Marticle.typePrix ne 'R'}"/>
                    <h:panelGroup rendered="#{Marticle.typePrix ne 'R'}">
                        <h:panelGroup id="value-client_simulation_prix" rendered="#{Marticle.typePrix eq 'V'}">
                            <h:inputText value="#{Marticle.client.codeClient}" style="color: #{Marticle.client.error?'red':''}">
                                <p:ajax event="valueChange" global="false" listener="#{Marticle.searchClient()}"/>
                            </h:inputText>    
                            <h:outputText value="#{Marticle.client.nom_prenom}" style="margin-left: 5px"/>
                        </h:panelGroup>    
                        <h:panelGroup id="value-fournisseur_simulation_prix" rendered="#{Marticle.typePrix eq 'A'}">
                            <h:inputText value="#{Marticle.fournisseur.codeFsseur}" style="color: #{Marticle.fournisseur.error?'red':''}">
                                <p:ajax event="valueChange" global="false" listener="#{Marticle.searchFournisseur(true)}"/>
                            </h:inputText>    
                            <h:outputText value="#{Marticle.fournisseur.nom_prenom}" style="margin-left: 5px"/>
                        </h:panelGroup>    
                    </h:panelGroup>
                    <h:outputText value="#{Marticle.typePrix eq 'V'?'Point de vente':'Dépôt'}"/>
                    <h:panelGroup>
                        <h:panelGroup rendered="#{Marticle.typePrix eq 'V'}">                        
                            <h:selectOneMenu id="select-point_vente_article" value="#{Marticle.point}" title="#{lab.LDB_PA_selectionner_point_vente}" style="width: 200px">
                                <f:selectItem itemLabel="" itemValue="0" />
                                <f:selectItems value="#{managedPointVente.pointsvente}" var="iPS" itemLabel="#{iPS.libelle}" itemValue="#{iPS.id}"/>   
                                <p:ajax event="valueChange" global="false"/>                                
                            </h:selectOneMenu>
                            <p:commandButton icon="ui-icon-refresh" value="#{lab.L_charger}" actionListener="#{managedPointVente.loadAllPointVente()}" update="select-point_vente_article"/>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{Marticle.typePrix ne 'V'}">  
                            <h:selectOneMenu id="select-depot_article" value="#{Marticle.depot}" title="#{lab.LDB_PA_selectionner_depot}" style="width: 200px">
                                <f:selectItem itemLabel="" itemValue="0" />
                                <f:selectItems value="#{managedDepot.depots}" var="iDS" itemLabel="#{iDS.designation}" itemValue="#{iDS.id}"/>   
                                <p:ajax event="valueChange" global="false" listener="#{Marticle.chooseDepot()}" update="value-tranche_simulation_prix"/>                                
                            </h:selectOneMenu>
                        </h:panelGroup>
                    </h:panelGroup>
                    <h:outputText value="Tranche" rendered="#{Marticle.typePrix eq 'R'}"/>
                    <h:selectOneMenu id="value-tranche_simulation_prix" value="#{Marticle.trancheDepot}" title="#{lab.LDB_PA_selectionner_tranche}" rendered="#{Marticle.typePrix eq 'R'}" style="min-width: 160px">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{Marticle.tranches}" var="iTS" itemLabel="#{iTS.reference}" itemValue="#{iTS.id}"/>   
                        <p:ajax event="valueChange" global="false"/>                                
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LDB_PA_quantite}"/>
                    <h:panelGroup>
                        <h:inputText value="#{Marticle.quantite}" style="text-align: center"/>
                        <p:commandButton icon="ui-icon-suitcase" value="Simuler" actionListener="#{Marticle.simulationPrix()}" update="value-prix_simulation_prix" style="float: right"/>
                    </h:panelGroup>
                    <f:facet name="footer">
                        <h:panelGrid id="value-prix_simulation_prix" columns="4" styleClass="yvs_nostyle_without_padding" cellpadding="0" cellspacing="0">
                            <h:outputText value="#{lab.LDB_PA_total} "/>
                            <h:outputText value="#{lab.LDB_PA_prix} "/>
                            <h:outputText value="#{lab.LDB_PA_remise} "/>
                            <h:outputText value="#{lab.LDB_PA_ristourne} "/>
                            <h:inputText value="#{Marticle.prixTotal}" readonly="true" style="text-align: right;width: 100px;font-weight: bold"/>
                            <h:inputText value="#{Marticle.prixResult}" readonly="true" style="text-align: right;width: 100px;font-weight: bold"/>
                            <h:inputText value="#{Marticle.remiseResult}" readonly="true" style="text-align: right;width: 100px;font-weight: bold"/>
                            <h:inputText value="#{Marticle.ristourneResult}" readonly="true" style="text-align: right;width: 100px;font-weight: bold"/>
                        </h:panelGrid>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_option_article" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:selectBooleanCheckbox value="#{Marticle.paramDate}" valueChangeListener="#{Marticle.chooseDateSearch}" style="float: left;margin-left: 5px">
                            <p:ajax event="valueChange" oncomplete="collapseList('nav_article')"
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig blog_more_option_article"/>
                        </h:selectBooleanCheckbox>
                        <h:outputText value="#{lab.L_date}" />
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_employe">
                        <p:calendar value="#{Marticle.dateDebut}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!Marticle.paramDate}" size="10" style="font-size: 0.8em">
                            <p:ajax event="dateSelect" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" listener="#{Marticle.addParamDate1}" oncomplete="collapseList('nav_article')"/>
                            <p:ajax event="valueChange" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" listener="#{Marticle.addParamDate2()}" oncomplete="collapseList('nav_article')"/>
                        </p:calendar>
                        <p:spacer width="5px" style="background: black"/>
                        <p:calendar value="#{Marticle.dateFin}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!Marticle.paramDate}" size="10" style="font-size: 0.8em">
                            <p:ajax event="dateSelect" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" listener="#{Marticle.addParamDate1}" oncomplete="collapseList('nav_article')"/>
                            <p:ajax event="valueChange" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" listener="#{Marticle.addParamDate2()}" oncomplete="collapseList('nav_article')"/>
                        </p:calendar>
                    </h:panelGroup>
                    <span>#{lab.LDB_PA_valorisation}</span>
                    <h:selectOneMenu value="#{Marticle.methValSearch}" style="width: 100%" >
                        <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>           
                        <f:selectItems value="#{constantes.METHODES_VAL}" var="mval" itemValue="#{mval.valeur}" itemLabel="#{mval.libelle}" />       
                        <p:ajax event="valueChange" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" listener="#{Marticle.addParamMethVal()}" oncomplete="collapseList('nav_article')"/>                                   
                    </h:selectOneMenu> 
                    <span>#{lab.LDB_PA_classe_stat}</span>
                    <h:selectOneMenu value="#{Marticle.classeSearch}" style="width: 100%" >
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{0}"/>           
                        <f:selectItems value="#{managedClasseStat.classesStat}" var="clsS" itemLabel="#{clsS.designation}" itemValue="#{clsS.id}"/>   
                        <f:selectItem itemLabel="--" itemValue="#{-2}"/>    
                        <f:selectItem itemLabel="#{lab.L_aucune}" itemValue="#{-1}"/>  
                        <p:ajax event="valueChange" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" 
                                listener="#{Marticle.addParamClasseStat()}" oncomplete="collapseList('nav_article')"/>                                   
                    </h:selectOneMenu> 
                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedClasseStat.idsSearch}" style="width: 100%" title="#{lab.LDB_PA_text1}">
                        <p:ajax event="valueChange" listener="#{managedClasseStat.addParamIds()}" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig" oncomplete="collapseList('nav_article')"/>
                    </h:inputText>
                </h:panelGrid>    
            </p:dialog>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_liste_articles}" widgetVar="dlgListArticle" modal="true" width="70%"  closeOnEscape="true" height="500"> 
                <p:watermark for="txt_search_article_pack" value="#{lab.LDB_PA_reference_article}" />
                <h:panelGrid columns="2" style="width: 100%; font-size: 0.9em" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText id="txt_search_article_pack" value="#{Marticle.article.refArt}"> 
                        <p:ajax event="valueChange" global="false" listener="#{Marticle.searchArticleActif(false)}" update="data_articles_contenu_pack"/>
                    </h:inputText> 
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(false, false)}" global="false" update="data_articles_contenu_pack" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.pa.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{Marticle.pa.currentPage}/#{Marticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{Marticle.loadActifArticle(true, false)}" global="false" update="data_articles_contenu_pack" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.pa.disNext}"/>
                        <p:selectOneMenu value="#{Marticle.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{Marticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_articles_contenu_pack"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </h:panelGrid>
                <p:dataTable id="data_articles_contenu_pack" value="#{Marticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" rowIndexVar="line_art" style="font-size: 0.9em; max-height: 480px">
                    <p:ajax event="rowSelect" global="false" listener="#{Marticle.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"
                            update=":formulaire_mainArticle:tbvArticle:form_pack_article_contenu"/>
                    <p:column headerText="N°" width="20">
                        <span title="#{art.designation}">#{line_art+1}</span>
                    </p:column>
                    <p:column width="80" headerText="#{lab.LDB_PA_reference}">
                        <span title="#{art.designation}">#{art.refArt}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_designation}" width="100">
                        <span title="#{art.designation}">#{art.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_famille}" width="100">
                        <span  title="#{art.designation}">#{art.famille.designation}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_categorie}" width="80">
                        <span  title="#{art.designation}">#{art.categorie}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_pu_a}" width="70" style="text-align: right">
                        <h:outputText value="#{art.pua}" title="#{art.designation}" converter="DN" />
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_prix_v}" width="70" style="text-align: right">
                        <h:outputText value="#{art.puv}" title="#{art.designation}" converter="DN" />
                    </p:column>
                </p:dataTable>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des grilles tarifaire
        *****************************************************************************
        <-->  
        <h:form prependId="false" id="dlg_grille_plan_tarifaire_article">
            <p:dialog  header="#{lab.LDB_PA_grilles} #{managedCategorieClt.grille.reference}" widgetVar="dlgGrillePlanTarifaire" modal="true" width="50%" closeOnEscape="true"  > 
                <p:outputPanel id="blog_form_grille_plan_tarifaire_article">
                    <h:panelGrid id="form_grille_plan_tarifaire_article" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                        <f:facet name="header">
                            <h:panelGrid columns="2" style="float: left;font-weight: bold" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                <span>#{lab.LDB_PA_base}</span>
                                <h:selectOneRadio value="#{managedCategorieClt.grille.base}" layout="grid" styleClass="yvs_nostyle">
                                    <f:selectItem itemLabel="#{constantes.BASE_QTE} " itemValue="#{constantes.BASE_QTE}" />
                                    <f:selectItem itemLabel="#{constantes.BASE_CA} " itemValue="#{constantes.BASE_CA}" />
                                </h:selectOneRadio>
                            </h:panelGrid>
                        </f:facet>
                        <span>#{lab.LDB_PA_interval} </span>
                        <h:panelGrid columns="2" style="width: 100%;margin-left: -10px" styleClass="yvs_nostyle">
                            <h:selectBooleanCheckbox value="#{managedCategorieClt.grille.unique}" style="float: right">
                                <p:ajax event="valueChange" global="false"  update="txt_intervale_montant_grille_plan_tarifaire_article"/>
                            </h:selectBooleanCheckbox>
                            <h:panelGroup id="txt_intervale_montant_grille_plan_tarifaire_article">
                                <pe:inputNumber value="#{managedCategorieClt.grille.montantMinimal}" disabled="#{managedCategorieClt.grille.unique}" style="width: 40%;text-align: right"/>
                                <p:spacer style="background: #000" width="5"/>
                                <pe:inputNumber value="#{managedCategorieClt.grille.montantMaximal}" disabled="#{managedCategorieClt.grille.unique}" style="width: 40%;text-align: right"/>                                                                
                            </h:panelGroup>
                        </h:panelGrid>
                        <span>#{lab.LDB_PA_prix_vente}</span>
                        <pe:inputNumber value="#{managedCategorieClt.grille.valeur}" style="text-align: right"/>
                        <span>#{lab.LDB_PA_nature_remise}</span>
                        <h:selectOneRadio value="#{managedCategorieClt.grille.natureMontant}" layout="grid" styleClass="yvs_nostyle">
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT} " itemValue="#{constantes.NATURE_MTANT}" />
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX} " itemValue="#{constantes.NATURE_TAUX}" />
                        </h:selectOneRadio>
                        <span>#{lab.LDB_PA_remise} </span>
                        <pe:inputNumber value="#{managedCategorieClt.grille.montantRabais}" style="text-align: right"/>
                    </h:panelGrid>
                    <div style="margin-top: 5px">
                        <p:commandButton value="#{lab.L_nouveau}" id="cancel_grille_plan_tarifaire_article" global="false" actionListener="#{managedCategorieClt.resetFicheTranchePlanTarifaire()}"
                                         update="form_grille_plan_tarifaire_article" oncomplete="collapseForm('grille_plan_tarifaire_article')"/>
                        <p:commandButton value="#{lab.L_enregistrer}" id="save_grille_plan_tarifaire_article" actionListener="#{managedCategorieClt.saveNewTranchePlanTarifaire()}"
                                         update="blog_form_grille_plan_tarifaire_article" oncomplete="collapseForm('grille_plan_tarifaire_article')" style="float: right"/>
                    </div>
                    <p:outputPanel>
                        <h:inputHidden id="input_hide_grille_plan_tarifaire_article" value="#{managedCategorieClt.tabIds_grille}"/>
                        <p:dataTable id="data_grille_plan_tarifaire_article" value="#{managedCategorieClt.grilles}" scrollHeight="200" var="gril"
                                     rowKey="#{gril.id}" rowIndexVar="comIdx_" selectionMode="single" scrollable="true">
                            <p:ajax event="rowSelect" global="false" listener="#{managedCategorieClt.loadOnViewTranchePlanTarif}" update=":dlg_grille_plan_tarifaire_article:form_grille_plan_tarifaire_article"/>
                            <p:ajax event="rowUnselect" global="false" listener="#{managedCategorieClt.unLoadOnViewTranchePlanTarif}" update=":dlg_grille_plan_tarifaire_article:form_grille_plan_tarifaire_article"/>
                            <p:column headerText="N°" style="width: 0.25%">
                                <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{gril.new_}"/>
                                <span>#{comIdx_+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_valeur_min}" style="text-align: right;width: 1%">
                                <h:outputText rendered="#{gril.valeurMin >0}" value="#{gril.valeurMin}" converter="DNS" title="Prix de vente = #{gril.puv}"/>
                                <h:outputText rendered="#{0>=gril.valeurMin}" value=" Min" title="Prix de vente = #{gril.puv}"/> 
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_valeur_max}" style="text-align: right;width: 1.5%">
                                <h:outputText rendered="#{constantes.MAX_DOUBLE > gril.valeurMax}" value="#{gril.valeurMax}" converter="DNS" title="Prix de vente = #{gril.puv}"/>
                                <h:outputText rendered="#{gril.valeurMax >= constantes.MAX_DOUBLE}" value=" Max" title="Prix de vente = #{gril.puv}"/> 
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_remise}" style="text-align: right;width: 2%">
                                <h:outputText value="#{gril.remise}" converter="DNS" title="Prix de vente = #{gril.puv}"/>
                                <h:outputText value="#{gril.natureRemise == constantes.NATURE_MTANT?'':'%'}" title="Prix de vente = #{gril.puv}"/>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_base}" style="text-align: right;width: 1.5%">
                                <h:outputText value="#{gril.base}" title="Prix de vente = #{gril.puv}"/>
                            </p:column>
                            <p:column style="width: 1%;text-align: center">
                                <p:contextMenu for="btn_option_grille_plan_tarifaire_article" event="left click" styleClass="context_menu">
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedCategorieClt.deleteBeanTranchePlanTarif_(gril)}" oncomplete="dlgConfirmDeleteTrancheTarif_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_grille_plan_tarifaire_article" type="button"/>
                            </p:column> 
                            <p:column style="width: 1%;text-align: center" rendered="false">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_grille_plan_tarifaire_article" value="false"
                                                             onclick="selectionAllLineTab(#{managedCategorieClt.grilles.size()}, 'grille_plan_tarifaire_article')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{gril.selectActif}" styleClass="chek_line_grille_plan_tarifaire_article" onclick="selectionLineTab(#{gril.id}, 'grille_plan_tarifaire_article')"/>
                            </p:column>
                        </p:dataTable>
                        <p:commandButton value="#{lab.L_supprimer}" id="delete_grille_plan_tarifaire_article" global="false" onclick="dlgConfirmDeleteTrancheTarif.show()" style="float: right"/>
                    </p:outputPanel>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>        
        <h:form prependId="false" id="main_export_article">
            <p:dialog header="#{lab.LDB_PA_model_exportation}" width="40%" closeOnEscape="true" widgetVar="dlgListExport">
                <p:dataTable id="art_data_model_export_compta" value="#{Marticle.exports}" var="exp" rowIndexVar="Idx" rowKey="#{exp.id}" selectionMode="single">
                    <p:ajax event="rowSelect" listener="#{Marticle.loadOnExport}" global="false" update=":main_export_article:btn_export_article"/>
                    <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnExport}" global="false" update=":main_export_article:btn_export_article"/>
                    <p:column headerText="N°">
                        #{Idx+1}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_reference}">
                        #{exp.reference}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_intitule}">
                        #{exp.libelle}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_extension}">
                        #{exp.format}
                    </p:column>
                </p:dataTable>
                <f:facet name="footer">
                    <p:commandButton style="float: right;margin-top: -3px" value="Exporter" ajax="false" id="btn_export_article"
                                     actionListener="#{Marticle.export(true)}" disabled="#{Marticle.model == null}"/>
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgDetailArtDep" width="60%" header="Détail Articles/Dépôt" >
                <p:tabView style="font-size: 0.8em">
                    <p:tab title="Stocks">
                        <h:panelGrid columns="2">
                            <span>#{lab.LDB_PA_stock_physique}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_utilisable}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_disponible}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_rejetté}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_commande}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_manquant}</span>
                            <h:outputText value="" />
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="#{lab.LDB_PA_inventaire}">
                        <h:panelGrid columns="2">
                            <span>#{lab.LDB_PA_dernier_inventaire}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_stock_dernier_inventaire}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_nb_inventaire}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_nb_sortie_inventaire}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_prochain_inventaire}</span>
                            <h:outputText value="" />
                            <span>#{lab.LDB_PA_nb_total_inventaire}</span>
                            <h:outputText value="" />
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="#{lab.LDB_PA_couts}">

                    </p:tab>
                    <p:tab title="#{lab.LDB_PA_cumuls}">
                        <div style="float: left; width: 49%">
                            <span style="display: inline-block; width: 100%; background: #CCC">Mensuel</span>
                            <h:panelGrid columns="4">
                                <span>#{lab.LDB_PA_entree} (qte)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_sortie} (qte)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_entree} (Valeur)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_sortie} (Valeur)</span>
                                <h:outputText value="" />                                
                            </h:panelGrid>
                        </div>
                        <div style="margin-left: 51%">
                            <span style="display: inline-block; width: 100%; background: #CCC">Annuel</span>
                            <h:panelGrid columns="4">
                                <span>#{lab.LDB_PA_entree} (qte)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_sortie} (qte)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_entree} (Valeur)</span>
                                <h:outputText value="" />
                                <span>#{lab.LDB_PA_sortie} (Valeur)</span>
                                <h:outputText value="" />                                
                            </h:panelGrid>
                        </div>
                    </p:tab>
                </p:tabView>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgPrint" width="40%" header="#{lab.LDB_PA_options_telechargement}" >
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:outputText value="#{lab.LDB_PA_categorie} " />
                    <h:selectOneMenu value="#{Marticle.categoriePrint}" style="width: 100%">
                        <f:selectItem itemLabel="--" itemValue="" noSelectionOption="true"/>
                        <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" />                             
                    </h:selectOneMenu> 
                    <h:outputText value="#{lab.LDB_PA_famille} " />
                    <h:selectOneMenu value="#{Marticle.famillePrint}" style="width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedFamilleArticle.familles}" var="fam" 
                                       itemLabel="#{fam.designation}" itemValue="#{fam.id}" />                             
                    </h:selectOneMenu> 
                    <h:outputText value="#{lab.LDB_PA_groupe} " />
                    <h:selectOneMenu value="#{Marticle.groupePrint}" style="width: 100%">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedGroupeArticle.parents}" var="grp" 
                                       itemLabel="#{grp.designation}" itemValue="#{grp.id}" />                           
                    </h:selectOneMenu> 
                </h:panelGrid>

                <f:facet name="footer">
                    <p:commandLink global="false" actionListener="#{Marticle.print()}" ajax="false">
                        <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                            #{lab.LDB_PA_telecharger}
                        </span> 
                    </p:commandLink>
                    <p:commandLink global="false" actionListener="#{Marticle.printTicket()}" ajax="false" style="float: right">
                        <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                            #{lab.LDB_PA_ticket}
                        </span> 
                    </p:commandLink>
                </f:facet>
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="main_fusionn_arts">
            <p:dialog widgetVar="dlgConfirmFusion" header="#{lab.L_fusionner}" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <h:panelGrid id="blog_fusionner_arts" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PA_text2}</span>
                    <h:outputText style="font-weight: bold;margin-left: 10px" value="#{Marticle.fusionneTo}"/>
                    <span>#{lab.LDB_PA_text3}</span>
                    <c:forEach items="#{Marticle.fusionnesBy}" var="fus">
                        <span style="margin-left: 10px"> - <span style="font-weight: bold">#{fus}</span></span>
                    </c:forEach>
                    <span>#{lab.LDB_PA_text4}</span>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.fusionner(false)}" style="float: right" oncomplete="dlgConfirmFusion.hide();collapseForm('conditionnement')" 
                                 update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:middle_form_article :formulaire_mainArticle:tbvArticle"/> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main_fusionn_unite">
            <p:dialog widgetVar="dlgConfirmFusionUnite" header="#{lab.L_fusionner}" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <h:panelGrid id="blog_fusionner_unites" columns="1" styleClass="yvs_nostyle" style="width: 100%" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PA_text5} </span>
                    <h:outputText style="font-weight: bold;margin-left: 10px" value="#{Marticle.fusionneUniteTo}"/>
                    <span>#{lab.LDB_PA_text6}</span>
                    <c:forEach items="#{Marticle.fusionnesUniteBy}" var="fus">
                        <span style="margin-left: 10px"> - <span style="font-weight: bold">#{fus}</span></span>
                    </c:forEach>
                    <span>#{lab.LDB_PA_text7}</span>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.fusionnerUnite(false)}" style="float: right" oncomplete="dlgConfirmFusionUnite.hide()" 
                                 update=":formulaire_mainArticle:tbvArticle:data_conditionnement_article"/> 
            </p:dialog>
        </h:form> 

        <h:form prependId="false">
            <p:dialog widgetVar="dlgListTemplate" header="#{lab.LDB_PA_liste_templates}" width="60%" closeOnEscape="true" 
                      footer="&copy; Lymytz" >
                <div class="dlg_part_fixe">                                 
                    <p:watermark for="txt_search_template_article" value="#{lab.LDB_PA_rechercher}" />
                    <h:inputText value="#{managedTemplateArticle.numSearch}" style="font-size: 0.7em" id="txt_search_template_article">
                        <p:ajax event="valueChange" listener="#{managedTemplateArticle.addParamReference()}" update="data_templates_article" />
                    </h:inputText>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedTemplateArticle.init(false)}" global="false" update="data_templates_article" icon="ui-icon-circle-triangle-w" disabled="#{managedTemplateArticle.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedTemplateArticle.paginator.currentPage}/#{managedTemplateArticle.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTemplateArticle.init(true)}" global="false" update="data_templates_article" icon="ui-icon-circle-triangle-e" disabled="#{managedTemplateArticle.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedTemplateArticle.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTemplateArticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                            <f:selectItems value="#{managedTemplateArticle.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_templates_article"/>
                        </p:selectOneMenu>
                    </p:outputPanel>       
                    <div style="clear: right" />               
                </div>
                <div style="height: 93%; overflow-y: auto" class="dlg_part_scroll">
                    <p:dataTable id="data_templates_article" value="#{managedTemplateArticle.templates}" var="art" rowIndexVar="artLine"
                                 rowKey="#{art.id}" selectionMode="single" style="max-height: 400px;overflow-y: auto">
                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewTemplate}"
                                update=":formulaire_mainArticle:blog_form_article" oncomplete="dlgListTemplate.hide()" />
                        <p:column headerText="N°" style="width: 5%">
                            <h:graphicImage library="icones" name="drapeau.png" rendered="#{!art.suiviEnStock}" width="15" height="15"/>
                            #{artLine+1}                                                            
                        </p:column>    
                        <p:column headerText="#{labLDB_PA_reference}" style="width: 12%">
                            #{art.refArt}                                                                             
                        </p:column>                                                    
                        <p:column headerText="#{lab.LDB_PA_designation}">
                            #{art.designation}                                                                             
                        </p:column>
                        <p:column  headerText="#{lab.LDB_PA_famille}"  style="width: 30%;text-align: center">
                            #{art.famille.referenceFamille}
                        </p:column>                                                                                        
                        <p:column style="width: 5%;text-align: center">
                            <h:graphicImage library="img" name="#{(art.actif)?'vu.png':'vu_non.png'}" width="10" height="10"/>
                        </p:column>
                    </p:dataTable>  
                </div>
            </p:dialog>
        </h:form>    

        <h:form prependId="false">
            <p:dialog widgetVar="dlgListTiers" header="#{lab.LDB_PA_liste_fabricants}" width="60%" closeOnEscape="true" footer="&copy; Lymytz" >
                <div class="dlg_part_fixe">
                    <p:watermark for="txt_search_tiers_article" value="#{lab.LDB_PA_rechercher}" />
                    <h:inputText value="#{managedTiers.numSearch_}" style="font-size: 0.7em" id="txt_search_tiers_article">
                        <p:ajax event="valueChange" listener="#{managedTiers.searchByNum()}" update="data_tiers_article" />
                    </h:inputText>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedTiers.init(false)}" global="false" update="data_tiers_article" icon="ui-icon-circle-triangle-w" disabled="#{managedTiers.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedTiers.paginator.currentPage}/#{managedTiers.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedTiers.init(true)}" global="false" update="data_tiers_article" icon="ui-icon-circle-triangle-e" disabled="#{managedTiers.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedTiers.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedTiers.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedTiers.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_tiers_article"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                    <div style="clear: right" />
                </div>
                <div style="height: 93%; overflow-y: auto" class="dlg_part_scroll">
                    <p:dataTable id="data_tiers_article" value="#{managedTiers.listTiers}" var="clt" rowKey="#{clt.id}" rowIndexVar="cltIdx"
                                 selectionMode="single" emptyMessage="Aucun tiers" style="max-height: 400px;overflow-y: auto">
                        <p:ajax event="rowSelect"  listener="#{Marticle.loadOnViewTiers}" oncomplete="dlgListTiers.hide()" />
                        <p:column width="30">
                            <span>#{cltIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_code}" style="width: 15%">
                            <span>#{clt.codeTiers}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_nom}">
                            <span>#{clt.nom_prenom}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_region}" style="width: 30%">
                            <span>#{clt.region}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center">
                            <h:graphicImage library="img"  name="#{(clt.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                        </p:column>
                    </p:dataTable>  
                </div>
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des unites de mesure
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_unite_mesure}" widgetVar="dlgListUnite" modal="true" width="70%" closeOnEscape="true"> 
                <div> 
                    <h:panelGrid columns="2" style="width: 100%;margin-top: -5px" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                        <h:panelGroup>
                            <p:commandButton value="#{lab.L_enregistrer}" id="save_unite_article" actionListener="#{managedUniteMesure.saveNew()}" update="form_unite_article data_unite_article" style="font-size: 0.8em;"
                                             icon="ui-icon-disk"/>
                            <p:commandButton value="#{lab.L_nouveau}"  id="cancel_unite_article" process="@this" actionListener="#{managedUniteMesure.resetFiche()}"   update="form_unite_article"
                                             icon="ui-icon-document"/>                 
                            <p:outputPanel id="search_unite_article">
                                <p:watermark for="txt_search_unite_article" value="#{lab.LDB_PA_reference_unite}" />
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <h:inputText id="txt_search_unite_article" value="#{managedUniteMesure.numSearch}" style="text-align: center">
                                        <p:ajax event="valueChange" global="false" listener="#{managedUniteMesure.addParamReference()}" update="data_unite_article"/>
                                    </h:inputText> 
                                    <p:outputPanel autoUpdate="true" layout="block">
                                        <p:commandButton actionListener="#{managedUniteMesure.loadAll(false, false)}" global="false" update="data_unite_article" icon="ui-icon-circle-triangle-w" disabled="#{managedUniteMesure.paginator.disPrev}"/>
                                        <p:outputPanel ><p:outputLabel value="#{managedUniteMesure.paginator.currentPage}/#{managedUniteMesure.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                        <p:commandButton actionListener="#{managedUniteMesure.loadAll(true, false)}" global="false" update="data_unite_article" icon="ui-icon-circle-triangle-e" disabled="#{managedUniteMesure.paginator.disNext}"/>
                                        <p:selectOneMenu value="#{managedUniteMesure.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedUniteMesure.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                            <f:selectItems value="#{managedUniteMesure.paginations}"/>
                                            <p:ajax event="valueChange" global="false" update="data_unite_article"/>
                                        </p:selectOneMenu>
                                    </p:outputPanel>
                                </h:panelGrid>                        
                            </p:outputPanel>
                        </h:panelGroup>
                        <h:panelGroup style="float: right">
                            <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('unite_article');
                                    return false">
                                <h:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>               
                            <h:link onclick="collapseList('unite_article');
                                    return false" title="#{lab.L_mode_liste}" >
                                <h:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                            </h:link>
                        </h:panelGroup>
                    </h:panelGrid>
                </div>
                <div>
                    <div class="yvs_form_unite_article" >
                        <h:panelGrid id="form_unite_article" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                            <span>#{lab.LDB_PA_reference}</span>
                            <h:inputText value="#{uniteMesure.reference}" style="width: 98%"/>
                            <span>#{lab.LDB_PA_libelle}</span>
                            <h:inputText value="#{uniteMesure.libelle}" style="width: 98%"/>
                            <span>#{lab.LDB_PA_type}</span>
                            <h:selectOneMenu value="#{uniteMesure.type}" style="width: 98%">
                                <f:selectItems value="#{constantes.UNITES_MESURE}"/>
                            </h:selectOneMenu>
                            <f:facet name="footer">
                                <span>#{lab.LDB_PA_description}</span>
                                <h:inputTextarea value="#{uniteMesure.description}" rows="5" style="width: 98%"/>
                            </f:facet>
                        </h:panelGrid>  
                    </div>
                    <div class="yvs_list_unite_article" >
                        <p:dataTable value="#{managedUniteMesure.unites}" var="unite" rowKey="#{unite.id}" rowIndexVar="yIdx"
                                     selectionMode="single" style="max-height: 500px;overflow-y: auto" id="data_unite_article">
                            <p:ajax event="rowSelect" global="false" listener="#{Marticle.loadOnViewUnite}" oncomplete="dlgListUnite.hide()"/>
                            <p:column headerText="N°" width="20">
                                <span>#{yIdx+1}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_reference}" width="50">
                                <span>#{unite.reference}</span>                 
                            </p:column>                                
                            <p:column headerText="#{lab.LDB_PA_designation}" width="100">
                                <span>#{unite.libelle}</span>
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_type}" width="80">
                                <span>#{managedUniteMesure.giveNameUnite(unite.type)}</span>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>                
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_reference} " footer="&copy; Lymytz 2014" widgetVar="dlgRefGamme">
                <h:panelGrid columns="2">
                    <h:inputText value="#{Marticle.tranche.reference}" />
                    <p:commandButton icon="ui-icon-disk" style="width: 22px; height: 22px" actionListener="#{Marticle.createGammeRemise()}" oncomplete="dlgRefGamme.hide()"
                                     update=":form_dlg_gammeRem:form_edit_tranche :form_dlg_gammeRem:table_tranche_gammeRem"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>


        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArt" closeOnEscape="true"
                             message="#{lab.LDB_PA_text8}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.deleteBean()}" oncomplete="dlgConfirmDeleteArt.hide()" 
                                 update=":formulaire_mainArticle:head_form_article :formulaire_mainArticle:middle_form_article :formulaire_mainArticle:tbvArticle"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArt.hide()"/>
            </p:confirmDialog>
        </h:form>


        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dlgFiltrage" closeOnEscape="true" header="Filtrage"
                      >
                <h:panelGrid columns="2">
                    <p:outputLabel value="#{lab.L_agence} :"/>
                    <p:selectOneMenu value="#{managedStockArticle.agence.id}" >
                        <f:selectItem itemValue="0" itemLabel="" />
                        <f:selectItems value="#{Marticle.listAgences}" var="agenc" itemValue="#{agenc.id}" itemLabel="#{agenc.designation}" />
                        <p:ajax event="valueChange" listener="#{managedStockArticle.searchArticleByAgence()}" global="true" update=":formulaire_mainArticle:tbvArticle:article_depot_table" oncomplete="dlgFiltrage.hide()"/>
                    </p:selectOneMenu>

                </h:panelGrid>

            </p:dialog>
        </h:form>


        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_liste_compte}" widgetVar="dlgListFournisseurs" modal="true" width="40%" closeOnEscape="true">
                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                    <h:inputText value="#{managedFournisseur.numSearch_}" style="float: left;text-align: center;margin-left: -10px">
                        <p:ajax event="valueChange" listener="#{managedFournisseur.searchByNum()}" update="data_fournisseur_article"/>
                    </h:inputText>   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(false, false)}" global="false" update="data_fournisseur_article" icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedFournisseur.paginator.currentPage}/#{managedFournisseur.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedFournisseur.loadAllFournisseur(true, false)}" global="false" update="data_fournisseur_article" icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedFournisseur.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFournisseur.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedFournisseur.paginations}"/>
                            <p:ajax event="valueChange" global="false" update="data_fournisseur_article"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </h:panelGrid> 
                <p:dataTable id="data_fournisseur_article" value="#{managedFournisseur.fournisseurs}" var="fsseur" rowKey="#{fsseur.id}" 
                             rowIndexVar="cltIdx" selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false">
                    <p:ajax event="rowSelect" global="false" listener="#{Marticle.loadOnViewFournisseur}" 
                            oncomplete="dlgListFournisseurs.hide()"
                            update=":formulaire_mainArticle:tbvArticle:txt_fournisseur_article"/>
                    <p:column width="15">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_code}" width="30">
                        <span>#{fsseur.codeFsseur}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_nom_prenom}">
                        <span>#{fsseur.tiers.nom_prenom}</span>
                    </p:column>
                </p:dataTable>  
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue de creation des catégories comptable
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_liste_compte}" widgetVar="dlgListComptes" modal="true" width="50%" closeOnEscape="true" style="max-height: 450px">
                <p:dataTable id="data_comptes_article_categorie" value="#{managedCompte.listComptes}" var="cpt" rowKey="#{cpt.id}" 
                             rowIndexVar="cltIdx" selectionMode="single" paginator="true" rows="20" paginatorAlwaysVisible="false">
                    <p:ajax event="rowSelect" global="false" listener="#{Marticle.loadOnViewCompte}"  oncomplete="dlgListComptes.hide()" update=":formulaire_mainArticle:tbvArticle:tableArticleCatC"/>
                    <p:column width="15">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column filterBy="#{cpt.numCompte}" width="50" headerText="#{lab.LDB_PA_numero_g}">
                        <span>#{cpt.numCompte}</span>
                    </p:column>
                    <p:column filterBy="#{cpt.numCompte}" width="50" headerText="#{lab.LDB_PA_compte_general}">
                        <span>#{cpt.compteGeneral.numCompte}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_intitule}" width="80">
                        <span>#{cpt.intitule}</span>
                    </p:column>
                </p:dataTable>
                <p:outputPanel style="float: right" layout="block" autoUpdate="true">
                    <p:commandButton actionListener="#{managedCompte.pagineDataCompte(false)}" update="data_comptes_article_categorie" icon="ui-icon-circle-triangle-w" disabled="#{managedCompte.paginator.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedCompte.paginator.currentPage}/#{managedCompte.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedCompte.pagineDataCompte(true)}" update="data_comptes_article_categorie" icon="ui-icon-circle-triangle-e" disabled="#{managedCompte.paginator.disNext}"/>
                    <p:selectOneMenu value="#{managedCompte.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedCompte.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedCompte.paginations}"/>
                        <p:ajax event="valueChange" update="data_comptes_article_categorie"/>
                    </p:selectOneMenu>
                </p:outputPanel>
            </p:dialog>
        </h:form>

        <h:form prependId="false" id="form_dlg_gammeRem">
            <p:dialog header="#{lab.LDB_PA_gestion_gamme_remise}" widgetVar="dlgGamme" footer="&copy; Lymytz 2014"
                      width="55%" style="max-height: 500px" height="200">
                <script type="text/javascript">
                    $(function() {
                        collapseForm('gammeTarif');
                    });
                </script>
                <div class="dlg_part_fixe">
                    <div style="float: right">
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('gammeTarif');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link onclick="collapseList('gammeTarif');
                                return false" title="#{lab.L_mode_liste}" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>
                    </div>                   
                </div>
                <div class="dlg_part_scroll" style="clear: both">
                    <div class="yvs_form_gammeTarif">
                        <p:commandButton type="button" icon="ui-icon-circle-plus" style="width: 22px; height: 22px;" onclick="dlgRefGamme.show()" />                        
                        <h:panelGrid columns="7" styleClass="yvs_table" cellpadding="0" cellspacing="0"
                                     style="width: 100%" id="form_edit_tranche">
                            <f:facet name="header"><h:outputText value="#{Marticle.tranche.reference}" style="color: #333; font-weight: bold" /></f:facet>
                            <span>#{lab.LDB_PA_borne}</span>
                            <pe:inputNumber value="#{Marticle.newBorne.borne}" style="width: 120px"/>
                            <span>#{lab.LDB_PA_prix}</span>
                            <pe:inputNumber value="#{Marticle.newBorne.prix}" style="width: 120px"/>
                            <span>#{lab.LDB_PA_remise}</span>
                            <pe:inputNumber value="#{Marticle.newBorne.remise}" symbol=" %" symbolPosition="suffix" style="width: 90px" />
                            <p:commandButton value="#{lab.L_ajouter}" icon="ui-icon-circle-plus" actionListener="#{Marticle.addBorne()}" 
                                             update="table_borne_rem form_edit_tranche"/>
                            <f:facet name="footer">
                                <p:dataTable value="#{Marticle.tranche.listBorne}" id="table_borne_rem"
                                             selectionMode="single" var="iborne" rowKey="#{iborne.id}"> 
                                    <p:ajax event="rowSelect" listener="#{Marticle.choixBorneGamme}" update=":form_dlg_gammeRem:form_edit_tranche" />
                                    <p:column headerText="#{lab.LDB_PA_borne}" width="100" > 
                                        <h:outputText value="#{iborne.borne}" converter="DN" />
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_prix}" width="100" style="text-align: right">
                                        <h:outputText value="#{iborne.prix}" converter="DN" />
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_remise}" width="100" style="text-align: right">
                                        <h:outputText value="#{iborne.remise}" converter="DN" />
                                    </p:column>
                                    <p:column width="20" style="text-align: center">
                                        <p:commandButton icon="ui-icon-trash" actionListener="#{Marticle.deleteBorneGamme(iborne)}" 
                                                         style="width: 20px; height: 20px;" update=":form_dlg_gammeRem:form_edit_tranche">
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </f:facet>
                        </h:panelGrid>                        
                    </div>
                    <div class="yvs_list_gammeTarif">
                        <p:dataTable value="#{Marticle.tranchesRemise}" var="trRem" selectionMode="single"
                                     rowKey="#{trRem.id}" id="table_tranche_gammeRem" editable="true">
                            <p:ajax event="rowSelect" update=":form_dlg_gammeRem:form_edit_tranche" listener="#{Marticle.choixGammeremise}"
                                    oncomplete="collapseForm('gammeTarif');"/>
                            <p:ajax event="rowEdit"  listener="#{Marticle.updateGamme}" />
                            <p:column headerText="#{lab.LDB_PA_reference}" >
                                <p:cellEditor>
                                    <f:facet name="input"><h:inputText value="#{trRem.referenceTranche}" /></f:facet>
                                    <f:facet name="output">#{trRem.referenceTranche}</f:facet>
                                </p:cellEditor>                              
                            </p:column>
                            <p:column headerText="#{lab.L_actif}" width="20">
                                <p:cellEditor>
                                    <f:facet name="input"><h:selectBooleanCheckbox value="#{trRem.actif}" /></f:facet>
                                    <f:facet name="output"><h:graphicImage library="img" name="#{(trRem.actif)?'vu.png':'vu_non.png'}" width="15" height="15" /></f:facet>
                                </p:cellEditor>                                
                            </p:column>
                            <p:column headerText="#{lab.L_modifier}" width="20" style="text-align: center">
                                <p:rowEditor />
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <p:commandButton icon="ui-icon-trash" actionListener="#{Marticle.deleteGamme(trRem)}" 
                                                 style="width: 20px; height: 20px;" update=":form_dlg_gammeRem:table_tranche_gammeRem">
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </div>
                </div>                                
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_liste_articles_telecharger}" widgetVar="dlgLoadArticles" modal="true" width="70%"  closeOnEscape="true"> 
                <h:panelGrid id="form_articles_load_" columns="1" style="width: 100%">
                    <p:dataTable id="data_articles_load_" value="#{Marticle.articlesLoad}" var="artL_" rows="20" paginator="true"
                                 rowKey="#{artL_.id}" rowIndexVar="artIdx" paginatorAlwaysVisible="false">
                        <p:column  headerText="N°" style="width: 1%" styleClass="is_#{artL_.new_}">
                            <span>#{artIdx+1}</span>
                        </p:column>
                        <p:column filterBy="#{artL_.refArt}" style="width: 3%" styleClass="is_#{artL_.new_}">
                            <span>#{artL_.refArt}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_designation}" style="width: 6%" styleClass="is_#{artL_.new_}">
                            <span>#{artL_.designation}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_famille}" style="width: 3%" styleClass="is_#{artL_.new_}">
                            <span>#{artL_.famille.designation}[#{artL_.famille.referenceFamille}]</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_pu_a}" style="width: 3%" styleClass="is_#{artL_.new_}">
                            <h:outputText value="#{artL_.pua}" converter="DN"/>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton value="#{lab.L_ajouter}" actionListener="#{Marticle.fullArticles()}" style="width: 100%" oncomplete="dlgLoadArticles.hide()"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false" >
            <p:confirmDialog showEffect="fade" hideEffect="explode" closeOnEscape="true">
                <p:commandButton value="#{lab.L_oui}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="#{lab.L_non}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />                      
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_gestion_template}" widgetVar="dlgTemplateArt" width="60%" modal="true" footer="#{lab.L_copy}">

            </p:dialog>
        </h:form>
        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadFile" dynamic="true" resizable="false" closeOnEscape="true" modal="true">
                <p:fileUpload sizeLimit="1000000" mode="advanced" dragDropSupport="true" 
                              allowTypes="/(\.|\/)(xls|xlsx)$/" fileUploadListener="#{Marticle.uploadFile}"
                              uploadLabel="#{lab.L_envoyer}" label="#{lab.L_parcourir}" auto="true" 
                              oncomplete="dlgUploadFile.hide()"> 
                </p:fileUpload>
            </p:dialog>
        </h:form>
        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadImg_" width="35%" closeOnEscape="true" header="#{lab.LDB_PA_modifier_photos}" >
                <p:growl autoUpdate="true" showDetail="true" />
                <p:fileUpload auto="true" fileUploadListener="#{Marticle.handleFileUpload1}" />                     
                <p:fileUpload auto="true" fileUploadListener="#{Marticle.handleFileUpload2}" />                     
                <p:fileUpload auto="true" fileUploadListener="#{Marticle.handleFileUpload3}" />                     
                <p:commandButton value="#{lab.L_valider_fermer}" update=":form_delete_img :formulaire_mainArticle:image_art_prod"
                                 oncomplete="dlgUploadImg_.hide()" actionListener="#{Marticle.valideUploadImage()}"/>
                <f:facet name="footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadImg" width="35%" closeOnEscape="true" header="#{lab.LDB_PA_modifier_photos}" dynamic="true" >
                <p:fileUpload  mode="advanced" dragDropSupport="false" multiple="true" sizeLimit="150000"
                               allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileUploadListener="#{Marticle.handleFileUpload}"/>                  
                <p:commandButton value="#{lab.L_valider_fermer}" update=":formulaire_mainArticle:image_art_prod"
                                 oncomplete="dlgUploadImg.hide()" actionListener="#{Marticle.valideUploadImage()}"/>
                <f:facet name="footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadImgUnite" width="35%" closeOnEscape="true" header="#{lab.LDB_PA_modifier_photos}" >                
                <p:fileUpload sizeLimit="150000" mode="advanced" dragDropSupport="true" 
                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileUploadListener="#{Marticle.handleFileUniteUpload}"
                              uploadLabel="#{lab.L_envoyer}" label="#{lab.L_parcourir}" auto="true"  update=":formulaire_mainArticle:tbvArticle:image_art_unite_prod"
                              oncomplete="dlgUploadImgUnite.hide()"/> 
                <f:facet name="footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false" enctype="multipart/form-data">
            <p:dialog widgetVar="dlgUploadImgPack" width="35%" closeOnEscape="true" header="#{lab.LDB_PA_modifier_photos}" >                
                <p:fileUpload sizeLimit="100000" mode="advanced" dragDropSupport="true" 
                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileUploadListener="#{Marticle.handleFilePackUpload}"
                              uploadLabel="#{lab.L_envoyer}" label="#{lab.L_parcourir}" auto="true"  update=":formulaire_mainArticle:tbvArticle:image_art_pack_prod"
                              oncomplete="dlgUploadImgPack.hide()"/> 
                <f:facet name="footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog widgetVar="dlgCategorieC" header="#{lab.LDB_PA_categorie_clients}" width="30%" closeOnEscape="true" modal="true">
                <h:panelGrid id="blog_form_art_categorie_client" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PA_code} </span>
                    <h:inputText value="#{categorieClient.code}"/>
                    <span>#{lab.LDB_PA_libelle} </span>
                    <h:inputText value="#{categorieClient.libelle}"/>
                    <span>#{lab.LDB_PA_parent} </span>
                    <h:selectOneMenu value="#{categorieClient.parent.id}" id="select_art_categorie_parent_client">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedCategorieClt.categoriesParent}" var="catClt_" 
                                       itemLabel="#{catClt_.libelle}" itemValue="#{catClt_.id}" />                          
                    </h:selectOneMenu> 
                    <span>#{lab.LDB_PA_defaut} </span>
                    <h:panelGroup>
                        <h:selectBooleanCheckbox value="#{categorieClient.defaut}"/>
                        <h:panelGroup style="float: right">
                            <h:selectBooleanCheckbox value="#{categorieClient.actif}"/>
                            <span>#{lab.L_actif}</span>
                        </h:panelGroup>
                    </h:panelGroup>
                    <f:facet name="footer">
                        <span>#{lab.LDB_PA_description} </span>
                        <h:inputTextarea value="#{categorieClient.description}" rows="5" style="width: 98%"/>
                    </f:facet>
                </h:panelGrid>
                <div style="margin-top: 5px">
                    <p:commandButton style="float: left" value="Nouveau" global="false" actionListener="#{managedCategorieClt.resetFiche()}" update="blog_form_art_categorie_client"/>
                    <p:commandButton style="float: right" value="Enregistrer" actionListener="#{managedCategorieClt.saveNew()}" oncomplete="dlgCategorieC.hide()"
                                     update="blog_form_art_categorie_client :formulaire_mainArticle:tbvArticle:chmp_art_catClt"/>
                </div>
                <f:facet name="footer">
                    &copy; Lymytz 2014
                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">                    
            <p:dialog header="#{lab.LDB_PA_liste_articles}" width="80%" closeOnEscape="true" footer="#{lab.L_copy}" widgetVar="dlgArticleList" height="500">
                <div class="dlg_part_scroll" >
                    <p:dataTable id="tab_article_choix" value="#{Marticle.secondaires}" var="art_" rowIndexVar="artLine_" rowKey="#{art_.id}"
                                 paginator="true" paginatorAlwaysVisible="false" rows="15">
                        <p:column headerText="N°" width="20">                                
                            #{artLine_+1}                                                            
                        </p:column>                                                        
                        <p:column filterBy="#{art_.refArt}">
                            #{art_.refArt}                                                                             
                        </p:column>
                        <p:column  headerText="#{lab.LDB_PA_designation}">
                            #{art_.designation}
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_categorie}">
                            #{art_.categorie}
                        </p:column>
                        <p:column  headerText="#{lab.LDB_PA_prix_v}">                                                            
                            <h:outputText value="#{art_.puv}"  converter="DN" />                                                            
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_remise}">
                            <h:outputText value="#{art_.remise}"  converter="DN" />
                        </p:column>
                        <p:column  headerText="#{lab.LDB_PA_famille}">
                            #{art_.famille.designation}
                        </p:column>                                                        
                        <p:column  width="20" style="text-align: center">
                            <p:commandButton icon="ui-icon-circle-plus"  style="width: 20px; height: 20px" actionListener="#{Marticle.addArticleSubstitutionOrDerive(art_)}"
                                             rendered="#{Marticle.possibleAddSubstitutionOrDerive(art_)}" update=":formulaire_mainArticle:tbvArticle:tab_art_equivalent :formulaire_mainArticle:tbvArticle:tab_art_substitution"/>
                            <p:commandButton icon="ui-icon-circle-minus"  style="width: 20px; height: 20px" actionListener="#{Marticle.removeArticleSubstitutionOrDerive(art_)}"
                                             rendered="#{!Marticle.possibleAddSubstitutionOrDerive(art_)}" update=":formulaire_mainArticle:tbvArticle:tab_art_equivalent :formulaire_mainArticle:tbvArticle:tab_art_substitution"/>
                        </p:column>
                    </p:dataTable>
                </div>
            </p:dialog>
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue de gestion des groupes
        *****************************************************************************
        <-->    
        <h:form prependId="false" id="main_grp_article">
            <script type="text/javascript">
                $(function() {
                    collapseForm('grp_article');
                });
            </script> 
            <p:dialog header="#{lab.LDB_PA_liste_groupes_articles}" widgetVar="dlgArtGroupeArt" modal="true" width="45%" closeOnEscape="true">
                <div class="dlg_part_fixe">
                    <div align="right">
                        <p:inputText value="#{managedGroupeArticle.numSearch}" style="float:left">
                            <p:ajax event="valueChange" global="false"  listener="#{managedGroupeArticle.addParamReference()}" partialSubmit="true" process="@this"
                                    update="art_tab_grp_article" oncomplete="collapseList('grp_article')"/>
                        </p:inputText>
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('grp_article');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link onclick="collapseList('grp_article');
                                return false" title="#{lab.L_mode_liste}" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>                                
                    </div>
                    <div style="clear: left" />
                </div>                        
                <div style="height: 93%; overflow-y: auto" class="dlg_part_scroll">
                    <div class="yvs_form_grp_article">
                        <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%"  id="form_art_grp_article">
                            <span>#{lab.LDB_PA_references}</span>
                            <h:inputText value="#{managedGroupeArticle.groupeArticle.reference}" style="width: 98%"/>
                            <span>#{lab.LDB_PA_designation}</span>
                            <h:inputText value="#{managedGroupeArticle.groupeArticle.designation}" style="width: 98%"/>                                                                
                            <span>#{lab.LDB_PA_parents}</span>
                            <h:selectOneMenu value="#{managedGroupeArticle.parent}" style="width: 98%">
                                <f:selectItem itemLabel=" " itemValue="0" noSelectionOption="true"/>
                                <f:selectItems value="#{managedGroupeArticle.parents}" var="parentg" 
                                               itemLabel="#{parentg.designation}" itemValue="#{parentg.id}" />
                            </h:selectOneMenu>
                            <f:facet name="footer">
                                <span>#{lab.LDB_PA_description}</span>
                                <h:inputTextarea style="width: 99%" rows="5" value="#{managedGroupeArticle.groupeArticle.description}" />                                   
                            </f:facet>
                        </h:panelGrid>
                        <div>
                            <p:commandButton value="#{lab.L_nouveau}" style="float: left" actionListener="#{managedGroupeArticle.resetFiche()}"
                                             update=":formulaire_mainArticle:select_groupArt form_art_grp_article"/>
                            <p:commandButton value="#{lab.L_enregistrer}" style="float: right" actionListener="#{managedGroupeArticle.saveNew()}"
                                             update=":formulaire_mainArticle:select_groupArt art_tab_grp_article form_art_grp_article"/>
                        </div>
                    </div>
                    <div class="yvs_list_grp_article">                             
                        <p:dataTable id="art_tab_grp_article" value="#{managedGroupeArticle.groupes}" var="groups" rowIndexVar="groupeLine"
                                     selectionMode="single" rowKey="#{groups.id}" style="max-height: 400px;overflow-y: auto">
                            <p:ajax event="rowSelect" global="false" listener="#{managedGroupeArticle.loadOnView}"  
                                    oncomplete="collapseForm('grp_article')" update=":main_grp_article:form_art_grp_article"/>
                            <p:column width="20">
                                #{groupeLine+1}
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_reference}">
                                #{groups.refgroupe}                    
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_designation}">
                                #{groups.designation}                                        
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_parent}">
                                #{groups.groupeParent.designation}
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <p:commandButton icon="ui-icon-trash" title="#{lab.L_supprimer}" id="delete_grp_article" actionListener="#{managedGroupeArticle.deleteBean_(groups, false)}" 
                                                 update="art_tab_grp_article" style="width: 22px; height: 22px">
                                </p:commandButton>
                            </p:column>                                    
                        </p:dataTable>         
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedGroupeArticle.init(false)}" global="false" update="art_tab_grp_article" icon="ui-icon-circle-triangle-w" disabled="#{managedGroupeArticle.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedGroupeArticle.paginator.currentPage}/#{managedGroupeArticle.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedGroupeArticle.init(true)}" global="false" update="art_tab_grp_article" icon="ui-icon-circle-triangle-e" disabled="#{managedGroupeArticle.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedGroupeArticle.imax}" label="Nombre max Résultat" valueChangeListener="#{managedGroupeArticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{managedGroupeArticle.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="art_tab_grp_article"/>
                            </p:selectOneMenu>
                        </p:outputPanel>                          
                    </div>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>  <!-->End Boite de dialogue de gestion des groupe<-->
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue de gestion des familles
        *****************************************************************************
        <-->
        <h:form prependId="false" id="main_fam_article">
            <script type="text/javascript">
                $(function() {
                    collapseForm('famArt');
                });
            </script> 
            <p:dialog header="#{lab.LDB_PA_liste_famille_article}" widgetVar="dlgArtFamArt" modal="true" width="55%" closeOnEscape="true">
                <div class="dlg_part_fixe">
                    <div align="right">
                        <h:inputText value="#{managedFamilleArticle.numSearch}" style="float: left; font-size: 0.8em">
                            <p:ajax event="valueChange" global="false"  listener="#{managedFamilleArticle.addParamReference()}" partialSubmit="true" process="@this"
                                    update="art_tab_famArt" />
                        </h:inputText>
                        <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('famArt');
                                return false">
                            <p:graphicImage library="icones" name="newDoc.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>               
                        <p:spacer />
                        <h:link onclick="collapseList('famArt');
                                return false" title="#{lab.L_mode_liste}" >
                            <p:graphicImage library="icones" name="ico_formulaire.png" width="15" height="22" style="border: 2px solid #666; border-radius: 5px;"/>
                        </h:link>                                
                    </div>               
                    <div style="clear: left" />       
                </div>                        
                <div style="height: 93%; overflow-y: auto" class="dlg_part_scroll">                                        
                    <div class="yvs_form_famArt">
                        <h:panelGrid columns="2" styleClass="yvs_table" style="width: 100%; font-size: 0.9em" id="form_art_fam_art"
                                     cellpadding="0" cellspacing="0">
                            <span>#{lab.LDB_PA_references}</span>
                            <h:inputText value="#{familleArticle.reference}" style="width: 98%"/>
                            <span>#{lab.LDB_PA_designation}</span>
                            <h:inputText value="#{familleArticle.designation}" style="width: 98%"/>                                                               
                            <span>#{lab.LDB_PA_famille_parent}</span>
                            <h:selectOneMenu value="#{familleArticle.parentFamille.id}" style="width: 98%">
                                <f:selectItem itemLabel=" " itemValue="0" noSelectionOption="true" />
                                <f:selectItems value="#{managedFamilleArticle.parents}" var="parentf" 
                                               itemLabel="#{parentf.designation}" itemValue="#{parentf.id}" />
                            </h:selectOneMenu>
                            <f:facet name="footer">
                                <span>#{lab.LDB_PA_description}</span>
                                <h:inputTextarea style="width: 99%" rows="5" value="#{familleArticle.description}" />                                    
                            </f:facet>
                        </h:panelGrid>
                        <div>
                            <p:commandButton value="#{lab.L_nouveau}" actionListener="#{managedFamilleArticle.resetFiche()}" update="form_art_fam_art" style="float: left"/>
                            <p:commandButton value="#{lab.L_enregistrer}" icon="ui-icon-disk" actionListener="#{managedFamilleArticle.saveNew()}" style="float: right" 
                                             update="art_tab_famArt :formulaire_mainArticle:txt_famArt form_art_fam_art"/>
                        </div>
                    </div>
                    <div class="yvs_list_famArt">                                
                        <p:dataTable value="#{managedFamilleArticle.familles}" var="famArt_" rowIndexVar="familleLine" id="art_tab_famArt"
                                     style="max-height: 500px;overflow-y: auto; font-size: 0.9em" selectionMode="single" rowKey="#{famArt_.id}">                                     
                            <p:ajax event="rowSelect" listener="#{managedFamilleArticle.loadOnView}" oncomplete="collapseForm('famArt')"
                                    update=":formulaire_mainArticle:txt_famArt :main_fam_article:form_art_fam_art" />
                            <p:column width="15" headerText="N°" style="text-align: center">
                                #{familleLine+1}
                            </p:column>
                            <p:column  headerText="#{lab.LDB_PA_reference}" width="120">
                                #{famArt_.referenceFamille}             
                            </p:column>
                            <p:column  headerText="#{lab.LDB_PA_designation}" width="220">
                                #{famArt_.designation}
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_parent}" width="120">
                                #{famArt_.familleParent.designation}
                            </p:column>
                            <p:column headerText="" width="20" style="text-align: center">
                                <p:contextMenu event="left click" for="btn_del_famart" styleClass="context_menu" style="font-size: 0.9em">
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{managedFamilleArticle.deleteBean_(famArt_, false)}" 
                                                update="art_tab_famArt" id="btn_del_famart"/>
                                </p:contextMenu>
                            </p:column>
                        </p:dataTable>  
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedFamilleArticle.init(false)}" global="false" update="art_tab_famArt" icon="ui-icon-circle-triangle-w" disabled="#{managedFamilleArticle.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedFamilleArticle.paginator.currentPage}/#{managedFamilleArticle.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedFamilleArticle.init(true)}" global="false" update="art_tab_famArt" icon="ui-icon-circle-triangle-e" disabled="#{managedFamilleArticle.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedFamilleArticle.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedFamilleArticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{managedFamilleArticle.paginations}"/>
                                <p:ajax event="valueChange" global="false" update="art_tab_famArt"/>
                            </p:selectOneMenu>
                        </p:outputPanel> 
                    </div>
                </div>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet>
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        End boîte de dialogue de gestion des conditionnement
        *****************************************************************************
        <-->  
        <!-->Boite de dialogue pour les catégorie<-->
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_categorie_comptable}" widgetVar="dlgAddCategorieC" closeOnEscape="true" width="40%" footer="&copy;Lymytz 2014">
                <p:panelGrid columns="2" style="width: 98%;margin: auto" id="form_categorie_art_taxe">
                    <span>#{lab.LDB_PA_code_appel}</span>
                    <h:inputText value="#{categorieComptable.codeAppel}"/>
                    <span>#{lab.LDB_PA_code_categorie}</span>
                    <h:inputText value="#{categorieComptable.codeCategorie}"/>
                    <span>#{lab.LDB_PA_nature}</span>
                    <h:selectOneMenu value="#{categorieComptable.nature}">
                        <f:selectItem itemLabel="#{constantes.ACHAT}" itemValue="#{constantes.ACHAT}" />
                        <f:selectItem itemLabel="#{constantes.VENTE}" itemValue="#{constantes.VENTE}" />
                        <f:selectItem itemLabel="#{constantes.STOCK}" itemValue="#{constantes.STOCK}" />
                        <f:selectItem itemLabel="#{constantes.VSTOCK}" itemValue="#{constantes.VSTOCK}" />
                    </h:selectOneMenu> 
                </p:panelGrid>
                <p:commandButton actionListener="#{managedCatCompt.saveNew()}" style="float: right"
                                 update="form_categorie_art_taxe" oncomplete="dlgAddCategorieC.hide()"
                                 value="#{lab.L_enregistrer}"/>
            </p:dialog>
        </h:form>

        <!--><-->
        <!--> Boite de dialogue pour les catégorie taxes<-->
        <h:form prependId="false" id="form_dlg_taxe">
            <p:dialog header="#{lab.LDB_PA_taxes_articles}" widgetVar="dlgListCatTaxes" closeOnEscape="true" width="60%" footer="&copy;Lymytz 2014">
                <p:commandButton icon="ui-icon-circle-plus" type="button" onclick="dlgAddTaxes.show()" style="float: right" title="#{lab.LDB_PA_ajouter_nouvelle_taxe}"/>
                <p:dataTable value="#{Marticle.listTaxes}" var="artT" id="data_taxe_article_categorie" rowKey="#{artT.id}">
                    <p:column headerText="#{lab.LDB_PA_code_taxe}">
                        #{artT.taxe.codeTaxe}
                        <h:graphicImage library="img" name="R_on.png" width="12" height="12" rendered="#{artT.appRemise}" style="float: right"
                                        title="#{lab.LDB_PA_taxe_appliquee_remise}"/>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_designation}">
                        #{artT.taxe.designation}
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_taux}" style="text-align: right;width: 20%">
                        <h:outputText value="#{artT.taxe.taux}" converter="DNS"/>
                        %
                    </p:column>                                                                                   
                    <p:column  width="20" style="text-align: center">
                        <p:commandButton icon="ui-icon-minusthick" style="width: 20px;height: 20px" rendered="#{!artT.new_}"
                                         actionListener="#{Marticle.removeTaxeToCategorieArticle(artT)}" title="#{lab.LDB_PA_retirer_taxe}"                                         
                                         update="data_taxe_article_categorie :formulaire_mainArticle:tbvArticle:tableArticleCatC"/>
                        <p:commandButton icon="ui-icon-plusthick" style="width: 20px;height: 20px" rendered="#{artT.new_}" 
                                         actionListener="#{Marticle.addTaxeToCategorieArticle(artT)}" title="#{lab.LDB_PA_ajouter_taxe}"                                          
                                         update="data_taxe_article_categorie :formulaire_mainArticle:tbvArticle:tableArticleCatC"/>
                    </p:column>  
                    <p:column style="text-align: center;width: 8%">
                        <p:contextMenu styleClass="context_menu" for="btn_option_taxe_article_categorie" event="left click" style="font-size: 0.8em;width: 200px">
                            <p:menuitem value="#{(artT.appRemise)?'Desactiver sur la remise':'Activer sur la remise'}" icon="ui-icon-star" global="false" 
                                        title="#{(artT.appRemise)?'Desactiver l application de la taxe sur la remise':'Activer l application de la taxe sur la remise'}"
                                        actionListener="#{Marticle.appRemiseTaxeToCategorieArticle(artT)}" update="data_taxe_article_categorie"/>
                        </p:contextMenu>                           
                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_taxe_article_categorie" type="button" disabled="#{artT.new_}"/>
                    </p:column>
                </p:dataTable>                     
            </p:dialog>
            <p:dialog header="#{lab.LDB_PA_ajouter_taxe}" widgetVar="dlgAddTaxes" closeOnEscape="true" width="35%" footer="&copy;Lymytz 2014">
                <h:panelGrid columns="2" style="width: 98%;margin: auto" id="form_art_taxe_taxe" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PA_appel}</span>
                    <h:inputText value="#{taxes.codeAppel}"/>
                    <span>#{lab.LDB_PA_code}</span>
                    <h:inputText value="#{taxes.codeTaxe}"/>
                    <span>#{lab.LDB_PA_designation}</span>
                    <h:inputText value="#{taxes.designation}"/>
                    <span>#{lab.LDB_PA_taux}</span>
                    <pe:inputNumber value="#{taxes.taux}" symbol=" %" symbolPosition="suffixe"/>
                </h:panelGrid>
                <p:commandButton actionListener="#{Marticle.saveNewTaxe()}" style="float: right"
                                 update="form_art_taxe_taxe :form_dlg_taxe:data_taxe_article_categorie" oncomplete="dlgAddTaxes.hide()"
                                 value="#{lab.L_enregistrer}" global="false"/>
            </p:dialog>
        </h:form>
        <!--> Boite de dialogue pour les catégorie comptes<-->
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_comptes}" widgetVar="dlgAddCatComptes" closeOnEscape="true" width="40%" footer="&copy;Lymytz 2014">
                <h:panelGrid columns="4" styleClass="yvs_table" style="width: 100%">
                    <span>#{lab.LDB_PA_categorie_comptable}</span>
                    <h:selectOneMenu value="#{articlesCatTaxes.categorie.id}"
                                     onchange="openDialog('dlgAddCategorie', $(this))">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedCatCompt.categories}" var="cat" 
                                       itemLabel="#{cat.codeAppel}" itemValue="#{cat.id}" />
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItem itemLabel="#{lab.L_plus_choix}" itemValue="-1"/>                                    
                    </h:selectOneMenu> 
                    <span>Comptes </span>
                    <h:selectOneMenu value="" 
                                     onchange="openDialog('dlgAddTaxes', $(this))">
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItems value="#{managedCompte.listComptes}" var="comp_" 
                                       itemLabel="#{comp_.numCompte}" itemValue="#{comp_.id}" />
                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                        <f:selectItem itemLabel="#{lab.L_plus_choix}" itemValue="-1"/>                                    
                    </h:selectOneMenu>
                </h:panelGrid>
            </p:dialog>
        </h:form>

        <!--> Boite de dialogue pour la création des articles dépôts<-->
        <h:form prependId="false" id="form_art_fournisseur">
            <p:dialog widgetVar="dlgAddArticleFsseur" closeOnEscape="true" width="50%" footer="&copy;Lymytz 2014">        
                <f:facet name="header">
                    #{lab.LDB_PA_conditionnement} '<span style="font-weight: bold">#{managedFournisseur.unite.article.article.designation}</span>'
                </f:facet>
                <h:panelGrid id="article_form_fournisseur" columns="1"  styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        <h:panelGrid id="form_article_form_fournisseur" columns="7" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                            <span>#{lab.LDB_PA_conditionnement} </span>
                            <h:selectOneMenu value="#{managedFournisseur.unite.unite.id}">
                                <f:selectItem itemLabel="" itemValue="0" />
                                <f:selectItems value="#{managedUniteMesure.unites}" var="cond_" itemLabel="#{cond_.reference}" itemValue="#{cond_.id}"/>   
                                <p:ajax event="valueChange" global="false" listener="#{managedFournisseur.chooseConditionnement()}"/>
                            </h:selectOneMenu>  
                            <span>#{lab.LDB_PA_prix_achat}</span>
                            <h:inputText value="#{managedFournisseur.unite.pua}"/>
                            <span>#{lab.LDB_PA_principal}</span>
                            <h:selectBooleanCheckbox value="#{managedFournisseur.unite.principal}"/>
                            <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right"
                                             update="article_form_fournisseur" actionListener="#{managedFournisseur.saveNewConditionnement()}"/>
                        </h:panelGrid>
                    </f:facet>
                    <p:dataTable id="data_article_form_fournisseur" value="#{managedFournisseur.selectTarif.conditionnements}" var="_cond" rowKey="#{_cond.id}" rowIndexVar="yIdx" selectionMode="single">
                        <p:ajax event="rowSelect" global="false" listener="#{managedFournisseur.loadOnViewConditionnement}" update=":form_art_fournisseur:form_article_form_fournisseur"/>
                        <p:ajax event="rowUnselect" global="false" listener="#{managedFournisseur.unLoadOnViewConditionnement}" update=":form_art_fournisseur:form_article_form_fournisseur"/>
                        <p:column headerText="N°" style="width: 1%;text-align: center">
                            <span>#{yIdx+1}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_conditionnement}">
                            <span>#{_cond.conditionnement.unite.libelle}</span>                                  
                            <span style="display: #{_cond.principal?'inline':'none'}; border: 1px solid #666; background: #009999; font-size: 0.8em; color: white">Principal</span> 
                            <span style="float: right;font-weight: bold">#{_cond.conditionnement.unite.reference}</span>
                        </p:column>
                        <p:column headerText="#{lab.LDB_PA_prix_achat}" style="width: 4%;text-align: right">
                            <h:outputText value="#{_cond.pua}" converter="DN"/>
                        </p:column>
                        <p:column style="text-align: center;width: 1%">
                            <p:contextMenu for="btn_option_article_form_fournisseur" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{managedFournisseur.deleteBeanConditionnement(_cond)}" 
                                            update=":form_art_fournisseur:article_form_fournisseur"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_form_fournisseur" type="button"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>  
            </p:dialog>
        </h:form>
        <!--> Boite de dialogue pour la création des articles dépôts<-->
        <h:form prependId="false">
            <p:dialog header="#{lab.LDB_PA_depot_calcul_pr}" widgetVar="dlgChangeDepotPr" closeOnEscape="true" footer="#{lab.L_copy}">                
                <h:panelGrid columns="2" style="width: 100%">
                    <h:selectOneMenu value="#{managedStockArticle.depotPr.id}" title="#{lab.LDB_PA_selectionner_depot}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{managedDepot.depots}" var="depC" itemLabel="#{depC.designation}" itemValue="#{depC.id}"/>  
                        <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseDepotPr()}"/> 
                    </h:selectOneMenu>  
                    <p:commandButton value="#{lab.L_enregistrer}" oncomplete="dlgChangeDepotPr.hide()" actionListener="#{managedStockArticle.changeDepotPr()}"
                                     update=":formulaire_mainArticle:tbvArticle:article_depot_table"/>
                </h:panelGrid>
            </p:dialog>            
        </h:form>
        <h:form prependId="false" id="form_art_depot">
            <p:dialog header="#{lab.LDB_PA_ajout_article_depot}" widgetVar="dlgAddArticleDepot" closeOnEscape="true" width="70%" footer="&copy;Lymytz 2014" >                                          
                <h:panelGrid id="article_form_depot" columns="2"  styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">                                            
                    <span>#{lab.LDB_PA_depot}</span>
                    <h:panelGroup>
                        <h:selectOneMenu value="#{managedStockArticle.article.depot.id}" style="width: 90%" title="#{lab.LDB_PD_selectionner_depot}" styleClass="select" disabled="#{managedStockArticle.article.update}">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedDepot.depots}" var="depot_" itemLabel="#{depot_.designation}" itemValue="#{depot_.id}"/>   
                            <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseDepotArticle()}" update="choix_unite_depot_article choix_depot_pr_article"/>                                
                        </h:selectOneMenu>
                        <h:outputText value="#{managedStockArticle.article.id}" styleClass="style_identifiant" />
                    </h:panelGroup>                                            
                    <span>#{lab.LDB_PA_suivi_stock}</span>
                    <h:panelGroup>
                        <p:selectBooleanCheckbox value="#{managedStockArticle.article.suiviStock}"/>                            
                        <h:panelGroup style="float: right">
                            <p:selectBooleanCheckbox value="#{managedStockArticle.article.sellWithoutStock}" itemLabel="#{lab.LDB_PD_venets_sans_stock} ?"/>  
                        </h:panelGroup>
                    </h:panelGroup>                                             
                    <span>#{lab.LDB_PA_marge_stock}</span>
                    <h:panelGroup>
                        <span>#{lab.LDB_PA_min}</span>
                        <h:inputText value="#{managedStockArticle.article.stockMin}" style="width: 30%;text-align: right" title="#{lab.LDB_PD_stock_minimal}">
                            <p:ajax event="blur" global="false" update="txt_stock_alert_art_depot"/>
                        </h:inputText>
                        <p:spacer width="5"/>
                        <span>#{lab.LDB_PA_max}</span>
                        <h:inputText value="#{managedStockArticle.article.stockMax}" style="width: 30%;text-align: right" title="#{lab.LDB_PD_stock_minimal}">
                            <p:ajax event="blur" global="false" update="txt_stock_alert_art_depot"/>
                        </h:inputText>
                    </h:panelGroup>
                    <span>#{lab.LDB_PA_stock_securite}</span>
                    <h:panelGroup>
                        <h:inputText value="#{managedStockArticle.article.stockSecurite}" style="width: 40%;text-align: right">
                            <p:ajax event="blur" global="false" update="txt_stock_alert_art_depot"/>
                        </h:inputText>
                        <div style="float: right;font-size: 0.8em;font-style: italic;margin-top: 5px">
                            #{lab.LDB_PA_stock_alert}
                            <h:outputText value="#{managedStockArticle.article.stockAlert}" converter="DN" style="color: blue" id="txt_stock_alert_art_depot"/>
                        </div>
                    </h:panelGroup>
                    <span title="#{lab.LDB_PA_mode_approvisionnement}">#{lab.LDB_PA_appro}</span>
                    <h:selectOneMenu value="#{managedStockArticle.article.modeAppro}" title="#{lab.LDB_PA_mode_approvisionnement}" styleClass="select">
                        <f:selectItems value="#{constantes.MODES_APPRO}" var="MOA" itemLabel="#{MOA.libelle}" itemValue="#{MOA.valeur}" />                       
                        <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseModeApprovisionnement()}"/>
                    </h:selectOneMenu>                                             
                    <span title="#{lab.LDB_PA_mode_reapprovisionnement}">#{lab.LDB_PA_reappro}</span>
                    <h:panelGroup>                        
                        <h:selectOneMenu value="#{managedStockArticle.article.modeReappro}" title="#{lab.LDB_PA_mode_reapprovisionnement}" styleClass="select">
                            <f:selectItems value="#{constantes.MODES_REAPPRO}" var="MOEA" itemLabel="#{MOEA.libelle}" itemValue="#{MOEA.valeur}" />
                            <p:ajax event="valueChange" global="false" update="grp_interval_reappro"/>
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox title="#{lab.LDB_PA_generer_document_stock}" value="#{managedStockArticle.article.genererDocument}" style="float: right;margin-top: 5px">
                            <p:ajax event="valueChange" global="false" update="select_type_generer_article_depot"/>
                        </h:selectBooleanCheckbox>
                        <h:selectOneMenu rendered="#{managedStockArticle.article.modeReappro ne constantes.REAPPRO_AUCUN}"  title="#{lab.LDB_PA_type_document_stock_generer}" id="select_type_generer_article_depot" value="#{managedStockArticle.article.typeDocumentGenerer}" disabled="#{!managedStockArticle.article.genererDocument}">
                            <f:selectItem itemLabel="#{constantes.TYPE_FiA_NAME}" itemValue="#{constantes.TYPE_FiA}"/>                    
                            <f:selectItem itemLabel="#{constantes.TYPE_FA_NAME}" itemValue="#{constantes.TYPE_FA}"/>                    
                            <f:selectItem itemLabel="#{constantes.TYPE_FT_NAME}" itemValue="#{constantes.TYPE_FT}"/>                      
                            <p:ajax event="valueChange" global="false" />
                        </h:selectOneMenu> 
                    </h:panelGroup>
                    <span title="#{lab.LDB_PA_lot_reapprov}">#{lab.LDB_PA_lot_reappro} </span>
                    <h:panelGroup>
                        <h:inputText value="#{managedStockArticle.article.lotLivraison}" style="width: 40%;text-align: right" title="#{lab.LDB_PA_lot_reapprov}"/>
                        <h:panelGroup style="float: right;margin-top:5px">
                            <span>Activer la gestion par lot </span>
                            <h:selectBooleanCheckbox value="#{managedStockArticle.article.requiereLot}"/>
                        </h:panelGroup>
                    </h:panelGroup>
                    <span title="#{lab.LDB_PA_interval_reappro}">#{lab.LDB_PA_int_reappro} </span>
                    <h:panelGroup id="grp_interval_reappro">
                        <h:inputText value="#{managedStockArticle.article.intervalApprov}" style="width: 40%;text-align: right" title="#{lab.LDB_PA_interval_reappro}"
                                     disabled="#{managedStockArticle.article.modeReappro != constantes.REAPPRO_PERIODE}"/>
                        <p:spacer width="5"/>
                        <h:selectOneMenu value="#{managedStockArticle.article.uniteInterval}" title="#{lab.LDB_PA_unite_temps}" styleClass="select"
                                         disabled="#{managedStockArticle.article.modeReappro != constantes.REAPPRO_PERIODE}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="UIR" itemLabel="#{UIR[1]}" itemValue="#{UIR[0]}" />
                        </h:selectOneMenu>
                    </h:panelGroup>
                    <h:outputText value="Catégorie" rendered="#{managedStockArticle.article.defaultPr}"/>
                    <h:selectOneMenu value="#{managedStockArticle.article.categorie}" style="min-width: 120px;max-width: 150px" rendered="#{managedStockArticle.article.defaultPr}">
                        <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" /> 
                        <p:ajax event="valueChange" process="@this" global="false" update=":formulaire_mainArticle:tbvArticle" />
                    </h:selectOneMenu>   
                    <span>#{lab.LDB_PA_unite_stock_defaut}</span>
                    <h:selectOneMenu value="#{managedStockArticle.article.conditionnement.id}" title="#{lab.LDB_PA_conditionnement_defaut}" id="choix_unite_depot_article" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{Marticle.article.conditionnements}" var="line_c" itemLabel="#{line_c.unite.libelle}" itemValue="#{line_c.id}"/>   
                        <p:ajax event="valueChange" global="false"  />                                
                    </h:selectOneMenu>
                    <span>#{lab.LDB_PA_depot_calcul_pr}</span>
                    <h:selectOneMenu value="#{managedStockArticle.article.depotPr.id}" title="#{lab.LDB_PA_selectionner_depot}" id="choix_depot_pr_article" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{managedDepot.depots}" var="depot_" itemLabel="#{depot_.designation}" itemValue="#{depot_.id}"/>   
                        <p:ajax event="valueChange" global="false" listener="#{managedStockArticle.chooseDepotDefautPr()}"/> 
                    </h:selectOneMenu>    
                    <f:facet name="footer">
                        <p:commandButton value="#{lab.L_nouveau}" style="float: left" update="article_form_depot"
                                         actionListener="#{managedStockArticle.resetFicheArticle()}"/>
                        <p:commandButton value="#{lab.L_enregistrer}" style="float: right" actionListener="#{Marticle.saveNewArticle()}"
                                         update="article_form_depot :formulaire_mainArticle:tbvArticle:article_depot_table"/>
                        <div class="display_auteur" align="right" style="clear: both">
                            <p:outputPanel autoUpdate="true">
                                <span style="float: left">Enregistré Le <h:outputText value="#{managedStockArticle.article.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                                <span>Modifier Le <h:outputText value="#{managedStockArticle.article.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                                <span>Par <h:outputText value="#{managedStockArticle.article.author.users.nomUsers}" style="font-weight: bold" styleClass="valeur" /></span>
                            </p:outputPanel>
                        </div>
                    </f:facet>
                </h:panelGrid>  
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-equivalence">
            <p:dialog header="#{lab.LDB_PA_definir_equivalences}" widgetVar="dlgEquivalenceUnite" closeOnEscape="true" width="50%" footer="&copy;Lymytz 2014" >                                          
                <p:dataTable id="data-equivalence_unite" value="#{Marticle.equivalencesUnite}" var="eqU" rowIndexVar="xEqU" editMode="cell" editable="true" rowKey="#{eqU.id}">
                    <p:ajax event="cellEdit" listener="#{Marticle.onEquivalenceUniteEdit}" />
                    <p:column headerText="#{lab.LDB_PA_reference}">
                        <span>#{eqU.unite.reference}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_libelle}">
                        <span>#{eqU.unite.libelle}</span>
                    </p:column>
                    <p:column headerText="#{lab.LDB_PA_type}" style="text-align: center">
                        <span>#{managedUniteMesure.giveNameUnite(eqU.unite.type)}</span>
                    </p:column>
                    <p:column width="50" headerText="#{lab.LDB_PA_coefficient}" style="text-align: right">                                   
                        <p:cellEditor >
                            <f:facet name="output">
                                <h:outputText value="#{eqU.coefficient}" converter="DNA"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{eqU.coefficient}" style="width: 50px;text-align: right"/>    
                            </f:facet>
                        </p:cellEditor>  
                    </p:column>
                </p:dataTable>   
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmChangeRequiereLot" closeOnEscape="true"
                             message="#{lab.LDB_PA_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedStockArticle.activeRequiredLot(managedStockArticle.selectArticle)}"
                                 oncomplete="dlgConfirmChangeRequiereLot.hide()" update=":formulaire_mainArticle:tbvArticle:article_depot_table"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmChangeRequiereLot.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="#{lab.LDB_PA_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedStockArticle.deleteBeanArticle()}"  update=":formulaire_mainArticle:tbvArticle:article_depot_table"
                                 oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('depot');;collapseForm('depot');collapseForm('article_depot');collapseForm('liaison_depot');collapseForm('point_vente_depot0');collapseForm('emplacement_depot')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="#{lab.LDB_PA_text9}" header="#{lab.L_confirmation}">
                <div >
                    <span>#{lab.LDB_PA_text10}</span>
                    <p:selectBooleanCheckbox value="#{managedStockArticle.needConfirmation}" />
                </div>
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedStockArticle.deleteBeanArticle_()}"  update=":formulaire_mainArticle:tbvArticle:article_depot_table"
                                 oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('depot');;collapseForm('depot');collapseForm('article_depot');collapseForm('liaison_depot');collapseForm('point_vente_depot0');collapseForm('emplacement_depot')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmApplyTemplate" closeOnEscape="true"
                             message="#{lab.LDB_PA_text11}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.applyValueTemplate()}"  oncomplete="dlgConfirmApplyTemplate.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmApplyTemplate.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCreerTemplate" closeOnEscape="true"
                             message="#{lab.LDB_PA_text12}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.genererTemplate()}"  oncomplete="dlgCreerTemplate.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCreerTemplate.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteAnalytique" closeOnEscape="true"
                             message="#{lab.LDB_PA_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.deleteAnalytique(Marticle.selectAnalytique, true)}"  oncomplete="dlgConfirmDeleteAnalytique.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteAnalytique.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!--> Boite de dialogue pour la détermination du dépôt de calcul du pr par défaut<-->
        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dlgoptionPr" closeOnEscape="true"
                      header="#{lab.LDB_PA_option_prix_revient}" width="45%" height="200" >
                <h:panelGrid columns="1" cellspacing="20">
                    <h:panelGroup >
                        <h:graphicImage library="icones" name="info.png" width="12" height="12" />
                        <h:outputText value="#{lab.LDB_PA_text13}" />
                    </h:panelGroup>
                    <h:panelGrid columns="2">                        
                        <span>#{lab.L_agence}</span>
                        <h:selectOneMenu value="#{Marticle.choixAgence}" 
                                         valueChangeListener="#{managedDepot.addParamAgence}">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedAgence.agences}" var="iAg_" itemLabel="#{iAg_.designation}" itemValue="#{iAg_.id}" />
                            <p:ajax event="valueChange" update="chmp_depot_apply_pr" />
                        </h:selectOneMenu> 
                        <span>#{lab.LDB_PA_depots}</span>
                        <h:selectOneMenu value="#{Marticle.choixDepot}" id="chmp_depot_apply_pr">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedDepot.depots}" var="idepo_" itemLabel="#{idepo_.designation}" itemValue="#{idepo_.id}" />
                        </h:selectOneMenu>  
                    </h:panelGrid>
                    <p:commandButton value="#{lab.LDB_PA_appliquer}" icon="ui-icon-arrow-4" actionListener="#{Marticle.applyDepotPr()}"/>
                </h:panelGrid>                
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dlgAddToDepot" closeOnEscape="true" header="Selectionner un dépôt" width="30%" >
                <h:panelGrid columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                    <span>#{lab.L_agence}</span>
                    <h:selectOneMenu value="#{Marticle.choixAgence}" valueChangeListener="#{managedDepot.addParamAgence}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{managedAgence.agences}" var="iAg_" itemLabel="#{iAg_.designation}" itemValue="#{iAg_.id}" />
                        <p:ajax event="valueChange" update="chmp_depot_apply_pr_" />
                    </h:selectOneMenu> 
                    <span>#{lab.LDB_PA_depots}</span>
                    <h:selectOneMenu value="#{Marticle.choixDepot}" id="chmp_depot_apply_pr_" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0" />
                        <f:selectItems value="#{managedDepot.depots}" var="idepo_" itemLabel="#{idepo_.designation}" itemValue="#{idepo_.id}" />
                    </h:selectOneMenu>  
                    <f:facet name="footer">
                        <p:commandButton value="#{lab.LDB_PA_appliquer}" icon="ui-icon-arrow-4" actionListener="#{Marticle.addToDepot()}" style="float: right"/>
                    </f:facet>
                </h:panelGrid>                
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArts" closeOnEscape="true"
                             message="#{lab.LDB_PA_text9}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{Marticle.deleteBeanArticle()}" update=":formulaire_mainArticle:head_form_article :formulaire_mainArticle:middle_form_article :formulaire_mainArticle:tbvArticle"
                                 oncomplete="dlgConfirmDeleteArts.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDeleteArts.hide()"/>
            </p:confirmDialog>
        </h:form>

        <h:form prependId="false" id="form_delete_img">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgDeleteImage" closeOnEscape="true"
                             message="#{lab.LDB_PA_text14}" header="#{lab.L_confirmation}">
                <p:dataGrid value="#{articles.photos}" var="item" rowIndexVar="index" columns="3">
                    <h:panelGrid columns="1">
                        <h:graphicImage styleClass="article_img" style="width: 100px" id="img_article"  alt="img" 
                                        value="data:image/#{articles.photosExtension.get(index)};base64,#{item}"/>
                        <p:commandButton value="#{lab.LDB_PA_effacer}" style="float: bottom" actionListener="#{Marticle.deleteImg(item)}"/>
                    </h:panelGrid>
                </p:dataGrid>
            </p:confirmDialog>

        </h:form>

        <h:form prependId="false" id="form-tag_article">
            <p:dialog header="Tags" hideEffect="explode" widgetVar="dlgTagsArticle" closeOnEscape="true" width="500">
                <h:panelGrid id="blog-tag_article" columns="1" style="width: 100%" cellpadding="0" cellspacing="0">
                    <h:panelGroup>
                        <h:inputText value="#{Marticle.tag}"/>
                        <p:commandButton value="#{lab.L_ajouter}" actionListener="#{Marticle.addTags()}" update="blog-tag_article" style="height: 30px"/>
                    </h:panelGroup>
                    <p:separator style="width: 100%"/>
                    <div style="text-align:left;">
                        <ui:repeat value="#{articles.listTags()}" var="tag">
                            <span class="signes_op">
                                <p:commandLink value="X" actionListener="#{Marticle.removeTags(tag)}" update=":form-tag_article:blog-tag_article"/>
                                #{tag}
                            </span>                                                
                        </ui:repeat>
                    </div>
                </h:panelGrid>                
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:dialog header="Appliquer un écart de PR" hideEffect="explode" widgetVar="dlgApplyEcartPr" closeOnEscape="true" width="500">
                <h:panelGrid columns="1" style="width: 100%" cellpadding="0" cellspacing="0">
                    <span>#{lab.LDB_PA_categorie}</span>
                    <h:selectOneMenu value="#{Marticle.categorieApplyPr}" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="#{null}"/>
                        <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" /> 
                        <p:ajax event="valueChange" process="@this" global="false" />
                    </h:selectOneMenu>   
                    <span>#{lab.LDB_PA_famille}</span>
                    <h:selectOneMenu value="#{Marticle.familleApplyPr}" style="width: 100%" >
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedFamilleArticle.familles}" var="famA"  itemLabel="#{famA.designation}" itemValue="#{famA.id}" />
                        <p:ajax event="valueChange" process="@this" global="false"/>
                    </h:selectOneMenu> 
                    <h:panelGroup>
                        <span>Plage du prix de </span>
                        <h:selectOneMenu value="#{Marticle.typePuApplyPr}">
                            <f:selectItem itemValue="V" itemLabel="vente" /> 
                            <f:selectItem itemValue="A" itemLabel="achat" /> 
                            <p:ajax event="valueChange" process="@this" global="false" />
                        </h:selectOneMenu>  
                    </h:panelGroup>
                    <h:panelGroup>
                        <pe:inputNumber value="#{Marticle.puMinApplyPr}" title="Prix minimal" style="text-align: center;width: 150px"/>
                        <span> à </span>
                        <pe:inputNumber value="#{Marticle.puMaxApplyPr}" title="Prix maximal" style="text-align: center;width: 150px"/>                   
                    </h:panelGroup>
                    <span>Ecart de PR </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{Marticle.ecartApplyPr}"  style="text-align: center;width: 150px" symbol="%" symbolPosition="suffix"/>                   
                        <p:commandButton value="#{lab.L_appliquer}" actionListener="#{Marticle.applyEcartPr()}"  style="float: right"/>
                    </h:panelGroup>
                </h:panelGrid>                
            </p:dialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="formulaire_mainArticle">
            <div class="part_fix">
                <p:splitButton value="#{lab.L_enregistrer}" id="save_article" actionListener="#{Marticle.saveNew()}" icon="ui-icon-disk"
                               update="tab_article art_dgrig :formulaire_mainArticle:tbvArticle" oncomplete="collapseForm('conditionnement')">
                    <p:menuitem value="#{lab.L_nouveau}"  id="cancel_article" actionListener="#{Marticle.resetFiche()}" oncomplete="collapseForm('conditionnement')" 
                                process="@this" icon="ui-icon-document"/>                            
                    <p:menuitem value="Appliquer #{lab.LDB_PA_ecart_pr}" onclick="dlgApplyEcartPr.show()" global="false" icon="ui-icon-document"/>                            
                    <!-->Un champ caché pour gérer la mise à zero du formulaire<-->
                    <p:menuitem value="Catalogue" global="false" icon="ui-icon-document">
                        <h:link value="Catalogue" outcome="articles_mise_en_avant" style="text-decoration: none; color: #000; margin-left: 10%" />
                    </p:menuitem>
                    <p:separator />
                    <p:menuitem value="#{lab.L_supprimer}" global="false" icon="ui-icon-trash" onclick="dlgConfirmDeleteArts.show()" />  
                </p:splitButton>
                <h:inputHidden value="#{Marticle.chaineSelectArt}" id="input_hide_article" />
                <h:inputHidden value="#{Marticle.tabIds}" id="input_hide_conditionnement" />
                <p:splitButton type="button" value="Options" icon="ui-icon-star" id="search_article"  style="font-size: 0.8em">
                    <p:menuitem value="#{lab.LDB_PA_appliquer_template}" icon="ui-icon-copy" global="false" onclick="dlgListTemplate.show()"/>
                    <p:menuitem value="Modifier une propriété" icon="ui-icon-copy" global="false" oncomplete="dlgUpdatePpte.show()"
                                actionListener="#{Marticle.doNothing()}"/>
                    <p:separator />
                    <p:menuitem value="Ajouter dans un dépôt" title="#{lab.LDB_PA_option_determination_prix_revient}" icon="ui-icon-plus" 
                                global="false" onclick="dlgAddToDepot.show()" />
                    <p:menuitem value="Appliquer #{lab.LDB_PA_ecart_pr}" onclick="dlgApplyEcartPr.show()" global="false" icon="ui-icon-document"/> 
                    <p:menuitem value="#{lab.LDB_PA_option_pr}" title="#{lab.LDB_PA_option_determination_prix_revient}" icon="ui-icon-star" 
                                global="false" onclick="dlgoptionPr.show()" />
                    <p:separator />
                    <p:menuitem value="Télécharger les étiquettes" icon="ui-icon-print" global="false" onclick="dlgPrintEtiquettes.show()" />                   
                    <p:menuitem value="#{lab.L_fusionner}" icon="ui-icon-refresh" actionListener="#{Marticle.fusionner(true)}" global="false"
                                oncomplete="dlgConfirmFusion.show()" update=":main_fusionn_arts:blog_fusionner_arts"/>
                    <p:menuitem value="#{lab.L_supprimer}" global="false" icon="ui-icon-trash" onclick="dlgConfirmDeleteArts.show()" />
                </p:splitButton> 
                <h:panelGroup style="margin-left: 25%">
                    <span style="display: inline-block; margin-right: 50px; font-style: italic; font-size: 0.8em" >
                        #{lab.LDB_PA_dernier_reference_ajouter} <span style="font-weight: bold">#{Marticle.findLastArticles().refArt}</span>
                    </span>
                    <p:commandButton actionListener="#{Marticle.parcoursInAllResult(false)}" update="txt_parc_linear_article"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('article')"/>
                    <h:inputText value="#{Marticle.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_article"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{Marticle.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{Marticle.parcoursInAllResult(true)}" update="txt_parc_linear_article" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('article')"/>
                </h:panelGroup>
                <div style="float: right">
                    <p:spacer width="10"/>
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('article');
                            collapseForm('nav_article');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link onclick="collapseList('article');
                            collapseList('nav_article');
                            return false" title="#{lab.L_mode_liste}" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>
                    <p:spacer />
                    <h:link  onclick="collapseGrid('article');
                            collapseList('nav_article');
                            return false" title="#{lab.L_mode_hierrachique}">
                        <p:graphicImage library="icones" name="ico_arbre_2.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>
                </div>
            </div>
            <div class="part_scroll">
                <div class="yvs_form_article" style="width: 100%">
                    <p:outputPanel id="blog_form_article">
                        <h:panelGroup id="fiche_articles" style="width: 98%">   
                            <h:panelGrid columns="1" styleClass="yvs_nostyle" style="text-align: center;float: left; width: 15%; height: 330px" cellpadding="0" cellspacing="0">
                                <p:outputPanel id="image_art_prod" style="text-align: center;width: 100%;margin:auto" autoUpdate="true" layout="block"> 
                                    <h:panelGrid columns="1" rendered="#{articles.photos.size() gt 0}" style="margin:auto">
                                        <p:commandLink id="delete_image" actionListener="#{Marticle.buildUploadImage()}" oncomplete="dlgUploadImg.show()" global="false"
                                                       style="margin:auto">
                                            <h:graphicImage id="im_art_prod" value="data:image/#{Marticle.currentPhotoExtension};base64,#{Marticle.currentPhoto}"
                                                            alt="#{lab.LDB_PA_photos_article}" style="max-height: 260px;max-width: 100%"/>
                                        </p:commandLink>
                                        <f:facet name="footer">
                                            <div style="float: left">
                                                <p:commandButton actionListener="#{Marticle.navigerPhoto(false)}" global="false" update="im_art_prod" icon="ui-icon-circle-triangle-w" styleClass="button_gear"/>
                                                <p:commandButton actionListener="#{Marticle.navigerPhoto(true)}" global="false" update="im_art_prod" icon="ui-icon-circle-triangle-e" styleClass="button_gear"/>                                            
                                            </div>
                                        </f:facet>
                                    </h:panelGrid>
                                    <p:commandLink id="dl_image" actionListener="#{Marticle.buildUploadImage()}" oncomplete="dlgUploadImg.show()" global="false"
                                                   rendered="#{0 >= articles.photos.size()}">
                                        <h:graphicImage alt="#{lab.LDB_PA_photos_article}" value="data:image/png;base64,#{Marticle.currentPhoto}" styleClass="article_img"/>
                                    </p:commandLink>
                                    <p:contextMenu for="delete_image" event="contextmenu" style="font-size: 0.8em">
                                        <p:menuitem value="#{lab.LDB_PA_supprimer_image}" icon="ui-icon-trash" global="false" oncomplete="dlgDeleteImage.show()" />
                                    </p:contextMenu>
                                </p:outputPanel> 
                            </h:panelGrid>
                            <div style="margin-left: 15%; background: #828c95" >                           
                                <h:panelGrid columns="6" styleClass="yvs_table"  cellpadding="0" cellspacing="0"
                                             style="width: 100%;" id="head_form_article">   
                                    <f:facet name="header">
                                        <div align="left">
                                            <h:inputText value="#{articles.designation}" style="width: 80%; height: 30px" title="#{lab.LDB_PA_designation}">
                                                <p:ajax event="valueChange" global="false"/>
                                            </h:inputText>
                                            <h:outputText value="#{articles.id}" styleClass="style_identifiant"/>
                                            <p:selectBooleanCheckbox value="#{articles.actif}" style="float: right" itemLabel="#{lab.L_actif}"/>
                                        </div>
                                    </f:facet>
                                    <span>#{lab.LDB_PA_reference_article}</span>
                                    <h:inputText id="txt-reference_article" value="#{articles.refArt}" disabled="#{articles.id gt 0 ? !accesRessource.base_article_change_reference : false}">
                                        <p:ajax event="valueChange" global="false"/>
                                    </h:inputText>
                                    <span>#{lab.LDB_PA_modele}</span>
                                    <h:selectOneMenu value="#{articles.template.id}" style="min-width: 120px;max-width: 150px" valueChangeListener="#{Marticle.chooseTemplate}">
                                        <f:selectItem itemLabel="" itemValue="0" />
                                        <f:selectItems value="#{managedTemplateArticle.templates}" var="temp_" itemLabel="#{temp_.libelle}" 
                                                       itemValue="#{temp_.id}" />
                                        <p:ajax event="valueChange" global="false" update=":formulaire_mainArticle:blog_form_article" />
                                    </h:selectOneMenu>      
                                    <span>#{lab.LDB_PA_type_service}</span>
                                    <h:selectOneMenu value="#{articles.typeService}" >
                                        <f:selectItem itemValue="#{constantes.SERVICE_COMMERCE_GENERAL}" itemLabel="#{lab.LDB_PA_commerce_general}" />                                          
                                        <f:selectItem itemValue="#{constantes.SERVICE_RESTAURANT}" itemLabel="#{lab.LDB_PA_restaurant}" />                                          
                                        <f:selectItem itemValue="#{constantes.SERVICE_LOGEMENT}" itemLabel="#{lab.LDB_PA_logement}" />                                          
                                    </h:selectOneMenu>  
                                    <span>#{lab.LDB_PA_categorie}</span>
                                    <h:selectOneMenu value="#{articles.categorie}" style="min-width: 120px;max-width: 150px">
                                        <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" /> 
                                        <p:ajax event="valueChange" process="@this" global="false" listener="#{Marticle.chooseCategorie()}" 
                                                update=":formulaire_mainArticle:tbvArticle chk_suivi_stock chk_requiere_lot" />
                                    </h:selectOneMenu>   
                                    <span>#{lab.LDB_PA_famille}</span>
                                    <h:selectOneMenu value="#{articles.famille.id}" title="#{lab.LDB_PA_select_one}" styleClass="select" id="txt_famArt" 
                                                     valueChangeListener="#{Marticle.chooseFamille}" style="min-width: 120px;max-width: 150px" >
                                        <f:selectItem itemLabel="" itemValue="0"/>
                                        <f:selectItems value="#{managedFamilleArticle.familles}" var="famA"  itemLabel="#{famA.designation}" itemValue="#{famA.id}" />
                                        <f:selectItem itemLabel="" itemValue="0"/>
                                        <f:selectItem itemValue="-1" itemLabel="#{lab.LDB_PA_creer}" />
                                        <p:ajax event="valueChange" oncomplete="collapseList('famArt')" global="false"/>
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PA_groupes}</span>
                                    <h:selectOneMenu value="#{articles.groupe.id}" title="#{lab.LDB_PA_select_one}" styleClass="select" style="min-width: 120px"
                                                     onchange="openDialog(dlgArtGroupeArt, $(this));
                                                             collapseList('grp_article')" id="select_groupArt">
                                        <f:selectItem itemLabel="----" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedGroupeArticle.groupes}" var="gpeA" itemLabel="#{(gpeA.designation==null)?'':gpeA.designation}" itemValue="#{gpeA.id}"/>
                                        <f:selectItem itemLabel="----" noSelectionOption="true"/>
                                        <f:selectItem itemValue="-1" itemLabel="#{lab.LDB_PA_creer}" />
                                    </h:selectOneMenu>                                     
                                </h:panelGrid>
                                <h:panelGrid columns="4" styleClass="yvs_table" style="background: #EEE; width: 100%; font-size: 0.8em"
                                             id="middle_form_article" cellpadding="0" cellspacing="0">
                                    <span>#{lab.LDB_PA_pua_ttc}</span>
                                    <h:selectBooleanCheckbox value="#{articles.puaTtc}" title="#{lab.LDB_PA_prix_achat_ttc}"/>
                                    <span>#{lab.LDB_PA_puv_ttc}</span>
                                    <h:selectBooleanCheckbox value="#{articles.puvTtc}" title="#{lab.LDB_PA_prix_vente_ttc}"/>
                                    <span>#{lab.LDB_PA_suivi_prix_revient}</span>
                                    <h:selectBooleanCheckbox value="#{Marticle.calculPr}" id="chkCPr">
                                        <p:ajax event="valueChange" update="txt-reference_ecart" global="false" />
                                    </h:selectBooleanCheckbox>
                                    <span>#{lab.LDB_PA_puv_variable}</span>
                                    <h:selectBooleanCheckbox value="#{articles.changePrix}" id="chkPUV"/> 
                                    <span>#{lab.LDB_PA_suivi_stock} </span>
                                    <h:selectBooleanCheckbox id="chk_suivi_stock" value="#{articles.suiviEnStock}" disabled="#{articles.categorie eq constantes.CAT_SERVICE}"/>
                                    <span>Activer la gestion par lot </span>
                                    <h:selectBooleanCheckbox id="chk_requiere_lot" value="#{articles.requiereLot}" disabled="#{articles.categorie eq constantes.CAT_SERVICE}"/>
                                    <span>#{lab.LDB_PA_ecart_pr}</span>
                                    <h:inputText id="txt-reference_ecart" value="#{articles.tauxEcartPr}" disabled="#{!Marticle.calculPr}"/>
                                    <span>#{lab.LDB_PA_valorisation}</span>
                                    <h:selectOneMenu value="#{articles.methodeVal}" >
                                        <f:selectItems value="#{constantes.METHODES_VAL}" var="mval" itemValue="#{mval.valeur}" itemLabel="#{mval.libelle}" itemDisabled="#{mval.valeur ne 'CMPI'}"/>                                          
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PA_classe_n1}</span>
                                    <h:selectOneMenu value="#{articles.classe1.id}" title="#{lab.LDB_PA_select_one}" styleClass="select" style="min-width: 120px">
                                        <f:selectItem itemLabel="----" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedClasseStat.classesStat}" var="cls1" itemLabel="#{cls1.designation}" itemValue="#{cls1.id}"/>
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PA_classe_n2}</span>
                                    <h:selectOneMenu value="#{articles.classe2.id}" title="#{lab.LDB_PA_select_one}" styleClass="select" style="min-width: 120px">
                                        <f:selectItem itemLabel="----" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{managedClasseStat.classesStat}" var="cls2" itemLabel="#{cls2.designation}" itemValue="#{cls2.id}"/>
                                    </h:selectOneMenu> 
                                    <span>#{lab.LDB_PA_garantie}</span>
                                    <h:panelGroup>
                                        <h:inputText value="#{articles.dureeGarantie}" style="text-align:right;width:50px"/>
                                        <span>#{lab.LDB_PA_jour}(s)</span>
                                    </h:panelGroup>
                                    <span>#{lab.LDB_PA_delai_livraison}</span>
                                    <h:panelGroup>
                                        <h:inputText value="#{articles.delaiLivraison}" style="text-align:right;width:50px"/>
                                        <span>#{lab.LDB_PA_jour}(s)</span>
                                    </h:panelGroup>
                                    <f:facet name="footer">
                                        <span>#{lab.LDB_PA_description}</span>
                                        <h:inputTextarea value="#{articles.description}" rows="2" style="width: 100%; margin-bottom: 5px"/>
                                    </f:facet>
                                </h:panelGrid>  
                            </div>
                        </h:panelGroup>
                        <p:tabView style="clear: left; font-size: 0.9em; min-height: 300px;" id="tbvArticle"> 
                            <p:tab title="#{lab.LDB_PA_conditionnements}" id="tab_conditionnement" >
                                <div style="width: 35%;float: left;" class="size-07">
                                    <h:panelGrid id="blog_form_conditionnement_article" styleClass="yvs_table" columns="4" style="width: 100%" cellpadding="0" cellspacing="0">
                                        <f:facet name="header">                                            
                                            <p:commandLink rendered="false" id="image_art_unite_prod" onclick="dlgUploadImgUnite.show()" global="false" style="width: 50px;">
                                                <h:graphicImage library="lymytz/documents/docArticle" styleClass="article_img" name="#{Marticle.photoUnite(Marticle.conditionnement)}" width="50" height="50"/>  
                                            </p:commandLink>
                                            <div align="left" >
                                                <span>#{lab.LDB_PA_unites} : </span>
                                                <h:panelGroup id="txt_unite_conditionnement_article">
                                                    <p:inputText value="#{Marticle.conditionnement.unite.reference}" style="width: 100px;color: #{Marticle.conditionnement.unite.error?'red':''};">
                                                        <p:ajax event="blur" global="false" listener="#{Marticle.searchUniteMesure(constantes.UNITE_AUTRE, true, false)}" update="blog_form_conditionnement_article"/>
                                                    </p:inputText>    
                                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="#{lab.LDB_PA_liste_unites}" global="false"
                                                                     actionListener="#{Marticle.initUnites(constantes.UNITE_AUTRE, true, false)}" oncomplete="dlgListUnite.show()" />
                                                    <h:outputText value="#{Marticle.conditionnement.unite.libelle}" style="color: #003399;margin-left: 5px"/>
                                                </h:panelGroup> 
                                            </div>
                                        </f:facet>
                                        <span title="#{lab.LDB_PA_prix_achat}">#{lab.LDB_PA_pu_achat} </span>                                    
                                        <h:inputText value="#{Marticle.conditionnement.prixAchat}" style="width: 90px;text-align: right"/> 
                                        <span title="#{lab.LDB_PA_prix_vente}">#{lab.LDB_PA_pu_vente} </span>                                    
                                        <h:inputText value="#{Marticle.conditionnement.prix}" style="width: 90px;text-align: right"/>
                                        <span title="#{lab.LDB_PA_prix_vente}">#{lab.LDB_PA_pu_vente_min}. </span>                                    
                                        <h:panelGroup>
                                            <h:inputText value="#{Marticle.conditionnement.prixMin}" style="width: 90px;text-align: right"/>   
                                            <p:selectOneMenu value="#{Marticle.conditionnement.naturePrixMin}" style="float: right" rendered="false">
                                                <f:selectItem itemLabel="%" itemValue="#{constantes.NATURE_TAUX}"/>                              
                                                <f:selectItem itemLabel="$" itemValue="#{constantes.NATURE_MTANT}"/>   
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <span title="#{lab.LDB_PA_marge_min}">#{lab.LDB_PA_marge_min} </span>                                 
                                        <h:panelGroup>
                                            <h:inputText value="#{Marticle.conditionnement.margeMin}" style="width: 90px;text-align: right"/> %
                                        </h:panelGroup>
                                        <f:facet name="footer">
                                            <h:panelGrid columns="1" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                                <h:panelGroup style="text-align:center">
                                                    <div align="center">
                                                        <p:selectBooleanCheckbox value="#{Marticle.conditionnement.defaut}" itemLabel="#{lab.LDB_PA_defaut}"/>
                                                        <p:selectBooleanCheckbox value="#{Marticle.conditionnement.byVente}" itemLabel="#{lab.LDB_PA_vente}?"/>
                                                        <p:selectBooleanCheckbox value="#{Marticle.conditionnement.byAchat}" itemLabel="#{lab.LDB_PA_achat}?"/>
                                                        <p:selectBooleanCheckbox value="#{Marticle.conditionnement.byProd}" itemLabel="#{lab.LDB_PA_prod}.?"/>
                                                    </div>
                                                </h:panelGroup>
                                                <p:selectBooleanCheckbox itemLabel="Activer la determination du prix de vente à partir du prix d'achat" value="#{Marticle.conditionnement.proportionPua}">
                                                    <p:ajax event="valueChange" global="false" update="taux_proportionnalite"/>
                                                </p:selectBooleanCheckbox>
                                                <h:panelGroup style="float: right">
                                                    <span>Taux de proportionnalité</span>                               
                                                    <h:panelGroup>
                                                        <h:inputText id="taux_proportionnalite" value="#{Marticle.conditionnement.tauxPua}" disabled="#{!Marticle.conditionnement.proportionPua}" style="text-align: right; width: 98px;margin-left: 5px" title="Taux de proportionnalité"/>
                                                    </h:panelGroup>
                                                </h:panelGroup>
                                            </h:panelGrid>
                                        </f:facet>
                                    </h:panelGrid>
                                    <div align="right">  
                                        <p:splitButton value="#{lab.L_enregistrer}" actionListener="#{Marticle.saveNewConditionnement()}" icon="ui-icon-disk"
                                                       update=":formulaire_mainArticle:tbvArticle:chmp_art_conditionnement :formulaire_mainArticle:tbvArticle:chmp_art_pack_article :formulaire_mainArticle:tbvArticle:chmp_art_pack_article_contenu">
                                            <p:menuitem value="#{lab.L_nouveau}" actionListener="#{Marticle.resetFicheCondit()}" icon="ui-icon-document"
                                                        update=":formulaire_mainArticle:tbvArticle:chmp_art_conditionnement :formulaire_mainArticle:tbvArticle:chmp_art_pack_article :formulaire_mainArticle:tbvArticle:chmp_art_pack_article_contenu"/>     
                                        </p:splitButton>
                                    </div>
                                </div>
                                <div style="margin-left: 35%">
                                    <p:dataTable value="#{articles.conditionnements}" var="cond" rowIndexVar="xCond" rowKey="#{cond.id}" selectionMode="single" id="data_conditionnement_article">
                                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewCondit}"  update=":formulaire_mainArticle:tbvArticle:blog_form_conditionnement_article"/>
                                        <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewCondit}"  update=":formulaire_mainArticle:tbvArticle:blog_form_conditionnement_article"/>
                                        <p:column width="20" headerText="ID" style="text-align: center">
                                            <span >#{cond.id}</span> 
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_unite}">
                                            <span style="font-weight: bold">[#{cond.unite.reference}]</span>                                        
                                            <span>#{cond.unite.libelle}</span>                                        
                                            <h:panelGroup style="float: right">
                                                <h:graphicImage library="img" name="#{(cond.byProd)?'P_on.png':'P_off.png'}" width="16" height="16" 
                                                                title="#{(cond.byProd)?'Est utilisé':'N\'est pas utilisé'} pour la production"/>
                                                <p:spacer width="2"/>
                                                <h:graphicImage library="img" name="#{(cond.byAchat)?'A_on.png':'A_off.png'}" width="16" height="16"
                                                                title="#{(cond.byAchat)?'Est utilisé':'N\'est pas utilisé'} pour l'achat"/>
                                                <p:spacer width="2"/>
                                                <h:graphicImage library="img" name="#{(cond.byVente)?'V_on.png':'V_off.png'}" width="16" height="16" 
                                                                title="#{(cond.byVente)?'Est utilisé':'N\'est pas utilisé'} pour la vente"/>
                                            </h:panelGroup>
                                        </p:column>
                                        <p:column headerText="PUA" style="text-align: right" width="50">
                                            <h:outputText value="#{cond.prixAchat}" converter="DN"/>                                          
                                            <h:outputText rendered="#{cond.prixAchat gt 0}" value="#{articles.puaTtc?' TTC':' HT'}" style="font-size: 0.8em; font-weight: bold; color: #3b679e"/> 
                                        </p:column>
                                        <p:column headerText="Last PUA" style="text-align: right" width="50">
                                            <h:outputText value="#{Marticle.getPua(cond)}" converter="DN"/>      
                                            <h:outputText rendered="#{cond.prixAchat gt 0}" value="#{articles.puaTtc?' TTC':' HT'}" style="font-size: 0.8em; font-weight: bold; color: #3b679e"/>                                     
                                        </p:column>
                                        <p:column headerText="PUV" style="text-align: right" width="50">
                                            <h:outputText value="#{cond.prix}" converter="DN"/>
                                            <h:outputText rendered="#{cond.prix gt 0}" value="#{articles.puvTtc?' TTC':' HT'}" style="font-size: 0.8em; font-weight: bold; color: #3b679e"/>
                                        </p:column>
                                        <p:column headerText="PUV Min." style="text-align: right" width="50">
                                            <h:outputText value="#{cond.prixMin}" converter="DN"/>
                                            <h:outputText rendered="#{cond.prixMin gt 0}" value="#{articles.puvTtc?' TTC':' HT'}" style="font-size: 0.8em; font-weight: bold; color: #3b679e"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_marge_min}." style="text-align: right" width="50">
                                            <h:outputText value="#{cond.margeMin}" converter="DN"/>%
                                        </p:column>                         
                                        <p:column headerText="#{lab.LDB_PA_defaut}" width="20" style="text-align: center">
                                            <h:graphicImage library="img" name="#{(cond.defaut)?'vu.png':'vu_non.png'}" width="10" height="10"/>
                                        </p:column>
                                        <p:column width="20" style="text-align: center">
                                            <h:graphicImage library="img" name="#{(cond.actif)?'vu.png':'vu_non.png'}" width="10" height="10" title="#{(cond.actif)?'Actif':'Désactif'}"/>
                                        </p:column>
                                        <p:column width="20" style="width: 5%;text-align: center">
                                            <p:contextMenu for="btn_option_article_depot" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="Codes barre" icon="ui-icon-battery-2" actionListener="#{Marticle.buildCodeBarre(cond)}" oncomplete="dlgCodeBarre.show()"
                                                            update=":main-code_barre"/>
                                                <p:separator />
                                                <p:menuitem value="#{lab.LDB_PA_promotions}" icon="ui-icon-suitcase" actionListener="#{Marticle.openToaddPromotion(cond)}" oncomplete="dlgRabais.show()"
                                                            update=":main-rabais_article_point"/>
                                                <p:menuitem value="#{lab.LDB_PA_prix_production}" icon="ui-icon-suitcase" actionListener="#{Marticle.setSelectUnite(cond)}" oncomplete="dlgPrixProd.show()"
                                                            update=":main-prix_production:value-prix_production" rendered="#{cond.byProd}"/>
                                                <p:menuitem value="#{lab.LDB_PA_simuler_prix}" icon="ui-icon-suitcase" actionListener="#{Marticle.setSelectUnite(cond)}" oncomplete="dlgSimulation.show()" update=":main-simulation_prix:form-simulation_prix"/>
                                                <p:menuitem value="#{lab.LDB_PA_points_vente}" icon="ui-icon-arrowthickstop-1-s" actionListener="#{Marticle.loadPointDeVente(cond)}" />
                                                <p:separator />
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{Marticle.deleteBeanCondit(cond)}" update=":formulaire_mainArticle:tbvArticle:data_conditionnement_article"/>
                                                <p:menuitem value="#{cond.actif?lab.L_desactiver:lab.L_activer}" icon="#{cond.actif?'ui-icon-circle-close':'ui-icon-circle-check'}" actionListener="#{Marticle.toogleActiveCondi(cond)}" update=":formulaire_mainArticle:tbvArticle:data_conditionnement_article"/>                               
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_depot" type="button"/>
                                        </p:column> 
                                        <p:column  width="15" style="text-align: center">
                                            <f:facet name="header">
                                                <h:selectBooleanCheckbox styleClass="chek_all_line_conditionnement" value="false" onclick="selectionAllLineTab(#{articles.conditionnements.size()}, 'conditionnement')" />
                                            </f:facet>
                                            <h:selectBooleanCheckbox styleClass="chek_line_conditionnement" value="false" onclick="selectionLineTab(#{xCond}, 'conditionnement')"/>
                                        </p:column>
                                    </p:dataTable>       
                                    <div align="right" style="font-style: italic;">                               
                                        <p:outputPanel autoUpdate="true" style=";font-size: 0.8em">
                                            <span style="float: left">Enregistré Le <h:outputText value="#{Marticle.selectCondit.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                                            <span>Modifier Le <h:outputText value="#{Marticle.selectCondit.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                                            <span>Par <h:outputText value="#{Marticle.selectCondit.author.users.nomUsers}" style="font-weight: bold" styleClass="valeur" /></span>
                                        </p:outputPanel>
                                    </div>
                                    <p:splitButton type="button" value="#{lab.L_options}" id="option_conditionnement" style="font-size: 0.8em;float: right">
                                        <p:menuitem value="#{lab.L_fusionner}" icon="ui-icon-refresh" actionListener="#{Marticle.fusionnerUnite(true)}" 
                                                    oncomplete="dlgConfirmFusionUnite.show()" update=":main_fusionn_unite:blog_fusionner_unites"/>
                                    </p:splitButton> 
                                    <div style="clear: both"/>
                                </div>
                            </p:tab>   
                            <p:tab title="#{lab.LDB_PA_stockages}" id="stockages" rendered="#{articles.canStock()}">     
                                <h:panelGrid columns="2" style="width: 100%;margin-top: -10px" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <p:commandLink value="#{lab.LDB_PA_lier_tous_depots_actif}" process="@this" actionListener="#{Marticle.linkToAllDepot()}" update="article_depot_table"
                                                   style="border: 2px solid #666; border-radius: 5px;padding: 3px" />
                                    <p:commandLink oncomplete="dlgAddArticleDepot.show()" title="#{lab.LDB_PD_ajouter_article_depot}" global="false" style="float: right;border: 2px solid #666; border-radius: 5px;padding: 3px"
                                                   update=":form_art_depot:article_form_depot" actionListener="#{managedStockArticle.setEntityArticle(Marticle.entityArticle)}">
                                        <h:graphicImage library="icones" name="plus.png" width="20" height="20"/>    
                                    </p:commandLink>
                                </h:panelGrid>  
                                <h:inputHidden id="input_hide_article_depot" value="#{managedStockArticle.tabIds}"/> 
                                <p:dataTable value="#{managedStockArticle.articles_depot}" var="art_emp" id="article_depot_table" rowKey="#{art_emp.id}"
                                             selection="#{managedStockArticle.articlesSelect}" rowIndexVar="artfIdx" styleClass="size-08">
                                    <p:ajax event="rowSelect" listener="#{managedStockArticle.loadOnViewArticle}" update=":form_art_depot:article_form_depot" oncomplete="dlgAddArticleDepot.show()" />
                                    <p:ajax event="rowUnselect" listener="#{managedStockArticle.unLoadOnViewArticle}" update=":form_art_depot:article_form_depot" oncomplete="dlgAddArticleDepot.show()" />
                                    <p:column width="10" >
                                        <p:rowToggler rendered="#{articles.conditionnements.size() gt 1 and art_emp.suiviStock}"/>
                                    </p:column>
                                    <p:column width="15" style="color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}" headerText="N°">
                                        <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                        <span>#{artfIdx+1}</span>
                                        <span style="float: right;font-weight: bold;color:red;display: #{art_emp.sellWithoutStock?'none':''}" title="Ne peut etre vendu sans stock"><s>S</s></span>  
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_agences}" width="150" style="color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}; text-align: left">                                        
                                        <span>#{art_emp.depot.agence.designation}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_depots}" width="200" style="color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}; text-align: left">                                        
                                        <span title="#{lab.LDB_PA_depot_calcul_pr} : #{art_emp.depotPr.designation}" style="float: left">#{art_emp.depot.designation}</span>
                                        <p:commandLink actionListener="#{Marticle.applyDepotPr_(art_emp)}" update="article_depot_table" style="float: right; display: inline-block; width: 18px; height: 18px">
                                            <h:graphicImage title="#{lab.LDB_PA_depot_determination_prix_revient}" library="icones" name="#{art_emp.defaultPr?'favoris.png':'ic_star_rate_black_18dp_2x.png'}" width="18" height="18"  />
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="#{lab.L_categorie}" width="120"  >                                        
                                        <span >#{(art_emp.categorie eq null)?articles.categorie:art_emp.categorie}</span>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_stock}" width="100" style="text-align: right;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">
                                        <h:outputText rendered="#{art_emp.suiviStock}" value="#{art_emp.quantiteStock}" converter="DNS" style="font-weight: bold"/>
                                        <h:outputText rendered="#{!art_emp.suiviStock}" value="Non suivi"  style="font-style: italic; font-size: 0.7em; color: red"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_seuil}" style="text-align: right;width: 20%;color: #{art_emp.stockMin gt art_emp.quantiteStock?'red':''}">   
                                        #{lab.LDB_PA_min} :
                                        <h:outputText value="#{art_emp.stockMin}" converter="DN" style="font-weight: bold"/>
                                        - 
                                        #{lab.LDB_PA_max} :                                  
                                        <h:outputText value="#{art_emp.stockMax}" converter="DN" style="font-weight: bold"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_securité}" style="text-align: right;width: 15%;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">
                                        <div style="float: left;font-size: 0.8em;font-style: italic;margin-top: 2px" title="Stock d'alerte">
                                            Alert :
                                            <h:outputText value="#{art_emp.stockAlert}" converter="DN" style="color: blue"/>
                                        </div>
                                        <h:outputText value="#{((art_emp.stockAlert-art_emp.stockMin)>0?(art_emp.stockAlert-art_emp.stockMin):0)}" converter="DN" style="font-weight: bold"/>                                     
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_lot_reappro}" width="70" style="text-align: right;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">
                                        <h:outputText value="#{art_emp.lotLivraison}" converter="DN"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PD_depot_pr}" width="100" style="text-align: left;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">                                 
                                        <h:outputText title="#{lab.LDB_PD_depot_calcul_pr}" value="#{art_emp.depotPr.designation}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_suivi} par lot" style="width: 10%;text-align: center;">
                                        <p:commandLink style="margin-top: 5px" title="#{(art_emp.requiereLot)?'Desactiver':'Activer'}" actionListener="#{managedStockArticle.activeRequiredLot(art_emp, false)}" global="false" update="article_depot_table">
                                            <h:graphicImage library="img"  name="#{(art_emp.requiereLot)?'vu.png':'vu_non.png'}" width="15" height="15"/>
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_suivi}" style="width: 5%;text-align: center;">
                                        <p:commandLink style="margin-top: 5px" title="#{(art_emp.actif)?'Desactiver':'Activer'}" actionListener="#{managedStockArticle.activeSuiviEnStock(art_emp)}" global="false" update="article_depot_table">
                                            <h:graphicImage library="img"  name="#{(art_emp.suiviStock)?'vu.png':'vu_non.png'}" width="15" height="15"/>
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="#{lab.L_actif}" style="width: 5%;text-align: center;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">
                                        <p:commandLink style="margin-top: 5px" title="#{(art_emp.actif)?'Desactiver':'Activer'}" actionListener="#{managedStockArticle.activeActicle(art_emp)}" global="false" update="article_depot_table">
                                            <h:graphicImage library="img"  name="#{(art_emp.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                                        </p:commandLink>
                                    </p:column>
                                    <p:column style="width: 5%;text-align: center;color: #{art_emp.stockMin > art_emp.quantiteStock?'red':''}">
                                        <f:facet name="header">
                                            <p:contextMenu for="delete_article_depot" event="left click" style="width: 300px">
                                                <p:menuitem value="#{lab.LDB_PA_depot_calcul_pr}"  icon="ui-icon-person" global="false" onclick="dlgChangeDepotPr.show()"/>
                                                <p:menuitem value="#{lab.LDB_PD_filtrer}"  icon="ui-icon-search" global="false" onclick="dlgFiltrage.show()"/>
                                                <p:menuitem value="Calculer le stock" icon="ui-icon-calculator" actionListener="#{managedStockArticle.onCalculerStock()}" update="article_depot_table"/>
                                            </p:contextMenu>
                                            <p:commandButton id="delete_article_depot" icon="ui-icon-gear"  type="button" style="width: 22px; height: 22px"/>   
                                        </f:facet>
                                        <p:contextMenu for="btn_option_article_depot" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                            <p:menuitem value="#{art_emp.suiviStock?'Désactiver Suivi stock':'activer Suivi stock'}"  
                                                        actionListener="#{managedStockArticle.activeSuiviEnStock(art_emp)}" update="article_depot_table"/>
                                            <p:menuitem value="Calculer le stock" actionListener="#{managedStockArticle.onCalculerStock(art_emp)}" update="article_depot_table"/>
                                            <p:separator />
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{managedStockArticle.deleteBeanArticle_(art_emp)}"  update=":formulaire_mainArticle:tbvArticle:article_depot_table"
                                                        oncomplete="collapseForm('depot');;collapseForm('depot');collapseForm('article_depot');collapseForm('liaison_depot');collapseForm('point_vente_depot0');collapseForm('emplacement_depot')"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_depot" type="button"/>
                                    </p:column> 
                                    <p:column selectionMode="multiple" style="width:16px;text-align:center" /> 
                                    <p:rowExpansion >
                                        <ui:repeat value="#{articles.conditionnements}" var="i_ac" >
                                            <h:panelGrid columns="2" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0"
                                                         style="width: 10%; font-size: 0.8em; color: #333333" >
                                                <span style="width: 100%;display: inline-block">#{i_ac.unite.libelle}</span>
                                                <h:outputText value="#{managedStockArticle.giveStockStock(art_emp.article.id, i_ac.id, art_emp.depot.id)}" 
                                                              converter="DNS" style="font-weight: bold; float: right"/>
                                            </h:panelGrid>                                                                                        
                                        </ui:repeat>
                                    </p:rowExpansion>
                                </p:dataTable>                 
                                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <h:inputText title="#{lab.LDB_PA_reference_depot}" value="#{managedStockArticle.numSearch}"
                                                 style="width: 180px;background: #009999;color:white;text-align: center;margin-left: -10px">
                                        <p:ajax event="valueChange" global="false" update="article_depot_table" listener="#{managedStockArticle.searchArticleByRef()}"/>
                                    </h:inputText>

                                    <p:outputPanel autoUpdate="true" style="float: right" layout="block" >
                                        <p:commandButton actionListener="#{managedStockArticle.init(false)}" global="false" update="article_depot_table" icon="ui-icon-circle-triangle-w" disabled="#{managedStockArticle.p_article.disPrev}"/>
                                        <p:outputPanel ><p:outputLabel value="#{managedStockArticle.p_article.currentPage}/#{managedStockArticle.p_article.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                        <p:commandButton actionListener="#{managedStockArticle.init(true)}" global="false" update="article_depot_table" icon="ui-icon-circle-triangle-e" disabled="#{managedStockArticle.p_article.disNext}"/>
                                        <p:selectOneMenu value="#{managedStockArticle.nbMax}" label="#{lab.L_nombre_maax_resultat}" valueChangeListener="#{managedStockArticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                            <f:selectItems value="#{managedStockArticle.paginations}"/>
                                            <p:ajax event="valueChange" global="false" update="article_depot_table"/>
                                        </p:selectOneMenu>
                                    </p:outputPanel>
                                </h:panelGrid>   
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PA_categorie_tarifaire}" rendered="#{articles.canSale()}">
                                <div style="width: 30%;float: left">
                                    <h:panelGrid id="blog_form_plan_tarifaire_article" columns="2" style="width: 100%" cellpadding="0" cellspacing="0" styleClass="yvs_table">
                                        <f:facet name="header">
                                            <h:panelGroup>
                                                <span>#{lab.LDB_PA_categories} : </span>
                                                <p:spacer width="5"/>
                                                <h:panelGroup>
                                                    <h:selectOneMenu value="#{Marticle.planTarif.categorie.id}" onchange="openDialog(dlgCategorieC, $(this))" id="chmp_art_catClt" style="min-width: 52%;margin-left: 10px">
                                                        <f:selectItem itemValue="0" itemLabel=""  noSelectionOption="true"/>
                                                        <f:selectItems value="#{managedCategorieClt.categories}" var="catC" itemValue="#{catC.id}" itemLabel="#{catC.libelle}"/>
                                                        <f:selectItem itemValue="0" itemLabel=""  noSelectionOption="true"/>
                                                        <f:selectItem itemValue="-1" itemLabel="#{lab.LDB_PA_creer}"  noSelectionOption="true"/>
                                                    </h:selectOneMenu>      
                                                    <p:commandLink actionListener="#{Marticle.addAllCategories()}" title="#{lab.LDB_PA_ajouter_toutes_categorie}" 
                                                                   style="float: right;border: 2px solid #666; border-radius: 5px;padding: 3px" update="data_plan_tarifaire_article">
                                                        <h:graphicImage library="icones" name="db_update.png" width="20" height="20"/>    
                                                    </p:commandLink>
                                                </h:panelGroup>
                                            </h:panelGroup>
                                        </f:facet>
                                        <span>#{lab.LDB_PA_conditionnement} </span>
                                        <h:selectOneMenu value="#{Marticle.planTarif.conditionnement.id}" id="chmp_art_conditionnement" style="min-width: 82%">
                                            <f:selectItem itemValue="0" itemLabel="--"  noSelectionOption="true"/>
                                            <f:selectItems value="#{articles.conditionnements}" var="catU" itemValue="#{catU.id}" itemLabel="#{catU.unite.libelle}"/>
                                            <p:ajax event="valueChange" global="false" listener="#{Marticle.chooseConditionnementTarif()}" update="txt_puv_planTarif_art txt_puv_min_planTarif_art txt_remise_planTarif_art"/>
                                        </h:selectOneMenu>
                                        <span title="#{lab.LDB_PA_coefficient_augmentation}">#{lab.LDB_PA_coef}. </span>                                    
                                        <h:panelGroup>
                                            <h:inputText value="#{Marticle.planTarif.coefAugmentation}"  style="width: 50%;text-align: right"/> 
                                            <h:selectOneMenu value="#{Marticle.planTarif.natureCoefAugmentation}" style="font-size: 0.8em">
                                                <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                                                <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <span>#{lab.LDB_PA_prix_vente} </span>
                                        <h:panelGroup id="txt_puv_planTarif_art">
                                            <h:inputText value="#{Marticle.planTarif.puv}" style="text-align: right;min-width: 82%"/>
                                            <p:commandButton icon="ui-icon-arrowthick-2-n-s" style="float: right; width: 20px;height: 22px" title="Génération des prix" global="false"
                                                             actionListener="#{Marticle.genererPrix()}" update="txt_puv_planTarif_art txt_puv_min_planTarif_art"/>
                                        </h:panelGroup>
                                        <span>#{lab.LDB_PA_prix_min}</span>
                                        <h:panelGroup id="txt_puv_min_planTarif_art">
                                            <h:inputText value="#{Marticle.planTarif.puvMin}" style="width: 50%;text-align: right"/>   
                                            <h:selectOneMenu value="#{Marticle.planTarif.naturePrixMin}" style="font-size: 0.8em">
                                                <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                                                <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <span>#{lab.LDB_PA_remise} </span>
                                        <h:panelGroup id="txt_remise_planTarif_art">
                                            <h:inputText value="#{Marticle.planTarif.remise}" style="width: 50%;text-align: right"/>
                                            <h:selectOneMenu value="#{Marticle.planTarif.natureRemise}" style="font-size: 0.8em">
                                                <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                                                <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <f:facet name="footer">
                                            <div class="display_auteur" align="right"  style="font-style: italic;width: 95%;font-size: 0.8em">
                                                <p:outputPanel autoUpdate="true">
                                                    <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{Marticle.selectTarif.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                                                    <span>#{lab.L_modifier_le} <h:outputText value="#{Marticle.selectTarif.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                                                    <span>#{lab.L_par} <h:outputText value="#{Marticle.selectTarif.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                                                </p:outputPanel>
                                            </div>
                                        </f:facet>
                                    </h:panelGrid>
                                    <div style="margin-top: 5px">
                                        <p:commandButton style="float: left" value="#{lab.L_nouveau}" actionListener="#{Marticle.resetFichePlanTarifaire()}"
                                                         update="blog_form_plan_tarifaire_article" />
                                        <p:commandButton style="float: right" value="#{lab.L_enregistrer}" actionListener="#{Marticle.saveNewPlanTarifaire()}"
                                                         update="blog_form_plan_tarifaire_article data_plan_tarifaire_article" />
                                    </div>
                                </div>
                                <div style="width: 69%;margin-left: 31%">
                                    <p:dataTable value="#{articles.plans_tarifaires}" var="artp" rowKey="#{artp.id}" selectionMode="single" id="data_plan_tarifaire_article">
                                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewPlanTarif}"  update=":formulaire_mainArticle:tbvArticle:blog_form_plan_tarifaire_article"/>
                                        <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewPlanTarif}"  update=":formulaire_mainArticle:tbvArticle:blog_form_plan_tarifaire_article"/>
                                        <p:column headerText="#{lab.LDB_PA_categorie}">
                                            <span>#{artp.categorie.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_coef}" style="text-align: right;width: 15%">
                                            <h:outputText value="#{artp.coefAugmentation}" converter="DNS" title="#{lab.LDB_PA_coefficient_augmentation}"/>
                                            <h:outputText value="%" rendered="#{artp.natureCoefAugmentation == constantes.NATURE_TAUX}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_puv}" style="text-align: right;width: 20%">
                                            <h:outputText value="#{artp.puv}" converter="DN"/> / 
                                            <h:outputText title="#{artp.conditionnement.unite.libelle}" value="#{artp.conditionnement.unite.reference}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_remise}" style="text-align: right;width: 10%">
                                            <h:outputText value="#{artp.remise}" converter="DNS"/>
                                            <h:outputText value="%" rendered="#{artp.natureRemise == constantes.NATURE_TAUX}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.L_actif}" style="width: 7%;text-align: center">
                                            <p:commandLink title="#{(artp.actif)?'Desactiver':'Activer'}" global="false" actionListener="#{Marticle.activePlanTarifaire(artp)}" update="data_plan_tarifaire_article">
                                                <h:graphicImage library="img"  name="#{(artp.actif)?'yes.png':'no.png'}" width="15" height="15"/>
                                            </p:commandLink>
                                        </p:column> 
                                        <p:column style="width: 5%;text-align: center;">
                                            <p:contextMenu for="btn_option_article_tarif" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="#{lab.LDB_PA_grille}" icon="ui-icon-calculator" global="false" actionListener="#{managedCategorieClt.initGrille(artp)}" oncomplete="collapseForm('grille_plan_tarifaire_article');dlgGrillePlanTarifaire.show()" update=":dlg_grille_plan_tarifaire_article"/>
                                                <p:separator style="width: 100%"/>
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{Marticle.deleteBeanPlanTarif(artp)}" update="data_plan_tarifaire_article"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_tarif" type="button"/>
                                        </p:column> 
                                    </p:dataTable>
                                </div>
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PA_fournisseurs}" rendered="#{!(articles.categorie==constantes.CAT_PSF or articles.categorie==constantes.CAT_PF)}">
                                <div style="width: 30%;float: left">
                                    <h:panelGrid id="blog_form_article_fournisseur_art" columns="2" styleClass="yvs_table" cellpadding="0" cellspacing="0"
                                                 style="font-size: 0.9em; width: 100%">
                                        <f:facet name="header">
                                            <h:panelGroup>
                                                <span>#{lab.LDB_PA_fournisseur} : </span>
                                                <p:spacer width="5"/>
                                                <h:panelGroup>
                                                    <h:inputText id="txt_fournisseur_article" value="#{Marticle.articleFsseur.fournisseur.codeFsseur}" style="color: #{Marticle.articleFsseur.fournisseur.error?'red':''}">
                                                        <p:ajax event="blur" global="false" listener="#{Marticle.searchFournisseur()}" update="txt_fournisseur_article"/>
                                                    </h:inputText>                                            
                                                    <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px" title="#{lab.LDB_PA_liste_fournisseur}" global="false"
                                                                     onclick="dlgListFournisseurs.show()"/>
                                                </h:panelGroup>                                          
                                            </h:panelGroup>
                                        </f:facet>
                                        <span>#{lab.LDB_PA_prix_achat}</span>
                                        <h:panelGroup>
                                            <h:inputText value="#{Marticle.articleFsseur.prix}" style="width: 50%"/>
                                            <p:selectBooleanCheckbox value="#{Marticle.articleFsseur.puaTtc}" itemLabel="#{lab.LDB_PA_pua_ttc}" style="float: right"/>
                                        </h:panelGroup>
                                        <span>#{lab.LDB_PA_remise}</span>
                                        <h:inputText value="#{Marticle.articleFsseur.remise}" style="width: 30%"/>
                                        <span title="#{lab.LDB_PA_delais_livraison}">#{lab.LDB_PA_delais_livraison}</span>
                                        <h:panelGroup>
                                            <h:inputText style="width: 30%" value="#{Marticle.articleFsseur.delaiLivraison}" />
                                            <h:selectOneMenu value="#{Marticle.articleFsseur.uniteDelaisLiv}" title="#{lab.LDB_PA_delais_livraison}" styleClass="select">
                                                <f:selectItems value="#{constantes.UNITES_TIMES}" var="UD" itemLabel="#{UD[1]}" itemValue="#{UD[0]}"/>
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <span title="#{lab.LDB_PA_duree_vie}">#{lab.LDB_PA_duree_vie}</span>
                                        <h:panelGroup>
                                            <h:inputText value="#{Marticle.articleFsseur.dureeVie}" style="width: 30%"/>
                                            <h:selectOneMenu value="#{Marticle.articleFsseur.uniteDureeVie}" title="#{lab.LDB_PA_duree_vie}" styleClass="select">
                                                <f:selectItems value="#{constantes.UNITES_TIMES}" var="UV" itemLabel="#{UV[1]}" itemValue="#{UV[0]}"/>
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <span title="#{lab.LDB_PA_duree_garantie}">#{lab.LDB_PA_duree_garantie}</span>                                            
                                        <h:panelGroup >
                                            <h:inputText style="width: 30%" value="#{Marticle.articleFsseur.dureeGarantie}"/>
                                            <h:selectOneMenu value="#{Marticle.articleFsseur.uniteDureeGaranti}" title="#{lab.LDB_PA_duree_garantie}" styleClass="select">
                                                <f:selectItems value="#{constantes.UNITES_TIMES}" var="UG" itemLabel="#{UG[1]}" itemValue="#{UG[0]}"/>
                                            </h:selectOneMenu>
                                        </h:panelGroup>
                                        <span title="#{lab.LDB_PA_reference_article_fournisseur}">#{lab.LDB_PA_ref_externe}</span>                                            
                                        <h:inputText value="#{Marticle.articleFsseur.refArtExterne}" style="width: 95%"/>
                                        <span title="#{lab.LDB_PA_designation_article_fournisseur}">#{lab.LDB_PA_des_externe}</span>                                            
                                        <h:inputText value="#{Marticle.articleFsseur.desArtExterne}" style="width: 95%"/>
                                    </h:panelGrid> 
                                    <div style="margin-top: 5px">
                                        <p:commandButton style="float: left" value="#{lab.L_nouveau}" actionListener="#{Marticle.resetArticleFournisseur()}"
                                                         update="blog_form_article_fournisseur_art" />
                                        <p:commandButton style="float: right" value="#{lab.L_enregistrer}" actionListener="#{Marticle.addArticleFournisseur()}"
                                                         update="blog_form_article_fournisseur_art article_fournisseur_table" />
                                    </div>
                                </div>
                                <div style="margin-left: 30%; font-size: 0.9em">
                                    <p:dataTable value="#{articles.fournisseurs}" var="artf" rowKey="#{artf.id}" selectionMode="single" 
                                                 id="article_fournisseur_table">
                                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewArticleFsseur}"  update=":formulaire_mainArticle:tbvArticle:blog_form_article_fournisseur_art"/>
                                        <p:ajax event="rowUnselect" listener="#{Marticle.unloadOnViewArticleFsseur}"  update=":formulaire_mainArticle:tbvArticle:blog_form_article_fournisseur_art"/>
                                        <p:column headerText="#{lab.LDB_PA_fournisseurs}" sortBy="#{artf.fournisseur.tiers.nom_prenom}">
                                            #{artf.fournisseur.tiers.nom_prenom}      
                                            <h:graphicImage library="img" title="#{lab.LDB_PA_article_principal_fournisseur}" style="float: right" 
                                                            name="vu.png" width="16" height="16" rendered="#{artf.principal}"/>  
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_delai_liv}" sortBy="#{artf.delaiLivraison}"  style="text-align: right;width: 15%">                                        
                                            <h:panelGroup rendered="#{artf.delaiLivraison gt 0}">
                                                <h:outputText value="#{artf.delaiLivraison}" converter="DN"/>
                                                #{artf.uniteDelai}
                                            </h:panelGroup>
                                            <h:outputText rendered="#{artf.delaiLivraison le 0}" value="#{lab.L_aucun}" style="font-size: 0.7em;"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_reference}" width="80">
                                            <h:outputText value="#{artf.refArtExterne}" title="#{lab.LDB_PA_reference_fournisseur}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_designation}" width="100">
                                            <h:outputText value="#{artf.desArtExterne}"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_prix}" sortBy="#{artf.puv}"  style="text-align: right;width: 15%">
                                            <h:outputText value="#{artf.puv}" converter="DN"/>
                                            <h:outputText rendered="#{artf.puv gt 0}" value="#{artf.puaTtc?' TTC':' HT'}" style="font-size: 0.8em; font-weight: bold; color: #3b679e"/>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_remise}" sortBy="#{artf.remise}"  style="text-align: right;width: 15%">
                                            <h:outputText value="#{artf.remise}" converter="DN"/>
                                        </p:column>
                                        <p:column style="text-align: center;width: 5%">
                                            <p:contextMenu for="btn_option_article_fournisseur" event="left click" style="font-size: 0.8em;width: 200px" styleClass="context_menu">
                                                <p:menuitem value="#{lab.LDB_PA_definir_conditionnement}" icon="ui-icon-bookmark" global="false" actionListener="#{managedFournisseur.initConditionnement(artf)}" 
                                                            oncomplete="dlgAddArticleFsseur.show()" update=":form_art_fournisseur"/>
                                                <p:menuitem value="#{lab.LDB_PA_set_principal}" icon="ui-icon-star" global="false" actionListener="#{Marticle.principalArticleFsseur(artf)}" update="article_fournisseur_table"/>
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{Marticle.deleteBeanArticleFsseur(artf)}" update="article_fournisseur_table"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_article_fournisseur" type="button"/>
                                        </p:column> 
                                    </p:dataTable>
                                </div>
                                <div style="clear: both"/>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PA_classification}" id="form_classification">
                                <div style="float: left; width: 49%; display: block" class="blocClass">
                                    <p:commandButton icon="ui-icon-circle-plus" actionListener="#{Marticle.loadSubstitutionOrDerive('AS')}"  
                                                     style="width: 22px; height: 22px;float: right" title="#{lab.LDB_PA_ajouter_article_substitution}"/>
                                    <p:dataTable value="#{articles.articlesSubstitutions}" var="artSub" rowIndexVar="artSubLine" 
                                                 id="tab_art_substitution" rowKey="#{artSub.id}">
                                        <f:facet name="header"><div style="padding: 5px;">Article de substitutions</div></f:facet>
                                        <p:column headerText="N°" width="20">
                                            #{artSubLine+1}
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_reference}">
                                            #{artSub.articleSubstitution.refArt}
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_designation}">
                                            #{artSub.articleSubstitution.designation}
                                        </p:column>
                                        <p:column headerText="" width="20">
                                            <p:commandButton icon="ui-icon-circle-minus" actionListener="#{Marticle.removeArtSubstitution(artSub)}" 
                                                             update="tab_art_substitution" style="width: 20px; height: 20px"  />
                                        </p:column>
                                    </p:dataTable>                                                                                                
                                </div>
                                <div class="blocClass" style="margin-left: 50%; width: 50%">                                          
                                    <p:commandButton icon="ui-icon-circle-plus" actionListener="#{Marticle.loadSubstitutionOrDerive('AD')}"  
                                                     style="width: 22px; height: 22px; float: right" title="Ajouter des articles d'équilavence"/>
                                    <p:dataTable value="#{articles.articlesEquivalents}" var="artEq" rowIndexVar="artEqLine" id="tab_art_equivalent" rowKey="#{artEq.id}">
                                        <f:facet name="header"><div style="padding: 5px">Article Equivalents</div></f:facet>
                                        <p:column headerText="N°" width="20">
                                            #{artEqLine+1}
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_reference}">
                                            #{artEq.articleEquivalent.refArt}
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_designation}">
                                            #{artEq.articleEquivalent.designation}
                                        </p:column>
                                        <p:column width="20" style="text-align: center">
                                            <p:commandButton icon="ui-icon-circle-minus" actionListener="#{Marticle.removeArtDerive(artEq)}" 
                                                             update="tab_art_equivalent" style="width: 20px; height: 20px" />
                                        </p:column>
                                    </p:dataTable>                                                                                                   
                                </div>
                            </p:tab>
                            <p:tab title="#{lab.LDB_PA_comptabilite}">      
                                <div style="width: 49.5%;float: left">  
                                    <p:commandLink value="#{lab.LDB_PA_associer_categorie_comptable}" process="@this" 
                                                   actionListener="#{Marticle.addAllCategoriesComptable()}" update="tableArticleCatC"
                                                   style="border: 2px solid #666; border-radius: 5px;padding: 3px;float: right" /> 
                                    <p:dataTable value="#{articles.listArticleCatComptable}" var="artCT" rowIndexVar="artCT_" id="tableArticleCatC"
                                                 editable="true" paginator="true" rows="10" paginatorAlwaysVisible="false" rowKey="#{artCT.id}">
                                        <f:facet name="header">
                                            <div align="left" style="font-size:1.4em;font-weight: bold;margin-left: 5px;padding-top: 2px;padding-bottom: 2px">#{lab.LDB_PA_generale}</div>
                                        </f:facet>
                                        <p:ajax event="rowEdit" listener="#{Marticle.onCompteEdit}" />
                                        <p:column headerText="#{lab.LDB_PA_categorie}">
                                            <span>#{artCT.categorie.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_compte}" style="width: 30%">                                   
                                            <div style="margin-right: 10px; display: inline; float: right" align="right"> 
                                                <p:cellEditor >
                                                    <f:facet name="output">
                                                        <h:outputText value="#{artCT.compte.numCompte} [#{artCT.compte.intitule}]" rendered="#{artCT.compte.id gt 0}"/>                                    
                                                        <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px" title="Liste Comptes" global="false"
                                                                         actionListener="#{Marticle.initComptes(artCT)}" oncomplete="dlgListComptes.show()" rendered="false"/>
                                                    </f:facet>
                                                    <f:facet name="input">
                                                        <h:panelGroup>
                                                            <h:inputText id="txt_compte_article_categorie" value="#{artCT.numCompte}" style="color: #{artCT.error?'red':''}">
                                                                <p:ajax event="blur" global="false" listener="#{Marticle.ecouteSaisieCG(artCT)}" update="@this"/>
                                                            </h:inputText>    
                                                        </h:panelGroup>
                                                    </f:facet>
                                                </p:cellEditor>  
                                            </div>
                                            <p:rowEditor />
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_taxes}">
                                            <span>#{artCT.numTaxe}</span>
                                        </p:column>
                                        <p:column style="text-align: center;width: 5%">
                                            <p:contextMenu for="btn_option_tableArticleCatC" styleClass="context_menu" event="left click" style="font-size: 0.8em;width: 200px">
                                                <p:menuitem value="#{lab.LDB_PA_gerer_taxes}" icon="ui-icon-folder-collapsed" actionListener="#{Marticle.initTaxesArticleComptable(artCT)}"
                                                            oncomplete="dlgListCatTaxes.show()" global="false"/>
                                                <p:menuitem value="#{lab.LDB_PA_voir_articles_rattaches}" actionListener="#{Marticle.loadArticleByCompte(artCT)}" 
                                                            icon="ui-icon-extlink" oncomplete="dlgArtByCompte.show()"/>
                                                <p:separator />
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{Marticle.removeArticleCategorie(artCT)}" update="tableArticleCatC"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_tableArticleCatC" type="button"/>
                                        </p:column>  
                                    </p:dataTable>      
                                </div>
                                <div style="width: 49.5%;margin-left: 50.5%">
                                    <h:panelGrid id="form-article_analytique" columns="5" cellpadding="0" cellspacing="0" style="float: right;margin-right: 5px">
                                        <h:outputText value="#{lab.LDB_PA_centre} : "/>
                                        <h:selectOneMenu value="#{Marticle.analytique.centre.id}" style="min-width: 120px">
                                            <f:selectItem itemLabel="--" itemValue="0"/>
                                            <f:selectItems value="#{managedCentreAnalytique.centres}" var="iCa" itemLabel="#{iCa.designation}" itemValue="#{iCa.id}"/>
                                            <p:ajax event="valueChange" global="false" listener="#{Marticle.chooseCentre()}"/>
                                        </h:selectOneMenu>
                                        <h:outputText value="#{lab.LDB_PA_coefficient} : " style="margin-left: 5px"/>
                                        <h:inputText value="#{Marticle.analytique.taux}" style="width: 50px;text-align: center"/>
                                        <p:commandButton icon="ui-icon-disk" style="width: 22px; height: 22px;margin-left: 10px" actionListener="#{Marticle.saveNewAnalytique()}"/>
                                    </h:panelGrid>
                                    <p:dataTable value="#{articles.analytiques}" var="iAA" rowIndexVar="iAAx" id="data-article_analytique" selectionMode="single"
                                                 rowKey="#{iAA.id}" paginator="true" rows="10" paginatorAlwaysVisible="false">
                                        <f:facet name="header">
                                            <div align="left" style="font-size:1.4em;font-weight: bold;margin-left: 5px;padding-top: 2px;padding-bottom: 2px">Analytique</div>
                                        </f:facet>
                                        <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewAnalytique}" />
                                        <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewAnalytique}" />
                                        <p:column headerText="#{lab.LDB_PA_centre}">
                                            <span>#{iAA.centre.designation}</span>
                                        </p:column>
                                        <p:column headerText="#{lab.LDB_PA_coefficient}" style="text-align: right">
                                            <h:outputText value="#{iAA.coefficient}" converter="DNA"/>%
                                        </p:column>
                                        <p:column style="text-align: center;width: 5%">
                                            <p:contextMenu for="btn_option-article_analytique" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" global="false" actionListener="#{Marticle.deleteAnalytique(iAA, false)}"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option-article_analytique" type="button"/>
                                        </p:column>  
                                    </p:dataTable>  
                                </div>
                                <div style="clear: both"/>
                            </p:tab> 
                            <p:tab title="#{lab.LDB_PA_caracteristiques}" > 
                                <h:panelGrid id="blog_form_description_article" columns="3" cellpadding="0" cellspacing="0">
                                    <h:outputText value="#{lab.LDB_PA_titre}"/>
                                    <h:outputText value="#{lab.LDB_PA_description}"/>
                                    <h:outputText value=""/>
                                    <h:inputText value="#{Marticle.description.titre}"/>  
                                    <h:inputText value="#{Marticle.description.description}" style="width: 750px"/>  
                                    <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right" actionListener="#{Marticle.saveDescription()}"
                                                     update="data_description_article blog_form_description_article"/>
                                </h:panelGrid>
                                <p:dataTable value="#{articles.descriptions}" var="descr" rowIndexVar="xDesc" rowKey="#{descr.id}" selectionMode="single" id="data_description_article">
                                    <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewDescription}"  update=":formulaire_mainArticle:tbvArticle:blog_form_description_article"/>
                                    <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewDescription}"  update=":formulaire_mainArticle:tbvArticle:blog_form_description_article"/>
                                    <p:column headerText="N°" width="10">
                                        <span>#{xDesc+1}</span>                                                                     
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_titre}" width="100">
                                        <span>#{descr.titre}</span>                                                                     
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_description}">
                                        <h:outputText value="#{Marticle.resumeText(descr.description)}"/>
                                    </p:column>
                                    <p:column style="width: 5%;text-align: center;">
                                        <p:contextMenu for="btn_option_description_article" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{Marticle.deleteBeanDescription(descr)}" update="data_description_article"/>
                                        </p:contextMenu>                           
                                        <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_description_article" type="button"/>
                                    </p:column> 
                                </p:dataTable>  
                                <div style="clear: both"/>
                            </p:tab>   
                            <p:tab title="#{lab.LDB_PA_packs_article}" >  
                                <div class="block_slide" style="float: left;width: 40%;height: 265px">
                                    <span class="block_slide_title">
                                        #{lab.LDB_PA_packs}
                                    </span>
                                    <div class="zone_slide">
                                        <p:outputPanel id="form_pack_article">
                                            <div style="width: 30%;float: left;text-align: center">
                                                <p:commandLink id="image_art_pack_prod" onclick="dlgUploadImgPack.show()" global="false">
                                                    <h:graphicImage library="lymytz/documents/docArticle" styleClass="article_img" name="#{Marticle.photoPack(Marticle.pack)}" style="width: 95%"/>  
                                                </p:commandLink>
                                            </div>
                                            <div style="margin-left: 31%;width: 69%">                                            
                                                <h:panelGrid style="width: 100%" columns="1" cellpadding="0" cellspacing="0">
                                                    <h:panelGroup>
                                                        <h:outputText value="#{lab.LDB_PA_unite}" style="float: left"/>
                                                        <h:outputText value="#{lab.LDB_PA_montant}" style="margin-left: 50%"/>
                                                    </h:panelGroup>
                                                    <h:panelGroup>
                                                        <h:selectOneMenu value="#{Marticle.pack.article.id}" id="chmp_art_pack_article" style="width: 55%;float: left">
                                                            <f:selectItem itemValue="0" itemLabel="--"  noSelectionOption="true"/>
                                                            <f:selectItems value="#{articles.conditionnements}" var="artP" itemValue="#{artP.id}" itemLabel="#{artP.unite.libelle}"/>
                                                            <p:ajax event="valueChange" global="false" listener="#{Marticle.chooseArticlePack()}"/>
                                                        </h:selectOneMenu>
                                                        <h:inputText value="#{Marticle.pack.montant}" style="width: 100px;text-align: right"/>  
                                                    </h:panelGroup>
                                                    <h:outputText value="#{lab.LDB_PA_designation}"/>
                                                    <h:inputText value="#{Marticle.pack.designation}" style="width: 99%"/>  
                                                    <f:facet name="footer">
                                                        <p:commandButton value="#{lab.L_nouveau}" style="float: left" actionListener="#{Marticle.resetFichePack()}" update="form_pack_article data_pack_article"/>
                                                        <p:commandButton value="#{lab.L_enregistrer}" style="float: right" actionListener="#{Marticle.saveNewPack()}" update="data_pack_article"/>
                                                    </f:facet>
                                                </h:panelGrid>
                                            </div>
                                        </p:outputPanel>
                                        <p:dataTable value="#{articles.packs}" var="pck" rowIndexVar="xPck" rowKey="#{pck.id}" selectionMode="single" id="data_pack_article">
                                            <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewPack}"  update=":formulaire_mainArticle:tbvArticle:form_pack_article"/>
                                            <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewPack}"  update=":formulaire_mainArticle:tbvArticle:form_pack_article"/>
                                            <p:column headerText="N°" width="10">
                                                <span>#{xPck+1}</span>                                                                     
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PA_designation}">
                                                <span>#{pck.designation}</span>                                                                     
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PA_unite}" width="100">
                                                <h:outputText value="#{pck.article.unite.libelle}"/>
                                            </p:column>
                                            <p:column headerText="#{lab.LDB_PA_montant}" width="100" style="text-align: right">
                                                <h:outputText value="#{pck.montant}" converter="DNA"/>
                                            </p:column>
                                            <p:column style="width: 5%;text-align: center;">
                                                <p:contextMenu for="btn_option_pack_article" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{Marticle.deleteBeanPack(pck)}" update="data_pack_article"/>
                                                </p:contextMenu>                           
                                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_pack_article" type="button"/>
                                            </p:column> 
                                        </p:dataTable>  
                                    </div>
                                    <div class="zone_bottom">

                                    </div>
                                </div>
                                <div class="block_slide" style="margin-left: 41%;width: 59%;height: 265px">
                                    <span class="block_slide_title">
                                        #{lab.LDB_PA_contenus}
                                    </span>
                                    <div class="zone_slide">
                                        <p:outputPanel id="blog_form_pack_article">
                                            <h:panelGrid id="form_pack_article_contenu" columns="5" cellpadding="0" cellspacing="0">
                                                <h:outputText value="#{lab.LDB_PA_article}"/>
                                                <h:outputText value="#{lab.LDB_PA_unite}"/>
                                                <h:outputText value="#{lab.LDB_PA_montant}"/>
                                                <h:outputText value="#{lab.LDB_PA_quantite}"/>
                                                <h:outputText value=""/>
                                                <h:panelGroup>
                                                    <h:inputText id="txt_article_contenu_pack" value="#{Marticle.contenu.article.refArt}" style="color: #{Marticle.contenu.article.error?'red':''}">
                                                        <p:ajax event="valueChange" listener="#{Marticle.findArticlePack()}" update=":form_delete_img txt_article_contenu_pack chmp_art_pack_article_contenu txt_montant_contenu_pack"/>
                                                    </h:inputText>    
                                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px;background: white;margin-top: 5px" title="Liste Articles"
                                                                     onclick="dlgListArticle.show()" global="false"/>
                                                </h:panelGroup>
                                                <h:selectOneMenu value="#{Marticle.contenu.unite.id}" id="chmp_art_pack_article_contenu" style="min-width: 160px">
                                                    <f:selectItem itemValue="0" itemLabel="--"  noSelectionOption="true"/>
                                                    <f:selectItems value="#{Marticle.contenu.article.conditionnements}" var="artC" itemValue="#{artC.id}" itemLabel="#{artC.unite.libelle}"/>
                                                    <p:ajax event="valueChange" global="false" listener="#{Marticle.chooseContenuPack()}" update="txt_montant_contenu_pack"/>
                                                </h:selectOneMenu>
                                                <h:inputText id="txt_montant_contenu_pack" value="#{Marticle.contenu.montant}" style="width: 100px;text-align: right"/>  
                                                <h:panelGroup>
                                                    <h:inputText value="#{Marticle.contenu.quantite}" style="width: 50px;text-align: center"/> 
                                                    <span> #{lab.LDB_PA_max} </span>
                                                    <h:inputText value="#{Marticle.contenu.quantiteMax}" style="width: 50px;text-align: center" title="#{lab.LDB_PA_quantite_maximale}"/>  
                                                </h:panelGroup>
                                                <p:commandButton icon="ui-icon-circle-plus" style="width: 22px; height: 22px;float: right" actionListener="#{Marticle.saveNewContenuPack()}"
                                                                 update="data_pack_article_contenu form_pack_article_contenu"/>
                                            </h:panelGrid>
                                            <p:dataTable value="#{Marticle.pack.contenus}" var="pckC" rowIndexVar="xPckC" rowKey="#{pckC.id}" selectionMode="single" id="data_pack_article_contenu">
                                                <p:ajax event="rowSelect" listener="#{Marticle.loadOnViewContenuPack}"  update=":formulaire_mainArticle:tbvArticle:form_pack_article_contenu"/>
                                                <p:ajax event="rowUnselect" listener="#{Marticle.unLoadOnViewContenuPack}"  update=":formulaire_mainArticle:tbvArticle:form_pack_article_contenu"/>
                                                <p:column headerText="N°" width="10">
                                                    <span>#{xPckC+1}</span>                                                                     
                                                </p:column>
                                                <p:column headerText="#{lab.LDB_PA_article}" width="100">
                                                    <span>#{pckC.article.article.designation}</span>                                                                     
                                                </p:column>
                                                <p:column headerText="#{lab.LDB_PA_unite}">
                                                    <h:outputText value="#{pckC.article.unite.libelle}"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LDB_PA_montant}" width="100" style="text-align: right">
                                                    <h:outputText value="#{pckC.montant}" converter="DNA"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LDB_PA_quantite}" width="100" style="text-align: right">
                                                    <h:outputText value="#{pckC.quantite}" converter="DNA"/>
                                                </p:column>
                                                <p:column headerText="#{lab.LDB_PA_quantite_max}" width="100" style="text-align: right">
                                                    <h:outputText value="#{pckC.quantiteMax}" converter="DNA"/>
                                                </p:column>
                                                <p:column style="width: 5%;text-align: center;">
                                                    <p:contextMenu for="btn_option_pack_article_contenu" styleClass="context_menu" event="left click" style="font-size: 0.8em">
                                                        <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash"  actionListener="#{Marticle.deleteBeanContenuPack(pckC)}" update="data_pack_article_contenu"/>
                                                    </p:contextMenu>                           
                                                    <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_pack_article_contenu" type="button"/>
                                                </p:column> 
                                            </p:dataTable>  
                                        </p:outputPanel>
                                    </div>
                                    <div class="zone_bottom">

                                    </div>
                                </div>
                                <div style="clear: both"/>  
                            </p:tab>    
                            <p:tab title="#{lab.LDB_PA_avis_user} (#{articles.avis.size()})" rendered="#{articles.avis.size() gt 0}">  
                                <p:dataTable value="#{articles.avis}" var="avs" rowKey="#{avs.id}" id="data_avis_article">
                                    <p:column headerText="#{lab.LDB_PA_auteur}" style="width: 20%">
                                        <h:outputText value="#{avs.auteur}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_note}" style="width: 10%;text-align:center">
                                        <p:rating value="#{avs.note}" readonly="true" />
                                    </p:column>
                                    <p:column headerText="#{lab.LDB_PA_commentaire}">
                                        <h:outputText value="#{avs.commentaire}"/>
                                    </p:column>
                                    <p:column headerText="#{lab.L_date}" style="width: 10%;text-align:center">
                                        <h:outputText value="#{avs.dateSave}" converter="DATE"/>
                                    </p:column>
                                </p:dataTable>  
                                <div style="clear: both"/>  
                            </p:tab>    
                            <p:tab title="Tarifs de livraison" rendered="#{Marticle.currentAgence.societe.venteOnline}">  
                                <h:panelGrid columns="5" cellpadding="0" cellspacing="0" styleClass="yvs_nostyle">
                                    <h:outputText value="#{lab.LDB_PT_pays}"/>                                    
                                    <h:selectOneMenu value="#{Marticle.paysTarif}" style="min-width: 120px" valueChangeListener="#{Mdico.chooseVilleLivraison}">
                                        <f:selectItem itemLabel="--" itemValue="0"/>
                                        <f:selectItems value="#{Mdico.pays}" var="pys" itemLabel="#{pys.libele}" itemValue="#{pys.id}" />          
                                        <p:ajax event="valueChange" global="false" update="ville_tarif_livraison"/>                           
                                    </h:selectOneMenu> 
                                    <h:outputText value="#{lab.LDB_PT_ville}"/>
                                    <h:selectOneMenu value="#{Marticle.villeTarif}" id="ville_tarif_livraison" style="min-width: 120px"
                                                     valueChangeListener="#{Mdico.chooseSecteurLivraison}">
                                        <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                                        <f:selectItems value="#{Mdico.villes}" var="dic"  itemLabel="#{dic.libele}" itemValue="#{dic.id}" />                                  
                                        <p:ajax event="valueChange" global="false"/>
                                    </h:selectOneMenu>
                                    <p:commandButton value="Charger" actionListener="#{Marticle.loadTarifLivraison()}" update="data_tarifs_article"/>
                                </h:panelGrid>
                                <p:dataTable id="data_tarifs_article" value="#{articles.tarifs}" var="tar" rowKey="#{tar.id}" editable="true" rowIndexVar="idxY">
                                    <p:ajax event="rowEdit" listener="#{Marticle.onRowTarifLivraison}" update=":formulaire_mainArticle:tbvArticle:data_tarifs_article"/>
                                    <p:column headerText="N°" width="50" style="text-align: center" styleClass="line_valide_#{tar.id gt 0}">
                                        #{idxY+1}
                                    </p:column>
                                    <p:column headerText="Adresse " styleClass="line_valide_#{tar.id gt 0}" style="text-align: left">
                                        #{tar.lieuxLiv.lieux.libele}
                                        <h:graphicImage library="img" name="#{(tar.livraisonDomicile)?'vu.png':'vu_non.png'}" width="16" height="16" 
                                                        title="Livraison à domicile #{(tar.livraisonDomicile)?'activée':'désactivée'}" style="float:right;margin-top:3px"/>                                        
                                    </p:column>
                                    <p:column headerText="Frais" styleClass="line_valide_#{tar.id gt 0}" style="text-align: right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{tar.fraisLivraison}" converter="DNS"/>
                                                <h:outputText styleClass="style_unite" value="Fcfa" />
                                            </f:facet>
                                            <f:facet name="input">
                                                <h:inputText  value="#{tar.fraisLivraison}" style="width:70%"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column headerText="Delai Retour" styleClass="line_valide_#{tar.id gt 0}" style="text-align: right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{tar.delaiRetour}" converter="DNS"/>
                                                <h:outputText styleClass="style_unite" value="h" />
                                            </f:facet>
                                            <f:facet name="input">
                                                <h:inputText  value="#{tar.delaiRetour}" style="width:70%"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column headerText="Delai Livraison" styleClass="line_valide_#{tar.id gt 0}" style="text-align: right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{tar.delaiForLivraison}" converter="DNS"/>
                                                <h:outputText styleClass="style_unite" value="h" />
                                            </f:facet>
                                            <f:facet name="input">
                                                <h:inputText  value="#{tar.delaiForLivraison}" style="width:70%"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column headerText="Delai Retrait" styleClass="line_valide_#{tar.id gt 0}" style="text-align: right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{tar.delaiForRetrait}" converter="DNS"/>
                                                <h:outputText styleClass="style_unite" value="h" />
                                            </f:facet>
                                            <f:facet name="input">
                                                <h:inputText  value="#{tar.delaiForRetrait}" style="width:70%"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column style="text-align: center;width: 5px">
                                        <p:rowEditor />
                                    </p:column>  
                                    <p:column headerText="" width="20" style="text-align: center">
                                        <p:contextMenu styleClass="context_menu" for="tarifs_article_option_G" event="left click">
                                            <p:menuitem value="#{tar.livraisonDomicile?'Désactiver':'Activer'} livraison" icon="#{tar.livraisonDomicile?'ui-icon-circle-close':'ui-icon-circle-check'}" 
                                                        actionListener="#{Marticle.actifLivraisonTarifLivraison(tar)}" update="data_tarifs_article" disabled="#{tar.id le 0}"/>                               
                                            <p:separator />
                                            <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{Marticle.removeTarifLivraison(art)}" update="data_tarifs_article" disabled="#{tar.id le 0}"/>
                                        </p:contextMenu>
                                        <p:commandButton type="button" icon="ui-icon-gear" style="width: 22px; height: 22px" id="tarifs_article_option_G"/>
                                    </p:column>
                                </p:dataTable> 
                                <div style="clear: both"/>  
                            </p:tab>    
                        </p:tabView> 
                    </p:outputPanel>
                </div>
                <!-->
                ******************************
                dataTable
                **********************************
                <-->
                <div class="yvs_list_article" style="height: 95%;"> 
                    <div  class="part_list">
                        <p:dataTable id="tab_article" value="#{Marticle.listArticle}" var="art" rowIndexVar="artLine"
                                     rowKey="#{art.id}" selectionMode="single">
                            <p:ajax event="rowSelect"  listener="#{Marticle.openViewArticleToUpdate}"
                                    update=":form_delete_img :formulaire_mainArticle:head_form_article :formulaire_mainArticle:middle_form_article :formulaire_mainArticle:tbvArticle :formulaire_mainArticle:input_hide_article"  
                                    process="@this" partialSubmit="true"
                                    />
                            <p:column headerText="N°" width="20" style="text-align: center">                                
                                <h:outputText value="#{Marticle.displayId?art.id:artLine+1}" />
                                <h:graphicImage library="img" name="pointe.png" width="17" height="15" rendered="#{art.id eq articles.id}"/>
                            </p:column>                                                        
                            <p:column headerText="#{lab.LDB_PA_reference}" width="120" sortBy="#{art.refArt}">
                                #{art.refArt}                                                                             
                            </p:column>
                            <p:column  headerText="#{lab.LDB_PA_designation}" width="150" sortBy="#{art.designation}"> 
                                #{art.designation}
                            </p:column>
                            <p:column headerText="#{lab.LDB_PA_categorie}" width="100" style="text-align: left">
                                #{art.categorie}
                            </p:column>
                            <p:column  headerText="#{lab.LDB_PA_famille}"  width="100" style="text-align: left" sortBy="#{art.famille.designation}">
                                #{art.famille.designation}
                            </p:column>   
                            <p:column headerText="#{lab.LDB_PA_type}"  width="80"  style="text-align: left">
                                <h:outputText value="#{art.typeService eq constantes.SERVICE_RESTAURANT? 'RESTAURANT': art.typeService eq constantes.SERVICE_LOGEMENT? 'LOGEMENT': 'COMMERCE GENERAL'}"/>
                            </p:column>                                                                                     
                            <p:column  headerText="#{lab.LDB_PA_classes}"  width="100" style="text-align: left">
                                #{art.classe1.designation}
                            </p:column>                                                                                        
                            <p:column headerText="#{lab.L_actif}"  width="20" style="text-align: center">
                                <h:graphicImage library="img" name="#{(art.actif)?'vu.png':'vu_non.png'}" width="10" height="10" title="#{(art.actif)?'Actif':'Innactif'}"/>
                            </p:column>
                            <p:column headerText="" width="20" style="text-align: center">
                                <p:contextMenu styleClass="context_menu" for="article_option_G" event="left click">
                                    <p:menuitem value="#{art.actif?'Désactiver':'Activer'}" icon="#{art.actif?'ui-icon-circle-close':'ui-icon-circle-check'}" actionListener="#{Marticle.toogleActiveArticle(art)}" update="tab_article"/>                               
                                    <p:menuitem value="Créer Template" icon="ui-icon-copy" actionListener="#{Marticle.setSelectArticle(art)}" oncomplete="dlgCreerTemplate.show()"/>                               
                                    <p:menuitem value="#{Marticle.displayId?'Afficher l\'Id':'Afficher le numéro'}" icon="ui-icon-show" actionListener="#{Marticle.setDisplayId(!Marticle.displayId)}" update="tab_article"/>                               
                                    <p:separator />
                                    <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" actionListener="#{Marticle.openVieArtToUp(art)}" update=":formulaire_mainArticle:fiche_articles  :formulaire_mainArticle:tbvArticle" oncomplete="collapseForm('plan_compte')"/>
                                </p:contextMenu>
                                <p:commandButton type="button" icon="ui-icon-gear" style="width: 22px; height: 22px" id="article_option_G"/>
                            </p:column>
                            <p:column width="20" style="text-align: center">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_article" value="false" onclick="selectionAllLineTab(#{Marticle.listArticle.size()}, 'article')" />
                                </f:facet>
                                <h:selectBooleanCheckbox styleClass="chek_line_article"  value="false" onclick="selectionLineTab(#{artLine}, 'article')" />
                            </p:column>
                        </p:dataTable>
                        <span style="margin-left: 35%; font-size: .8em; font-style: italic; color: #828c95" class="nbSelectArticle"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{Marticle.loadAllArticle(false,false)}"  update="tab_article art_dgrig" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.paginator.disPrev}" oncomplete=" collapseList('nav_article');"/>
                            <p:outputPanel >
                                <p:inplace label="#{Marticle.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                    <pe:inputNumber value="#{Marticle.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                        <p:ajax event="blur" listener="#{Marticle.gotoPagePaginator()}" update="tab_article art_dgrig"/>
                                    </pe:inputNumber>
                                </p:inplace><p:outputLabel value="/#{Marticle.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                            </p:outputPanel>
                            <p:commandButton actionListener="#{Marticle.loadAllArticle(true,false)}"   update="tab_article art_dgrig" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.paginator.disNext}" oncomplete=" collapseList('nav_article');"/>
                            <p:selectOneMenu value="#{Marticle.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                                <f:selectItems value="#{Marticle.paginations}"/>
                                <p:ajax event="valueChange" update="tab_article art_dgrig" oncomplete=" collapseList('nav_article');"/>
                            </p:selectOneMenu>
                        </p:outputPanel>   
                    </div>
                </div>
                <!-->
                ******************************
                Datagrid
                **********************************
                <-->
                <div class="yvs_grid_article">                                
                    <p:dataGrid value="#{Marticle.listArticle}" var="art1" columns="3" id="art_dgrig" rowIndexVar="numArt" style="width: 100%;font-size: 5px" >
                        <p:commandLink actionListener="#{Marticle.selectOneArticle(art1)}" process="@this" partialSubmit="true"
                                       oncomplete="collapseForm('article');collapseForm('nav_article')" style="text-decoration:none" >
                            <div class="card">
                                <div class="header">                                
                                    <h:graphicImage styleClass="article_img"  style="max-height: 200px;max-width: 100%"
                                                    value="data:image/#{Marticle.photoArticles(art1)[1]};base64,#{Marticle.photoArticles(art1)[0]}"/>
                                </div>
                                <div class="title">                                
                                    <h:outputText value="#{art1.designation}" />
                                    <div class="sub-title">                                
                                        <h:outputText value="#{art1.refArt}" /> 
                                    </div>
                                </div>
                                <div class="description">      
                                    <span>#{lab.LDB_PA_categorie}</span>
                                    <h:outputText class="value" value="#{art1.categorie}"  /> 
                                    <span>#{lab.LDB_PA_famille}</span>
                                    <h:outputText class="value" value="#{art1.famille.designation}"  />
                                    <span>#{lab.LDB_PA_groupes}</span>
                                    <h:outputText class="value" value="#{art1.groupe ne null ? art1.groupe.designation : '---'}"  />
                                </div>
                                <div class="footer">    

                                </div>
                            </div>
                        </p:commandLink>
                    </p:dataGrid>
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{Marticle.loadAllArticle(false,false)}"   update="tab_article art_dgrig" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.paginator.disPrev}" oncomplete=" collapseList('nav_article');"/>
                        <p:outputPanel ><p:outputLabel value="#{Marticle.paginator.currentPage}/#{Marticle.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{Marticle.loadAllArticle(true,false)}" update="tab_article art_dgrig" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.paginator.disNext}" oncomplete=" collapseList('nav_article');"/>
                        <p:selectOneMenu value="#{Marticle.nbMax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{Marticle.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{Marticle.paginations}"/>
                            <p:ajax event="valueChange" update="tab_article art_dgrig" oncomplete=" collapseGrid('nav_article');"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div>
            </div>  
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false">
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>                    
            <div class="zone_find">                
                <div class="display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">Enregistré Le <h:outputText value="#{Marticle.entityArticle.dateSave}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>Modifier Le <h:outputText value="#{Marticle.entityArticle.dateUpdate}" styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>Par <h:outputText value="#{Marticle.entityArticle.author.users.nomUsers}" style="font-weight: bold" styleClass="valeur" /></span>
                    </p:outputPanel>
                </div>
                <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em">
                    <h:panelGrid columns="8" style="float: left; font-size: 1.0em">
                        <h:outputText value="#{lab.LDB_PA_categorie}" />
                        <h:outputText value="#{lab.LDB_PA_famille}" />
                        <h:outputText value="#{lab.LDB_PA_groupe}" />
                        <h:outputText value="#{lab.LDB_PA_conditionnement}" />
                        <h:outputText value="#{lab.L_actif}" />
                        <h:outputText value="#{lab.LDB_PA_designation}" />
                        <h:outputText value="" />
                        <span>&nbsp;</span>
                        <h:selectOneMenu value="#{Marticle.categorieSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="" noSelectionOption="true"/>
                            <f:selectItems value="#{constantes.CATEGORIES}" var="cat" itemValue="#{cat.valeur}" itemLabel="#{cat.libelle}" />
                            <p:ajax event="valueChange" listener="#{Marticle.addParamCategorie()}"  
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>                              
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{Marticle.familleSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedFamilleArticle.familles}" var="fam" 
                                           itemLabel="#{fam.designation}" itemValue="#{fam.id}" />
                            <p:ajax event="valueChange" listener="#{Marticle.addParamFamille()}"  
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>                              
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{Marticle.groupeSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedGroupeArticle.groupes}" var="grp" 
                                           itemLabel="#{grp.designation}" itemValue="#{grp.id}" />
                            <p:ajax event="valueChange" listener="#{Marticle.addParamGroupe()}"  
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>                              
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{Marticle.uniteSearch}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0" noSelectionOption="true"/>
                            <f:selectItems value="#{managedUniteMesure.unites}" var="condt" 
                                           itemLabel="#{condt.libelle}" itemValue="#{condt.id}" />
                            <p:ajax event="valueChange" listener="#{Marticle.addParamConditionnement()}"  
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>                              
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{Marticle.actifSearch}" style="width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>                            
                            <f:selectItem itemLabel="#{lab.L_actif}" itemValue="#{true}"/>                            
                            <f:selectItem itemLabel="#{lab.L_inactif}" itemValue="#{false}"/>                            
                            <p:ajax event="valueChange" listener="#{Marticle.addParamActif()}"  
                                    process="@form" update=":formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>
                        </h:selectOneMenu> 
                        <p:inputText value="#{Marticle.searchArticle}" id="txt_find_article">
                            <p:ajax event="valueChange" listener="#{Marticle.findArticle()}"  
                                    process="@form" update=":form_delete_img :formulaire_mainArticle:tab_article :formulaire_mainArticle:art_dgrig"/>
                        </p:inputText>   
                        <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                       onclick="dlgPlusOption.show()" global="false" value="#{lab.LDB_PA_avancer}"/>   
                    </h:panelGrid>
                    <h:panelGrid columns="3" style="float: right;font-size: 0.8em">
                        <p:commandLink actionListener="#{Marticle.reBuildReference()}" rendered="#{Marticle.currentParam.genererReferenceArticle}" 
                                       title="#{lab.LDB_PA_reconstruire_reference_articles_famille}">
                            <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                                Reconstruire reference
                            </span> 
                        </p:commandLink>
                        <p:splitButton type="button" global="false" value="#{lab.LDB_PA_telecharger}" id="dowload_article" style="font-size: 0.8em;">
                            <p:menuitem value="#{lab.LDB_PA_telecharger_articles}"  actionListener="#{Marticle.print()}" ajax="false" icon="ui-icon-print" />
                            <p:menuitem value=" #{lab.LDB_PA_non_vendu}" actionListener="#{Marticle.printInactf()}" ajax="false" icon="ui-icon-print" />
                            <p:menuitem value=" #{lab.LDB_PA_sans_prix_achat}" actionListener="#{Marticle.printSansPua()}" ajax="false" icon="ui-icon-print" />
                            <p:menuitem value=" #{lab.LDB_PA_sans_prix_vente}" actionListener="#{Marticle.printSansPuv()}" ajax="false" icon="ui-icon-print" />
                            <p:menuitem value="#{lab.LDB_PA_avancer}" icon="ui-icon-circle-arrow-s" onclick="dlgPrint.show()" />
                            <p:menuitem value="#{lab.LDB_PA_exporter}" icon="ui-icon-circle-arrow-s" actionListener="#{Marticle.print('xls')}" ajax="false"/>
                        </p:splitButton>
                        <!--</p:contextMenu>-->
                        <!--</span>--> 
                        <!--</p:commandLink>-->
                        <p:commandLink global="false" onclick="dlgListExport.show()" rendered="#{Marticle.exports.size() gt 0}">
                            <span style="border: 2px solid #666; border-radius: 5px;margin-top: 5px;padding: 3px">
                                #{lab.LDB_PA_exporter}
                            </span> 
                        </p:commandLink>
                    </h:panelGrid>
                </h:panelGrid>

            </div>
        </h:form>
    </ui:define>
</ui:composition>

