<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">    
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Journaux de vente','modGescom', 'smenEnteteVente', true,managedVente)}
    </ui:define>     
    <ui:define name="contents"> 
        #{managedVirement.doNothing()}
        #{managedCaisses.doNothing()}
        #{managedVente.loadAll()}
        #{managedTypeCreneau.loadAll()}
        #{managedPointVente.loadPointVenteByDroit(true, true)}
        #{managedModeReglement.loadActifMode()}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - 190);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('entete_vente');
            });
        </script>
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_entete_facture_vente" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                        <h:panelGroup>
                          <h:outputText value="#{lab.LDB_PC_dates}"  />
                          <h:selectBooleanCheckbox value="#{managedVente.date_up}" title="#{lab.LDB_PC_dates_last_modif}" style="float: right">
                            <p:ajax event="valueChange" global="false" update="blog_date_search_client"  listener="#{managedVente.addParamDates()}" oncomplete="collapseList('entete_vente')" />
                        </h:selectBooleanCheckbox>
                    </h:panelGroup>
                    <h:panelGroup id="blog_date_search_client">
                        <p:calendar value="#{managedVente.dateDebut_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedVente.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedVente.addParamDates}" update=":main_entete_vente:data_entete_vente" oncomplete="collapseList('entete_vente')"/>
                        </p:calendar>
                        <p:spacer style="width: 5px;background: black"/>
                        <p:calendar value="#{managedVente.dateFin_}" pattern="dd-MM-yyyy" navigator="true" size="10" disabled="#{!managedVente.date_up}">
                            <p:ajax event="dateSelect" global="false" listener="#{managedVente.addParamDates}" update=":main_entete_vente:data_entete_vente" oncomplete="collapseList('entete_vente')"/>
                        </p:calendar>
                    </h:panelGroup>
                    
                    <h:outputText value="#{lab.LC_PJV_comptabiliser}"/>
                    <h:selectOneMenu value="#{managedVente.comptaSearch}" style="width: 100%">
                        <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                        <f:selectItem itemLabel="#{lab.L_non}" itemValue="#{false}"/>
                        <f:selectItem itemLabel="#{lab.L_oui}" itemValue="#{true}"/>
                        <p:ajax event="valueChange" listener="#{managedVente.addParamComptabilised()}" oncomplete="collapseList('entete_vente')"
                                update=":main_entete_vente:data_entete_vente"/>
                    </h:selectOneMenu>
                </h:panelGrid>                
                <f:facet name="footer"> 

                </f:facet>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PJV_liste_virements}" widgetVar="dlgListVirement" width="70%" dynamic="true" closeOnEscape="true" resizable="false">
                <p:outputPanel id="form-virement_journal_vente">
                    <h:panelGrid columns="6" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.L_date}"/>
                        <h:outputText value="#{lab.LC_PJV_caisse}"/>
                        <h:outputText value="#{lab.LC_PJV_caisse_cible} "/>
                        <h:outputText value="#{lab.L_montant}"/>
                        <h:outputText value="#{lab.LC_PJV_mode}"/>
                        <h:outputText value=""/>
                        <p:calendar value="#{managedVente.virement.datePaiementPrevu}" size="8" pattern="dd-MM-yyyy"/>
                        <h:selectOneMenu value="#{managedVente.virement.caisse.id}" valueChangeListener="#{managedVente.chooseSource}" style="min-width: 120px">
                            <f:selectItem itemValue="0" itemLabel="--"/>
                            <f:selectItems value="#{managedVente.selectDoc.caisses}" var="iCS" itemValue="#{iCS.id}" itemLabel="#{iCS.intitule}"/>
                            <p:ajax event="valueChange" update="value-caisse_source_virement_journal_vente"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu id="value-caisse_source_virement_journal_vente" value="#{managedVente.virement.otherCaisse.id}" valueChangeListener="#{managedVente.chooseCible}" style="min-width: 120px">
                            <f:selectItem itemValue="0" itemLabel="--"/>
                            <f:selectItems value="#{managedVente.caisseCible}" var="iCC" itemValue="#{iCC.id}" itemLabel="#{iCC.intitule}"/>
                            <p:ajax event="valueChange"/>
                        </h:selectOneMenu>
                        <h:inputText value="#{managedVente.virement.montant}"/>
                        <h:selectOneMenu value="#{managedVente.virement.mode.id}" style="min-width: 140px">
                            <f:selectItem itemLabel="" itemValue="0" />
                            <f:selectItems value="#{managedModeReglement.modes}" var="iMdl" itemLabel="#{iMdl.designation}" itemValue="#{iMdl.id}" /> 
                            <p:ajax event="valueChange" listener="#{managedVente.chooseModeReglement()}"/>
                        </h:selectOneMenu>
                        <p:commandButton icon="ui-icon-disk" value="#{lab.L_enregistrer}" actionListener="#{managedVente.createVirement()}" update="data-virement_journal_vente"/>
                    </h:panelGrid>
                    <p:dataTable id="data-virement_journal_vente" value="#{managedVente.selectDoc.virements}" var="mvtVir"
                                 rowKey="#{mvtVir.id}" rowIndexVar="line_M">
                        <p:column headerText="N°" width="25" style="text-align: center" styleClass="etat_#{mvtVir.statutPiece}">
                            #{mvtVir.id}
                        </p:column>
                        <p:column headerText="#{lab.L_numero}" width="180" styleClass="etat_#{mvtVir.statutPiece}">
                            #{mvtVir.numeroPiece}
                        </p:column>   
                        <p:column headerText="#{lab.L_date}" width="100" styleClass="etat_#{mvtVir.statutPiece}" style="text-align: center">
                            <h:outputText value="#{mvtVir.datePiece}" converter="DATE" />
                        </p:column>                        
                        <p:column headerText="#{lab.LC_PJV_source}" styleClass="etat_#{mvtVir.statutPiece}">
                            #{mvtVir.source.intitule}
                        </p:column>
                        <p:column headerText="#{lab.LC_PJV_cible}" styleClass="etat_#{mvtVir.statutPiece}" >
                            #{mvtVir.cible.intitule}
                        </p:column>
                        <p:column headerText="#{lab.L_montant}" width="100" styleClass="etat_#{mvtVir.statutPiece}" style="text-align: right">
                            <h:outputText value="#{mvtVir.montant + mvtVir.montantCout}" converter="DN" />
                        </p:column>
                        <p:column headerText="#{lab.LC_PJV_date_paiment}" width="100" styleClass="etat_#{mvtVir.statutPiece}" style="text-align: center">
                            <h:outputText value="#{(!mvtVir.statutPiece.equals(constantes.STATUT_DOC_PAYER))?mvtVir.datePaimentPrevu:mvtVir.datePaiement}" converter="DATE" 
                                          title="#{(!mvtVir.statutPiece.equals(constantes.STATUT_DOC_PAYER))?'Date de paiement prévu':'Date de paiement'}"/>
                        </p:column>
                        <p:column headerText="#{lab.LC_PJV_caissier}" styleClass="etat_#{mvtVir.statutPiece}">
                            #{mvtVir.caissierSource.nomUsers}
                        </p:column>   
                    </p:dataTable>
                </p:outputPanel>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog hideEffect="explode" widgetVar="dglEtatComptabilised" closeOnEscape="true" resizable="false" width="25%">
                <p:commandButton value="#{lab.LC_PJV_tous_journaux}" actionListener="#{managedVente.verifyComptabilised(null)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LC_PJV_journaux_comptabilise}" actionListener="#{managedVente.verifyComptabilised(true)}" style="width: 99%"/>
                <p:commandButton value="#{lab.LC_PJV_journaux_non_comptabilise}" actionListener="#{managedVente.verifyComptabilised(false)}" style="width: 99%"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog id="id_confirm_close_entete_fv" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir #{managedVente.selectDoc.cloturer?'dévérrouiller':lab.L_cloturer}?" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedVente.cloturer()}" oncomplete="dlgConfirmClose.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="#{lab.LC_PJV_text}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedVente.deleteBean()}" oncomplete="dlgConfirmDelete.hide();collapseList('entete_vente')"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanEntete" closeOnEscape="true"
                             message="#{lab.LC_PJV_text1}" header="#{lab.L_confirmation}">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedVente.cleanEnteteVente()}" oncomplete="dlgCleanEntete.hide()"/>
                <p:commandButton type="button"  value="#{lab.L_non}" onclick="dlgCleanEntete.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabiliseHead" message="#{lab.LC_PJV_text2}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserHeaderVente(managedVente.selectDoc, true, true)}"
                                 update=":main_entete_vente:data_entete_vente :main_entete_vente:grp_btn_etat_entete_vente :main_entete_vente:btn_comptabilised_head_vente" oncomplete="dlgComptabiliseHead.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabiliseHead.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseHead" message="#{lab.LC_PJV_text3}"> 
                <p:selectBooleanCheckbox value="#{managedSaisiePiece.unComptabilisedPieceVente}" itemLabel="#{lab.LC_PJV_text4}"/>
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserHeaderVente(managedVente.selectDoc, true)}"
                                 update=":main_entete_vente:data_entete_vente :main_entete_vente:grp_btn_etat_entete_vente :main_entete_vente:btn_comptabilised_head_vente" oncomplete="dlgUnComptabiliseHead.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseHead.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgComptabiliseDoc" message="#{lab.LC_PJV_text5}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.comptabiliserVente(managedVente.selectFacture)}"
                                 update=":main_entete_vente:btn_comptabilised_head_vente" oncomplete="dlgComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgComptabiliseDoc.hide()" />
            </p:confirmDialog>
            <p:confirmDialog  header="#{lab.L_confirmation}" width="40%" widgetVar="dlgUnComptabiliseDoc" message="#{lab.LC_PJV_text6}">
                <p:commandButton value="#{lab.L_oui}" icon="ui-icon-circle-check" actionListener="#{managedSaisiePiece.unComptabiliserVente(managedVente.selectFacture, true)}"
                                 update=":main_entete_vente:btn_comptabilised_head_vente" oncomplete="dlgUnComptabiliseDoc.hide()"/>
                <p:commandButton value="#{lab.L_annuler}" icon="ui-icon-circle-close" type="button" onclick="dlgUnComptabiliseDoc.hide()" />
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_entete_vente">    
            <div class="part_fix">
                <div style="float: left">    
                    <p:outputPanel autoUpdate="true" style="float: right;margin-bottom: -7.5px" layout="block">
                        <p:commandButton actionListener="#{managedVente.loadOnViewEntete(false)}"   update="blog_form_entete_vente" icon="ui-icon-circle-triangle-w" disabled="#{!((managedVente.index + 1) gt 0)}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedVente.index+1}/#{managedVente.documents.size()}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedVente.loadOnViewEntete(true)}" update="blog_form_entete_vente" icon="ui-icon-circle-triangle-e" disabled="#{!((managedVente.index + 1) lt managedVente.documents.size())}"/>                        
                    </p:outputPanel>
                </div>
                <h:panelGroup style="margin-left: 25%">
                    <p:commandButton actionListener="#{managedVente.parcoursInAllResult(false)}" update="txt_parc_linear_entete_vente"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('entete_vente')"/>
                    <h:inputText value="#{managedVente.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_entete_vente"/>
                    <p:outputPanel autoUpdate="true">                        
                        <p:outputLabel value="/#{managedVente.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedVente.parcoursInAllResult(true)}" update="txt_parc_linear_entete_vente" icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('entete_vente')"/>
                </h:panelGroup>                
                <div style="float: right">     
                    <h:link title="#{lab.L_mode_formulaire}" onclick="collapseForm('entete_vente');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="#{lab.L_mode_liste}" onclick="collapseList('entete_vente');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>   
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_entete_vente" style="width: 99%; margin: auto; background: white">
                    <p:outputPanel id="blog_form_entete_vente">
                        <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%;margin-left: -7.5px;margin-bottom: -5px;margin-top: -10px" cellpadding="0" cellspacing="0" rendered="#{managedVente.entete.id gt 0}">
                            <h:panelGroup style="float: left;margin-top: 5px">
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" style="font-size: large;background: black;color: white">                                            
                                    <h:outputText id="txt_reference_document_entete_vente" value="#{managedVente.entete.id} #{managedVente.entete.reference}"/>
                                </h:panelGrid>
                            </h:panelGroup>
                            <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: 1%;margin-right: -22.5px">                                               
                                <p:outputPanel id="grp_btn_etat_entete_vente" styleClass="yvs_form_of">                                    
                                    <p:commandLink value="#{managedVente.entete.etat == constantes.ETAT_EDITABLE?'EN EDITION':'EDITER'}" 
                                                   styleClass="button-stateOF #{(managedVente.entete.etat == constantes.ETAT_EDITABLE)?'statut_valide':'etat_formation_true'}" 
                                                   disabled="#{!(managedVente.entete.etat == constantes.ETAT_VALIDE or managedVente.entete.etat == constantes.ETAT_ANNULE)}"
                                                   actionListener="#{managedVente.annuler(false, false)}"
                                                   process="@this" update="grp_btn_etat_entete_vente" global="false"/>
                                    <p:commandLink value="#{managedVente.entete.etat==constantes.ETAT_VALIDE?'VALIDE':'VALIDER'}" 
                                                   styleClass="button-stateOF #{(managedVente.entete.etat==constantes.ETAT_VALIDE)?'statut_valide':'etat_formation_true'}" 
                                                   disabled="#{(managedVente.entete.etat != constantes.ETAT_EDITABLE)}" 
                                                   actionListener="#{managedVente.valider(true)}"
                                                   process="@this" update="grp_btn_etat_entete_vente" global="false"/>
                                    <p:commandLink value="#{managedVente.entete.etat==constantes.ETAT_ANNULE?'ANNULE':'ANNULER'}" 
                                                   styleClass="button-stateOF #{(managedVente.entete.etat==constantes.ETAT_ANNULE)?'statut_valide':'etat_formation_true'}" 
                                                   disabled="#{(managedVente.entete.etat == constantes.ETAT_ANNULE)}" 
                                                   actionListener="#{managedVente.annuler(false, true)}"
                                                   process="@this" update="grp_btn_etat_entete_vente" global="false"/>
                                    <p:commandLink value="#{managedVente.isComptabiliseBean(managedVente.entete)?'COMPTABILISE':'COMPTABILISER'}"
                                                   type="button" styleClass="#{(managedVente.entete.comptabilise)?'statut_valide':'etat_formation_true'}"
                                                   onclick="dlgComptabiliseHead.show()" disabled="#{managedVente.entete.etat!=constantes.STATUT_DOC_VALIDE}" global="false" id="btn_comptabilised_header_vente"/>
                                    <p:contextMenu for="btn_comptabilised_header_vente" style="font-size: 0.7em">
                                        <p:menuitem icon="ui-icon-circle-arrow-w" value="Annuler" onclick="dlgUnComptabiliseHead.show()" disabled="#{!managedVente.entete.comptabilise}"/>
                                    </p:contextMenu>
                                </p:outputPanel>                                                  
                            </h:panelGroup>                                     
                        </h:panelGrid> 
                        <div style="width: 40%;float: left">
                            <h:panelGrid id="form_entete_vente" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                <h:outputText value="#{lab.LC_PJV_vendeur}"/>
                                <span>[<span style="font-weight: bold">#{managedVente.entete.users.codeUsers}</span>] #{managedVente.entete.users.nomUsers}</span>
                                <h:outputText value="#{lab.L_point_vente}"/>
                                <span>[<span style="font-weight: bold">#{managedVente.entete.point.code}</span>] #{managedVente.entete.point.libelle}</span>
                                <h:outputText value="#{lab.L_date}"/>
                                <h:outputText value="#{managedVente.entete.dateEntete}" converter="LD"/>
                                <span>#{lab.L_tranche}</span>
                                <h:panelGroup>
                                    <h:outputText value="#{managedVente.entete.tranchePoint.heureDebut}" converter="TIME"/>
                                    -
                                    <h:outputText value="#{managedVente.entete.tranchePoint.heureFin}" converter="TIME"/>                                    
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_valider_par}</span>
                                <h:panelGroup>
                                    <h:panelGroup rendered="#{managedVente.entete.etat != constantes.ETAT_VALIDE}">
                                        <span> --- </span>
                                        <span>#{lab.L_le}</span>
                                        <span> --- </span>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{managedVente.entete.etat == constantes.ETAT_VALIDE}">
                                        <h:panelGroup rendered="#{managedVente.entete.validerBy.id gt 0}">
                                            <h:outputText value="#{managedVente.entete.validerBy.nomUsers}"/>
                                            #{lab.L_le}
                                            <h:outputText value="#{managedVente.entete.dateValider}" converter="DATE"/>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{0 >= managedVente.entete.validerBy.id}">
                                            <span> #{lab.LC_PJV_automatique} </span>
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </h:panelGroup>

                            </h:panelGrid>
                        </div>
                        <div style="margin-left: 40.1%">
                            <h:panelGrid columns="4" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                                <span>#{lab.LC_PJV_total_ht}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantHT}" converter="#{managedVente.converter}"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_total_remise}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantRemise}" converter="DNS"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_total_taxes}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantTaxe}" converter="DNS"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_remise_facture}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantRemises}" converter="DNS"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_total_ttc}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantTTC}" converter="#{managedVente.converter}"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_total_ristourne}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantRistourne}" converter="#{managedVente.converter}"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_couts_sup}.</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantCoutSup}" converter="#{managedVente.converter}"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                <span>#{lab.LC_PJV_total_facture}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText value="#{managedVente.entete.montantTotal}" converter="#{managedVente.converter}"/>
                                    <span style="font-size: small"> Fcfa</span>
                                </h:panelGroup>
                                &nbsp;
                                <h:inputHidden value="X" />
                                <f:facet name="footer">
                                    <div style="background: #bcbcbf; width: 100%">
                                        <h:panelGroup >
                                            <span>#{lab.LC_PJV_total_avance} </span>
                                            <h:outputText value="#{managedVente.entete.montantAvance}" converter="#{managedVente.converter}" style="font-weight: bold"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <h:panelGroup style="float: right">
                                            <span>#{lab.LC_PJV_net_a_payer} </span>
                                            <h:outputText value="#{managedVente.entete.montantNetApayer}" converter="#{managedVente.converter}" style="font-weight: bold"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                    </div>
                                </f:facet>
                            </h:panelGrid>
                        </div>
                        <br style="clear: both"/>
                        <h:panelGrid id="blog_form_fv_entete" columns="1" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                            <f:facet name="header">
                                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                    <h:panelGroup style="float: left;margin-top: 5px">
                                        <p:commandLink id="btnMontantsEnteteFV" global="false" title="#{lab.LC_PJV_montants}" style="float: left;margin-top: 2px">
                                            <h:graphicImage library="icones" name="ico_facture2.png" width="18" height="20" style="border: 2px solid #666; border-radius: 5px;"/>  
                                        </p:commandLink>
                                        <p:spacer width="5"/>
                                        <h:panelGroup style="font-size: 1.2em;margin-top: 5px!important">
                                            <span>#{lab.LC_PJV_facture_numero} : </span>
                                            <h:outputText style="font-weight: bold" value="#{managedVente.docVente.numDoc}"/>                                    
                                        </h:panelGroup>
                                    </h:panelGroup>
                                    <h:panelGrid columns="2" style="float: right;margin-bottom: -7.5px;margin-right: -10px">
                                        <p:outputPanel autoUpdate="true" layout="block">
                                            <p:commandButton actionListener="#{managedVente.navigueOnViewFacture(false)}" update="blog_form_fv_entete" icon="ui-icon-circle-triangle-w" disabled="#{!(managedVente.position gt 0)}"/>
                                            <p:outputPanel ><p:outputLabel value="#{managedVente.position+1}/#{managedVente.entete.documents.size()}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                                            <p:commandButton actionListener="#{managedVente.navigueOnViewFacture(true)}" update="blog_form_fv_entete" icon="ui-icon-circle-triangle-e" disabled="#{!((managedVente.position +1) lt managedVente.entete.documents.size())}"/>                        
                                        </p:outputPanel>
                                        <h:panelGroup style="float: right">
                                            <p:commandLink value="#{managedFactureVenteV2.isComptabilise(managedVente.selectFacture)?'COMPTABILISE':'COMPTABILISER'}"
                                                           type="button" styleClass="#{(managedVente.selectFacture.comptabilise)?'statut_valide':'etat_formation_true'}"
                                                           onclick="dlgComptabiliseDoc.show()" rendered="#{managedVente.selectFacture.statut==constantes.STATUT_DOC_VALIDE}" global="false" id="btn_comptabilised_head_vente"/>
                                            <p:contextMenu for="btn_comptabilised_head_vente" style="font-size: 0.7em">
                                                <p:menuitem icon="ui-icon-circle-arrow-w" value="#{lab.L_annuler}" onclick="dlgUnComptabiliseDoc.show()" disabled="#{!managedVente.selectFacture.comptabilise}"/>
                                            </p:contextMenu>
                                        </h:panelGroup>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </f:facet>
                            <p:outputPanel>
                                <div style="width: 40%;float: left">
                                    <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                                        <h:panelGroup>
                                            <h:outputText value="#{lab.LC_PJV_client}"/>
                                            <p:spacer styleClass="#{managedVente.docVente.statut}" style="float: right;margin-top: 2px" width="15" height="15"/>
                                        </h:panelGroup>
                                        <span>#{managedVente.docVente.nom_client}</span>
                                        <h:outputText value="#{lab.LC_PJV_categorie_comptable}"/>
                                        <span>[<span style="font-weight: bold">#{managedVente.docVente.categorieComptable.codeCategorie}</span>] #{managedVente.docVente.categorieComptable.designation}</span>
                                        <h:outputText value="#{lab.LC_PJV_heure}"/>
                                        <h:outputText value="#{managedVente.docVente.heureDoc}" converter="TIME"/>
                                        <h:outputText value="#{lab.LC_PJV_model_reglement}"/>
                                        <h:outputText value="#{managedVente.docVente.modeReglement.designation}"/>
                                        <span>#{lab.LC_PJV_valider_par}</span>
                                        <h:panelGroup>
                                            <h:outputText value="#{managedVente.docVente.validerBy.nomUsers}" rendered="#{managedVente.docVente.validerBy.id gt 0}"/>
                                            <h:outputText value=" --- " rendered="#{0 >= managedVente.docVente.validerBy.id}"/>
                                           #{lab.L_le}
                                            <h:outputText value="#{managedVente.docVente.dateValider}" converter="DATE" rendered="#{managedVente.docVente.validerBy.id gt 0}"/>
                                            <h:outputText value=" --- " rendered="#{0 >= managedVente.docVente.validerBy.id}"/>
                                        </h:panelGroup>
                                    </h:panelGrid>
                                </div>
                                <div style="margin-left: 40.1%">
                                    <h:panelGrid columns="4" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                                        <span>#{lab.LC_PJV_total_ht}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantHT}" converter="#{managedVente.converter}"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_total_remise}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantRemise}" converter="DNS"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_total_taxes}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantTaxe}" converter="DNS"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_remise_facture}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantRemises}" converter="DNS"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_total_ttc}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantTTC}" converter="#{managedVente.converter}"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_total_ristourne}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantRistourne}" converter="#{managedVente.converter}"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_couts_sup}.</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantCS}" converter="#{managedVente.converter}"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        <span>#{lab.LC_PJV_total_facture}</span>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedVente.docVente.montantTotal}" converter="#{managedVente.converter}"/>
                                            <span style="font-size: small"> Fcfa</span>
                                        </h:panelGroup>
                                        &nbsp;
                                        <h:outputText value="&nbsp;" style="width: 100%; height: 100%; background: #666"/>
                                        <f:facet name="footer">
                                            <div style="background: #bcbcbf; width: 100%">
                                                <h:panelGroup >
                                                    <span>#{lab.LC_PJV_total_avance}</span>
                                                    <h:outputText value="#{managedVente.docVente.montantAvance}" converter="#{managedVente.converter}" style="font-weight: bold"/>
                                                    <span style="font-size: small"> Fcfa</span>
                                                </h:panelGroup>
                                                <h:panelGroup style="float: right">
                                                    <span>#{lab.LC_PJV_net_a_payer} </span>
                                                    <h:outputText value="#{managedVente.docVente.montantResteApayer}" converter="#{managedVente.converter}" style="font-weight: bold"/>
                                                    <span style="font-size: small"> Fcfa</span>
                                                </h:panelGroup>
                                            </div>
                                            <p:dataTable value="#{managedVente.docVente.contenus}" var="co" emptyMessage="">
                                                <p:column headerText="#{lab.L_article}">
                                                    #{co.article.designation}
                                                </p:column>
                                                <p:column headerText="#{lab.L_quantite}" style="text-align: center"> 
                                                    #{co.quantite}
                                                    <span title="#{co.conditionnement.unite.libelle}" style="font-size: 0.6em;color: #003399">#{co.conditionnement.unite.reference}</span>
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PJV_prix_u}."  style="text-align: right">
                                                    #{co.prix}
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PJV_remises}" style="text-align: right">
                                                    #{co.remise}
                                                </p:column>
                                                <p:column headerText="#{lab.LC_PJV_taxes}" style="text-align: right">
                                                    #{co.taxe}
                                                </p:column>
                                            </p:dataTable>
                                        </f:facet>
                                    </h:panelGrid>                                    
                                </div>
                            </p:outputPanel>
                        </h:panelGrid>                        
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_entete_vente" style="width: 99%; margin: auto; background: white">
                    <p:dataTable id="data_entete_vente" value="#{managedVente.documents}" var="bon" rowKey="#{bon.id}" rowIndexVar="bonIdx" selectionMode="single">
                        <p:ajax event="rowSelect" listener="#{managedVente.loadOnView}" oncomplete="collapseForm('entete_vente');collapseForm('contenu_entete_vente');collapseForm('cout_entete_vente');collapseForm('mensualite_entete_vente');collapseForm('remise_vente')"/>
                        <p:column style="width: 7%" headerText="N°" styleClass="statut_#{bon.etat}">
                            <h:graphicImage title="#{lab.L_cloturer}" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>  
                            <span>#{bonIdx+1}</span>
                        </p:column>
                        <p:column style="width: 7%" headerText="ID" styleClass="statut_#{bon.etat}">
                            <span>#{bon.id}</span>
                        </p:column>
                        <p:column headerText="#{lab.LC_PJV_vendeur}" styleClass="statut_#{bon.etat}">
                            [<span style="font-weight: bold">#{bon.creneau.users.codeUsers}</span>]
                            <span>#{bon.creneau.users.nomUsers}</span>
                            <h:outputText value="#{lab.LC_PJV_vide}" style="float: right;color: blue;font-style: italic;font-size: 0.8em" rendered="#{0>=bon.documents.size()}"/>
                            <h:panelGroup style="float: right">
                                <h:outputText title="#{lab.LC_PJV_journal_regle}" value="R" rendered="#{bon.statutRegle == constantes.ETAT_REGLE}"
                                              style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                <p:spacer width="2" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"/>
                                <h:outputText title="#{lab.LC_PJV_journal_livre} " value="L" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"
                                              style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.L_point_vente}" styleClass="statut_#{bon.etat}">
                            [<span style="font-weight: bold">#{bon.creneau.creneauPoint.point.code}</span>]
                            <span>#{bon.creneau.creneauPoint.point.libelle}</span>
                        </p:column>
                        <p:column headerText="#{lab.L_date}" style="text-align: center;width: 12%" styleClass="statut_#{bon.etat}">
                            <h:outputText value="#{bon.dateEntete}" converter="DDMMYYYY"/>
                            <h:panelGroup style="float: right">
                                <h:outputText title="#{lab.LC_PJV_comptabilise}" value="C" rendered="#{bon.comptabilised}" styleClass="style_statut"/>
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.L_tranche}" style="text-align: center;width: 12%" styleClass="statut_#{bon.etat}">
                            <h:outputText value="#{bon.creneau.creneauPoint.tranche.heureDebut}" converter="TIME"/>
                            -
                            <h:outputText value="#{bon.creneau.creneauPoint.tranche.heureFin}" converter="TIME"/>
                        </p:column>
                        <p:column width="20" style="text-align: center" styleClass="statut_#{bon.etat}">
                            <p:commandLink global="false">
                                <h:graphicImage title="#{lab.L_imprimer}" library="img" name="pdf.png" width="15" height="15"/>                                        
                            </p:commandLink>
                        </p:column>
                        <p:column width="20" style="text-align: center" styleClass="statut_#{bon.etat}">                          
                            <f:facet name="header">
                                <p:contextMenu for="btn_option_head_entete_vente" event="left click" style="font-size: 0.8em" styleClass="context_menu">   
                                    <p:menuitem icon="ui-icon-link" value="#{lab.LC_PJV_etat_comptabilise}" onclick="dglEtatComptabilised.show()"/>  
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_head_entete_vente" type="button"/> 
                            </f:facet>
                            <p:contextMenu for="btn_option_entete_vente" event="left click" style="font-size: 0.8em">
                                <p:menuitem value="#{bon.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{bon.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                            actionListener="#{managedVente.cloturer(bon)}" oncomplete="dlgConfirmClose.show()"/>
                                <p:menuitem icon="ui-icon-arrowthick-2-e-w" value="#{lab.LC_PJV_comptabilise}" actionListener="#{managedSaisiePiece.comptabiliserHeaderVente(bon, true, true)}"
                                            rendered="#{!managedVente.isComptabilise(bon)}" update="data_entete_vente"/>
                                <p:menuitem value="#{lab.LC_PJV_annuler_comptabilise}" icon="ui-icon-arrowthick-2-e-w" actionListener="#{managedSaisiePiece.unComptabiliserHeaderVente(bon, true)}"
                                            rendered="#{bon.comptabilise}" update="data_entete_vente"/>
                                <p:menuitem value="#{lab.LC_PJV_voir_virements}" icon="ui-icon-seek-next" actionListener="#{managedVente.loadVirement(bon)}"/>
                                <p:menuitem icon="ui-icon-carat-2-e-w" value="#{lab.LC_PJV_equilibrer_statut}" actionListener="#{managedVente.equilibre(bon)}" update=":main_entete_vente:data_entete_vente"/>
                                <p:menuitem icon="ui-icon-refresh" value="#{lab.LC_PJV_reconstruire_reference}" actionListener="#{managedVente.reBuildAllNumero(bon, true)}" update=":main_entete_vente:blog_form_fv_entete"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_entete_vente" type="button"/>
                        </p:column> 
                    </p:dataTable>   
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedVente.init(false)}"  update="data_entete_vente" icon="ui-icon-circle-triangle-w" disabled="#{managedVente.paginator.disPrev}"/>
                        <p:outputPanel ><p:outputLabel value="#{managedVente.paginator.currentPage}/#{managedVente.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedVente.init(true)}" update="data_entete_vente" icon="ui-icon-circle-triangle-e" disabled="#{managedVente.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedVente.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedVente.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedVente.paginations}"/>
                            <p:ajax event="valueChange"  update="data_entete_vente"/>
                        </p:selectOneMenu>
                    </p:outputPanel>
                </div> 
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>  
            <div class="zone_find">
                <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="8" style="font-size:0.8em" cellpadding="0" cellspacing="0">
                        <h:outputText value="#{lab.L_date}" />
                        <h:outputText value="#{lab.LC_PJV_point}" />
                        <h:outputText value="#{lab.L_tranche}" />
                        <h:outputText value="#{lab.LC_PJV_vendeur}" />
                        <h:outputText value="#{lab.LC_PJV_regle}" />
                        <h:outputText value="#{lab.LC_PJV_livre}" />
                        <h:outputText value="#{lab.L_statut}" />
                        <span>&nbsp;</span>
                        <h:panelGrid columns="2">
                            <h:selectBooleanCheckbox value="#{managedVente.date_}">
                                <p:ajax event="valueChange" listener="#{managedVente.addParamDate()}" update="blog_date_search_entete_vente :main_entete_vente:data_entete_vente" oncomplete="collapseList('entete_vente')"/>
                            </h:selectBooleanCheckbox>
                            <h:panelGroup id="blog_date_search_entete_vente">
                                <p:calendar value="#{managedVente.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedVente.date_}" size="8" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedVente.addParamDate()}" update=":main_entete_vente:data_entete_vente" oncomplete="collapseList('entete_vente')"/>
                                </p:calendar>
                                <p:spacer width="5px" style="background: black"/>
                                <p:calendar value="#{managedVente.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedVente.date_}" size="8" style="font-size: 0.8em">
                                    <p:ajax event="dateSelect" listener="#{managedVente.addParamDate()}" update=":main_entete_vente:data_entete_vente" oncomplete="collapseList('entete_vente')"/>
                                </p:calendar>
                            </h:panelGroup>
                        </h:panelGrid> 
                        <h:selectOneMenu value="#{managedVente.point_}" style="min-width: 120px" valueChangeListener="#{managedVente.choosePoint_}">
                            <f:selectItem itemLabel="--#{lab.LDB_PPC_precedent}--" itemValue="-1"/>
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedPointVente.pointsvente}" var="poin" itemLabel="#{poin.libelle}" itemValue="#{poin.id}" />  
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItem itemLabel="--#{lab.LDB_PPC_suivant}--" itemValue="-2"/>                                    
                            <p:ajax event="valueChange" oncomplete="collapseList('entete_vente')" update=":main_entete_vente:data_entete_vente @this"/>
                        </h:selectOneMenu> 
                        <h:selectOneMenu value="#{managedVente.tranche_}" style="min-width: 120px">
                            <f:selectItem itemLabel="--" itemValue="0"/>
                            <f:selectItems value="#{managedTypeCreneau.tranches}" var="trh" itemLabel="#{trh.titre}" itemValue="#{trh.id}" />  
                            <p:ajax event="valueChange" listener="#{managedVente.addParamTranche(true)}" oncomplete="collapseList('entete_vente')"
                                    update=":main_entete_vente:data_entete_vente"/>
                        </h:selectOneMenu>
                        <h:inputText value="#{managedVente.codeVendeur_}">
                            <p:ajax event="blur" listener="#{managedVente.addParamVendeur()}" oncomplete="collapseList('entete_vente')"
                                    update=":main_entete_vente:data_entete_vente"/>
                        </h:inputText>
                        <h:selectOneMenu value="#{managedVente.statutRegle_}" style="min-width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                            <f:selectItem itemLabel="#{lab.L_regler}" itemValue="#{constantes.STATUT_DOC_PAYER}"/>
                            <p:ajax event="valueChange" listener="#{managedVente.addParamStatutRegle()}" oncomplete="collapseList('entete_vente')" 
                                    update=":main_entete_vente:data_entete_vente"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedVente.statutLivre_}" style="min-width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_attente}" itemValue="#{constantes.STATUT_DOC_ATTENTE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.STATUT_DOC_ENCOUR}"/>
                            <f:selectItem itemLabel="#{lab.L_livrer}" itemValue="#{constantes.STATUT_DOC_LIVRER}"/>
                            <p:ajax event="valueChange" listener="#{managedVente.addParamStatutLivre()}" oncomplete="collapseList('entete_vente')"
                                    update=":main_entete_vente:data_entete_vente"/>
                        </h:selectOneMenu>
                        <h:selectOneMenu value="#{managedVente.statut_}" style="min-width: 120px">
                            <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/> 
                            <f:selectItem itemLabel="#{lab.L_editable}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                            <f:selectItem itemLabel="#{lab.L_annulers}" itemValue="#{constantes.ETAT_ANNULE}"/>
                            <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                            <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                            <p:ajax event="valueChange" listener="#{managedVente.addParamStatut()}" oncomplete="collapseList('entete_vente')"
                                    update=":main_entete_vente:data_entete_vente"/>
                        </h:selectOneMenu>
                        <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                       onclick="dlgPlusOption.show()" global="false" value="#{lab.L_avancees}"/>
                    </h:panelGrid>
                    <p:commandLink onclick="dlgCleanEntete.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 2px;float: right" 
                                   title="#{lab.LC_PJV_nettoyage_entete_journal_vente}" rendered="#{accesRessource.fv_clean_header}">
                        <h:graphicImage library="img" name="clean.png" width="15" height="15"/>  
                    </p:commandLink>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>