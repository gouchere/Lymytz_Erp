<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Commandes Achat','modGescom', 'smenBonCommandAchat', true,managedBonAchat)}
    </ui:define> 
    <ui:define name="contents"> 
        #{managedTiers.view(null)}
        #{managedBonAchat.loadAll()}
        #{managedFournisseur.loadActifFournisseur(true)}
        #{managedModeReglement.loadModels('F')}
        #{managedTiersTemplate.loadTemplate('F')}  
        #{managedCatCompt.loadAllCategorieAchat()}
        #{managedDepot.loadAllDepotActifByOperation(constantes.ENTREE, constantes.ACHAT)}
        #{Mdico.loadPays()}
        #{Marticle.loadActifArticle(true,true)}
        <script type="text/javascript">
            $(function() {
                collapseForm('bon_achat');
                collapseForm('contenu_bon_achat');
                collapseForm('cout_bon_achat');
                collapseForm('cout_contenu_achat');
                collapseForm('mensualite_bon_achat');
                collapseForm('reglement_bon_achat');
                collapseList('livraison_achat');
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
            });
        </script>

        <h:form>
            <p:remoteCommand name="initFirstCoutAdditionnel_" actionListener="#{managedBonAchat.updateBean()}"
                             oncomplete="collapseForm('cout_contenu_achat')" global="false"/>
        </h:form>

        <!-->
        *************************************BeanCaisse****************************************
        Boite de dialogue des articles
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="Liste des articles" widgetVar="dlgListArticle" modal="true" width="70%"  closeOnEscape="true" visible="true"> 
                <p:dataTable id="data_articles_bon_achat" value="#{Marticle.articlesResult}" var="art" rowKey="#{art.id}"
                             selectionMode="single" rowIndexVar="line_art" >
                    <p:ajax event="rowSelect" global="false" listener="#{managedBonAchat.loadOnViewArticle}" oncomplete="dlgListArticle.hide()"
                            update=":main_bon_achat:form_contenu_bon_achat"/>
                    <p:column headerText="N°" width="20">
                        <span title="#{art.designation}">#{line_art+1}</span>
                    </p:column>
                    <p:column filterBy="#{art.refArt}" width="80">
                        <span title="#{art.designation}">#{art.refArt}</span>
                    </p:column>
                    <p:column headerText="Designation" width="150">
                        <span title="#{art.designation}">#{art.designation}</span>
                    </p:column>
                    <p:column headerText="Categorie" width="80">
                        <span title="#{art.designation}">#{art.categorie}</span>
                    </p:column>
                    <p:column headerText="Prix A." width="50" style="text-align: right">
                        <h:outputText value="#{art.pua}" title="#{art.designation}" converter="#{managedBonAchat.converter}" />
                    </p:column>
                    <p:column headerText="Prix V" width="50" style="text-align: right">
                        <h:outputText value="#{art.puv}" title="#{art.designation}" converter="#{managedBonAchat.converter}" />
                    </p:column>
                </p:dataTable>
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{Marticle.loadActifArticle(false, false)}" global="false" update="data_articles_bon_achat" icon="ui-icon-circle-triangle-w" disabled="#{Marticle.pa.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{Marticle.pa.currentPage}/#{Marticle.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{Marticle.loadActifArticle(true, false)}" global="false" update="data_articles_bon_achat" icon="ui-icon-circle-triangle-e" disabled="#{Marticle.pa.disNext}"/>
                    <p:selectOneMenu value="#{Marticle.nbMax}" label="Nombre max Résultat" valueChangeListener="#{Marticle._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px">
                        <f:selectItems value="#{Marticle.paginations}"/>
                        <p:ajax event="valueChange" global="false" update="data_articles_bon_achat"/>
                    </p:selectOneMenu>
                </p:outputPanel>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue des clients
        *****************************************************************************
        <-->  

        <h:form prependId="false">                    
            <p:dialog header="Liste des fournisseurs" widgetVar="dlgListFournisseurs" closeOnEscape="true" width="50%" modal="true" dynamic="true">                                  
                <p:dataTable id="data_fournisseur_bca"  value="#{managedFournisseur.fournisseurs}" var="fsseur_" rowKey="#{fsseur_.id}"
                             selectionMode="single" rowIndexVar="cltIdx">
                    <p:ajax event="rowSelect" global="false" listener="#{managedBonAchat.loadOnViewFsseur}" oncomplete="dlgListFournisseurs.hide()"/>
                    <p:column headerText="N°" style="width: 10%">
                        <span>#{cltIdx+1}</span>
                    </p:column>
                    <p:column headerText="Code" style="width: 20%">
                        <span>#{fsseur_.codeFsseur}</span>
                    </p:column>
                    <p:column headerText="Nom">
                        <span>#{fsseur_.nom_prenom}</span>
                    </p:column>
                    <p:column headerText="Catégorie T.">
                        <span>#{fsseur_.categorie.libelle}</span>
                    </p:column>
                </p:dataTable>   
                <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                    <p:commandButton actionListener="#{managedFournisseur.loadActifFournisseur(false, false)}" global="false" update="data_fournisseur_bca" icon="ui-icon-circle-triangle-w" disabled="#{managedFournisseur.pa.disPrev}"/>
                    <p:outputPanel ><p:outputLabel value="#{managedFournisseur.pa.currentPage}/#{managedFournisseur.pa.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                    <p:commandButton actionListener="#{managedFournisseur.loadActifFournisseur(true, false)}" global="false" update="data_fournisseur_bca" icon="ui-icon-circle-triangle-e" disabled="#{managedFournisseur.pa.disNext}"/>
                    <p:selectOneMenu value="#{managedFournisseur.nbMax}" label="Nombre max Résultat" valueChangeListener="#{managedFournisseur._choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                        <f:selectItems value="#{managedFournisseur.paginations}"/>
                        <p:ajax event="valueChange" global="false" update="data_fournisseur_bca"/>
                    </p:selectOneMenu>
                </p:outputPanel> 
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue plus options
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog modal="true" header="Plus Options" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOptions" resizable="false"> 
                <h:panelGrid id="blog_plus_option_bon_achat" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">    
                    <h:outputText value="Agence" rendered="#{acces.multiAgence}"/>
                    <h:selectOneMenu value="#{managedBonAchat.agence_}" id="_select_agence_bon_achat" style="width: 100%" rendered="#{acces.multiAgence}">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedBonAchat.agences_}" var="ag"
                                       itemLabel="#{ag.designation}" itemValue="#{ag.id}"/>
                        <p:ajax event="valueChange" global="false" listener="#{managedBonAchat._chooseAgence()}" oncomplete="collapseList('bon_achat')" 
                                update="blog_plus_option_bon_achat :main_bon_achat:data_bon_achat"/>
                    </h:selectOneMenu>
                    <h:outputText value="Depot " />
                    <h:selectOneMenu value="#{managedBonAchat.depot_}" id="_select_depot_bon_achat" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedBonAchat.depots_}" var="de"
                                       itemLabel="#{de.designation}" itemValue="#{de.id}"/>
                        <p:ajax event="valueChange" global="false" listener="#{managedBonAchat._chooseDepot()}" oncomplete="collapseList('bon_achat')"
                                update="_select_tranche_bon_achat :main_bon_achat:data_bon_achat"/>
                    </h:selectOneMenu>
                    <h:outputText value="Tranche"/>
                    <h:selectOneMenu value="#{managedBonAchat.tranche_}" id="_select_tranche_bon_achat" style="width: 100%">
                        <f:selectItem itemLabel="" itemValue="0"/>
                        <f:selectItems value="#{managedBonAchat.tranches_point_}" var="tr"
                                       itemLabel="#{tr.titre}" itemValue="#{tr.id}"/>
                        <p:ajax event="valueChange" global="false" listener="#{managedBonAchat._chooseTranche()}" oncomplete="collapseList('bon_achat')"/>
                    </h:selectOneMenu>
                    <h:outputText value="Statut " />   
                    <h:selectOneMenu value="#{managedBonAchat.statut_}" valueChangeListener="#{managedBonAchat.chooseStatut}" style="width: 100%">
                        <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                        <f:selectItem itemLabel="EDITABLE" itemValue="#{constantes.ETAT_EDITABLE}"/>
                        <f:selectItem itemLabel="ANNULER" itemValue="#{constantes.ETAT_ANNULE}"/>
                        <f:selectItem itemLabel="VALIDER" itemValue="#{constantes.ETAT_VALIDE}"/>
                        <p:ajax event="valueChange" global="false" update=":main_bon_achat:data_bon_achat" oncomplete="collapseList('bon_achat')"/>
                    </h:selectOneMenu>                                
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <!-->
        *****************************************************************************
        Boite de dialogue creation des types de cout
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="Ajout Article Fournisseur" widgetVar="dlgAddArticleFsseur" modal="true" width="40%" closeOnEscape="true"> 
                <h:panelGrid id="blog_form_article_fournisseur_bca" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <f:facet name="header">
                        Fournisseur : <b><span>#{managedFournisseur.article.fournisseur.nom_prenom}</span></b>
                    </f:facet>
                    <span>Article </span>
                    <h:inputText value="#{managedFournisseur.article.article.designation}" style="width: 98%" readonly="true"/>   
                    <span>Delai.Livraison </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.delaiLivraison}" style="width: 35%" decimalPlaces="0"/>  
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDelaisLiv}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup>
                    <span>Prix.Achat </span>
                    <pe:inputNumber value="#{managedFournisseur.article.prix}" style="width: 70%"/>
                    <span>Durée.Garantie </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.dureeGarantie}" style="width: 35%" decimalPlaces="0"/>  
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDureeGaranti}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup> 
                    <span>Remise </span>                    
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.remise}" style="width: 36.5%"/>  
                        <h:selectOneMenu value="#{managedFournisseur.article.natureRemise}">
                            <f:selectItem itemLabel="#{constantes.NATURE_TAUX}" itemValue="#{constantes.NATURE_TAUX}"/>                              
                            <f:selectItem itemLabel="#{constantes.NATURE_MTANT}" itemValue="#{constantes.NATURE_MTANT}"/>   
                        </h:selectOneMenu>  
                    </h:panelGroup> 
                    <span>Durée.Vie </span>
                    <h:panelGroup>
                        <pe:inputNumber value="#{managedFournisseur.article.dureeVie}" style="width: 35%" decimalPlaces="0"/>      
                        <p:spacer/>
                        <h:selectOneMenu value="#{managedFournisseur.article.uniteDureeVie}">
                            <f:selectItems value="#{constantes.UNITES_TIMES}" var="tps" itemLabel="#{tps[1]}" itemValue="#{tps[0]}" />    
                        </h:selectOneMenu> 
                    </h:panelGroup> 
                </h:panelGrid>
                <p:commandButton value="Enregistrer" style="width: 100%" oncomplete="dlgAddArticleFsseur.hide()"
                                 actionListener="#{managedFournisseur.saveNewArticle()}" update="blog_form_article_fournisseur_bca :main_bon_achat:form_contenu_bon_achat"/>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy}
                </f:facet> 
            </p:dialog>
        </h:form>

        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAddArticle" closeOnEscape="true"
                             message="Ce fournisseur ne possède pas cette article. Ajouter dans les articles du fournisseur?" header="Confirmation">
                <p:commandButton value="Oui" onclick="dlgConfirmAddArticle.hide();
                        dlgAddArticleFsseur.show()" global="false"/>
                <p:commandButton value="Non" actionListener="#{managedBonAchat.resetFicheArticle()}" oncomplete="dlgConfirmAddArticle.hide()" global="false"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.deleteBeanArticle()}" update=":main_bon_achat:data_contenu_bon_achat"
                                 oncomplete="dlgConfirmDeleteArticle.hide();collapseForm('contenu_bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticle.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDeleteArticle_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.deleteBeanArticle_()}" update=":main_bon_achat:data_contenu_bon_achat"
                                 oncomplete="dlgConfirmDeleteArticle_.hide();collapseForm('contenu_bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDeleteArticle_.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.deleteBean()}" oncomplete="dlgConfirmDelete.hide();collapseList('bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDelete.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmDelete_" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir supprimer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.deleteBean_()}" oncomplete="dlgConfirmDelete_.hide();collapseList('bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmDelete_.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog id="id_confirm_close_bca" hideEffect="explode" widgetVar="dlgConfirmClose" closeOnEscape="true"
                             message="Êtes-vous sûr de vouloir #{managedBonAchat.selectDoc.cloturer?'dévérrouiller':'vérrouiller'}?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.cloturer()}" oncomplete="dlgConfirmClose.hide()" update=":main_bon_achat:data_bon_achat"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmClose.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmAnnuler" closeOnEscape="true"
                             message="Cette facture a des livraisons inactives...l'annulation va les supprimer. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.annulerOrder_()}" oncomplete="dlgConfirmAnnuler.hide();collapseForm('bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmAnnuler.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmRefuser" closeOnEscape="true"
                             message="Cette facture a des livraisons inactives...l'annulation va les supprimer. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.refuserOrder_()}" oncomplete="dlgConfirmRefuser.hide();collapseForm('bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmRefuser.hide()"/>
            </p:confirmDialog>
            <p:confirmDialog hideEffect="explode" widgetVar="dlgConfirmSoumis" closeOnEscape="true"
                             message="La transmission de cet ordre va generer un bon de livraison. Continuer?" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.transmisOrder()}" oncomplete="dlgConfirmSoumis.hide();collapseForm('bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgConfirmSoumis.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog hideEffect="explode" widgetVar="dlgCleanAchat" closeOnEscape="true"
                             message="Cette action supprimera toutes les factures sans contenus... Elle est irreversible!" header="Confirmation">
                <p:commandButton value="Oui" actionListener="#{managedBonAchat.cleanAchat()}" oncomplete="dlgCleanAchat.hide();collapseForm('bon_achat');collapseForm('contenu_bon_achat')"/>
                <p:commandButton type="button"  value="Non" onclick="dlgCleanAchat.hide()"/>
            </p:confirmDialog>
        </h:form>
        <!-->
       *****************************************************************************
       Début du formulaire
       *****************************************************************************
       <-->
        <h:form prependId="false" id="main_bon_achat">    
            <div class="part_fix">
                <p:commandButton value="Enregistrer" id="save_bon_achat" actionListener="#{managedBonAchat.saveNew()}" update="entete_form_bon_achat"/>
                <p:commandButton value="Nouveau" id="cancel_bon_achat" global="false" actionListener="#{managedBonAchat.resetFiche()}" update="blog_form_bon_achat" oncomplete="collapseForm('bon_achat');collapseForm('contenu_bon_achat');collapseForm('cout_bon_achat');collapseForm('mensualite_bon_achat');collapseForm('reglement_bon_achat');"/>
                <p:commandButton value="Modifier" rendered="false" id="update_bon_achat" actionListener="#{managedBonAchat.updateBean()}" oncomplete="collapseForm('bon_achat');return false"/>
                <p:commandButton value="Supprimer" id="delete_bon_achat" onclick="dlgConfirmDelete.show()"/>
                <div style="float: right">
                    <h:link title="mode création" onclick="collapseForm('bon_achat');
                            collapseList('livraison_achat');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link title="vue liste" onclick="collapseList('bon_achat');
                            collapseList('livraison_achat');
                            return false" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>   
                </div>
            </div>
            <div class="part_scroll">
                <!-->
                 *****************************************************************************
                 Vue Formulaire
                 *****************************************************************************
                <-->
                <div class="yvs_form_bon_achat">
                    <p:outputPanel id="blog_form_bon_achat" style="width: 99%; margin: auto; background: white">
                        <h:panelGrid columns="1" style="width: 100%">
                            <p:outputPanel id="entete_form_bon_achat">
                                <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%;margin-bottom: -10px;margin-top: -10px" rendered="#{managedBonAchat.docAchat.update}">
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="float: left;font-size: large;background: black;color: white">                                            
                                        <span style="font-size: initial">Numéro : </span>
                                        <h:outputText id="txt_reference_document_bon_achat" value="#{managedBonAchat.docAchat.numDoc}"/>
                                    </h:panelGrid>
                                    <h:panelGroup style="padding: 7px;float: right; position: relative; margin-top: 1%">
                                        <p:outputPanel id="grp_btn_etat_bon_achat" styleClass="yvs_form_of"> 
                                            <p:commandLink value="Editable" styleClass="button-stateOF #{(managedBonAchat.docAchat.statut == constantes.ETAT_EDITABLE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedBonAchat.docAchat.statut == constantes.ETAT_VALIDE
                                                                       or managedBonAchat.docAchat.statut == constantes.ETAT_ANNULE)}" 
                                                           actionListener="#{managedBonAchat.annulerOrder()}"
                                                           process="@this" update="grp_btn_etat_bon_achat" global="false"/>                                 
                                            <p:commandLink value="Valider" styleClass="button-stateOF #{(managedBonAchat.docAchat.statut == constantes.ETAT_VALIDE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedBonAchat.docAchat.statut == constantes.ETAT_EDITABLE)}" 
                                                           actionListener="#{managedBonAchat.validerOrder()}"
                                                           process="@this" update="grp_btn_etat_bon_achat" global="false"/>
                                            <p:commandLink value="Annuler" styleClass="button-stateOF #{(managedBonAchat.docAchat.statut==constantes.ETAT_ANNULE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedBonAchat.docAchat.statut == constantes.ETAT_VALIDE)}" 
                                                           actionListener="#{managedBonAchat.refuserOrder()}"
                                                           process="@this" update="grp_btn_etat_bon_achat" global="false"/>
                                            <p:commandLink value="#{(managedBonAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'Soumis':'Soumettre'} #{(managedBonAchat.docAchat.statutLivre == constantes.ETAT_ENCOURS)?'(P)':(managedBonAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'':'(E)'}" styleClass="button-stateOF #{(managedBonAchat.docAchat.statutLivre == constantes.ETAT_LIVRE)?'button-stateOF_actif':''}" 
                                                           disabled="#{!(managedBonAchat.docAchat.statut == constantes.ETAT_VALIDE) or managedBonAchat.docAchat.statutLivre == constantes.ETAT_LIVRE}" 
                                                           onclick="dlgConfirmSoumis.show()"
                                                           process="@this" update="grp_btn_etat_bon_achat" global="false"/>
                                        </p:outputPanel>                                                
                                    </h:panelGroup>                                     
                                </h:panelGrid> 
                            </p:outputPanel>
                            <p:outputPanel style="width: 100%" id="form_bon_achat">
                                <div style="width: 60%;float: left">
                                    <p:outputPanel id="infos_document_bon_achat" style="width: 100%">
                                        <h:panelGrid id="infos_bon_achat" columns="2" styleClass="yvs_table" style="width: 100%" cellpadding="0" cellspacing="0">
                                            <f:facet name="header">
                                                <h:panelGrid columns="2" style="width: 100%" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">                                                        
                                                    <h:panelGroup style="float: left;margin-top: 2px">
                                                        <p:commandLink id="btnMontantsBCA" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;background: white" title="Montants">
                                                            <h:graphicImage library="icones" name="ico_facture2.png" width="15" height="15"/>  
                                                        </p:commandLink>
                                                    </h:panelGroup>
                                                </h:panelGrid>
                                            </f:facet>
                                            <h:outputText value="Fournisseur "/>                                                 
                                            <h:panelGroup id="select_fournisseur_facture_bca">
                                                <h:inputText value="#{managedBonAchat.docAchat.fournisseur.codeFsseur}" style="color: #{managedBonAchat.docAchat.fournisseur.error?'red':''}"
                                                             disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}">
                                                    <p:ajax event="blur" global="false" listener="#{managedBonAchat.searchFsseur()}" update="infos_bon_achat"/>
                                                </h:inputText>    
                                                <h:outputText value="#{managedBonAchat.docAchat.fournisseur.nom_prenom}" style="margin-left: 10px;color: #009999"/>
                                                <h:panelGroup style="float: right">
                                                    <p:commandButton icon="ui-icon-note" style="width: 20px;height: 22px" title="Liste Client" global="false"
                                                                     disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}"
                                                                     actionListener="#{managedBonAchat.initFsseurs()}" oncomplete="dlgListFournisseurs.show()"/> 
                                                </h:panelGroup>
                                            </h:panelGroup> 
                                            <span>Date Facture </span>
                                            <p:calendar value="#{managedBonAchat.docAchat.dateDoc}" pattern="dd-MM-yyyy" size="10" 
                                                        disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}"/>
                                            <span>Catégorie Comptable </span>
                                            <h:selectOneMenu value="#{managedBonAchat.docAchat.categorieComptable.id}" style="min-width: 120px"
                                                             disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}">
                                                <f:selectItem itemLabel="--" itemValue="0"/>
                                                <f:selectItems value="#{managedCatCompt.categoriesAchat}" var="cat" 
                                                               itemLabel="#{cat.designation}" itemValue="#{cat.id}" />  
                                                <p:ajax event="valueChange" global="false" listener="#{managedBonAchat.chooseCategorie()}"/>
                                            </h:selectOneMenu>  
                                            <span>Reference </span>
                                            <h:inputText value="#{managedBonAchat.docAchat.numPiece}" disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}" style="width: 100%"/>
                                            <f:facet name="footer">
                                                <span>Description </span>
                                                <h:inputTextarea value="#{managedBonAchat.docAchat.description}" style="width: 100%" rows="2" 
                                                                 disabled="#{managedBonAchat.docAchat.statut != constantes.ETAT_EDITABLE}"/>
                                            </f:facet>
                                        </h:panelGrid>
                                        <p:overlayPanel for="btnMontantsBCA" hideEffect="fade" style="width: 25%;background: black;color: white">
                                            <p:outputPanel id="blog_form_montant_doc_bca">
                                                <h:panelGrid columns="2" style="width: 100%;font-weight: bolder;margin-top: 5px;color: white">
                                                    <span>Total Taxe</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantTaxe}" converter="#{managedBonAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total HT</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantHT}" converter="#{managedBonAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total Remise Article</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantRemise}" converter="#{managedBonAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total TTC</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantTTC}" converter="#{managedBonAchat.converter}" style="color: #E9FBF9"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total Coûts.Suppl</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantCS}" converter="#{managedBonAchat.converter}" style="color: #E9FBF9"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total Facture</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantTotal}" converter="#{managedBonAchat.converter}"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Total Avance</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantAvance}" converter="#{managedBonAchat.converter}" style="color: #0099ff"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                    <span>Net A Payer</span>
                                                    <h:panelGroup style="float: right">
                                                        <h:outputText value="#{managedBonAchat.docAchat.montantNetApayer}" converter="#{managedBonAchat.converter}" style="color: #009999"/>
                                                        <span style="font-size: small"> Fcfa</span>
                                                    </h:panelGroup>
                                                </h:panelGrid>
                                            </p:outputPanel>
                                        </p:overlayPanel>
                                    </p:outputPanel>
                                </div>
                                <div style="width: 39%;margin-left: 61%">
                                    <h:panelGrid columns="2" styleClass="yvs_nostyle" style="width: 100%;background: #CCC" cellpadding="0" cellspacing="0">
                                        <b><span>Taxes</span></b>                                         
                                    </h:panelGrid>
                                    <p:dataTable id="data_taxes_bon_achat" value="#{managedBonAchat.docAchat.taxes}" var="tx" rowKey="#{tx.id}">
                                        <p:column headerText="Taxe" >
                                            <span>#{tx.designation}</span>
                                        </p:column>
                                        <p:column headerText="Montant" style="text-align: right;width: 35%">
                                            <h:outputText value="#{tx.taux}" converter="DNA"/>
                                            Fcfa
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </p:outputPanel>
                            <p:outputPanel id="blog_form_contenu_bon_achat">
                                <h:panelGrid class="headline_data" columns="2" styleClass="yvs_nostyle" style="width: 100%; font-size: 0.8em;cursor: pointer" onclick="slideZone()">
                                    <b><span> Contenus</span></b>
                                    <p:commandButton icon="ui-icon-circle-arrow-s" style="float: right;width: 20px;height: 20px;color: white;background:#FFF !important"
                                                     title="Ajouter contenu" onclick="slideZone()" type="button" rendered="false"/>
                                </h:panelGrid> 
                                <h:panelGrid id="form_contenu_bon_achat" columns="11" styleClass="yvs_nostyle" style="background: white;border: 2px solid #045491; border-radius: 5px;width: 100%" cellpadding="0" cellspacing="0">  
                                    <span>Article </span>       
                                    <h:panelGroup id="blog_article_bon_achat">
                                        <h:inputText value="#{managedBonAchat.contenu.article.refArt}" style="color: #{managedBonAchat.contenu.article.error?'red':''};width: 80%" disabled="#{managedBonAchat.contenu.update}">
                                            <p:ajax event="blur" global="false" listener="#{managedBonAchat.searchArticle()}" update="@this desc_contenu_bon_achat txt_prix_vente_bon_achat"/>
                                        </h:inputText>    
                                        <p:commandButton icon="ui-icon-note" style="float: right; width: 20px;height: 22px;background: white;margin-top: 5px" title="Liste Articles" global="false"
                                                         actionListener="#{managedBonAchat.initArticles()}" oncomplete="dlgListArticle.show()" disabled="#{managedBonAchat.contenu.update}"/>
                                    </h:panelGroup> 
                                    <span>Quantite </span>
                                    <pe:inputNumber value="#{managedBonAchat.contenu.quantiteCommende}" decimalPlaces="0" style="width: 50%;text-align: right">
                                        <p:ajax event="blur" global="false" listener="#{managedBonAchat.onQuantiteBlur()}" update="txt_prix_total_bon_achat"/>
                                    </pe:inputNumber>
                                    <span>Prix </span>
                                    <h:panelGroup id="txt_prix_vente_bon_achat">
                                        <h:inputText value="#{managedBonAchat.contenu.prixAchat}"  style="width: 50%;text-align: right" readonly="true"/>
                                        <span> Fcfa</span>
                                    </h:panelGroup>
                                    <span>Total </span>
                                    <h:panelGroup id="txt_prix_total_bon_achat">
                                        <h:inputText value="#{managedBonAchat.contenu.prixTotalRecu}" style="width: 50%;text-align: right" readonly="true" converter="#{managedBonAchat.converter}"/>
                                        <span> Fcfa</span>
                                    </h:panelGroup>
                                    <p:commandButton id="save_contenu_bon_achat" icon="ui-icon-circle-plus" style="width: 22px; height: 22px" oncomplete="collapseForm('contenu_bon_achat')"
                                                     update="blog_form_contenu_bon_achat" actionListener="#{managedBonAchat.saveNewArticle()}"/>
                                </h:panelGrid>
                                <p:outputPanel id="desc_contenu_bon_achat" style="position: relative;width: 100%;padding-top: -2px;padding-bottom: -3px">
                                    <h:panelGrid columns="2" style="font-size: 1.0em;width: 100%;background: #bcbcbf" rendered="#{managedBonAchat.selectArt}">
                                        <h:panelGroup>
                                            <span style="font-weight: bold;color: #009999">#{managedBonAchat.contenu.article.designation}</span>
                                            <span> acheté à </span>
                                            <h:outputText value="#{managedBonAchat.contenu.article.pua}" converter="#{managedBonAchat.converter}" style="font-weight: bold;color: #009999"/>
                                            <span>Fcfa  </span>
                                        </h:panelGroup>
                                        <h:panelGroup style="float: right">
                                            <h:outputText value="#{managedBonAchat.contenu.article.stock}" converter="#{managedBonAchat.converterStock}" style="font-weight: bold;color: #009999"/>
                                            <h:outputText value=" #{(managedBonAchat.contenu.article.uniteVente.libelle!=null)
                                                                    ?managedBonAchat.contenu.article.uniteVente.libelle:''}"/>
                                            <span> en stock</span>
                                        </h:panelGroup>
                                    </h:panelGrid>
                                </p:outputPanel>
                                <p:outputPanel>
                                    <h:inputHidden id="input_hide_contenu_bon_achat" value="#{managedBonAchat.tabIds_article}"/>
                                    <p:dataTable id="data_contenu_bon_achat" value="#{managedBonAchat.contenus}" var="artf" rowKey="#{artf.id}" 
                                                 rowIndexVar="artfIdx" selectionMode="single">
                                        <p:ajax event="rowSelect" global="false" listener="#{managedBonAchat.loadOnViewContenu}" oncomplete="collapseForm('contenu_bon_achat')" update=":main_bon_achat:form_contenu_bon_achat :main_bon_achat:desc_contenu_bon_achat"/>
                                        <p:ajax event="rowUnselect" global="false" listener="#{managedBonAchat.unLoadOnViewContenu}" oncomplete="collapseForm('contenu_bon_achat')" update=":main_bon_achat:form_contenu_bon_achat :main_bon_achat:desc_contenu_bon_achat"/>
                                        <p:column headerText="N°" width="30">
                                            <h:graphicImage library="img" name="redo.png" width="15" height="15" rendered="#{artf.new_}"/>
                                            <span title="Numéro Serie : #{artf.numSerie}">#{artfIdx+1}</span>
                                            <h:graphicImage title="En Retard de livraison" library="icones" name="alert.png" width="15" height="15" rendered="#{artf.retardLivraison}" style="float: right"/>  
                                        </p:column>
                                        <p:column headerText="Ref. " width="150">
                                            <span title="Numéro Serie #{artf.numSerie}">#{artf.article.refArt}</span>
                                            <h:graphicImage library="img" name="comment.png" width="15" height="15" rendered="#{artf.onComment}" style="float: right" title="a été commenté"/>
                                        </p:column>
                                        <p:column headerText="Article">
                                            <span title="Numéro Serie #{artf.numSerie}">#{artf.article.designation}</span>
                                        </p:column>
                                        <p:column headerText="Qté" width="80" style="text-align: center">
                                            <h:outputText value="#{artf.quantiteAttendu}" converter="#{managedBonAchat.converterStock}" title="Numéro Serie : #{artf.numSerie}"/>
                                        </p:column>
                                        <p:column headerText="Prix" style="text-align: right;width: 10%">
                                            <h:outputText value="#{artf.puaAttendu}" converter="#{managedBonAchat.converter}" title="Numéro Serie : #{artf.numSerie}"/>
                                        </p:column>
                                        <p:column headerText="Rem" style="text-align: right;width: 8%">
                                            <h:outputText value="#{artf.remiseAttendu}" converter="#{managedBonAchat.converter}" title="Numéro Serie : #{artf.numSerie}"/>
                                        </p:column>
                                        <p:column headerText="Total" style="text-align: right;width: 12%">
                                            <h:outputText value="#{artf.prixTotal}" converter="#{managedBonAchat.converter}" title="Numéro Serie : #{artf.numSerie}"/>
                                        </p:column>
                                        <p:column width="20" style="text-align: center">
                                            <p:contextMenu for="btn_option_contenu_bon_achat" event="left click" style="font-size: 0.8em">
                                                <p:menuitem value="Supprimer" icon="ui-icon-trash" global="false" actionListener="#{managedBonAchat.deleteBeanArticle_(artf)}" oncomplete="dlgConfirmDeleteArticle_.show()"/>
                                            </p:contextMenu>                           
                                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_contenu_bon_achat" type="button"/>
                                        </p:column> 
                                        <p:column width="25" style="text-align: center">
                                            <f:facet name="header">
                                                <h:selectBooleanCheckbox styleClass="chek_all_line_contenu_bon_achat" value="false"
                                                                         onclick="selectionAllLineTab(#{managedBonAchat.docAchat.contenus.size()}, 'contenu_bon_achat')">
                                                </h:selectBooleanCheckbox>
                                            </f:facet>
                                            <h:selectBooleanCheckbox value="#{artf.selectActif}" styleClass="chek_line_contenu_bon_achat" 
                                                                     onclick="selectionLineTab(#{artf.id}, 'contenu_bon_achat')">
                                            </h:selectBooleanCheckbox>
                                        </p:column>
                                    </p:dataTable>
                                    <p:commandButton id="delete_contenu_bon_achat" value="Supprimer" style="float: right" rendered="false"
                                                     onclick="dlgConfirmDeleteArticle.show()"/>
                                </p:outputPanel>
                            </p:outputPanel>                                                                         
                            <br/>
                            <h:panelGrid columns="2" rendered="#{managedBonAchat.docAchat.update}" styleClass="yvs_nostyle"
                                         style="float: right;font-style: italic">
                                <span>Date Edition : </span>
                                <h:outputText value="#{managedBonAchat.docAchat.dateSave}" converter="DATETIME"/>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:outputPanel>
                </div>
                <!-->
                 *****************************************************************************
                 Vue Liste
                 *****************************************************************************
                <-->
                <div class="yvs_list_bon_achat" style="width: 99%; margin: auto; background: white">
                    <div class="part_list">
                        <h:inputHidden id="input_hide_bon_achat" value="#{managedBonAchat.tabIds}"/>
                        <p:dataTable id="data_bon_achat" value="#{managedBonAchat.documents}" var="bon" rowKey="#{bon.id}" 
                                     rowIndexVar="bonIdx" selectionMode="single">
                            <p:ajax event="rowSelect" global="false" listener="#{managedBonAchat.loadOnView}"  oncomplete="collapseForm('bon_achat');collapseForm('contenu_bon_achat');collapseForm('mensualite_bon_achat');collapseForm('cout_bon_achat')"/>
                            <p:column width="30" headerText="N°" styleClass="statut_#{bon.statut}">
                                <h:graphicImage title="Cloturer" library="img" name="blocked.png" width="15" height="15" rendered="#{bon.cloturer}"/>     
                                <span>#{bonIdx+1}</span>
                                <h:graphicImage title="Validation Incomplete" library="icones" name="alert.png" width="15" height="15" rendered="#{bon.validIncomplet}" style="float: right"/>  
                            </p:column>
                            <p:column headerText="Reference" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.numDoc}</span>
                                <h:panelGroup style="float: right">
                                    <h:outputText title="Facture Reglée" value="R" rendered="#{bon.statutRegle == constantes.ETAT_REGLE}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                    <p:spacer width="2" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"/>
                                    <h:outputText title="Facture Livrée" value="L" rendered="#{bon.statutLivre == constantes.ETAT_LIVRE}"
                                                  style="font-weight: bold;border: 2px solid #666; border-radius: 5px;padding: 2px;background: black;color: white"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column headerText="Date Facture" style="text-align: center;width: 12%" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.dateDoc}" converter="DDMMYYYY"/>
                            </p:column>
                            <p:column headerText="Fournisseur" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.fournisseur.tiers.nom_prenom}"/>
                            </p:column>
                            <p:column headerText="Mode Reglement" styleClass="statut_#{bon.statut}">
                                <h:outputText value="#{bon.modelReglement.reference}"/>
                            </p:column>
                            <p:column headerText="Catégorie" style="width: 18%" styleClass="statut_#{bon.statut}">
                                <span>#{bon.categorieComptable.designation}</span>
                            </p:column>
                            <p:column headerText="Etapes"  width="60" styleClass="statut_#{bon.statut}" style="font-size: 0.8em">
                                <h:outputText value="#{bon.libEtapes}" />
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <p:commandLink global="false">
                                    <h:graphicImage title="Imprimer" library="img" name="pdf.png" width="15" height="15"/>                                        
                                </p:commandLink>
                            </p:column>
                            <p:column width="20" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <p:contextMenu for="btn_option_bon_achat" event="left click" style="font-size: 0.8em">
                                    <p:menuitem icon="ui-icon-carat-2-e-w" value="Equilibrer Statut" actionListener="#{managedBonAchat.equilibre(bon)}" global="false" update=":main_bon_achat:data_bon_achat"/>
                                    <p:menuitem value="#{bon.cloturer?'Dévérrouiller':'Vérrouiller'}" icon="#{bon.cloturer?'ui-icon-unlocked':'ui-icon-locked'}" 
                                                global="false" actionListener="#{managedBonAchat.cloturer(bon)}" oncomplete="dlgConfirmClose.show()"/>
                                    <p:menuitem value="Supprimer" icon="ui-icon-trash" global="false" actionListener="#{managedBonAchat.deleteBean_(bon)}" oncomplete="dlgConfirmDelete_.show()"/>
                                </p:contextMenu>                           
                                <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="btn_option_bon_achat" type="button"/>
                            </p:column> 
                            <p:column width="25" style="text-align: center" styleClass="statut_#{bon.statut}">
                                <f:facet name="header">
                                    <h:selectBooleanCheckbox styleClass="chek_all_line_bon_achat" value="false"
                                                             onclick="selectionAllLineTab(#{managedBonAchat.documents.size()}, 'bon_achat')">
                                    </h:selectBooleanCheckbox>
                                </f:facet>
                                <h:selectBooleanCheckbox  value="#{bon.selectActif}" styleClass="chek_line_bon_achat"
                                                          onclick="selectionLineTab(#{bon.id}, 'bon_achat')">
                                </h:selectBooleanCheckbox>
                            </p:column>
                        </p:dataTable>      
                        <span class="nbSelectbon_achat" style="font-size: .8em; font-style: italic; color: #828c95;"></span>
                        <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                            <p:commandButton actionListener="#{managedBonAchat.init(false)}" global="false" update="data_bon_achat" icon="ui-icon-circle-triangle-w" disabled="#{managedBonAchat.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{managedBonAchat.paginator.currentPage}/#{managedBonAchat.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{managedBonAchat.init(true)}" global="false" update="data_bon_achat" icon="ui-icon-circle-triangle-e" disabled="#{managedBonAchat.paginator.disNext}"/>
                            <p:selectOneMenu value="#{managedBonAchat.imax}" label="Nombre max Résultat" valueChangeListener="#{managedBonAchat.choosePaginator}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                                <f:selectItems value="#{managedBonAchat.paginations}"/>
                                <p:ajax event="valueChange"  update="data_bon_achat"/>
                            </p:selectOneMenu>
                        </p:outputPanel>        
                    </div>                             
                </div> 
                <!-->
                 *****************************************************************************
                 Vue Grid
                 *****************************************************************************
                <-->
                <div class="yvs_grid_bon_achat">

                </div>
                <!-->
                 *****************************************************************************
                 Vue Tab
                 *****************************************************************************
                <-->
                <div class="yvs_tab_bon_achat">

                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false" style="background: #CCC">            
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative; bottom: -20px" width="20" height="20"
                            styleClass="img_slide" title="cacher"/>  
            <div class="zone_find">
                <h:panelGrid columns="2" style="width: 100%" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="2" style="font-size: 1.0em" cellpadding="0" cellspacing="0">
                        <h:panelGrid columns="5" style="float: left; font-size: 0.8em" cellpadding="0" cellspacing="0">
                            <h:outputText value="Date" />
                            <h:outputText value="Statut" />
                            <h:outputText value="Cloturer" />
                            <h:outputText value="Reference" />
                            <span>&nbsp;</span>
                            <h:panelGrid columns="2" style="font-size: 0.8em;margin-top: 3px" styleClass="yvs_nostyle" cellpadding="0" cellspacing="0">
                                <h:selectBooleanCheckbox value="#{managedBonAchat.date_}" style="margin-top: 2px;float: right">
                                    <p:ajax event="valueChange" listener="#{managedBonAchat.chooseDateSearch()}" global="false" update="blog_date_search_bon_achat :main_bon_achat:data_bon_achat"/>
                                </h:selectBooleanCheckbox>
                                <h:panelGrid columns="2" style="float: right;margin-top: 3px">
                                    <h:panelGroup id="blog_date_search_bon_achat">
                                        <p:calendar value="#{managedBonAchat.dateDebut_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedBonAchat.date_}" size="10" style="font-size: 0.8em">
                                            <p:ajax event="dateSelect" listener="#{managedBonAchat.chooseDateSearch()}" global="false" update=":main_bon_achat:data_bon_achat"/>
                                        </p:calendar>
                                        <p:spacer width="5px" style="background: black"/>
                                        <p:calendar value="#{managedBonAchat.dateFin_}" navigator="true" pattern="dd-MM-yyyy" disabled="#{!managedBonAchat.date_}" size="10" style="font-size: 0.8em">
                                            <p:ajax event="dateSelect" listener="#{managedBonAchat.chooseDateSearch()}" global="false" update=":main_bon_achat:data_bon_achat"/>
                                        </p:calendar>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </h:panelGrid>
                            <h:selectOneMenu value="#{managedBonAchat.statut_}" valueChangeListener="#{managedBonAchat.chooseStatut}" style="min-width: 120px">
                                <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                                <f:selectItem itemLabel="EDITABLE" itemValue="#{constantes.ETAT_EDITABLE}"/>
                                <f:selectItem itemLabel="ANNULER" itemValue="#{constantes.ETAT_ANNULE}"/>
                                <f:selectItem itemLabel="VALIDER" itemValue="#{constantes.ETAT_VALIDE}"/>
                                <p:ajax event="valueChange" global="false" update=":main_bon_achat:data_bon_achat" oncomplete="collapseList('bon_achat')"/>
                            </h:selectOneMenu>
                            <h:selectOneMenu value="#{managedBonAchat.cloturer_}" valueChangeListener="#{managedBonAchat.chooseCloturer}" style="min-width: 120px">
                                <f:selectItem itemLabel="TOUT" itemValue="#{null}"/>
                                <f:selectItem itemLabel="OUI" itemValue="#{true}"/>
                                <f:selectItem itemLabel="NON" itemValue="#{false}"/>
                                <p:ajax event="valueChange" global="false" update=":main_bon_achat:data_bon_achat" oncomplete="collapseList('bon_achat')"/>
                            </h:selectOneMenu>
                            <h:inputText value="#{managedBonAchat.numSearch_}">
                                <p:ajax event="keyup" global="false" listener="#{managedBonAchat.searchTranferts()}" oncomplete="collapseList('bon_achat')" update=":main_bon_achat:data_bon_achat"/>
                            </h:inputText>
                        </h:panelGrid>
                        <p:commandLink global="false" onclick="dlgPlusOptions.show()" style="border: 2px solid #666; border-radius: 5px;padding: 2px;font-size: 0.8em"
                                       value="Plus Option" rendered="false"/>
                    </h:panelGrid>
                    <h:panelGroup style="float: right">
                        <p:commandLink onclick="dlgCleanAchat.show()" global="false" style="border: 2px solid black; border-radius: 5px;padding: 3px;" 
                                       title="Nettoyage Stock">
                            <h:graphicImage library="img" name="clean.png" width="15" height="18"/>  
                        </p:commandLink>
                    </h:panelGroup>
                </h:panelGrid>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
