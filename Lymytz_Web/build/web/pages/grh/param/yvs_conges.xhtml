<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<ui:composition template="./../../../WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="breadcumb">
        #{navigations.naviguationApps('Congés','modRh', 'smenConge', true, managedConges)}
    </ui:define>    
    <ui:define name="contents">  
        #{MEmps.loadSimpleAllEmployes(true, true)}        
        #{managedConges.loadAll()}
        #{managedExercice.loadAllExreciceActif(true)}
        <script type="text/javascript">
            $(function() {
//                $('body').find('.part_scroll').height($('body').height() - $('body').find('.part_fix').height() - $('body').find('.zone_find').height() - 120);
                $('body').find('.part_scroll').height($('body').height() - $('body').find('#top').height() - $('body').find('.zone_find').height() - $('body').find('.part_fix').height() - $('body').find('#bottom').height() - 30);
                collapseForm('conges');
                initRegle_();
            });
        </script> 

        <h:form prependId="false">
            <p:dialog header="Correction des congés sans numero" modal="true" closeOnEscape="true" widgetVar="dlgCorrectionNumero" footer="&copy;Lymytz 2014"> 
                <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                    <h:outputText value="Date début"/>
                    <h:outputText value="Date fin"/>
                    <h:outputText value=""/>
                    <p:calendar value="#{managedConges.dateDebutCorrection}" navigator="true" size="8" pattern="dd-MM-yyyy" >
                        <p:ajax global="false" event="dateSelect" />
                    </p:calendar>
                    <p:calendar value="#{managedConges.dateFinCorrection}" navigator="true" size="8" pattern="dd-MM-yyyy" >
                        <p:ajax global="false" event="dateSelect" />
                    </p:calendar>
                    <p:commandButton icon="ui-icon-check" value="Executer" actionListener="#{managedConges.correctionNumero()}" oncomplete="dlgCorrectionNumero.hide()"/>
                </h:panelGrid>
            </p:dialog>            
        </h:form>
        <!-->
        *****************************************************************************
        Boite de dialogue des entetes de achat
        *****************************************************************************
        <-->  
        <h:form prependId="false">
            <p:dialog header="#{lab.L_plus_option}" width="40%"  closeOnEscape="true" widgetVar="dlgPlusOption" resizable="false"> 
                <h:panelGrid id="blog_more_conge_emps" columns="2" style="width: 100%" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                    <h:outputText value="#{lab.LRH_PCP_nature}" />
                    <h:selectOneMenu value="#{managedConges.filterNature}" valueChangeListener="#{managedConges.addParamNature}" style="width: 100%">
                        <f:selectItem itemValue="#{null}" itemLabel="--#{lab.LRH_PCP_nature}..." noSelectionOption="true"/>
                        <f:selectItem itemValue="#{'C'}" itemLabel="#{lab.LRH_PCP_conges}" />
                        <f:selectItem itemValue="#{'P'}" itemLabel="#{lab.LRH_PCP_permisison}" />
                        <p:ajax event="valueChange"   update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                    </h:selectOneMenu>
                    <h:outputText value="#{lab.LRH_PCP_effet}" />
                    <h:selectOneMenu value="#{managedConges.effetF}"  valueChangeListener="#{managedConges.addParamEffet}" style="width: 100%">
                        <f:selectItem itemValue="#{null}" itemLabel="--#{lab.LRH_PCP_effet}..." noSelectionOption="true"/>
                        <f:selectItem itemValue="CONGE ANNUEL" itemLabel="#{lab.LRH_PCP_conge_annuel}" />                       
                        <f:selectItem itemValue="SALAIRE" itemLabel="#{lab.LRH_PCP_salaire}" />
                        <f:selectItem itemValue="AUTORISE" itemLabel="#{lab.LRH_PCP_autorise}" />
                        <f:selectItem itemValue="SPECIALE" itemLabel="#{lab.LRH_PCP_speciale}" />                         
                        <p:ajax event="valueChange" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                    </h:selectOneMenu>
                    <h:outputText value="Ids"/>
                    <h:inputText value="#{managedConges.idsSearch}" style="width: 100%" title="#{lab.L_entrer_id_separer_virgules}">
                        <p:ajax event="valueChange" listener="#{managedConges.addParamIds()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"/>
                    </h:inputText>
                </h:panelGrid>
                <f:facet name="footer" class="yvs-dialog-footer">
                    #{lab.L_copy} 
                </f:facet> 
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_ppte_valid_conge">
            <p:dialog header="#{lab.LC_PA_propriete_validation}" widgetVar="dlgppteValid" width="60%" >
                <p:dataTable value="#{conges.etapesValidations}" var="iValid" id="table_ppte_valid_conge">
                    <p:column headerText="#{lab.LC_PA_etapes}" >#{iValid.etape.labelStatut}</p:column>
                    <p:column headerText="#{lab.LC_PA_valide_par}" >
                        <h:outputText value="#{iValid.author.users.nomUsers}" rendered="#{iValid.etapeValid or iValid.motif != null}" />
                    </p:column>
                    <p:column headerText="#{lab.L_dates} " style="text-align: center">
                        <h:outputText value="#{iValid.dateUpdate}" converter="DATETIME" rendered="#{iValid.etapeValid}"/>
                    </p:column>
                    <p:column headerText="#{lab.LC_PA_motif} " >
                        <h:outputText value="#{managedConges.resumeText(iValid.motif)}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="main-motif_etape_conge">
            <p:dialog hideEffect="explode" widgetVar="dglMotifCancelEtape" closeOnEscape="true" header="#{lab.LC_PA_motif_annulation_etape}" width="35%">
                <h:panelGrid id="value_motif_etape_conge" columns="1" cellpadding="0" cellspacing="0" style="width: 100%">
                    <h:inputTextarea value="#{managedConges.motifEtape}" style="width: 100%" rows="4"/>                
                    <f:facet name="footer">
                        <p:commandButton value="#{lab.L_enregistrer}" actionListener="#{managedConges.annulEtapeOrdre()}" oncomplete="dglMotifCancelEtape.hide();" style="float: right" rendered="#{!managedConges.lastEtape}"
                                         update=":form_body_conge:etapes_valide_conges :form_body_conge:table_listConge"/>
                    </f:facet>
                </h:panelGrid>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:dialog header="#{lab.LC_PFV_status}" widgetVar="dlgMoreStatuts" modal="true" closeOnEscape="true">                 
                <p:selectManyMenu value="#{managedConges.statuts}" showCheckbox="true" style="min-width: 120px;size: 20px">
                    <f:selectItem itemLabel="#{lab.L_tout}" itemValue="#{null}"/>
                    <f:selectItem itemLabel="#{lab.LC_PA_attente}" itemValue="#{constantes.ETAT_EDITABLE}"/>
                    <f:selectItem itemLabel="#{lab.L}" itemValue="#{constantes.ETAT_ANNULE}"/>
                    <f:selectItem itemLabel="#{lab.L_en_cours}" itemValue="#{constantes.ETAT_ENCOURS}"/>
                    <f:selectItem itemLabel="#{lab.L_valider}" itemValue="#{constantes.ETAT_VALIDE}"/>
                    <f:selectItem itemLabel="#{lab.L_terminer}" itemValue="#{constantes.ETAT_SOUMIS}"/>
                    <p:ajax event="valueChange" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" listener="#{managedConges.chooseStatuts()}"/>
                </p:selectManyMenu>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_form_param_duree">
            <p:dialog header="#{lab.LRH_PCP_duree_conge}" widgetVar="dlgParamDuree" closeOnEscape="true" modal="true"
                      styleClass="dlg_panel">
                <div align="center">Eclater la durée du congé pour préciser les détail</div>
                <h:panelGrid columns="1" styleClass="yvs_table" style="width: 99%; margin: auto" 
                             cellpadding="0" cellspacing="0" id="formParamDuree">
                    <span>#{lab.LRH_PCP_principal}</span>
                    <pe:inputNumber value="#{managedConges.dureeP}" decimalPlaces="0" style="width: 80px"/>
                    <span>#{lab.LRH_PCP_majoration}</span>
                    <pe:inputNumber value="#{managedConges.dureeSup}" decimalPlaces="0" style="width: 80px"/>
                    <span>#{lab.LRH_PCP_permisisons}</span>
                    <pe:inputNumber value="#{managedConges.dureePerm}" decimalPlaces="0" style="width: 80px"/>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_appliquer}" style="float: right" actionListener="#{managedConges.applyParamDuree()}" iconPos="right"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false" id="form_form_susp">
            <p:confirmDialog widgetVar="dlgConfirmCloture" message="#{lab.LRH_PCP_cloturer_conge}" header="#{lab.LC_PRS_terminer} !">
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedConges.suspendreOrdreConge(true)}" icon="ui-icon-check" oncomplete="dlgConfirmCloture.hide()" update=":form_body_conge:etapes_valide_conges :form_body_conge:form_main_conge"/>
                <p:commandButton value="#{lab.L_non}" oncomplete="dlgConfirmCloture.hide()" actionListener="#{managedConges.suspendreOrdreConge(false)}" icon="ui-icon-circle-close" update=":form_body_conge:etapes_valide_conges :form_body_conge:form_main_conge" />
            </p:confirmDialog>            
            <p:dialog header="#{lab.LRH_PCP_interrompre_conge}" widgetVar="dlgSuspenConge" closeOnEscape="true" modal="true"
                      >
                <div align="center">#{lab.LRH_PCP_text}</div>
                <h:panelGrid columns="1" styleClass="yvs_table" style="width: 99%; margin: auto" cellpadding="0" cellspacing="0">
                    <span>#{lab.LRH_PC_motif_suspension}</span>
                    <h:inputTextarea rows="3" style="width: 99%" value="#{conges.motifSuspension}" />
                    <h:panelGroup >
                        <span>#{lab.LRH_PCP_nouvelle_date_fin}</span>
                        <p:calendar value="#{conges.dateSuspension}" pattern="dd-MM-yyyy" size="8" />
                    </h:panelGroup>
                </h:panelGrid>
                <p:commandButton value="#{lab.L_suspendre}" style="float: right" type="button" onclick="dlgConfirmCloture.show()" icon="ui-icon-bullet" iconPos="right"/>
            </p:dialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog message="#{lab.LRH_PCP_supprimer_conges}" header="#{lab.LRH_PCP_supprimer_des_conges}" widgetVar="dlgDelCnnge" width="25%">

                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedConges.deleteConge()}" oncomplete="dlgDelCnnge.hide()"
                                 icon="ui-icon-circle-check" update=":form_body_conge:table_listConge"/>
                <p:commandButton value="#{lab.L_non}" onclick="dlgDelCnnge.hide()" icon="ui-icon-circle-close" type="button"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog message="#{lab.LRH_PCP_supprimer_conges}" header="#{lab.LRH_PCP_supprimer_des_conges}" widgetVar="dlgDelConge_" width="25%">

                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedConges.deleteBean()}" oncomplete="dlgDelConge_.hide()"
                                 icon="ui-icon-circle-check" update=":form_body_conge:table_listConge :form_body_conge:form_main_conge :form_body_conge:etapes_valide_conges"/>
                <p:commandButton value="#{lab.L_non}" onclick="dlgDelConge_.hide()" icon="ui-icon-circle-close" type="button"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog message="#{lab.LRH_PCP_text1} "
                             header="#{lab.LRH_PCP_annuler_etapes_validations}" widgetVar="dlgCancelValidC" >

                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedConges.cancelOrdreMission(true)}" icon="ui-icon-circle-check"
                                 oncomplete="dlgCancelValidC.hide()" update=":form_body_conge:etapes_valide_conges"/>
                <p:commandButton value="#{lab.L_non}" onclick="dlgCancelValidC.hide()" icon="ui-icon-circle-close" type="button"/>
            </p:confirmDialog>
        </h:form>          
        <h:form prependId="false">
            <p:confirmDialog message="#{lab.LRH_PCP_text2} "
                             header="#{lab.LRH_PCP_annuler_etapes_validations}" widgetVar="dlgCancelValidC_" >
                <p:selectBooleanCheckbox value="#{managedConges.onlyReinit}" itemLabel="#{lab.LRH_PCP_reinitialiser_chaine_validation}" />
                <br />
                <p:commandButton value="#{lab.L_oui}" actionListener="#{managedConges.cancelOrdreMission(true)}" icon="ui-icon-circle-check"
                                 oncomplete="dlgCancelValidC_.hide()" update=":form_body_conge:etapes_valide_conges"/>
                <p:commandButton value="#{lab.L_non}" onclick="dlgCancelValidC_.hide()" icon="ui-icon-circle-close" type="button"/>
            </p:confirmDialog>
        </h:form>          
        <h:form prependId="false" id="form-conge-01"> 
            <p:confirmDialog widgetVar="dlgnotsave"  closeOnEscape="true" 
                             message="#{lab.LRH_PCP_text3}">
                <p:commandButton value="Ok " onclick="dlgnotsave.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false">
            <p:confirmDialog widgetVar="dlgupdateconge"  closeOnEscape="true" 
                             message="#{lab.LRH_PCP_text4}">
                <p:commandButton value="#{lab.L_oui} " actionListener="#{managedConges.updateBean()}" oncomplete="dlgupdateconge.hide()"/>
                <p:commandButton value="#{lab.L_non} " onclick="dlgupdateconge.hide()"/>
            </p:confirmDialog>
        </h:form>
        <h:form prependId="false" id="form_dlg_empConge">
            <p:dialog header="#{lab.LDB_PCB_liste_employes_actif}" widgetVar="dlgEmploye" width="80%" height="500"
                      closeOnEscape="true" modal="true">
                <div class="dlg_part_fixe" >
                    <div style="float: right">                            
                        <p:outputPanel  autoUpdate="true">
                            <h:selectOneMenu value="#{managedConges.agence_}" valueChangeListener="#{MEmps.addParamAgence}" >
                                <f:selectItem itemValue="0" itemLabel="" noSelectionOption="true"/>
                                <f:selectItems value="#{managedConges.currentScte.agences}" var="itemA" itemValue="#{itemA.id}" itemLabel="#{itemA.designation}" />
                                <f:selectItem itemValue="-1" itemLabel="#{lab.LDB_PCB_toutes_societe}" />
                                <p:ajax event="valueChange" update=":form_dlg_empConge:tabEmployes-conge  "/>
                            </h:selectOneMenu>
                            <p:commandButton actionListener="#{MEmps.pagineResult(false)}" update=":form_dlg_empConge:tabEmployes-conge  " icon="ui-icon-circle-triangle-w" disabled="#{MEmps.paginator.disPrev}"/>
                            <p:outputPanel ><p:outputLabel value="#{MEmps.paginator.currentPage} / #{MEmps.paginator.nbPage}" style="margin-top: 0px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                            <p:commandButton actionListener="#{MEmps.pagineResult(true)}" update=":form_dlg_empConge:tabEmployes-conge  " icon="ui-icon-circle-triangle-e" disabled="#{MEmps.paginator.disNext}"/>
                            <p:selectOneMenu value="#{MEmps.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{MEmps.changeMaxResult}" 
                                             style="font-size: 0.9em;min-width: 50px; top: 10px; position: relative" >
                                <f:selectItems value="#{MEmps.paginations}"/>
                                <p:ajax event="valueChange" update=":form_dlg_empConge:tabEmployes-conge  "/>
                            </p:selectOneMenu>
                        </p:outputPanel>                         
                    </div>
                    <h:panelGrid columns="1" >                                                               
                        <p:inputText value="#{MEmps.matriculeToUpdate}">
                            <p:ajax event="valueChange" listener="#{MEmps.findEmploye(MEmps.matriculeToUpdate)}" global="false"
                                    update=":form_dlg_empConge:tabEmployes-conge  "/>
                        </p:inputText>
                    </h:panelGrid>
                </div>
                <div style="clear: right" class="dlg_part_scroll">
                    <div class="yvs_list_employeConge">
                        <p:dataTable value="#{MEmps.listEmployes}" var="emp" rowKey="#{emp.id}" rowIndexVar="lineEMps"
                                     widgetVar="tabEmployes" id="tabEmployes-conge" selectionMode="single" >                    
                            <p:ajax event="rowSelect" listener="#{managedConges.choixEmploye}" global="false" process="@this" update=":form_body_conge:etapes_valide_conges :form_body_conge:form_main_conge"
                                    oncomplete="dlgEmploye.hide();"/>                   
                            <p:column headerText="N°" width="15">
                                <h:outputText value="#{lineEMps+1}" />
                            </p:column>
                            <p:column headerText="#{lab.L_noms_prenoms}" width="300">
                                <h:outputText value="#{emp.nom} #{emp.prenom}" />
                            </p:column>                                     
                            <p:column headerText="#{lab.LCF_PSL_matricule}" width="100" style="text-align: center">
                                <h:outputText value="#{emp.matricule}" />
                            </p:column>
                            <p:column headerText="#{lab.LDB_PCB_poste}" width="200">
                                <h:outputText value="#{emp.posteActif.intitule}"  />
                            </p:column>                    
                            <p:column headerText="#{lab.L_actif}" style="text-align: center" width="20">
                                <h:graphicImage  library="img" name="#{(emp.actif)?'yes.png':'no.png'}"  style="width: 10px; height: 10px" />
                            </p:column>
                        </p:dataTable>
                    </div>                     
                </div>
                <f:facet name="footer">                    
                    <h:outputText value="&copy; Lymytz 2014" escape="true" />                    
                </f:facet>
            </p:dialog> 
        </h:form>                  
        <h:form prependId="false" id="form_body_conge">              
            <div id="part-conge-btn" class="part_fix" style="overflow-y: hidden">
                <h:panelGrid columns="3" style="float: left">
                    <p:splitButton value="#{lab.L_enregistrer}" styleClass="conge_btnSave" id="save_conges" icon="ui-icon-disk"
                                   actionListener="#{managedConges.addConge}" update=":form_body_conge:table_listConge etapes_valide_conges" >
                        <p:menuitem value="#{lab.LRH_PCP_enregistrer_nouveau}" styleClass="conge_btnSave" id="other_conges" icon="ui-icon-disk"
                                    actionListener="#{managedConges.saveNew(true)}" update="form_main_conge etapes_valide_conges" />
                        <p:menuitem value="#{lab.L_nouveau}"  styleClass="conge_btnCancel" id="cancel_conges" 
                                    actionListener="#{managedConges.resetView()}" icon="ui-icon-document"
                                    update="form_main_conge etapes_valide_conges"/>
                        <p:separator />
                        <p:menuitem value="#{lab.L_telecharger}" icon="ui-icon-arrowthickstop-1-s" ajax="false" actionListener="#{managedConges.exportOrdreMission()}"  />
                        <p:separator />
                        <p:menuitem value="#{lab.L_supprimer}" global="false"  update=":form_body_conge:table_listConge"
                                    styleClass="conge_btnDelete" onclick="dlgDelCnnge.show()"/> 
                    </p:splitButton>
                    <p:splitButton type="button" value="Options" style="font-size: 0.8em">
                        <p:menuitem value="#{lab.LRH_PCP_a_cloturer} (#{managedConges.congeAcloture})" icon="ui-icon-alert" actionListener="#{managedConges.loadCongeAcloturer()}" update=":form_body_conge:table_listConge" 
                                    oncomplete="collapseList('conges');"/>
                    </p:splitButton>
                    <p:commandButton value="#{lab.L_supprimer}" type="button" id="delete_conges" update=":form_body_conge:table_listConge"
                                     styleClass="conge_btnDelete" onclick="dlgDelCnnge.show()"/>                                          
                </h:panelGrid>         
                <div columns="4" style="float: right">                          
                    <h:link title="#{lab.L_mode_creation}" onclick="collapseForm('conges');
                            return false">
                        <p:graphicImage library="icones" name="newDoc.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>               
                    <p:spacer />
                    <h:link  onclick="collapseList('conges');
                            return false" title="#{lab.L_mode_liste}" >
                        <p:graphicImage library="icones" name="ico_formulaire.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>
                    <p:spacer />
                    <h:link  onclick="collapseGrid('conges');
                            return false" title="#{lab.LRH_PCP_vue_calendrier}" >
                        <p:graphicImage library="icones" name="ico_calendar.png" width="18" height="25" style="border: 2px solid #666; border-radius: 5px;"/>
                    </h:link>       
                    <h:panelGroup style="float: right">
                        <p:commandButton actionListener="#{managedConges.parcoursInAllResult(false)}" 
                                         update="txt_parc_linear_conges :form_body_conge:form_main_conge :form_body_conge:etapes_valide_conges"  icon="ui-icon-circle-triangle-w" oncomplete="collapseForm('conges')"/>
                        <h:inputText value="#{managedConges.offset}" style="width: 35px; text-align: center;"  title="#{lab.L_aller_au}" id="txt_parc_linear_conges"/>
                        <p:outputPanel autoUpdate="true">                        
                            <p:outputLabel value="/#{managedConges.paginator.nbResult}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" /></p:outputPanel>
                        <p:commandButton actionListener="#{managedConges.parcoursInAllResult(true)}" update="txt_parc_linear_conges :form_body_conge:form_main_conge :form_body_conge:etapes_valide_conges"
                                         icon="ui-icon-circle-triangle-e" oncomplete="collapseForm('conges')"/>                        
                    </h:panelGroup> 
                </div>   
                <h:inputHidden id="input_hide_conges" value="#{managedConges.chaineSelect}" />
                <br  style="clear: both"/>                                             
            </div> 
            <div class="part_scroll">
                <!-->
                **************FORMULAIRE******************
                <-->
                <div class="yvs_form_conges">                     
                    <p:outputPanel style="width: 95%; margin: auto;" id="etapes_valide_conges"> 
                        <h:panelGrid columns="2" styleClass="yvs_nostyle" rendered="#{conges.idConge gt 0}" style="float: left;font-size: large;background: black;color: white;margin-top: -5px">                                            
                            <span style="font-size: initial">#{lab.L_numero} : </span>
                            <h:outputText id="txt_reference_conge_employe" value="#{conges.referenceConge}"/>
                        </h:panelGrid>   
                        <h:panelGroup style="float: right;margin-top: 5px">
                            <ui:repeat value="#{conges.etapesValidations}" var="etapeM">
                                <p:contextMenu for="etape_valide_conge" style="font-size: 0.7em" rendered="#{etapeM.etapeValid or etapeM.motif != null}">
                                    <p:menuitem icon="ui-icon-newwin" value="#{lab.LC_PA_proprietes}" title="#{lab.LC_PA_voir_proprietes_validations}" oncomplete="dlgppteValid.show()" rendered="#{etapeM.etapeValid}"
                                                update=":form_ppte_valid_conge:table_ppte_valid_conge"/>
                                    <p:menuitem icon="ui-icon-clipboard" value="#{lab.LC_PFA_motif_annulation}" title="#{lab.LC_PA_voir_motif_annulation}" oncomplete="dglMotifCancelEtape.show()" rendered="#{etapeM.motif != null}"
                                                update=":main-motif_etape_conge:value_motif_etape_conge" actionListener="#{managedConges.motifEtapeOrdre(etapeM.motif, true)}"/>
                                    <p:separator rendered="#{etapeM.etapeValid}"/>
                                    <p:menuitem icon="ui-icon-circle-arrow-w" value="Annuler" oncomplete="dglMotifCancelEtape.show()" rendered="#{etapeM.etapeValid}"
                                                update=":main-motif_etape_conge:value_motif_etape_conge" actionListener="#{managedConges.annulEtapeOrdre(etapeM, false)}"/>
                                </p:contextMenu>
                                <p:commandLink id="etape_valide_conge" value="#{etapeM.etape.labelStatut}" disabled="#{(!etapeM.etapeActive or etapeM.etapeValid)}" title="#{etapeM.etape.titreEtape}" update=":form_body_conge:etapes_valide_conges :form_body_conge:table_listConge"
                                               styleClass="#{(etapeM.etapeValid)?'statu_valide':'etat_formation_true'}" actionListener="#{managedConges.validEtapeOrdreConge(etapeM,false)}" style="float: left;margin-top: -3px"/>                        
                                <h:outputText value=" #{lab.LC_PFA_A} " rendered="#{!etapeM.etapeValid and etapeM.motif ne null}" title="#{lab.LC_PFA_annuler_pour} : #{etapeM.motif}" style="position: relative;left: -10px; top: 5px; font-size: 0.7em; color: #FFF; background: red; border-radius: 5px;"/>
                            </ui:repeat> 
                            <h:panelGroup rendered="#{(conges.etapesValidations.size() lt 1) and conges.idConge gt 0}">
                                <p:commandLink value="#{(conges.statut == constantes.STATUT_DOC_VALIDE)?lab.L_valide:lab.L_valider}" process="@this"  
                                               disabled="#{!(conges.statut == constantes.STATUT_DOC_ATTENTE)}" styleClass="#{(conges.statut == constantes.STATUT_DOC_VALIDE)?'statut_valide':'etat_formation_true'}"                                                           
                                               actionListener="#{managedConges.valideConges(null, null)}" update=":form_body_conge:table_listConge @this form_main_conge"/>
                                <p:commandLink value="#{lab.L_en_attente}"  process="@this"  
                                               disabled="#{(conges.statut == constantes.STATUT_DOC_ATTENTE)}" styleClass="#{(conges.statut == constantes.STATUT_DOC_ATTENTE)?'statut_valide':'etat_formation_true'}"                                                           
                                               actionListener="#{managedConges.annulerOrdreConge()}" update=":form_body_conge:table_listConge @this form_main_conge"/>
                            </h:panelGroup>  
                            <p:commandButton value="#{lab.L_suspendre}" type="button" styleClass="#{(conges.statut=='S')?'statu_valide':'etat_formation_true'}"
                                             onclick="dlgSuspenConge.show()" rendered="#{conges.statut=='V'}"
                                             update="etapes_valide_conges" />
                            <!--<p:confirm header="Suspendre l'ordre de mission!"  message="Voulez-vous vraiment annuler cet ordre de mission?" />-->
                            <p:commandLink value="#{(conges.statut=='A')?'Annulé':'Annuler'}" styleClass="#{(conges.statut=='A')?'statu_valide':'etat_formation_true'}"
                                           onclick="dlgCancelValidC_.show()" type="button" rendered="#{(conges.etapesValidations.size() gt 0) or (conges.statut=='S')}"
                                           >
                                <!--<p:confirm header="Annuler l'ordre de mission!"  message="Voulez-vous vraiment annuler cet ordre de mission?" />-->
                            </p:commandLink>                       
                            <p:commandLink value="#{(conges.statut=='C')?lab.LRH_PM_clorur:lab.LRH_PM_cloturer}" styleClass="#{(conges.statut=='C')?'statu_valide':'etat_formation_true'}"
                                           actionListener="#{managedConges.cloturerConge()}" rendered="#{(conges.etapesValidations.size() gt 0 or conges.statut!='C') and conges.idConge gt 0}"
                                           update="etapes_valide_conges">
                                <!--<p:confirm header="Clôturer l'ordre de mission!"  message="Voulez-vous Clôturer cet ordre de mission" />-->
                            </p:commandLink>  

                        </h:panelGroup>                         
                    </p:outputPanel>                            
                    <h:panelGrid columns="1" style="width: 100%; background: #{(conges.statut=='C' or conges.statut=='V')?'#ccffcc':'#FFF'}; margin: auto;" cellpadding="0" cellspacing="0"
                                 id="form_main_conge" styleClass="yvs_table">                                 
                        <h:panelGroup  style="width: 100%; background: #e0f3fa">                            
                            <div style="width: 100%; float: left;font-size: 0.9em; font-style: italic; color: #333;">
                                <p:selectBooleanCheckbox itemLabel="#{lab.LRH_PCP_pour_moi_mm}" value="false" style="margin-right: 70%"
                                                         valueChangeListener="#{managedConges.findEmployeByUser}">
                                    <p:ajax event="valueChange" update="chEmploye-conge" />
                                </p:selectBooleanCheckbox> 
                                <span>#{lab.LRH_PE_exercice}  </span>
                                <h:selectOneMenu value="#{managedConges.idExoSelect}" style="display: inline" title="#{lab.LRH_PB_evaluer_par_rapport_exercice}"
                                                 valueChangeListener="#{managedConges.changeExercice}">
                                    <f:selectItem itemLabel="" itemValue="0" />
                                    <f:selectItems value="#{managedExercice.exercices}" var="iexo_"  itemDisabled="#{(managedConges.limitExercice.dateDebut ne null)?iexo_.dateDebut.before(managedConges.limitExercice.dateDebut):false}"
                                                   itemLabel="#{iexo_.reference}" itemValue="#{iexo_.id }" />
                                    <p:ajax event="valueChange" update="reste_conges" />
                                </h:selectOneMenu>
                            </div>
                        </h:panelGroup>
                        <h:panelGrid columns="6" cellpadding="0" cellspacing="0"
                                     style="margin: auto" styleClass="yvs_nostyle">
                            <span>#{lab.LRH_PCP_nature}</span>
                            <h:selectOneRadio value="#{conges.nature}"
                                              layout="pageDirection" id="selectNaturePerm" >
                                <f:selectItem itemLabel="#{lab.LRH_PCP_permisison}" itemValue="P"/>
                                <f:selectItem itemLabel="#{lab.LRH_PCP_conge}" itemValue="C" />
                                <p:ajax global="false" process="@this" event="valueChange"
                                        update="txt_duree_conge selectTypeDuree hourEndC"/>
                            </h:selectOneRadio>
                            <h:panelGroup  id="selectTypeDuree">
                                <h:selectOneRadio value="#{conges.typeDureePermission}"  styleClass="conge_champDuree"
                                                  layout="pageDirection" disabled="#{conges.nature=='C'}">
                                    <f:selectItem itemLabel="#{lab.LRH_PCP_courte_duree}" itemValue="C" />
                                    <f:selectItem itemLabel="#{lab.LRH_PCP_longue_duree}" itemValue="L" />
                                    <p:ajax global="false" process="@this" event="valueChange" update="txt_duree_conge hourEndC"/>
                                </h:selectOneRadio>                                             
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:selectOneMenu value="#{conges.typeConge}" styleClass="conge_typeConge" 
                                                 style="font-size: 1em;" valueChangeListener="#{managedConges.choixTypeConge}">
                                    <f:selectItems value="#{constantes.GRH_TYPES_CONGE}" var="TYPC" itemLabel="#{managedConges.giveTextTypeConge(TYPC)}" itemValue="#{TYPC}"/>                                                                                      
                                    <p:ajax event="valueChange" update="txt_faire_valoir txt_duree_conge beginDateC dateEndC dateEndR option_copmte_dd"/>
                                </h:selectOneMenu> <br />
                                <p:selectBooleanCheckbox id="option_copmte_dd" value="#{conges.compteJourRepos}"  style="font-size: 0.8em" itemLabel="#{lab.LRH_PCP_compter_jour_repos} ">
                                    <p:ajax event="valueChange" update="txt_faire_valoir txt_duree_conge beginDateC dateEndC dateEndR"
                                            listener="#{managedConges.calculDateRetour()}"/>
                                </p:selectBooleanCheckbox>
                            </h:panelGroup>                            
                            <span>#{lab.LRH_PCP_effet_sur} </span>
                            <h:selectOneMenu value="#{conges.effet}" disabled="#{conges.typeConge=='Annuel'}" id="txt_faire_valoir">                    
                                <f:selectItems value="#{managedConges.listeEffect}" var="eff" itemLabel="#{eff}" itemValue="#{eff}" />
                                <p:ajax process="@this" global="false" />
                            </h:selectOneMenu>                            
                        </h:panelGrid>                                
                        <h:panelGrid columns="2" style="width: 100%;" styleClass="yvs_table" cellpadding="0" cellspacing="0">
                            <span>#{lab.LCF_PBP_employe}</span>
                            <h:panelGroup >
                                <h:inputText id="chEmploye-conge" title="#{lab.LRH_PA_text1}" 
                                             value="#{conges.employe.matricule}" style="color: #{conges.employe.error?'#990000':'inherit'}">                                    
                                    <p:ajax event="blur" listener="#{managedConges.findOneEmploye(conges.employe.matricule)}" 
                                            update=":form_body_conge:etapes_valide_conges :form_body_conge:form_main_conge @this" />
                                </h:inputText> &nbsp;
                                <span>#{conges.employe.nom_prenom}</span>
                                <p:commandButton icon="ui-icon-search"  onclick="dlgEmploye.show()"  type="button" style="width: 20px; height: 20px"/>              
                            </h:panelGroup>
                            <span>#{lab.L_libelle} </span>                
                            <h:inputText  value="#{conges.title}" style="width: 50%"/> 
                            <span class="conge_label_dateDebut">#{lab.L_date_debut}</span>
                            <h:panelGroup>
                                <p:calendar navigator="true" styleClass="conge_startDate" value="#{conges.startDate}" id="beginDateC" pattern="dd-MM-yyyy" size="8">
                                    <p:ajax event="dateSelect" listener="#{managedConges.calculDateRetour()}" update="dateEndC hourEndC dateEndR" global="false"/>
                                    <p:ajax event="blur" listener="#{managedConges.calculDateRetour()}" update="dateEndC hourEndC dateEndR" global="false"/>
                                </p:calendar>
                                <span class="conge_label_heure">#{lab.L_a} </span>
                                <pe:timePicker styleClass="conge_startTime" value="#{conges.heureDebut}" id="beginHourC" style="width: 90px" label="#{lab.L_a}" >
                                    <p:ajax global="false" event="blur"/>
                                    <p:ajax global="false" event="timeSelect"/>
                                    <p:ajax global="false" event="valueChange"/>
                                </pe:timePicker> 
                            </h:panelGroup>                                                                                                                                                                          
                            <span class="conge_labelDuree">#{lab.LP_PPG_duree}</span>
                            <p:outputPanel autoUpdate="true">                                
                                <pe:inputNumber id="txt_duree_conge" value="#{conges.dureeAbsence}"  style="width: 50px; text-align: center" 
                                                decimalPlaces="1"  disabled="#{managedConges.isPermissionCD(conges)}">
                                    <p:ajax event="valueChange" global="false" listener="#{managedConges.calculDateRetour()}" update="dateEndC hourEndC dateEndR hourRetouC"  
                                            />
                                </pe:inputNumber>
                                <h:outputText value="#{managedConges.calculDureePermission()}" />
                                <span>(#{(conges.nature=='C' or (conges.nature=='P' and conges.typeDureePermission=='L'))?'Jour(s)':'Heure(s)'})</span>
                            </p:outputPanel>
                            <span >#{lab.L_date_fin}</span>
                            <h:panelGroup id="dateEndC">
                                <p:calendar  value="#{conges.endDate}" pattern="dd-MM-yyyy" 
                                             disabled="true"  size="8"/>
                                <span >#{lab.L_a}  </span>
                                <pe:timePicker  value="#{conges.heureFin}" id="hourEndC"  style="width: 90px"  >
                                    <p:ajax global="false" event="blur"/>
                                    <p:ajax global="false" event="timeSelect"/>
                                    <p:ajax global="false" event="valueChange"/>
                                </pe:timePicker>&nbsp;&nbsp;&nbsp;                                
                                <span>#{lab.LRH_PCP_retour_prevu}</span>
                                <p:calendar  value="#{conges.dateRetourConge}" pattern="dd-MM-yyyy" 
                                             disabled="true" id="dateEndR" size="8"/>                               
                                <pe:timePicker value="#{conges.heureRetourEffectif}"  style="width: 90px" disabled="true" id="hourRetouC"/>
                            </h:panelGroup>
                            <span>#{lab.L_description}</span>
                            <h:inputTextarea rows="5" value="#{conges.description}"  style="width: 99%" id="chp_descriptionCOnge" />
                            <span>#{lab.LRH_PCP_compteur}</span>
                            <h:panelGrid columns="11" id="reste_conges" style="width: 100%;font-size: 0.8em; font-style: italic" styleClass="yvs_nostyle">
                                <h:outputText value="#{lab.LRH_PCP_conge}" />                                
                                <h:outputText value="#{lab.LRH_PCP_du} =#{conges.congePrincipalDu + conges.congeSupp}" style="font-size: 0.9em; font-weight: bold; color: #009999" />
                                <h:outputText value="#{lab.LRH_PCP_pris} =#{conges.congePrincipalPris}" style="font-size: 0.9em; font-weight: bold; color: #009999" />
                                <span>#{lab.LRH_PCP_conge_a} :</span>
                                <h:panelGrid columns="1" styleClass="yvs_nostyle">
                                    <h:outputText value="#{lab.LRH_PCP_principal} =#{conges.congePrincipalDu}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                    <h:outputText value="#{lab.LRH_PCP_majoration} =#{conges.congeSupp}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                </h:panelGrid>
                                <span>#{lab.LRH_PCP_permissions_autorises} </span>
                                <h:panelGrid columns="1" styleClass="yvs_nostyle">
                                    <h:outputText value="#{lab.LRH_PCP_du} =#{conges.dureePermissionAutorise}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                    <h:outputText  value="#{lab.LRH_PCP_restant} =#{conges.dureePermissionAutorise-conges.dureePermissionAutorisePris}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                </h:panelGrid>
                                <span>#{lab.LRH_PCP_permisisons}</span>
                                <h:panelGrid columns="1" styleClass="yvs_nostyle">                                   
                                    <h:outputText title="#{lab.LRH_PCP_permission_longue_duree_journee}" value="LD (J)=#{conges.dureePermPrisSpeciale}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                    <h:outputText title="Permission courte durée en heure" value="CD (H) =#{conges.dureePermCD}" style="font-size: 0.8em; font-weight: bold; color: #009999" />
                                </h:panelGrid>
                            </h:panelGrid>                            
                        </h:panelGrid>
                        <f:facet name="footer" >
                            <div align="right" style="float: right;font-size: 0.6em; font-style: italic; color: #333; font-weight: bold">
                                #{lab.LRH_PM_derniere_modification} <h:outputText value="#{conges.dateSave}" converter="DATETIME" style="color: #003333"/> #{lab.L_par} <span style="color: #003333">#{conges.author}</span>
                            </div>
                        </f:facet>
                    </h:panelGrid>                            
                </div>
                <!-->
                **************LISTE******************
                <-->
                <div class="yvs_list_conges">
                    <p:dataTable value="#{managedConges.listConges}" var="cong" selectionMode="single" rowKey="#{cong.id}"
                                 style="width: 100%; margin: auto;" id="table_listConge" rowIndexVar="line_conge">
                        <p:ajax event="rowSelect" listener="#{managedConges.choixConge}" oncomplete="collapseForm('conges');"
                                update=":form_body_conge:form_main_conge :form_body_conge:etapes_valide_conges :form_body_conge:input_hide_conges"  />
                        <f:facet name="header">
                            <center>
                                <p:commandButton title="#{lab.LRH_PCP_cloturer_conges_effectifs}" value="#{lab.LRH_PM_cloturer}" icon="ui-icon-alert" style="height: 22px" rendered="#{managedConges.displayBtnCloture}"
                                                 actionListener="#{managedConges.cloturerCongeTermine()}"/>
                            </center> 
                        </f:facet>
                        <p:column style="text-align: center" width="30">
                            <f:facet name="header">
                                <p:contextMenu for="chp_id_cg" styleClass="context_menu" event="left click">
                                    <p:menuitem value="#{lab.LRH_PCP_voir_id}" actionListener="#{managedConges.setDisplayId(!managedConges.displayId)}" update="table_listConge"/>
                                </p:contextMenu>
                                <h:outputText value="N°" id="chp_id_cg"/>
                            </f:facet>
                            <h:outputText value="#{(!managedConges.displayId)?line_conge+1:cong.id}" id="chp_id_cg_or_num"/>
                        </p:column>
                        <p:column headerText="Reference" width="100" styleClass="statutMiss_#{cong.statut}">
                            <span>#{cong.referenceConge}</span>
                        </p:column>
                        <p:column width="50" styleClass="statutMiss_#{cong.statut}" headerText="#{lab.LDB_PD_matricule}">                            
                            <h:outputText value="#{cong.employe.matricule}" style="font-weight: bold"/>    
                        </p:column>
                        <p:column headerText="#{lab.L_nom_prenom}" width="250" styleClass="statutMiss_#{cong.statut}">
                            <h:outputText value="#{cong.employe.nom} #{cong.employe.prenom}"/>
                        </p:column>                        
                        <p:column headerText="#{lab.LRH_PCP_effet}" width="100" styleClass="statutMiss_#{cong.statut}">
                            <h:outputText value="#{cong.effet}"/>
                        </p:column>                        
                        <p:column headerText="#{lab.LRH_PPT_periode}" width="200" styleClass="statutMiss_#{cong.statut}">
                            <h:panelGroup rendered="#{(cong.nature=='C' or (cong.nature=='P' and cong.dureePermission=='L'))}"
                                          style="font-size: 0.9em">
                                <h:outputText value="#{constantes.buildDateTime(cong.dateDebut, cong.heureDebut)}" converter="DATET" />
                                <span> #{lab.L_au} </span>
                                <h:outputText value="#{constantes.buildDateTime(cong.dateFin, cong.heureFin)}" converter="DATET" />                                                               
                                <span style="float: right; margin-right: 0.5%">(#{cong.duree} Jours)</span>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{cong.nature=='P' and cong.dureePermission=='C'}">
                                <h:outputText value="#{cong.dateDebut}" converter="DATE" />       
                                (<h:outputText value="#{cong.heureDebut}" converter="TIME" />       
                                <span> #{lab.L_a} </span>
                                <h:outputText value="#{cong.heureFin}" converter="TIME"/>)                                
                            </h:panelGroup>
                        </p:column>
                        <p:column headerText="#{lab.LRH_PCP_nature}"  width="80" styleClass="statutMiss_#{cong.statut}">
                            <h:outputText value="#{(cong.nature=='C')?'Congé':''} #{(cong.nature=='C')?cong.typeConge:'Permission'}" />
                            <h:outputText value=" (#{cong.dureePermission})" rendered="#{(cong.nature!='C')}"/>
                        </p:column>                                               
                        <p:column headerText="#{lab.LRH_PCP_retour_le}" width="100" styleClass="statutMiss_#{cong.statut}" style="text-align: center">
                            <h:outputText value="#{cong.dateRetour}" converter="DATE"/>
                        </p:column>
                        <p:column headerText="#{lab.LRH_PM_etapes}"  width="60" styleClass="statutMiss_#{cong.statut}" style="text-align: center">
                            <h:outputText value="#{cong.etapeValide} / #{cong.etapeTotal}" />
                        </p:column>
                        <p:column headerText=""  width="25" styleClass="statutMiss_#{item2.statutMission}" style="font-size: 0.8em; text-align: center">
                            <f:facet name="header">
                                <p:contextMenu for="conges_buton_option_" event="left click"  styleClass="context_menu">                                            
                                    <p:menuitem value="Correction des numeros" icon="ui-icon-gear" global="false" onclick="dlgCorrectionNumero.show()"/>
                                </p:contextMenu>
                                <p:commandButton icon="ui-icon-gear" style="width: 21px; height: 21px;" id="conges_buton_option_" type="button"/> 
                            </f:facet>
                            <p:contextMenu for="conges_buton_option" event="left click" style="font-size: 0.8em" styleClass="context_menu">                                
                                <p:menuitem value="#{lab.L_supprimer}" icon="ui-icon-trash" title="#{lab.LRH_PJF_supprimer_conge}"  
                                            actionListener="#{managedConges.openCongeToDel(cong)}" oncomplete="collapseForm('conges');" 
                                            update=":form_body_conge:form_main_conge :form_body_conge:etapes_valide_conges"/>
                            </p:contextMenu>                           
                            <p:commandButton icon="ui-icon-gear" style="width: 22px; height: 22px" id="conges_buton_option" type="button"/>                            
                        </p:column>
                    </p:dataTable> 
                    <p:outputPanel autoUpdate="true" style="float: right" layout="block">
                        <p:commandButton actionListener="#{managedConges.navigueInConge(false)}" update="table_listConge" icon="ui-icon-circle-triangle-w" disabled="#{managedConges.paginator.disPrev}"/>
                        <p:outputPanel >
                            <p:inplace label="#{managedConges.paginator.currentPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold">
                                <pe:inputNumber value="#{managedConges.paginator.gotoPage}" style="width: 30px;text-align: center" decimalPlaces="0">
                                    <p:ajax event="blur" listener="#{managedConges.gotoPagePaginator()}" update="table_listConge"/>
                                </pe:inputNumber>
                            </p:inplace><p:outputLabel value="/#{managedConges.paginator.nbPage}" style="margin-top: 15px; font-size: 0.8em; font-weight: bold" />
                        </p:outputPanel>
                        <p:commandButton actionListener="#{managedConges.navigueInConge(true)}" update="table_listConge" icon="ui-icon-circle-triangle-e" disabled="#{managedConges.paginator.disNext}"/>
                        <p:selectOneMenu value="#{managedConges.imax}" label="#{lab.L_nombre_max_resultat}" valueChangeListener="#{managedConges.changeMaxResult}" style="float: right; font-size: 0.9em;margin-top: 3px;min-width: 50px" >
                            <f:selectItems value="#{managedConges.paginations}"/>
                            <p:ajax event="valueChange" update="table_listConge"/>
                        </p:selectOneMenu>
                    </p:outputPanel> 
                </div>
                <!-->
                    **************CALENDRIER******************
                 <-->
                <div class="yvs_grid_conges">     
                    <div style="width: 99%">
                        <p:outputPanel  id="conge-cal">
                            <p:schedule widgetVar="JF" id="schedul-conge"  
                                        value="#{managedConges.eventModel}"  timeFormat="" 
                                        locale="fr"  aspectRatio="2.5" timeZone="GMT+1" resizable="true" >
                                <p:ajax event="dateSelect" listener="#{managedConges.onDateSelect}" oncomplete="collapseForm('conges')" 
                                        update=":form_body_conge:form_main_conge"/>                    
                                <p:ajax event="eventSelect" listener="#{managedConges.onEventSelect}"  oncomplete="collapseForm('conges')"/>
                                <p:ajax event="eventMove" listener="#{managedConges.onEventMove}"  />
                                <p:ajax event="eventResize" listener="#{managedConges.onEventResize}"  />
                            </p:schedule> 
                        </p:outputPanel>
                    </div>
                </div>   
            </div>
        </h:form>
        <script type="text/javascript">
            PrimeFaces.locales['fr'] = {
                closeText: 'kapat',
                prevText: 'Prec',
                nextText: 'Svt',
                currentText: 'Aujourd\'hui',
                monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet',
                    'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
                monthNamesShort: ['Janv', 'Fevr', 'Mars', 'Av', 'Mai', 'Juin', 'Juillet',
                    'Au', 'Sep', 'Oct', 'Nov', 'Dec'], dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
                dayNamesShort: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
                dayNamesMin: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
                weekHeader: 'Week',
                firstDay: 0,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                month: 'Mois', week: 'Week end',
                day: 'Jour',
                allDayText: 'Tous'
            };
        </script>
    </ui:define>
    <ui:define name="zone_search">
        <script type="text/javascript">
            $(document).ready(function() {
                slideZoneSearche();
            });
        </script>
        <h:form prependId="false">
            <h:graphicImage library="img"  name="pointe_.png" style="border: none; position: relative;" width="20" height="20"
                            styleClass="img_slide" title="#{lab.L_cacher}"/>                    
            <div class="zone_find">
                <div class="yvs_form_grid_conges display_auteur" align="right" style="font-style: italic;">
                    <p:outputPanel autoUpdate="true">
                        <span style="float: left">#{lab.L_enregistrer_le} <h:outputText value="#{managedConges.currentConge.dateSave}"  styleClass="valeur" converter="DTL" style="font-weight: bold"/></span> 
                        <span>#{lab.L_modifier_le} <h:outputText value="#{managedConges.currentConge.dateUpdate}"  styleClass="valeur" converter="DTL" style="font-weight: bold"/></span>
                        <span>#{lab.L_par} <h:outputText value="#{managedConges.currentConge.author.users.nomUsers}"  styleClass="valeur" style="font-weight: bold"/></span>
                    </p:outputPanel>
                </div> 
                <h:panelGrid columns="2" style="width: 100%; font-size: 0.8em;" cellpadding="0" cellspacing="0">
                    <h:panelGrid columns="8" style="float: left; font-size: 1.0em" cellpadding="0" cellspacing="0">
                        <h:outputText value="" />
                        <h:outputText value="#{lab.LRH_PCP_param_date}" />
                        <h:outputText value="#{lab.L_debut}" />
                        <h:outputText value="#{lab.L_fin}" />
                        <h:panelGroup>
                            <h:outputText value="#{lab.L_statut}" />
                            <h:selectOneMenu value="#{managedConges.egaliteStatut}" style="float:right;margin-right: 5px;">
                                <f:selectItem itemLabel="#{lab.L_egale}" itemValue="="/>
                                <f:selectItem itemLabel="#{lab.L_different}" itemValue="!="/>
                                <p:ajax event="valueChange" listener="#{managedConges.addParamStatuts()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"/>
                            </h:selectOneMenu> 
                        </h:panelGroup>
                        <h:outputText value="#{lab.LRH_PB_employe}" />
                        <h:outputText value="#{lab.LC_PA_a_faire}" />
                        <h:outputText value="" />
                        <p:commandButton icon="ui-icon-bullet" title="#{lab.LCF_PVC_reset_filtre_recherche}" actionListener="#{managedConges.resetFilterRequete()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"
                                         style="width: 22px; height: 22px" />                                    
                        <h:selectOneMenu value="#{managedConges.attributDate}" style="display: inline;max-height: 50px"
                                         valueChangeListener="#{managedConges.changeAttributDate}" >
                            <f:selectItem itemValue="#{null}" itemLabel="#{lab.LRH_PCP_enlever_date}" />
                            <f:selectItem itemValue="dateDebut" itemLabel="#{lab.L_debut}" />
                            <f:selectItem itemValue="dateFin" itemLabel="#{lab.L_fin}" />
                            <f:selectItem itemValue="#{null}" itemLabel="#{lab.LRH_PCP_enlever_date}" />
                            <p:ajax event="valueChange"  update="cmp_fdateCongeF cmp_fdateCongeD :form_body_conge:table_listConge" oncomplete="collapseList('conges')"  />
                        </h:selectOneMenu>
                        <p:calendar id="cmp_fdateCongeD" value="#{managedConges.dateFind}" pattern="dd-MM-yyyy" size="8" title="#{lab.LRH_PCP_conge_pris_entre_le}" disabled="#{managedConges.attributDate==null}">
                            <p:ajax event="dateSelect" listener="#{managedConges.addParamDate1}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"/>                           
                            <p:ajax event="blur" listener="#{managedConges.addParamDate2()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"/>                           
                        </p:calendar>
                        <p:calendar id="cmp_fdateCongeF" value="#{managedConges.dateFind1}" pattern="dd-MM-yyyy" size="8" title="#{lab.LRH_PCP_et_le}" disabled="#{managedConges.attributDate==null}">
                            <p:ajax event="dateSelect" listener="#{managedConges.addParamDate1}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                            <p:ajax event="blur" listener="#{managedConges.addParamDate2()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                        </p:calendar>                    
                        <h:selectOneMenu value="#{managedConges.filterStatut}" valueChangeListener="#{managedConges.addParamStatut}">
                            <f:selectItem itemValue="#{null}" itemLabel="--Statut..." noSelectionOption="true"/>
                            <f:selectItem itemValue="E" itemLabel="#{lab.LRH_PCP_en_cours_validation}" />
                            <f:selectItem itemValue="S" itemLabel="#{lab.L_suspendu}" />
                            <f:selectItem itemValue="A" itemLabel="#{lab.LCF_PPC_annuler}" />
                            <f:selectItem itemValue="V" itemLabel="#{lab.LCF_PPC_valider}" />  
                            <f:selectItem itemValue="C" itemLabel="#{lab.LRH_PM_clorur}" />
                            <f:selectItem itemLabel="" itemValue="#{null}"/>
                            <f:selectItem itemLabel="#{lab.L_plus}" itemValue="#{'Z'}"/>
                            <p:ajax event="valueChange"   update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                        </h:selectOneMenu>
                        <h:inputText value="#{managedConges.matriculeF}" >
                            <p:ajax event="valueChange" listener="#{managedConges.addParamEmploye(managedConges.matriculeF)}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')" />
                        </h:inputText>
                        <h:selectOneMenu value="#{managedConges.toValideLoad}" style="min-width: 80px">
                            <f:selectItem itemLabel="#{lab.L_oui.toUpperCase()}" itemValue="#{true}"/>
                            <f:selectItem itemLabel="#{lab.L_non.toUpperCase()}" itemValue="#{false}"/>
                            <p:ajax event="valueChange" listener="#{managedConges.addParamToValide()}" update=":form_body_conge:table_listConge" oncomplete="collapseList('conges')"/>
                        </h:selectOneMenu>
                        <p:commandLink style="border: 2px solid black; border-radius: 5px;padding: 2px;font-size: 0.8em" 
                                       onclick="dlgPlusOption.show()" global="false" value="Plus Option"/>
                    </h:panelGrid>              
                    <p:outputPanel autoUpdate="true" style="float: right">                    
                        <p:commandButton value="#{lab.L_exporter}" icon="ui-icon-print"  ajax="false" actionListener="#{managedConges.exportOrdreMission()}"
                                         title="#{lab.LRH_PCP_telecharger_ordre_conge}" disabled="#{conges.statut!='V'}"/>
                    </p:outputPanel>             
                </h:panelGrid>   
            </div>
        </h:form>
    </ui:define>
</ui:composition>
